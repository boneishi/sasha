(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var D4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pf={exports:{}},Qu={},gf={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function c1(){if(wm)return yn;wm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function N(le){return le===null||typeof le!="object"?null:(le=w&&le[w]||le["@@iterator"],typeof le=="function"?le:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,_={};function E(le,M,W){this.props=le,this.context=M,this.refs=_,this.updater=W||b}E.prototype.isReactComponent={},E.prototype.setState=function(le,M){if(typeof le!="object"&&typeof le!="function"&&le!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,le,M,"setState")},E.prototype.forceUpdate=function(le){this.updater.enqueueForceUpdate(this,le,"forceUpdate")};function T(){}T.prototype=E.prototype;function P(le,M,W){this.props=le,this.context=M,this.refs=_,this.updater=W||b}var q=P.prototype=new T;q.constructor=P,I(q,E.prototype),q.isPureReactComponent=!0;var J=Array.isArray,K=Object.prototype.hasOwnProperty,fe={current:null},ne={key:!0,ref:!0,__self:!0,__source:!0};function X(le,M,W){var Q,ue={},ce=null,me=null;if(M!=null)for(Q in M.ref!==void 0&&(me=M.ref),M.key!==void 0&&(ce=""+M.key),M)K.call(M,Q)&&!ne.hasOwnProperty(Q)&&(ue[Q]=M[Q]);var re=arguments.length-2;if(re===1)ue.children=W;else if(1<re){for(var se=Array(re),ye=0;ye<re;ye++)se[ye]=arguments[ye+2];ue.children=se}if(le&&le.defaultProps)for(Q in re=le.defaultProps,re)ue[Q]===void 0&&(ue[Q]=re[Q]);return{$$typeof:t,type:le,key:ce,ref:me,props:ue,_owner:fe.current}}function $(le,M){return{$$typeof:t,type:le.type,key:M,ref:le.ref,props:le.props,_owner:le._owner}}function he(le){return typeof le=="object"&&le!==null&&le.$$typeof===t}function R(le){var M={"=":"=0",":":"=2"};return"$"+le.replace(/[=:]/g,function(W){return M[W]})}var D=/\/+/g;function H(le,M){return typeof le=="object"&&le!==null&&le.key!=null?R(""+le.key):M.toString(36)}function O(le,M,W,Q,ue){var ce=typeof le;(ce==="undefined"||ce==="boolean")&&(le=null);var me=!1;if(le===null)me=!0;else switch(ce){case"string":case"number":me=!0;break;case"object":switch(le.$$typeof){case t:case e:me=!0}}if(me)return me=le,ue=ue(me),le=Q===""?"."+H(me,0):Q,J(ue)?(W="",le!=null&&(W=le.replace(D,"$&/")+"/"),O(ue,M,W,"",function(ye){return ye})):ue!=null&&(he(ue)&&(ue=$(ue,W+(!ue.key||me&&me.key===ue.key?"":(""+ue.key).replace(D,"$&/")+"/")+le)),M.push(ue)),1;if(me=0,Q=Q===""?".":Q+":",J(le))for(var re=0;re<le.length;re++){ce=le[re];var se=Q+H(ce,re);me+=O(ce,M,W,se,ue)}else if(se=N(le),typeof se=="function")for(le=se.call(le),re=0;!(ce=le.next()).done;)ce=ce.value,se=Q+H(ce,re++),me+=O(ce,M,W,se,ue);else if(ce==="object")throw M=String(le),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return me}function ge(le,M,W){if(le==null)return le;var Q=[],ue=0;return O(le,Q,"","",function(ce){return M.call(W,ce,ue++)}),Q}function xe(le){if(le._status===-1){var M=le._result;M=M(),M.then(function(W){(le._status===0||le._status===-1)&&(le._status=1,le._result=W)},function(W){(le._status===0||le._status===-1)&&(le._status=2,le._result=W)}),le._status===-1&&(le._status=0,le._result=M)}if(le._status===1)return le._result.default;throw le._result}var ie={current:null},Y={transition:null},ve={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:Y,ReactCurrentOwner:fe};function we(){throw Error("act(...) is not supported in production builds of React.")}return yn.Children={map:ge,forEach:function(le,M,W){ge(le,function(){M.apply(this,arguments)},W)},count:function(le){var M=0;return ge(le,function(){M++}),M},toArray:function(le){return ge(le,function(M){return M})||[]},only:function(le){if(!he(le))throw Error("React.Children.only expected to receive a single React element child.");return le}},yn.Component=E,yn.Fragment=n,yn.Profiler=o,yn.PureComponent=P,yn.StrictMode=r,yn.Suspense=m,yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,yn.act=we,yn.cloneElement=function(le,M,W){if(le==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+le+".");var Q=I({},le.props),ue=le.key,ce=le.ref,me=le._owner;if(M!=null){if(M.ref!==void 0&&(ce=M.ref,me=fe.current),M.key!==void 0&&(ue=""+M.key),le.type&&le.type.defaultProps)var re=le.type.defaultProps;for(se in M)K.call(M,se)&&!ne.hasOwnProperty(se)&&(Q[se]=M[se]===void 0&&re!==void 0?re[se]:M[se])}var se=arguments.length-2;if(se===1)Q.children=W;else if(1<se){re=Array(se);for(var ye=0;ye<se;ye++)re[ye]=arguments[ye+2];Q.children=re}return{$$typeof:t,type:le.type,key:ue,ref:ce,props:Q,_owner:me}},yn.createContext=function(le){return le={$$typeof:u,_currentValue:le,_currentValue2:le,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},le.Provider={$$typeof:l,_context:le},le.Consumer=le},yn.createElement=X,yn.createFactory=function(le){var M=X.bind(null,le);return M.type=le,M},yn.createRef=function(){return{current:null}},yn.forwardRef=function(le){return{$$typeof:f,render:le}},yn.isValidElement=he,yn.lazy=function(le){return{$$typeof:v,_payload:{_status:-1,_result:le},_init:xe}},yn.memo=function(le,M){return{$$typeof:p,type:le,compare:M===void 0?null:M}},yn.startTransition=function(le){var M=Y.transition;Y.transition={};try{le()}finally{Y.transition=M}},yn.unstable_act=we,yn.useCallback=function(le,M){return ie.current.useCallback(le,M)},yn.useContext=function(le){return ie.current.useContext(le)},yn.useDebugValue=function(){},yn.useDeferredValue=function(le){return ie.current.useDeferredValue(le)},yn.useEffect=function(le,M){return ie.current.useEffect(le,M)},yn.useId=function(){return ie.current.useId()},yn.useImperativeHandle=function(le,M,W){return ie.current.useImperativeHandle(le,M,W)},yn.useInsertionEffect=function(le,M){return ie.current.useInsertionEffect(le,M)},yn.useLayoutEffect=function(le,M){return ie.current.useLayoutEffect(le,M)},yn.useMemo=function(le,M){return ie.current.useMemo(le,M)},yn.useReducer=function(le,M,W){return ie.current.useReducer(le,M,W)},yn.useRef=function(le){return ie.current.useRef(le)},yn.useState=function(le){return ie.current.useState(le)},yn.useSyncExternalStore=function(le,M,W){return ie.current.useSyncExternalStore(le,M,W)},yn.useTransition=function(){return ie.current.useTransition()},yn.version="18.3.1",yn}var bm;function sh(){return bm||(bm=1,gf.exports=c1()),gf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function d1(){if(Nm)return Qu;Nm=1;var t=sh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(f,m,p){var v,w={},N=null,b=null;p!==void 0&&(N=""+p),m.key!==void 0&&(N=""+m.key),m.ref!==void 0&&(b=m.ref);for(v in m)r.call(m,v)&&!l.hasOwnProperty(v)&&(w[v]=m[v]);if(f&&f.defaultProps)for(v in m=f.defaultProps,m)w[v]===void 0&&(w[v]=m[v]);return{$$typeof:e,type:f,key:N,ref:b,props:w,_owner:o.current}}return Qu.Fragment=n,Qu.jsx=u,Qu.jsxs=u,Qu}var Sm;function f1(){return Sm||(Sm=1,pf.exports=d1()),pf.exports}var s=f1(),qc={},vf={exports:{}},fo={},xf={exports:{}},yf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function h1(){return Cm||(Cm=1,(function(t){function e(Y,ve){var we=Y.length;Y.push(ve);e:for(;0<we;){var le=we-1>>>1,M=Y[le];if(0<o(M,ve))Y[le]=ve,Y[we]=M,we=le;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ve=Y[0],we=Y.pop();if(we!==ve){Y[0]=we;e:for(var le=0,M=Y.length,W=M>>>1;le<W;){var Q=2*(le+1)-1,ue=Y[Q],ce=Q+1,me=Y[ce];if(0>o(ue,we))ce<M&&0>o(me,ue)?(Y[le]=me,Y[ce]=we,le=ce):(Y[le]=ue,Y[Q]=we,le=Q);else if(ce<M&&0>o(me,we))Y[le]=me,Y[ce]=we,le=ce;else break e}}return ve}function o(Y,ve){var we=Y.sortIndex-ve.sortIndex;return we!==0?we:Y.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var m=[],p=[],v=1,w=null,N=3,b=!1,I=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(Y){for(var ve=n(p);ve!==null;){if(ve.callback===null)r(p);else if(ve.startTime<=Y)r(p),ve.sortIndex=ve.expirationTime,e(m,ve);else break;ve=n(p)}}function J(Y){if(_=!1,q(Y),!I)if(n(m)!==null)I=!0,xe(K);else{var ve=n(p);ve!==null&&ie(J,ve.startTime-Y)}}function K(Y,ve){I=!1,_&&(_=!1,T(X),X=-1),b=!0;var we=N;try{for(q(ve),w=n(m);w!==null&&(!(w.expirationTime>ve)||Y&&!R());){var le=w.callback;if(typeof le=="function"){w.callback=null,N=w.priorityLevel;var M=le(w.expirationTime<=ve);ve=t.unstable_now(),typeof M=="function"?w.callback=M:w===n(m)&&r(m),q(ve)}else r(m);w=n(m)}if(w!==null)var W=!0;else{var Q=n(p);Q!==null&&ie(J,Q.startTime-ve),W=!1}return W}finally{w=null,N=we,b=!1}}var fe=!1,ne=null,X=-1,$=5,he=-1;function R(){return!(t.unstable_now()-he<$)}function D(){if(ne!==null){var Y=t.unstable_now();he=Y;var ve=!0;try{ve=ne(!0,Y)}finally{ve?H():(fe=!1,ne=null)}}else fe=!1}var H;if(typeof P=="function")H=function(){P(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ge=O.port2;O.port1.onmessage=D,H=function(){ge.postMessage(null)}}else H=function(){E(D,0)};function xe(Y){ne=Y,fe||(fe=!0,H())}function ie(Y,ve){X=E(function(){Y(t.unstable_now())},ve)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){I||b||(I=!0,xe(K))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var ve=3;break;default:ve=N}var we=N;N=ve;try{return Y()}finally{N=we}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,ve){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var we=N;N=Y;try{return ve()}finally{N=we}},t.unstable_scheduleCallback=function(Y,ve,we){var le=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?le+we:le):we=le,Y){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=we+M,Y={id:v++,callback:ve,priorityLevel:Y,startTime:we,expirationTime:M,sortIndex:-1},we>le?(Y.sortIndex=we,e(p,Y),n(m)===null&&Y===n(p)&&(_?(T(X),X=-1):_=!0,ie(J,we-le))):(Y.sortIndex=M,e(m,Y),I||b||(I=!0,xe(K))),Y},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(Y){var ve=N;return function(){var we=N;N=ve;try{return Y.apply(this,arguments)}finally{N=we}}}})(yf)),yf}var km;function m1(){return km||(km=1,xf.exports=h1()),xf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function p1(){if(Tm)return fo;Tm=1;var t=sh(),e=m1();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,h=1;h<arguments.length;h++)a+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function l(i,a){u(i,a),u(i+"Capture",a)}function u(i,a){for(o[i]=a,i=0;i<a.length;i++)r.add(a[i])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},w={};function N(i){return m.call(w,i)?!0:m.call(v,i)?!1:p.test(i)?w[i]=!0:(v[i]=!0,!1)}function b(i,a,h,x){if(h!==null&&h.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return x?!1:h!==null?!h.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function I(i,a,h,x){if(a===null||typeof a>"u"||b(i,a,h,x))return!0;if(x)return!1;if(h!==null)switch(h.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function _(i,a,h,x,C,A,U){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=x,this.attributeNamespace=C,this.mustUseProperty=h,this.propertyName=i,this.type=a,this.sanitizeURL=A,this.removeEmptyString=U}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){E[i]=new _(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];E[a]=new _(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){E[i]=new _(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){E[i]=new _(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){E[i]=new _(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){E[i]=new _(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){E[i]=new _(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){E[i]=new _(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){E[i]=new _(i,5,!1,i.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function P(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(T,P);E[a]=new _(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(T,P);E[a]=new _(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(T,P);E[a]=new _(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){E[i]=new _(i,1,!1,i.toLowerCase(),null,!1,!1)}),E.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){E[i]=new _(i,1,!1,i.toLowerCase(),null,!0,!0)});function q(i,a,h,x){var C=E.hasOwnProperty(a)?E[a]:null;(C!==null?C.type!==0:x||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,h,C,x)&&(h=null),x||C===null?N(a)&&(h===null?i.removeAttribute(a):i.setAttribute(a,""+h)):C.mustUseProperty?i[C.propertyName]=h===null?C.type===3?!1:"":h:(a=C.attributeName,x=C.attributeNamespace,h===null?i.removeAttribute(a):(C=C.type,h=C===3||C===4&&h===!0?"":""+h,x?i.setAttributeNS(x,a,h):i.setAttribute(a,h))))}var J=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),fe=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),he=Symbol.for("react.provider"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ve(i){return i===null||typeof i!="object"?null:(i=Y&&i[Y]||i["@@iterator"],typeof i=="function"?i:null)}var we=Object.assign,le;function M(i){if(le===void 0)try{throw Error()}catch(h){var a=h.stack.trim().match(/\n( *(at )?)/);le=a&&a[1]||""}return`
`+le+i}var W=!1;function Q(i,a){if(!i||W)return"";W=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ze){var x=ze}Reflect.construct(i,[],a)}else{try{a.call()}catch(ze){x=ze}i.call(a.prototype)}else{try{throw Error()}catch(ze){x=ze}i()}}catch(ze){if(ze&&x&&typeof ze.stack=="string"){for(var C=ze.stack.split(`
`),A=x.stack.split(`
`),U=C.length-1,de=A.length-1;1<=U&&0<=de&&C[U]!==A[de];)de--;for(;1<=U&&0<=de;U--,de--)if(C[U]!==A[de]){if(U!==1||de!==1)do if(U--,de--,0>de||C[U]!==A[de]){var Se=`
`+C[U].replace(" at new "," at ");return i.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",i.displayName)),Se}while(1<=U&&0<=de);break}}}finally{W=!1,Error.prepareStackTrace=h}return(i=i?i.displayName||i.name:"")?M(i):""}function ue(i){switch(i.tag){case 5:return M(i.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return i=Q(i.type,!1),i;case 11:return i=Q(i.type.render,!1),i;case 1:return i=Q(i.type,!0),i;default:return""}}function ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ne:return"Fragment";case fe:return"Portal";case $:return"Profiler";case X:return"StrictMode";case H:return"Suspense";case O:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case R:return(i.displayName||"Context")+".Consumer";case he:return(i._context.displayName||"Context")+".Provider";case D:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ge:return a=i.displayName||null,a!==null?a:ce(i.type)||"Memo";case xe:a=i._payload,i=i._init;try{return ce(i(a))}catch{}}return null}function me(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(a);case 8:return a===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function re(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function se(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ye(i){var a=se(i)?"checked":"value",h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),x=""+i[a];if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var C=h.get,A=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return C.call(this)},set:function(U){x=""+U,A.call(this,U)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return x},setValue:function(U){x=""+U},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Be(i){i._valueTracker||(i._valueTracker=ye(i))}function Ge(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var h=a.getValue(),x="";return i&&(x=se(i)?i.checked?"true":"false":i.value),i=x,i!==h?(a.setValue(i),!0):!1}function pe(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ze(i,a){var h=a.checked;return we({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??i._wrapperState.initialChecked})}function Le(i,a){var h=a.defaultValue==null?"":a.defaultValue,x=a.checked!=null?a.checked:a.defaultChecked;h=re(a.value!=null?a.value:h),i._wrapperState={initialChecked:x,initialValue:h,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function te(i,a){a=a.checked,a!=null&&q(i,"checked",a,!1)}function gt(i,a){te(i,a);var h=re(a.value),x=a.type;if(h!=null)x==="number"?(h===0&&i.value===""||i.value!=h)&&(i.value=""+h):i.value!==""+h&&(i.value=""+h);else if(x==="submit"||x==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?qe(i,a.type,h):a.hasOwnProperty("defaultValue")&&qe(i,a.type,re(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function et(i,a,h){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var x=a.type;if(!(x!=="submit"&&x!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,h||a===i.value||(i.value=a),i.defaultValue=a}h=i.name,h!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,h!==""&&(i.name=h)}function qe(i,a,h){(a!=="number"||pe(i.ownerDocument)!==i)&&(h==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+h&&(i.defaultValue=""+h))}var at=Array.isArray;function nt(i,a,h,x){if(i=i.options,a){a={};for(var C=0;C<h.length;C++)a["$"+h[C]]=!0;for(h=0;h<i.length;h++)C=a.hasOwnProperty("$"+i[h].value),i[h].selected!==C&&(i[h].selected=C),C&&x&&(i[h].defaultSelected=!0)}else{for(h=""+re(h),a=null,C=0;C<i.length;C++){if(i[C].value===h){i[C].selected=!0,x&&(i[C].defaultSelected=!0);return}a!==null||i[C].disabled||(a=i[C])}a!==null&&(a.selected=!0)}}function He(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return we({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function bt(i,a){var h=a.value;if(h==null){if(h=a.children,a=a.defaultValue,h!=null){if(a!=null)throw Error(n(92));if(at(h)){if(1<h.length)throw Error(n(93));h=h[0]}a=h}a==null&&(a=""),h=a}i._wrapperState={initialValue:re(h)}}function Mt(i,a){var h=re(a.value),x=re(a.defaultValue);h!=null&&(h=""+h,h!==i.value&&(i.value=h),a.defaultValue==null&&i.defaultValue!==h&&(i.defaultValue=h)),x!=null&&(i.defaultValue=""+x)}function At(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function It(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?It(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Te,_e=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,h,x,C){MSApp.execUnsafeLocalFunction(function(){return i(a,h,x,C)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(Te=Te||document.createElement("div"),Te.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Te.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Fe(i,a){if(a){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=a;return}}i.textContent=a}var Ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lt=["Webkit","ms","Moz","O"];Object.keys(Ie).forEach(function(i){lt.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Ie[a]=Ie[i]})});function ee(i,a,h){return a==null||typeof a=="boolean"||a===""?"":h||typeof a!="number"||a===0||Ie.hasOwnProperty(i)&&Ie[i]?(""+a).trim():a+"px"}function Oe(i,a){i=i.style;for(var h in a)if(a.hasOwnProperty(h)){var x=h.indexOf("--")===0,C=ee(h,a[h],x);h==="float"&&(h="cssFloat"),x?i.setProperty(h,C):i[h]=C}}var tt=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pt(i,a){if(a){if(tt[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function ht(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qt=null;function Pn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xt=null,Cn=null,Fn=null;function wn(i){if(i=za(i)){if(typeof Xt!="function")throw Error(n(280));var a=i.stateNode;a&&(a=Tl(a),Xt(i.stateNode,i.type,a))}}function mt(i){Cn?Fn?Fn.push(i):Fn=[i]:Cn=i}function zt(){if(Cn){var i=Cn,a=Fn;if(Fn=Cn=null,wn(i),a)for(i=0;i<a.length;i++)wn(a[i])}}function In(i,a){return i(a)}function sn(){}var gn=!1;function Mn(i,a,h){if(gn)return i(a,h);gn=!0;try{return In(i,a,h)}finally{gn=!1,(Cn!==null||Fn!==null)&&(sn(),zt())}}function Dt(i,a){var h=i.stateNode;if(h===null)return null;var x=Tl(h);if(x===null)return null;h=x[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(i=i.type,x=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!x;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(n(231,a,typeof h));return h}var mi=!1;if(f)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){mi=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{mi=!1}function wr(i,a,h,x,C,A,U,de,Se){var ze=Array.prototype.slice.call(arguments,3);try{a.apply(h,ze)}catch(st){this.onError(st)}}var kn=!1,Kn=null,mn=!1,br=null,xo={onError:function(i){kn=!0,Kn=i}};function ir(i,a,h,x,C,A,U,de,Se){kn=!1,Kn=null,wr.apply(xo,arguments)}function pi(i,a,h,x,C,A,U,de,Se){if(ir.apply(this,arguments),kn){if(kn){var ze=Kn;kn=!1,Kn=null}else throw Error(n(198));mn||(mn=!0,br=ze)}}function Er(i){var a=i,h=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(h=a.return),i=a.return;while(i)}return a.tag===3?h:null}function gi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function fr(i){if(Er(i)!==i)throw Error(n(188))}function Ti(i){var a=i.alternate;if(!a){if(a=Er(i),a===null)throw Error(n(188));return a!==i?null:i}for(var h=i,x=a;;){var C=h.return;if(C===null)break;var A=C.alternate;if(A===null){if(x=C.return,x!==null){h=x;continue}break}if(C.child===A.child){for(A=C.child;A;){if(A===h)return fr(C),i;if(A===x)return fr(C),a;A=A.sibling}throw Error(n(188))}if(h.return!==x.return)h=C,x=A;else{for(var U=!1,de=C.child;de;){if(de===h){U=!0,h=C,x=A;break}if(de===x){U=!0,x=C,h=A;break}de=de.sibling}if(!U){for(de=A.child;de;){if(de===h){U=!0,h=A,x=C;break}if(de===x){U=!0,x=A,h=C;break}de=de.sibling}if(!U)throw Error(n(189))}}if(h.alternate!==x)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?i:a}function hr(i){return i=Ti(i),i!==null?Xo(i):null}function Xo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Xo(i);if(a!==null)return a;i=i.sibling}return null}var qi=e.unstable_scheduleCallback,Kr=e.unstable_cancelCallback,_s=e.unstable_shouldYield,Zo=e.unstable_requestPaint,or=e.unstable_now,Ca=e.unstable_getCurrentPriorityLevel,yo=e.unstable_ImmediatePriority,Ks=e.unstable_UserBlockingPriority,Es=e.unstable_NormalPriority,Lr=e.unstable_LowPriority,ka=e.unstable_IdlePriority,es=null,vi=null;function ts(i){if(vi&&typeof vi.onCommitFiberRoot=="function")try{vi.onCommitFiberRoot(es,i,void 0,(i.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:Xs,cr=Math.log,Qs=Math.LN2;function Xs(i){return i>>>=0,i===0?32:31-(cr(i)/Qs|0)|0}var jo=64,wo=4194304;function Do(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qr(i,a){var h=i.pendingLanes;if(h===0)return 0;var x=0,C=i.suspendedLanes,A=i.pingedLanes,U=h&268435455;if(U!==0){var de=U&~C;de!==0?x=Do(de):(A&=U,A!==0&&(x=Do(A)))}else U=h&~C,U!==0?x=Do(U):A!==0&&(x=Do(A));if(x===0)return 0;if(a!==0&&a!==x&&(a&C)===0&&(C=x&-x,A=a&-a,C>=A||C===16&&(A&4194240)!==0))return a;if((x&4)!==0&&(x|=h&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=x;0<a;)h=31-ri(a),C=1<<h,x|=i[h],a&=~C;return x}function ns(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(i,a){for(var h=i.suspendedLanes,x=i.pingedLanes,C=i.expirationTimes,A=i.pendingLanes;0<A;){var U=31-ri(A),de=1<<U,Se=C[U];Se===-1?((de&h)===0||(de&x)!==0)&&(C[U]=ns(de,a)):Se<=a&&(i.expiredLanes|=de),A&=~de}}function oe(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Me(){var i=jo;return jo<<=1,(jo&4194240)===0&&(jo=64),i}function rt(i){for(var a=[],h=0;31>h;h++)a.push(i);return a}function ct(i,a,h){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-ri(a),i[a]=h}function Ct(i,a){var h=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var x=i.eventTimes;for(i=i.expirationTimes;0<h;){var C=31-ri(h),A=1<<C;a[C]=0,x[C]=-1,i[C]=-1,h&=~A}}function Zt(i,a){var h=i.entangledLanes|=a;for(i=i.entanglements;h;){var x=31-ri(h),C=1<<x;C&a|i[x]&a&&(i[x]|=a),h&=~C}}var dt=0;function an(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Jt,An,rn,zn,jn,fn=!1,Wn=[],Ht=null,un=null,Bn=null,Et=new Map,tn=new Map,kr=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bo(i,a){switch(i){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":Et.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":tn.delete(a.pointerId)}}function Oi(i,a,h,x,C,A){return i===null||i.nativeEvent!==A?(i={blockedOn:a,domEventName:h,eventSystemFlags:x,nativeEvent:A,targetContainers:[C]},a!==null&&(a=za(a),a!==null&&An(a)),i):(i.eventSystemFlags|=x,a=i.targetContainers,C!==null&&a.indexOf(C)===-1&&a.push(C),i)}function No(i,a,h,x,C){switch(a){case"focusin":return Ht=Oi(Ht,i,a,h,x,C),!0;case"dragenter":return un=Oi(un,i,a,h,x,C),!0;case"mouseover":return Bn=Oi(Bn,i,a,h,x,C),!0;case"pointerover":var A=C.pointerId;return Et.set(A,Oi(Et.get(A)||null,i,a,h,x,C)),!0;case"gotpointercapture":return A=C.pointerId,tn.set(A,Oi(tn.get(A)||null,i,a,h,x,C)),!0}return!1}function yt(i){var a=Hs(i.target);if(a!==null){var h=Er(a);if(h!==null){if(a=h.tag,a===13){if(a=gi(h),a!==null){i.blockedOn=a,jn(i.priority,function(){rn(h)});return}}else if(a===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function _n(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var h=hn(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(h===null){h=i.nativeEvent;var x=new h.constructor(h.type,h);qt=x,h.target.dispatchEvent(x),qt=null}else return a=za(h),a!==null&&An(a),i.blockedOn=h,!1;a.shift()}return!0}function Un(i,a,h){_n(i)&&h.delete(a)}function vn(){fn=!1,Ht!==null&&_n(Ht)&&(Ht=null),un!==null&&_n(un)&&(un=null),Bn!==null&&_n(Bn)&&(Bn=null),Et.forEach(Un),tn.forEach(Un)}function Ft(i,a){i.blockedOn===a&&(i.blockedOn=null,fn||(fn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vn)))}function sr(i){function a(C){return Ft(C,i)}if(0<Wn.length){Ft(Wn[0],i);for(var h=1;h<Wn.length;h++){var x=Wn[h];x.blockedOn===i&&(x.blockedOn=null)}}for(Ht!==null&&Ft(Ht,i),un!==null&&Ft(un,i),Bn!==null&&Ft(Bn,i),Et.forEach(a),tn.forEach(a),h=0;h<kr.length;h++)x=kr[h],x.blockedOn===i&&(x.blockedOn=null);for(;0<kr.length&&(h=kr[0],h.blockedOn===null);)yt(h),h.blockedOn===null&&kr.shift()}var pn=J.ReactCurrentBatchConfig,$r=!0;function Ii(i,a,h,x){var C=dt,A=pn.transition;pn.transition=null;try{dt=1,ii(i,a,h,x)}finally{dt=C,pn.transition=A}}function So(i,a,h,x){var C=dt,A=pn.transition;pn.transition=null;try{dt=4,ii(i,a,h,x)}finally{dt=C,pn.transition=A}}function ii(i,a,h,x){if($r){var C=hn(i,a,h,x);if(C===null)Sl(i,a,x,Yt,h),bo(i,x);else if(No(C,i,a,h,x))x.stopPropagation();else if(bo(i,x),a&4&&-1<Ot.indexOf(i)){for(;C!==null;){var A=za(C);if(A!==null&&Jt(A),A=hn(i,a,h,x),A===null&&Sl(i,a,x,Yt,h),A===C)break;C=A}C!==null&&x.stopPropagation()}else Sl(i,a,x,null,h)}}var Yt=null;function hn(i,a,h,x){if(Yt=null,i=Pn(x),i=Hs(i),i!==null)if(a=Er(i),a===null)i=null;else if(h=a.tag,h===13){if(i=gi(a),i!==null)return i;i=null}else if(h===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Yt=i,null}function Co(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ca()){case yo:return 1;case Ks:return 4;case Es:case Lr:return 16;case ka:return 536870912;default:return 16}default:return 16}}var Tn=null,Br=null,Tr=null;function zi(){if(Tr)return Tr;var i,a=Br,h=a.length,x,C="value"in Tn?Tn.value:Tn.textContent,A=C.length;for(i=0;i<h&&a[i]===C[i];i++);var U=h-i;for(x=1;x<=U&&a[h-x]===C[A-x];x++);return Tr=C.slice(i,1<x?1-x:void 0)}function cn(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $n(){return!0}function Ls(){return!1}function Ir(i){function a(h,x,C,A,U){this._reactName=h,this._targetInst=C,this.type=x,this.nativeEvent=A,this.target=U,this.currentTarget=null;for(var de in i)i.hasOwnProperty(de)&&(h=i[de],this[de]=h?h(A):A[de]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?$n:Ls,this.isPropagationStopped=Ls,this}return we(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){},isPersistent:$n}),a}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=Ir(Gr),Fo=we({},Gr,{view:0,detail:0}),Ps=Ir(Fo),Wi,Ta,Bo,Ms=we({},Fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nt,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Bo&&(Bo&&i.type==="mousemove"?(Wi=i.screenX-Bo.screenX,Ta=i.screenY-Bo.screenY):Ta=Wi=0,Bo=i),Wi)},movementY:function(i){return"movementY"in i?i.movementY:Ta}}),Ia=Ir(Ms),Ol=we({},Ms,{dataTransfer:0}),Mu=Ir(Ol),Aa=we({},Fo,{relatedTarget:0}),rs=Ir(Aa),ml=we({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),js=Ir(ml),pl=we({},Gr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),S=Ir(pl),F=we({},Gr,{data:0}),ae=Ir(F),be={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},je={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Je={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function it(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Je[i])?!!a[i]:!1}function Nt(){return it}var Ut=we({},Fo,{key:function(i){if(i.key){var a=be[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=cn(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?je[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nt,charCode:function(i){return i.type==="keypress"?cn(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?cn(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),on=Ir(Ut),nn=we({},Ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bn=Ir(nn),mr=we({},Fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nt}),Nr=Ir(mr),Pr=we({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),oi=Ir(Pr),Jr=we({},Ms,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ko=Ir(Jr),$i=[9,13,27,32],to=f&&"CompositionEvent"in window,Ds=null;f&&"documentMode"in document&&(Ds=document.documentMode);var gl=f&&"TextEvent"in window&&!Ds,_a=f&&(!to||Ds&&8<Ds&&11>=Ds),Zs=" ",Ea=!1;function La(i,a){switch(i){case"keyup":return $i.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ea(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Sr=!1;function Pa(i,a){switch(i){case"compositionend":return ea(a);case"keypress":return a.which!==32?null:(Ea=!0,Zs);case"textInput":return i=a.data,i===Zs&&Ea?null:i;default:return null}}function Ma(i,a){if(Sr)return i==="compositionend"||!to&&La(i,a)?(i=zi(),Tr=Br=Tn=null,Sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _a&&a.locale!=="ko"?null:a.data;default:return null}}var ja={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Da(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!ja[i.type]:a==="textarea"}function xi(i,a,h,x){mt(x),a=Gl(a,"onChange"),0<a.length&&(h=new Ro("onChange","change",null,h,x),i.push({event:h,listeners:a}))}var ta=null,is=null;function zl(i){bl(i,0)}function yi(i){var a=ca(i);if(Ge(a))return i}function Ra(i,a){if(i==="change")return a}var vl=!1;if(f){var Fa;if(f){var Uo="oninput"in document;if(!Uo){var Rs=document.createElement("div");Rs.setAttribute("oninput","return;"),Uo=typeof Rs.oninput=="function"}Fa=Uo}else Fa=!1;vl=Fa&&(!document.documentMode||9<document.documentMode)}function wi(){ta&&(ta.detachEvent("onpropertychange",si),is=ta=null)}function si(i){if(i.propertyName==="value"&&yi(is)){var a=[];xi(a,is,i,Pn(i)),Mn(zl,a)}}function Fs(i,a,h){i==="focusin"?(wi(),ta=a,is=h,ta.attachEvent("onpropertychange",si)):i==="focusout"&&wi()}function os(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yi(is)}function ss(i,a){if(i==="click")return yi(a)}function Ba(i,a){if(i==="input"||i==="change")return yi(a)}function as(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Dn=typeof Object.is=="function"?Object.is:as;function ls(i,a){if(Dn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var h=Object.keys(i),x=Object.keys(a);if(h.length!==x.length)return!1;for(x=0;x<h.length;x++){var C=h[x];if(!m.call(a,C)||!Dn(i[C],a[C]))return!1}return!0}function ai(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Gi(i,a){var h=ai(i);i=0;for(var x;h;){if(h.nodeType===3){if(x=i+h.textContent.length,i<=a&&x>=a)return{node:h,offset:a-i};i=x}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ai(h)}}function na(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?na(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function xl(){for(var i=window,a=pe();a instanceof i.HTMLIFrameElement;){try{var h=typeof a.contentWindow.location.href=="string"}catch{h=!1}if(h)i=a.contentWindow;else break;a=pe(i.document)}return a}function ra(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function ia(i){var a=xl(),h=i.focusedElem,x=i.selectionRange;if(a!==h&&h&&h.ownerDocument&&na(h.ownerDocument.documentElement,h)){if(x!==null&&ra(h)){if(a=x.start,i=x.end,i===void 0&&(i=a),"selectionStart"in h)h.selectionStart=a,h.selectionEnd=Math.min(i,h.value.length);else if(i=(a=h.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var C=h.textContent.length,A=Math.min(x.start,C);x=x.end===void 0?A:Math.min(x.end,C),!i.extend&&A>x&&(C=x,x=A,A=C),C=Gi(h,A);var U=Gi(h,x);C&&U&&(i.rangeCount!==1||i.anchorNode!==C.node||i.anchorOffset!==C.offset||i.focusNode!==U.node||i.focusOffset!==U.offset)&&(a=a.createRange(),a.setStart(C.node,C.offset),i.removeAllRanges(),A>x?(i.addRange(a),i.extend(U.node,U.offset)):(a.setEnd(U.node,U.offset),i.addRange(a)))}}for(a=[],i=h;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<a.length;h++)i=a[h],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var oa=f&&"documentMode"in document&&11>=document.documentMode,Ji=null,us=null,Ho=null,cs=!1;function ds(i,a,h){var x=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;cs||Ji==null||Ji!==pe(x)||(x=Ji,"selectionStart"in x&&ra(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Ho&&ls(Ho,x)||(Ho=x,x=Gl(us,"onSelect"),0<x.length&&(a=new Ro("onSelect","select",null,a,h),i.push({event:a,listeners:x}),a.target=Ji)))}function Bs(i,a){var h={};return h[i.toLowerCase()]=a.toLowerCase(),h["Webkit"+i]="webkit"+a,h["Moz"+i]="moz"+a,h}var Zr={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionend:Bs("Transition","TransitionEnd")},Ai={},er={};f&&(er=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Gn(i){if(Ai[i])return Ai[i];if(!Zr[i])return i;var a=Zr[i],h;for(h in a)if(a.hasOwnProperty(h)&&h in er)return Ai[i]=a[h];return i}var Cr=Gn("animationend"),Mr=Gn("animationiteration"),Vo=Gn("animationstart"),Ua=Gn("transitionend"),sa=new Map,yl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qo(i,a){sa.set(i,a),l(a,[i])}for(var Ha=0;Ha<yl.length;Ha++){var bi=yl[Ha],no=bi.toLowerCase(),Wl=bi[0].toUpperCase()+bi.slice(1);qo(no,"on"+Wl)}qo(Cr,"onAnimationEnd"),qo(Mr,"onAnimationIteration"),qo(Vo,"onAnimationStart"),qo("dblclick","onDoubleClick"),qo("focusin","onFocus"),qo("focusout","onBlur"),qo(Ua,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function wl(i,a,h){var x=i.type||"unknown-event";i.currentTarget=h,pi(x,a,void 0,i),i.currentTarget=null}function bl(i,a){a=(a&4)!==0;for(var h=0;h<i.length;h++){var x=i[h],C=x.event;x=x.listeners;e:{var A=void 0;if(a)for(var U=x.length-1;0<=U;U--){var de=x[U],Se=de.instance,ze=de.currentTarget;if(de=de.listener,Se!==A&&C.isPropagationStopped())break e;wl(C,de,ze),A=Se}else for(U=0;U<x.length;U++){if(de=x[U],Se=de.instance,ze=de.currentTarget,de=de.listener,Se!==A&&C.isPropagationStopped())break e;wl(C,de,ze),A=Se}}}if(mn)throw i=br,mn=!1,br=null,i}function tr(i,a){var h=a[Ei];h===void 0&&(h=a[Ei]=new Set);var x=i+"__bubble";h.has(x)||(Nl(a,i,2,!1),h.add(x))}function $l(i,a,h){var x=0;a&&(x|=4),Nl(h,i,x,a)}var Va="_reactListening"+Math.random().toString(36).slice(2);function aa(i){if(!i[Va]){i[Va]=!0,r.forEach(function(h){h!=="selectionchange"&&(lc.has(h)||$l(h,!1,i),$l(h,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Va]||(a[Va]=!0,$l("selectionchange",!1,a))}}function Nl(i,a,h,x){switch(Co(a)){case 1:var C=Ii;break;case 4:C=So;break;default:C=ii}h=C.bind(null,a,h,i),C=void 0,!mi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(C=!0),x?C!==void 0?i.addEventListener(a,h,{capture:!0,passive:C}):i.addEventListener(a,h,!0):C!==void 0?i.addEventListener(a,h,{passive:C}):i.addEventListener(a,h,!1)}function Sl(i,a,h,x,C){var A=x;if((a&1)===0&&(a&2)===0&&x!==null)e:for(;;){if(x===null)return;var U=x.tag;if(U===3||U===4){var de=x.stateNode.containerInfo;if(de===C||de.nodeType===8&&de.parentNode===C)break;if(U===4)for(U=x.return;U!==null;){var Se=U.tag;if((Se===3||Se===4)&&(Se=U.stateNode.containerInfo,Se===C||Se.nodeType===8&&Se.parentNode===C))return;U=U.return}for(;de!==null;){if(U=Hs(de),U===null)return;if(Se=U.tag,Se===5||Se===6){x=A=U;continue e}de=de.parentNode}}x=x.return}Mn(function(){var ze=A,st=Pn(h),ut=[];e:{var ot=sa.get(i);if(ot!==void 0){var Tt=Ro,Lt=i;switch(i){case"keypress":if(cn(h)===0)break e;case"keydown":case"keyup":Tt=on;break;case"focusin":Lt="focus",Tt=rs;break;case"focusout":Lt="blur",Tt=rs;break;case"beforeblur":case"afterblur":Tt=rs;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=Ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=Nr;break;case Cr:case Mr:case Vo:Tt=js;break;case Ua:Tt=oi;break;case"scroll":Tt=Ps;break;case"wheel":Tt=ko;break;case"copy":case"cut":case"paste":Tt=S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=bn}var jt=(a&4)!==0,qr=!jt&&i==="scroll",Ue=jt?ot!==null?ot+"Capture":null:ot;jt=[];for(var Ae=ze,Ve;Ae!==null;){Ve=Ae;var ft=Ve.stateNode;if(Ve.tag===5&&ft!==null&&(Ve=ft,Ue!==null&&(ft=Dt(Ae,Ue),ft!=null&&jt.push(Cl(Ae,ft,Ve)))),qr)break;Ae=Ae.return}0<jt.length&&(ot=new Tt(ot,Lt,null,h,st),ut.push({event:ot,listeners:jt}))}}if((a&7)===0){e:{if(ot=i==="mouseover"||i==="pointerover",Tt=i==="mouseout"||i==="pointerout",ot&&h!==qt&&(Lt=h.relatedTarget||h.fromElement)&&(Hs(Lt)||Lt[li]))break e;if((Tt||ot)&&(ot=st.window===st?st:(ot=st.ownerDocument)?ot.defaultView||ot.parentWindow:window,Tt?(Lt=h.relatedTarget||h.toElement,Tt=ze,Lt=Lt?Hs(Lt):null,Lt!==null&&(qr=Er(Lt),Lt!==qr||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(Tt=null,Lt=ze),Tt!==Lt)){if(jt=Ia,ft="onMouseLeave",Ue="onMouseEnter",Ae="mouse",(i==="pointerout"||i==="pointerover")&&(jt=bn,ft="onPointerLeave",Ue="onPointerEnter",Ae="pointer"),qr=Tt==null?ot:ca(Tt),Ve=Lt==null?ot:ca(Lt),ot=new jt(ft,Ae+"leave",Tt,h,st),ot.target=qr,ot.relatedTarget=Ve,ft=null,Hs(st)===ze&&(jt=new jt(Ue,Ae+"enter",Lt,h,st),jt.target=Ve,jt.relatedTarget=qr,ft=jt),qr=ft,Tt&&Lt)t:{for(jt=Tt,Ue=Lt,Ae=0,Ve=jt;Ve;Ve=la(Ve))Ae++;for(Ve=0,ft=Ue;ft;ft=la(ft))Ve++;for(;0<Ae-Ve;)jt=la(jt),Ae--;for(;0<Ve-Ae;)Ue=la(Ue),Ve--;for(;Ae--;){if(jt===Ue||Ue!==null&&jt===Ue.alternate)break t;jt=la(jt),Ue=la(Ue)}jt=null}else jt=null;Tt!==null&&uc(ut,ot,Tt,jt,!1),Lt!==null&&qr!==null&&uc(ut,qr,Lt,jt,!0)}}e:{if(ot=ze?ca(ze):window,Tt=ot.nodeName&&ot.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&ot.type==="file")var Rt=Ra;else if(Da(ot))if(vl)Rt=Ba;else{Rt=os;var Wt=Fs}else(Tt=ot.nodeName)&&Tt.toLowerCase()==="input"&&(ot.type==="checkbox"||ot.type==="radio")&&(Rt=ss);if(Rt&&(Rt=Rt(i,ze))){xi(ut,Rt,h,st);break e}Wt&&Wt(i,ot,ze),i==="focusout"&&(Wt=ot._wrapperState)&&Wt.controlled&&ot.type==="number"&&qe(ot,"number",ot.value)}switch(Wt=ze?ca(ze):window,i){case"focusin":(Da(Wt)||Wt.contentEditable==="true")&&(Ji=Wt,us=ze,Ho=null);break;case"focusout":Ho=us=Ji=null;break;case"mousedown":cs=!0;break;case"contextmenu":case"mouseup":case"dragend":cs=!1,ds(ut,h,st);break;case"selectionchange":if(oa)break;case"keydown":case"keyup":ds(ut,h,st)}var $t;if(to)e:{switch(i){case"compositionstart":var en="onCompositionStart";break e;case"compositionend":en="onCompositionEnd";break e;case"compositionupdate":en="onCompositionUpdate";break e}en=void 0}else Sr?La(i,h)&&(en="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(en="onCompositionStart");en&&(_a&&h.locale!=="ko"&&(Sr||en!=="onCompositionStart"?en==="onCompositionEnd"&&Sr&&($t=zi()):(Tn=st,Br="value"in Tn?Tn.value:Tn.textContent,Sr=!0)),Wt=Gl(ze,en),0<Wt.length&&(en=new ae(en,i,null,h,st),ut.push({event:en,listeners:Wt}),$t?en.data=$t:($t=ea(h),$t!==null&&(en.data=$t)))),($t=gl?Pa(i,h):Ma(i,h))&&(ze=Gl(ze,"onBeforeInput"),0<ze.length&&(st=new ae("onBeforeInput","beforeinput",null,h,st),ut.push({event:st,listeners:ze}),st.data=$t))}bl(ut,a)})}function Cl(i,a,h){return{instance:i,listener:a,currentTarget:h}}function Gl(i,a){for(var h=a+"Capture",x=[];i!==null;){var C=i,A=C.stateNode;C.tag===5&&A!==null&&(C=A,A=Dt(i,h),A!=null&&x.unshift(Cl(i,A,C)),A=Dt(i,a),A!=null&&x.push(Cl(i,A,C))),i=i.return}return x}function la(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function uc(i,a,h,x,C){for(var A=a._reactName,U=[];h!==null&&h!==x;){var de=h,Se=de.alternate,ze=de.stateNode;if(Se!==null&&Se===x)break;de.tag===5&&ze!==null&&(de=ze,C?(Se=Dt(h,A),Se!=null&&U.unshift(Cl(h,Se,de))):C||(Se=Dt(h,A),Se!=null&&U.push(Cl(h,Se,de)))),h=h.return}U.length!==0&&i.push({event:a,listeners:U})}var Ad=/\r\n?/g,_d=/\u0000|\uFFFD/g;function cc(i){return(typeof i=="string"?i:""+i).replace(Ad,`
`).replace(_d,"")}function Jl(i,a,h){if(a=cc(a),cc(i)!==a&&h)throw Error(n(425))}function qa(){}var kl=null,ua=null;function ju(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Du=typeof setTimeout=="function"?setTimeout:void 0,dc=typeof clearTimeout=="function"?clearTimeout:void 0,fc=typeof Promise=="function"?Promise:void 0,Ed=typeof queueMicrotask=="function"?queueMicrotask:typeof fc<"u"?function(i){return fc.resolve(null).then(i).catch(Ld)}:Du;function Ld(i){setTimeout(function(){throw i})}function Ru(i,a){var h=a,x=0;do{var C=h.nextSibling;if(i.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(x===0){i.removeChild(C),sr(a);return}x--}else h!=="$"&&h!=="$?"&&h!=="$!"||x++;h=C}while(h);sr(a)}function Ni(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function ro(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"){if(a===0)return i;a--}else h==="/$"&&a++}i=i.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Oo="__reactFiber$"+_i,Oa="__reactProps$"+_i,li="__reactContainer$"+_i,Ei="__reactEvents$"+_i,Pd="__reactListeners$"+_i,Md="__reactHandles$"+_i;function Hs(i){var a=i[Oo];if(a)return a;for(var h=i.parentNode;h;){if(a=h[li]||h[Oo]){if(h=a.alternate,a.child!==null||h!==null&&h.child!==null)for(i=ro(i);i!==null;){if(h=i[Oo])return h;i=ro(i)}return a}i=h,h=i.parentNode}return null}function za(i){return i=i[Oo]||i[li],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ca(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Tl(i){return i[Oa]||null}var Fu=[],fs=-1;function To(i){return{current:i}}function Jn(i){0>fs||(i.current=Fu[fs],Fu[fs]=null,fs--)}function Qn(i,a){fs++,Fu[fs]=i.current,i.current=a}var Vs={},ei=To(Vs),Li=To(!1),da=Vs;function Wa(i,a){var h=i.type.contextTypes;if(!h)return Vs;var x=i.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===a)return x.__reactInternalMemoizedMaskedChildContext;var C={},A;for(A in h)C[A]=a[A];return x&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=C),C}function Pi(i){return i=i.childContextTypes,i!=null}function Yl(){Jn(Li),Jn(ei)}function hc(i,a,h){if(ei.current!==Vs)throw Error(n(168));Qn(ei,a),Qn(Li,h)}function Bu(i,a,h){var x=i.stateNode;if(a=a.childContextTypes,typeof x.getChildContext!="function")return h;x=x.getChildContext();for(var C in x)if(!(C in a))throw Error(n(108,me(i)||"Unknown",C));return we({},h,x)}function fa(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vs,da=ei.current,Qn(ei,i),Qn(Li,Li.current),!0}function mc(i,a,h){var x=i.stateNode;if(!x)throw Error(n(169));h?(i=Bu(i,a,da),x.__reactInternalMemoizedMergedChildContext=i,Jn(Li),Jn(ei),Qn(ei,i)):Jn(Li),Qn(Li,h)}var hs=null,Il=!1,g=!1;function y(i){hs===null?hs=[i]:hs.push(i)}function k(i){Il=!0,y(i)}function L(){if(!g&&hs!==null){g=!0;var i=0,a=dt;try{var h=hs;for(dt=1;i<h.length;i++){var x=h[i];do x=x(!0);while(x!==null)}hs=null,Il=!1}catch(C){throw hs!==null&&(hs=hs.slice(i+1)),qi(yo,L),C}finally{dt=a,g=!1}}return null}var j=[],B=0,V=null,z=0,G=[],Z=0,Ne=null,De=1,Re="";function Ee(i,a){j[B++]=z,j[B++]=V,V=i,z=a}function Xe(i,a,h){G[Z++]=De,G[Z++]=Re,G[Z++]=Ne,Ne=i;var x=De;i=Re;var C=32-ri(x)-1;x&=~(1<<C),h+=1;var A=32-ri(a)+C;if(30<A){var U=C-C%5;A=(x&(1<<U)-1).toString(32),x>>=U,C-=U,De=1<<32-ri(a)+C|h<<C|x,Re=A+i}else De=1<<A|h<<C|x,Re=i}function We(i){i.return!==null&&(Ee(i,1),Xe(i,1,0))}function Ce(i){for(;i===V;)V=j[--B],j[B]=null,z=j[--B],j[B]=null;for(;i===Ne;)Ne=G[--Z],G[Z]=null,Re=G[--Z],G[Z]=null,De=G[--Z],G[Z]=null}var ke=null,Ke=null,Ye=!1,Qe=null;function St(i,a){var h=Yo(5,null,null,0);h.elementType="DELETED",h.stateNode=a,h.return=i,a=i.deletions,a===null?(i.deletions=[h],i.flags|=16):a.push(h)}function vt(i,a){switch(i.tag){case 5:var h=i.type;return a=a.nodeType!==1||h.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,ke=i,Ke=Ni(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,ke=i,Ke=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(h=Ne!==null?{id:De,overflow:Re}:null,i.memoizedState={dehydrated:a,treeContext:h,retryLane:1073741824},h=Yo(18,null,null,0),h.stateNode=a,h.return=i,i.child=h,ke=i,Ke=null,!0):!1;default:return!1}}function Vt(i){return(i.mode&1)!==0&&(i.flags&128)===0}function xt(i){if(Ye){var a=Ke;if(a){var h=a;if(!vt(i,a)){if(Vt(i))throw Error(n(418));a=Ni(h.nextSibling);var x=ke;a&&vt(i,a)?St(x,h):(i.flags=i.flags&-4097|2,Ye=!1,ke=i)}}else{if(Vt(i))throw Error(n(418));i.flags=i.flags&-4097|2,Ye=!1,ke=i}}}function En(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ke=i}function Ln(i){if(i!==ke)return!1;if(!Ye)return En(i),Ye=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!ju(i.type,i.memoizedProps)),a&&(a=Ke)){if(Vt(i))throw Sn(),Error(n(418));for(;a;)St(i,a),a=Ni(a.nextSibling)}if(En(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"){if(a===0){Ke=Ni(i.nextSibling);break e}a--}else h!=="$"&&h!=="$!"&&h!=="$?"||a++}i=i.nextSibling}Ke=null}}else Ke=ke?Ni(i.stateNode.nextSibling):null;return!0}function Sn(){for(var i=Ke;i;)i=Ni(i.nextSibling)}function dn(){Ke=ke=null,Ye=!1}function Yn(i){Qe===null?Qe=[i]:Qe.push(i)}var Xn=J.ReactCurrentBatchConfig;function Qt(i,a,h){if(i=h.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var x=h.stateNode}if(!x)throw Error(n(147,i));var C=x,A=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===A?a.ref:(a=function(U){var de=C.refs;U===null?delete de[A]:de[A]=U},a._stringRef=A,a)}if(typeof i!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,i))}return i}function pr(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Si(i){var a=i._init;return a(i._payload)}function Ar(i){function a(Ue,Ae){if(i){var Ve=Ue.deletions;Ve===null?(Ue.deletions=[Ae],Ue.flags|=16):Ve.push(Ae)}}function h(Ue,Ae){if(!i)return null;for(;Ae!==null;)a(Ue,Ae),Ae=Ae.sibling;return null}function x(Ue,Ae){for(Ue=new Map;Ae!==null;)Ae.key!==null?Ue.set(Ae.key,Ae):Ue.set(Ae.index,Ae),Ae=Ae.sibling;return Ue}function C(Ue,Ae){return Ue=rl(Ue,Ae),Ue.index=0,Ue.sibling=null,Ue}function A(Ue,Ae,Ve){return Ue.index=Ve,i?(Ve=Ue.alternate,Ve!==null?(Ve=Ve.index,Ve<Ae?(Ue.flags|=2,Ae):Ve):(Ue.flags|=2,Ae)):(Ue.flags|=1048576,Ae)}function U(Ue){return i&&Ue.alternate===null&&(Ue.flags|=2),Ue}function de(Ue,Ae,Ve,ft){return Ae===null||Ae.tag!==6?(Ae=uf(Ve,Ue.mode,ft),Ae.return=Ue,Ae):(Ae=C(Ae,Ve),Ae.return=Ue,Ae)}function Se(Ue,Ae,Ve,ft){var Rt=Ve.type;return Rt===ne?st(Ue,Ae,Ve.props.children,ft,Ve.key):Ae!==null&&(Ae.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===xe&&Si(Rt)===Ae.type)?(ft=C(Ae,Ve.props),ft.ref=Qt(Ue,Ae,Ve),ft.return=Ue,ft):(ft=jc(Ve.type,Ve.key,Ve.props,null,Ue.mode,ft),ft.ref=Qt(Ue,Ae,Ve),ft.return=Ue,ft)}function ze(Ue,Ae,Ve,ft){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Ve.containerInfo||Ae.stateNode.implementation!==Ve.implementation?(Ae=cf(Ve,Ue.mode,ft),Ae.return=Ue,Ae):(Ae=C(Ae,Ve.children||[]),Ae.return=Ue,Ae)}function st(Ue,Ae,Ve,ft,Rt){return Ae===null||Ae.tag!==7?(Ae=Dl(Ve,Ue.mode,ft,Rt),Ae.return=Ue,Ae):(Ae=C(Ae,Ve),Ae.return=Ue,Ae)}function ut(Ue,Ae,Ve){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=uf(""+Ae,Ue.mode,Ve),Ae.return=Ue,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case K:return Ve=jc(Ae.type,Ae.key,Ae.props,null,Ue.mode,Ve),Ve.ref=Qt(Ue,null,Ae),Ve.return=Ue,Ve;case fe:return Ae=cf(Ae,Ue.mode,Ve),Ae.return=Ue,Ae;case xe:var ft=Ae._init;return ut(Ue,ft(Ae._payload),Ve)}if(at(Ae)||ve(Ae))return Ae=Dl(Ae,Ue.mode,Ve,null),Ae.return=Ue,Ae;pr(Ue,Ae)}return null}function ot(Ue,Ae,Ve,ft){var Rt=Ae!==null?Ae.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Rt!==null?null:de(Ue,Ae,""+Ve,ft);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case K:return Ve.key===Rt?Se(Ue,Ae,Ve,ft):null;case fe:return Ve.key===Rt?ze(Ue,Ae,Ve,ft):null;case xe:return Rt=Ve._init,ot(Ue,Ae,Rt(Ve._payload),ft)}if(at(Ve)||ve(Ve))return Rt!==null?null:st(Ue,Ae,Ve,ft,null);pr(Ue,Ve)}return null}function Tt(Ue,Ae,Ve,ft,Rt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return Ue=Ue.get(Ve)||null,de(Ae,Ue,""+ft,Rt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case K:return Ue=Ue.get(ft.key===null?Ve:ft.key)||null,Se(Ae,Ue,ft,Rt);case fe:return Ue=Ue.get(ft.key===null?Ve:ft.key)||null,ze(Ae,Ue,ft,Rt);case xe:var Wt=ft._init;return Tt(Ue,Ae,Ve,Wt(ft._payload),Rt)}if(at(ft)||ve(ft))return Ue=Ue.get(Ve)||null,st(Ae,Ue,ft,Rt,null);pr(Ae,ft)}return null}function Lt(Ue,Ae,Ve,ft){for(var Rt=null,Wt=null,$t=Ae,en=Ae=0,fi=null;$t!==null&&en<Ve.length;en++){$t.index>en?(fi=$t,$t=null):fi=$t.sibling;var qn=ot(Ue,$t,Ve[en],ft);if(qn===null){$t===null&&($t=fi);break}i&&$t&&qn.alternate===null&&a(Ue,$t),Ae=A(qn,Ae,en),Wt===null?Rt=qn:Wt.sibling=qn,Wt=qn,$t=fi}if(en===Ve.length)return h(Ue,$t),Ye&&Ee(Ue,en),Rt;if($t===null){for(;en<Ve.length;en++)$t=ut(Ue,Ve[en],ft),$t!==null&&(Ae=A($t,Ae,en),Wt===null?Rt=$t:Wt.sibling=$t,Wt=$t);return Ye&&Ee(Ue,en),Rt}for($t=x(Ue,$t);en<Ve.length;en++)fi=Tt($t,Ue,en,Ve[en],ft),fi!==null&&(i&&fi.alternate!==null&&$t.delete(fi.key===null?en:fi.key),Ae=A(fi,Ae,en),Wt===null?Rt=fi:Wt.sibling=fi,Wt=fi);return i&&$t.forEach(function(il){return a(Ue,il)}),Ye&&Ee(Ue,en),Rt}function jt(Ue,Ae,Ve,ft){var Rt=ve(Ve);if(typeof Rt!="function")throw Error(n(150));if(Ve=Rt.call(Ve),Ve==null)throw Error(n(151));for(var Wt=Rt=null,$t=Ae,en=Ae=0,fi=null,qn=Ve.next();$t!==null&&!qn.done;en++,qn=Ve.next()){$t.index>en?(fi=$t,$t=null):fi=$t.sibling;var il=ot(Ue,$t,qn.value,ft);if(il===null){$t===null&&($t=fi);break}i&&$t&&il.alternate===null&&a(Ue,$t),Ae=A(il,Ae,en),Wt===null?Rt=il:Wt.sibling=il,Wt=il,$t=fi}if(qn.done)return h(Ue,$t),Ye&&Ee(Ue,en),Rt;if($t===null){for(;!qn.done;en++,qn=Ve.next())qn=ut(Ue,qn.value,ft),qn!==null&&(Ae=A(qn,Ae,en),Wt===null?Rt=qn:Wt.sibling=qn,Wt=qn);return Ye&&Ee(Ue,en),Rt}for($t=x(Ue,$t);!qn.done;en++,qn=Ve.next())qn=Tt($t,Ue,en,qn.value,ft),qn!==null&&(i&&qn.alternate!==null&&$t.delete(qn.key===null?en:qn.key),Ae=A(qn,Ae,en),Wt===null?Rt=qn:Wt.sibling=qn,Wt=qn);return i&&$t.forEach(function(u1){return a(Ue,u1)}),Ye&&Ee(Ue,en),Rt}function qr(Ue,Ae,Ve,ft){if(typeof Ve=="object"&&Ve!==null&&Ve.type===ne&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case K:e:{for(var Rt=Ve.key,Wt=Ae;Wt!==null;){if(Wt.key===Rt){if(Rt=Ve.type,Rt===ne){if(Wt.tag===7){h(Ue,Wt.sibling),Ae=C(Wt,Ve.props.children),Ae.return=Ue,Ue=Ae;break e}}else if(Wt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===xe&&Si(Rt)===Wt.type){h(Ue,Wt.sibling),Ae=C(Wt,Ve.props),Ae.ref=Qt(Ue,Wt,Ve),Ae.return=Ue,Ue=Ae;break e}h(Ue,Wt);break}else a(Ue,Wt);Wt=Wt.sibling}Ve.type===ne?(Ae=Dl(Ve.props.children,Ue.mode,ft,Ve.key),Ae.return=Ue,Ue=Ae):(ft=jc(Ve.type,Ve.key,Ve.props,null,Ue.mode,ft),ft.ref=Qt(Ue,Ae,Ve),ft.return=Ue,Ue=ft)}return U(Ue);case fe:e:{for(Wt=Ve.key;Ae!==null;){if(Ae.key===Wt)if(Ae.tag===4&&Ae.stateNode.containerInfo===Ve.containerInfo&&Ae.stateNode.implementation===Ve.implementation){h(Ue,Ae.sibling),Ae=C(Ae,Ve.children||[]),Ae.return=Ue,Ue=Ae;break e}else{h(Ue,Ae);break}else a(Ue,Ae);Ae=Ae.sibling}Ae=cf(Ve,Ue.mode,ft),Ae.return=Ue,Ue=Ae}return U(Ue);case xe:return Wt=Ve._init,qr(Ue,Ae,Wt(Ve._payload),ft)}if(at(Ve))return Lt(Ue,Ae,Ve,ft);if(ve(Ve))return jt(Ue,Ae,Ve,ft);pr(Ue,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"?(Ve=""+Ve,Ae!==null&&Ae.tag===6?(h(Ue,Ae.sibling),Ae=C(Ae,Ve),Ae.return=Ue,Ue=Ae):(h(Ue,Ae),Ae=uf(Ve,Ue.mode,ft),Ae.return=Ue,Ue=Ae),U(Ue)):h(Ue,Ae)}return qr}var Ur=Ar(!0),Hn=Ar(!1),ui=To(null),ci=null,gr=null,Hr=null;function ti(){Hr=gr=ci=null}function Mi(i){var a=ui.current;Jn(ui),i._currentValue=a}function io(i,a,h){for(;i!==null;){var x=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,x!==null&&(x.childLanes|=a)):x!==null&&(x.childLanes&a)!==a&&(x.childLanes|=a),i===h)break;i=i.return}}function vr(i,a){ci=i,Hr=gr=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(lo=!0),i.firstContext=null)}function jr(i){var a=i._currentValue;if(Hr!==i)if(i={context:i,memoizedValue:a,next:null},gr===null){if(ci===null)throw Error(n(308));gr=i,ci.dependencies={lanes:0,firstContext:i}}else gr=gr.next=i;return a}var Yi=null;function qs(i){Yi===null?Yi=[i]:Yi.push(i)}function ms(i,a,h,x){var C=a.interleaved;return C===null?(h.next=h,qs(a)):(h.next=C.next,C.next=h),a.interleaved=h,Vn(i,x)}function Vn(i,a){i.lanes|=a;var h=i.alternate;for(h!==null&&(h.lanes|=a),h=i,i=i.return;i!==null;)i.childLanes|=a,h=i.alternate,h!==null&&(h.childLanes|=a),h=i,i=i.return;return h.tag===3?h.stateNode:null}var zo=!1;function Kl(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uu(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function oo(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function so(i,a,h){var x=i.updateQueue;if(x===null)return null;if(x=x.shared,(Rn&2)!==0){var C=x.pending;return C===null?a.next=a:(a.next=C.next,C.next=a),x.pending=a,Vn(i,h)}return C=x.interleaved,C===null?(a.next=a,qs(x)):(a.next=C.next,C.next=a),x.interleaved=a,Vn(i,h)}function ha(i,a,h){if(a=a.updateQueue,a!==null&&(a=a.shared,(h&4194240)!==0)){var x=a.lanes;x&=i.pendingLanes,h|=x,a.lanes=h,Zt(i,h)}}function ao(i,a){var h=i.updateQueue,x=i.alternate;if(x!==null&&(x=x.updateQueue,h===x)){var C=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var U={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};A===null?C=A=U:A=A.next=U,h=h.next}while(h!==null);A===null?C=A=a:A=A.next=a}else C=A=a;h={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:A,shared:x.shared,effects:x.effects},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=a:i.next=a,h.lastBaseUpdate=a}function ps(i,a,h,x){var C=i.updateQueue;zo=!1;var A=C.firstBaseUpdate,U=C.lastBaseUpdate,de=C.shared.pending;if(de!==null){C.shared.pending=null;var Se=de,ze=Se.next;Se.next=null,U===null?A=ze:U.next=ze,U=Se;var st=i.alternate;st!==null&&(st=st.updateQueue,de=st.lastBaseUpdate,de!==U&&(de===null?st.firstBaseUpdate=ze:de.next=ze,st.lastBaseUpdate=Se))}if(A!==null){var ut=C.baseState;U=0,st=ze=Se=null,de=A;do{var ot=de.lane,Tt=de.eventTime;if((x&ot)===ot){st!==null&&(st=st.next={eventTime:Tt,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var Lt=i,jt=de;switch(ot=a,Tt=h,jt.tag){case 1:if(Lt=jt.payload,typeof Lt=="function"){ut=Lt.call(Tt,ut,ot);break e}ut=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=jt.payload,ot=typeof Lt=="function"?Lt.call(Tt,ut,ot):Lt,ot==null)break e;ut=we({},ut,ot);break e;case 2:zo=!0}}de.callback!==null&&de.lane!==0&&(i.flags|=64,ot=C.effects,ot===null?C.effects=[de]:ot.push(de))}else Tt={eventTime:Tt,lane:ot,tag:de.tag,payload:de.payload,callback:de.callback,next:null},st===null?(ze=st=Tt,Se=ut):st=st.next=Tt,U|=ot;if(de=de.next,de===null){if(de=C.shared.pending,de===null)break;ot=de,de=ot.next,ot.next=null,C.lastBaseUpdate=ot,C.shared.pending=null}}while(!0);if(st===null&&(Se=ut),C.baseState=Se,C.firstBaseUpdate=ze,C.lastBaseUpdate=st,a=C.shared.interleaved,a!==null){C=a;do U|=C.lane,C=C.next;while(C!==a)}else A===null&&(C.shared.lanes=0);Ll|=U,i.lanes=U,i.memoizedState=ut}}function ma(i,a,h){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var x=i[a],C=x.callback;if(C!==null){if(x.callback=null,x=h,typeof C!="function")throw Error(n(191,C));C.call(x)}}}var $a={},Ki=To($a),Ga=To($a),Os=To($a);function gs(i){if(i===$a)throw Error(n(174));return i}function Ja(i,a){switch(Qn(Os,a),Qn(Ga,i),Qn(Ki,$a),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:$e(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=$e(a,i)}Jn(Ki),Qn(Ki,a)}function Wo(){Jn(Ki),Jn(Ga),Jn(Os)}function pc(i){gs(Os.current);var a=gs(Ki.current),h=$e(a,i.type);a!==h&&(Qn(Ga,i),Qn(Ki,h))}function Hu(i){Ga.current===i&&(Jn(Ki),Jn(Ga))}var lr=To(0);function Io(i){for(var a=i;a!==null;){if(a.tag===13){var h=a.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Vu=[];function qu(){for(var i=0;i<Vu.length;i++)Vu[i]._workInProgressVersionPrimary=null;Vu.length=0}var Ql=J.ReactCurrentDispatcher,Xl=J.ReactCurrentBatchConfig,$o=0,dr=null,Dr=null,_r=null,Ya=!1,vs=!1,Ka=0,jd=0;function Vr(){throw Error(n(321))}function Zl(i,a){if(a===null)return!1;for(var h=0;h<a.length&&h<i.length;h++)if(!Dn(i[h],a[h]))return!1;return!0}function Al(i,a,h,x,C,A){if($o=A,dr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ql.current=i===null||i.memoizedState===null?Dg:Rg,i=h(x,C),vs){A=0;do{if(vs=!1,Ka=0,25<=A)throw Error(n(301));A+=1,_r=Dr=null,a.updateQueue=null,Ql.current=Fg,i=h(x,C)}while(vs)}if(Ql.current=wc,a=Dr!==null&&Dr.next!==null,$o=0,_r=Dr=dr=null,Ya=!1,a)throw Error(n(300));return i}function Go(){var i=Ka!==0;return Ka=0,i}function Ao(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?dr.memoizedState=_r=i:_r=_r.next=i,_r}function Qi(){if(Dr===null){var i=dr.alternate;i=i!==null?i.memoizedState:null}else i=Dr.next;var a=_r===null?dr.memoizedState:_r.next;if(a!==null)_r=a,Dr=i;else{if(i===null)throw Error(n(310));Dr=i,i={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},_r===null?dr.memoizedState=_r=i:_r=_r.next=i}return _r}function _l(i,a){return typeof a=="function"?a(i):a}function eu(i){var a=Qi(),h=a.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var x=Dr,C=x.baseQueue,A=h.pending;if(A!==null){if(C!==null){var U=C.next;C.next=A.next,A.next=U}x.baseQueue=C=A,h.pending=null}if(C!==null){A=C.next,x=x.baseState;var de=U=null,Se=null,ze=A;do{var st=ze.lane;if(($o&st)===st)Se!==null&&(Se=Se.next={lane:0,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null}),x=ze.hasEagerState?ze.eagerState:i(x,ze.action);else{var ut={lane:st,action:ze.action,hasEagerState:ze.hasEagerState,eagerState:ze.eagerState,next:null};Se===null?(de=Se=ut,U=x):Se=Se.next=ut,dr.lanes|=st,Ll|=st}ze=ze.next}while(ze!==null&&ze!==A);Se===null?U=x:Se.next=de,Dn(x,a.memoizedState)||(lo=!0),a.memoizedState=x,a.baseState=U,a.baseQueue=Se,h.lastRenderedState=x}if(i=h.interleaved,i!==null){C=i;do A=C.lane,dr.lanes|=A,Ll|=A,C=C.next;while(C!==i)}else C===null&&(h.lanes=0);return[a.memoizedState,h.dispatch]}function zs(i){var a=Qi(),h=a.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=i;var x=h.dispatch,C=h.pending,A=a.memoizedState;if(C!==null){h.pending=null;var U=C=C.next;do A=i(A,U.action),U=U.next;while(U!==C);Dn(A,a.memoizedState)||(lo=!0),a.memoizedState=A,a.baseQueue===null&&(a.baseState=A),h.lastRenderedState=A}return[A,x]}function gc(){}function Ou(i,a){var h=dr,x=Qi(),C=a(),A=!Dn(x.memoizedState,C);if(A&&(x.memoizedState=C,lo=!0),x=x.queue,ru(xc.bind(null,h,x,i),[i]),x.getSnapshot!==a||A||_r!==null&&_r.memoizedState.tag&1){if(h.flags|=2048,Xi(9,zu.bind(null,h,x,C,a),void 0,null),di===null)throw Error(n(349));($o&30)!==0||vc(h,a,C)}return C}function vc(i,a,h){i.flags|=16384,i={getSnapshot:a,value:h},a=dr.updateQueue,a===null?(a={lastEffect:null,stores:null},dr.updateQueue=a,a.stores=[i]):(h=a.stores,h===null?a.stores=[i]:h.push(i))}function zu(i,a,h,x){a.value=h,a.getSnapshot=x,Qa(a)&&tu(i)}function xc(i,a,h){return h(function(){Qa(a)&&tu(i)})}function Qa(i){var a=i.getSnapshot;i=i.value;try{var h=a();return!Dn(i,h)}catch{return!0}}function tu(i){var a=Vn(i,1);a!==null&&Ns(a,i,1,-1)}function El(i){var a=Ao();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_l,lastRenderedState:i},a.queue=i,i=i.dispatch=jg.bind(null,dr,i),[a.memoizedState,i]}function Xi(i,a,h,x){return i={tag:i,create:a,destroy:h,deps:x,next:null},a=dr.updateQueue,a===null?(a={lastEffect:null,stores:null},dr.updateQueue=a,a.lastEffect=i.next=i):(h=a.lastEffect,h===null?a.lastEffect=i.next=i:(x=h.next,h.next=i,i.next=x,a.lastEffect=i)),i}function xs(){return Qi().memoizedState}function _o(i,a,h,x){var C=Ao();dr.flags|=i,C.memoizedState=Xi(1|a,h,void 0,x===void 0?null:x)}function pa(i,a,h,x){var C=Qi();x=x===void 0?null:x;var A=void 0;if(Dr!==null){var U=Dr.memoizedState;if(A=U.destroy,x!==null&&Zl(x,U.deps)){C.memoizedState=Xi(a,h,A,x);return}}dr.flags|=i,C.memoizedState=Xi(1|a,h,A,x)}function nu(i,a){return _o(8390656,8,i,a)}function ru(i,a){return pa(2048,8,i,a)}function yc(i,a){return pa(4,2,i,a)}function iu(i,a){return pa(4,4,i,a)}function ou(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function xh(i,a,h){return h=h!=null?h.concat([i]):null,pa(4,4,ou.bind(null,a,i),h)}function Dd(){}function yh(i,a){var h=Qi();a=a===void 0?null:a;var x=h.memoizedState;return x!==null&&a!==null&&Zl(a,x[1])?x[0]:(h.memoizedState=[i,a],i)}function wh(i,a){var h=Qi();a=a===void 0?null:a;var x=h.memoizedState;return x!==null&&a!==null&&Zl(a,x[1])?x[0]:(i=i(),h.memoizedState=[i,a],i)}function bh(i,a,h){return($o&21)===0?(i.baseState&&(i.baseState=!1,lo=!0),i.memoizedState=h):(Dn(h,a)||(h=Me(),dr.lanes|=h,Ll|=h,i.baseState=!0),a)}function Pg(i,a){var h=dt;dt=h!==0&&4>h?h:4,i(!0);var x=Xl.transition;Xl.transition={};try{i(!1),a()}finally{dt=h,Xl.transition=x}}function Nh(){return Qi().memoizedState}function Mg(i,a,h){var x=tl(i);if(h={lane:x,action:h,hasEagerState:!1,eagerState:null,next:null},Sh(i))Ch(a,h);else if(h=ms(i,a,h,x),h!==null){var C=eo();Ns(h,i,x,C),kh(h,a,x)}}function jg(i,a,h){var x=tl(i),C={lane:x,action:h,hasEagerState:!1,eagerState:null,next:null};if(Sh(i))Ch(a,C);else{var A=i.alternate;if(i.lanes===0&&(A===null||A.lanes===0)&&(A=a.lastRenderedReducer,A!==null))try{var U=a.lastRenderedState,de=A(U,h);if(C.hasEagerState=!0,C.eagerState=de,Dn(de,U)){var Se=a.interleaved;Se===null?(C.next=C,qs(a)):(C.next=Se.next,Se.next=C),a.interleaved=C;return}}catch{}finally{}h=ms(i,a,C,x),h!==null&&(C=eo(),Ns(h,i,x,C),kh(h,a,x))}}function Sh(i){var a=i.alternate;return i===dr||a!==null&&a===dr}function Ch(i,a){vs=Ya=!0;var h=i.pending;h===null?a.next=a:(a.next=h.next,h.next=a),i.pending=a}function kh(i,a,h){if((h&4194240)!==0){var x=a.lanes;x&=i.pendingLanes,h|=x,a.lanes=h,Zt(i,h)}}var wc={readContext:jr,useCallback:Vr,useContext:Vr,useEffect:Vr,useImperativeHandle:Vr,useInsertionEffect:Vr,useLayoutEffect:Vr,useMemo:Vr,useReducer:Vr,useRef:Vr,useState:Vr,useDebugValue:Vr,useDeferredValue:Vr,useTransition:Vr,useMutableSource:Vr,useSyncExternalStore:Vr,useId:Vr,unstable_isNewReconciler:!1},Dg={readContext:jr,useCallback:function(i,a){return Ao().memoizedState=[i,a===void 0?null:a],i},useContext:jr,useEffect:nu,useImperativeHandle:function(i,a,h){return h=h!=null?h.concat([i]):null,_o(4194308,4,ou.bind(null,a,i),h)},useLayoutEffect:function(i,a){return _o(4194308,4,i,a)},useInsertionEffect:function(i,a){return _o(4,2,i,a)},useMemo:function(i,a){var h=Ao();return a=a===void 0?null:a,i=i(),h.memoizedState=[i,a],i},useReducer:function(i,a,h){var x=Ao();return a=h!==void 0?h(a):a,x.memoizedState=x.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},x.queue=i,i=i.dispatch=Mg.bind(null,dr,i),[x.memoizedState,i]},useRef:function(i){var a=Ao();return i={current:i},a.memoizedState=i},useState:El,useDebugValue:Dd,useDeferredValue:function(i){return Ao().memoizedState=i},useTransition:function(){var i=El(!1),a=i[0];return i=Pg.bind(null,i[1]),Ao().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,h){var x=dr,C=Ao();if(Ye){if(h===void 0)throw Error(n(407));h=h()}else{if(h=a(),di===null)throw Error(n(349));($o&30)!==0||vc(x,a,h)}C.memoizedState=h;var A={value:h,getSnapshot:a};return C.queue=A,nu(xc.bind(null,x,A,i),[i]),x.flags|=2048,Xi(9,zu.bind(null,x,A,h,a),void 0,null),h},useId:function(){var i=Ao(),a=di.identifierPrefix;if(Ye){var h=Re,x=De;h=(x&~(1<<32-ri(x)-1)).toString(32)+h,a=":"+a+"R"+h,h=Ka++,0<h&&(a+="H"+h.toString(32)),a+=":"}else h=jd++,a=":"+a+"r"+h.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},Rg={readContext:jr,useCallback:yh,useContext:jr,useEffect:ru,useImperativeHandle:xh,useInsertionEffect:yc,useLayoutEffect:iu,useMemo:wh,useReducer:eu,useRef:xs,useState:function(){return eu(_l)},useDebugValue:Dd,useDeferredValue:function(i){var a=Qi();return bh(a,Dr.memoizedState,i)},useTransition:function(){var i=eu(_l)[0],a=Qi().memoizedState;return[i,a]},useMutableSource:gc,useSyncExternalStore:Ou,useId:Nh,unstable_isNewReconciler:!1},Fg={readContext:jr,useCallback:yh,useContext:jr,useEffect:ru,useImperativeHandle:xh,useInsertionEffect:yc,useLayoutEffect:iu,useMemo:wh,useReducer:zs,useRef:xs,useState:function(){return zs(_l)},useDebugValue:Dd,useDeferredValue:function(i){var a=Qi();return Dr===null?a.memoizedState=i:bh(a,Dr.memoizedState,i)},useTransition:function(){var i=zs(_l)[0],a=Qi().memoizedState;return[i,a]},useMutableSource:gc,useSyncExternalStore:Ou,useId:Nh,unstable_isNewReconciler:!1};function ys(i,a){if(i&&i.defaultProps){a=we({},a),i=i.defaultProps;for(var h in i)a[h]===void 0&&(a[h]=i[h]);return a}return a}function Rd(i,a,h,x){a=i.memoizedState,h=h(x,a),h=h==null?a:we({},a,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var bc={isMounted:function(i){return(i=i._reactInternals)?Er(i)===i:!1},enqueueSetState:function(i,a,h){i=i._reactInternals;var x=eo(),C=tl(i),A=oo(x,C);A.payload=a,h!=null&&(A.callback=h),a=so(i,A,C),a!==null&&(Ns(a,i,C,x),ha(a,i,C))},enqueueReplaceState:function(i,a,h){i=i._reactInternals;var x=eo(),C=tl(i),A=oo(x,C);A.tag=1,A.payload=a,h!=null&&(A.callback=h),a=so(i,A,C),a!==null&&(Ns(a,i,C,x),ha(a,i,C))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var h=eo(),x=tl(i),C=oo(h,x);C.tag=2,a!=null&&(C.callback=a),a=so(i,C,x),a!==null&&(Ns(a,i,x,h),ha(a,i,x))}};function Th(i,a,h,x,C,A,U){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(x,A,U):a.prototype&&a.prototype.isPureReactComponent?!ls(h,x)||!ls(C,A):!0}function Ih(i,a,h){var x=!1,C=Vs,A=a.contextType;return typeof A=="object"&&A!==null?A=jr(A):(C=Pi(a)?da:ei.current,x=a.contextTypes,A=(x=x!=null)?Wa(i,C):Vs),a=new a(h,A),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=bc,i.stateNode=a,a._reactInternals=i,x&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=C,i.__reactInternalMemoizedMaskedChildContext=A),a}function Ah(i,a,h,x){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,x),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,x),a.state!==i&&bc.enqueueReplaceState(a,a.state,null)}function Fd(i,a,h,x){var C=i.stateNode;C.props=h,C.state=i.memoizedState,C.refs={},Kl(i);var A=a.contextType;typeof A=="object"&&A!==null?C.context=jr(A):(A=Pi(a)?da:ei.current,C.context=Wa(i,A)),C.state=i.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Rd(i,a,A,h),C.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(a=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),a!==C.state&&bc.enqueueReplaceState(C,C.state,null),ps(i,h,C,x),C.state=i.memoizedState),typeof C.componentDidMount=="function"&&(i.flags|=4194308)}function su(i,a){try{var h="",x=a;do h+=ue(x),x=x.return;while(x);var C=h}catch(A){C=`
Error generating stack: `+A.message+`
`+A.stack}return{value:i,source:a,stack:C,digest:null}}function Bd(i,a,h){return{value:i,source:null,stack:h??null,digest:a??null}}function Ud(i,a){try{console.error(a.value)}catch(h){setTimeout(function(){throw h})}}var Bg=typeof WeakMap=="function"?WeakMap:Map;function _h(i,a,h){h=oo(-1,h),h.tag=3,h.payload={element:null};var x=a.value;return h.callback=function(){Ac||(Ac=!0,ef=x),Ud(i,a)},h}function Eh(i,a,h){h=oo(-1,h),h.tag=3;var x=i.type.getDerivedStateFromError;if(typeof x=="function"){var C=a.value;h.payload=function(){return x(C)},h.callback=function(){Ud(i,a)}}var A=i.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(h.callback=function(){Ud(i,a),typeof x!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var U=a.stack;this.componentDidCatch(a.value,{componentStack:U!==null?U:""})}),h}function Lh(i,a,h){var x=i.pingCache;if(x===null){x=i.pingCache=new Bg;var C=new Set;x.set(a,C)}else C=x.get(a),C===void 0&&(C=new Set,x.set(a,C));C.has(h)||(C.add(h),i=Xg.bind(null,i,a,h),a.then(i,i))}function Ph(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function Mh(i,a,h,x,C){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(a=oo(-1,1),a.tag=2,so(h,a,1))),h.lanes|=1),i):(i.flags|=65536,i.lanes=C,i)}var Ug=J.ReactCurrentOwner,lo=!1;function Zi(i,a,h,x){a.child=i===null?Hn(a,null,h,x):Ur(a,i.child,h,x)}function jh(i,a,h,x,C){h=h.render;var A=a.ref;return vr(a,C),x=Al(i,a,h,x,A,C),h=Go(),i!==null&&!lo?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~C,ga(i,a,C)):(Ye&&h&&We(a),a.flags|=1,Zi(i,a,x,C),a.child)}function Dh(i,a,h,x,C){if(i===null){var A=h.type;return typeof A=="function"&&!lf(A)&&A.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(a.tag=15,a.type=A,Rh(i,a,A,x,C)):(i=jc(h.type,null,x,a,a.mode,C),i.ref=a.ref,i.return=a,a.child=i)}if(A=i.child,(i.lanes&C)===0){var U=A.memoizedProps;if(h=h.compare,h=h!==null?h:ls,h(U,x)&&i.ref===a.ref)return ga(i,a,C)}return a.flags|=1,i=rl(A,x),i.ref=a.ref,i.return=a,a.child=i}function Rh(i,a,h,x,C){if(i!==null){var A=i.memoizedProps;if(ls(A,x)&&i.ref===a.ref)if(lo=!1,a.pendingProps=x=A,(i.lanes&C)!==0)(i.flags&131072)!==0&&(lo=!0);else return a.lanes=i.lanes,ga(i,a,C)}return Hd(i,a,h,x,C)}function Fh(i,a,h){var x=a.pendingProps,C=x.children,A=i!==null?i.memoizedState:null;if(x.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(lu,Eo),Eo|=h;else{if((h&1073741824)===0)return i=A!==null?A.baseLanes|h:h,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Qn(lu,Eo),Eo|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=A!==null?A.baseLanes:h,Qn(lu,Eo),Eo|=x}else A!==null?(x=A.baseLanes|h,a.memoizedState=null):x=h,Qn(lu,Eo),Eo|=x;return Zi(i,a,C,h),a.child}function Bh(i,a){var h=a.ref;(i===null&&h!==null||i!==null&&i.ref!==h)&&(a.flags|=512,a.flags|=2097152)}function Hd(i,a,h,x,C){var A=Pi(h)?da:ei.current;return A=Wa(a,A),vr(a,C),h=Al(i,a,h,x,A,C),x=Go(),i!==null&&!lo?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~C,ga(i,a,C)):(Ye&&x&&We(a),a.flags|=1,Zi(i,a,h,C),a.child)}function Uh(i,a,h,x,C){if(Pi(h)){var A=!0;fa(a)}else A=!1;if(vr(a,C),a.stateNode===null)Sc(i,a),Ih(a,h,x),Fd(a,h,x,C),x=!0;else if(i===null){var U=a.stateNode,de=a.memoizedProps;U.props=de;var Se=U.context,ze=h.contextType;typeof ze=="object"&&ze!==null?ze=jr(ze):(ze=Pi(h)?da:ei.current,ze=Wa(a,ze));var st=h.getDerivedStateFromProps,ut=typeof st=="function"||typeof U.getSnapshotBeforeUpdate=="function";ut||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(de!==x||Se!==ze)&&Ah(a,U,x,ze),zo=!1;var ot=a.memoizedState;U.state=ot,ps(a,x,U,C),Se=a.memoizedState,de!==x||ot!==Se||Li.current||zo?(typeof st=="function"&&(Rd(a,h,st,x),Se=a.memoizedState),(de=zo||Th(a,h,de,x,ot,Se,ze))?(ut||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(a.flags|=4194308)):(typeof U.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=x,a.memoizedState=Se),U.props=x,U.state=Se,U.context=ze,x=de):(typeof U.componentDidMount=="function"&&(a.flags|=4194308),x=!1)}else{U=a.stateNode,Uu(i,a),de=a.memoizedProps,ze=a.type===a.elementType?de:ys(a.type,de),U.props=ze,ut=a.pendingProps,ot=U.context,Se=h.contextType,typeof Se=="object"&&Se!==null?Se=jr(Se):(Se=Pi(h)?da:ei.current,Se=Wa(a,Se));var Tt=h.getDerivedStateFromProps;(st=typeof Tt=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(de!==ut||ot!==Se)&&Ah(a,U,x,Se),zo=!1,ot=a.memoizedState,U.state=ot,ps(a,x,U,C);var Lt=a.memoizedState;de!==ut||ot!==Lt||Li.current||zo?(typeof Tt=="function"&&(Rd(a,h,Tt,x),Lt=a.memoizedState),(ze=zo||Th(a,h,ze,x,ot,Lt,Se)||!1)?(st||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,Lt,Se),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,Lt,Se)),typeof U.componentDidUpdate=="function"&&(a.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof U.componentDidUpdate!="function"||de===i.memoizedProps&&ot===i.memoizedState||(a.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||de===i.memoizedProps&&ot===i.memoizedState||(a.flags|=1024),a.memoizedProps=x,a.memoizedState=Lt),U.props=x,U.state=Lt,U.context=Se,x=ze):(typeof U.componentDidUpdate!="function"||de===i.memoizedProps&&ot===i.memoizedState||(a.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||de===i.memoizedProps&&ot===i.memoizedState||(a.flags|=1024),x=!1)}return Vd(i,a,h,x,A,C)}function Vd(i,a,h,x,C,A){Bh(i,a);var U=(a.flags&128)!==0;if(!x&&!U)return C&&mc(a,h,!1),ga(i,a,A);x=a.stateNode,Ug.current=a;var de=U&&typeof h.getDerivedStateFromError!="function"?null:x.render();return a.flags|=1,i!==null&&U?(a.child=Ur(a,i.child,null,A),a.child=Ur(a,null,de,A)):Zi(i,a,de,A),a.memoizedState=x.state,C&&mc(a,h,!0),a.child}function Hh(i){var a=i.stateNode;a.pendingContext?hc(i,a.pendingContext,a.pendingContext!==a.context):a.context&&hc(i,a.context,!1),Ja(i,a.containerInfo)}function Vh(i,a,h,x,C){return dn(),Yn(C),a.flags|=256,Zi(i,a,h,x),a.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function Od(i){return{baseLanes:i,cachePool:null,transitions:null}}function qh(i,a,h){var x=a.pendingProps,C=lr.current,A=!1,U=(a.flags&128)!==0,de;if((de=U)||(de=i!==null&&i.memoizedState===null?!1:(C&2)!==0),de?(A=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(C|=1),Qn(lr,C&1),i===null)return xt(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(U=x.children,i=x.fallback,A?(x=a.mode,A=a.child,U={mode:"hidden",children:U},(x&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=U):A=Dc(U,x,0,null),i=Dl(i,x,h,null),A.return=a,i.return=a,A.sibling=i,a.child=A,a.child.memoizedState=Od(h),a.memoizedState=qd,i):zd(a,U));if(C=i.memoizedState,C!==null&&(de=C.dehydrated,de!==null))return Hg(i,a,U,x,de,C,h);if(A){A=x.fallback,U=a.mode,C=i.child,de=C.sibling;var Se={mode:"hidden",children:x.children};return(U&1)===0&&a.child!==C?(x=a.child,x.childLanes=0,x.pendingProps=Se,a.deletions=null):(x=rl(C,Se),x.subtreeFlags=C.subtreeFlags&14680064),de!==null?A=rl(de,A):(A=Dl(A,U,h,null),A.flags|=2),A.return=a,x.return=a,x.sibling=A,a.child=x,x=A,A=a.child,U=i.child.memoizedState,U=U===null?Od(h):{baseLanes:U.baseLanes|h,cachePool:null,transitions:U.transitions},A.memoizedState=U,A.childLanes=i.childLanes&~h,a.memoizedState=qd,x}return A=i.child,i=A.sibling,x=rl(A,{mode:"visible",children:x.children}),(a.mode&1)===0&&(x.lanes=h),x.return=a,x.sibling=null,i!==null&&(h=a.deletions,h===null?(a.deletions=[i],a.flags|=16):h.push(i)),a.child=x,a.memoizedState=null,x}function zd(i,a){return a=Dc({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Nc(i,a,h,x){return x!==null&&Yn(x),Ur(a,i.child,null,h),i=zd(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function Hg(i,a,h,x,C,A,U){if(h)return a.flags&256?(a.flags&=-257,x=Bd(Error(n(422))),Nc(i,a,U,x)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(A=x.fallback,C=a.mode,x=Dc({mode:"visible",children:x.children},C,0,null),A=Dl(A,C,U,null),A.flags|=2,x.return=a,A.return=a,x.sibling=A,a.child=x,(a.mode&1)!==0&&Ur(a,i.child,null,U),a.child.memoizedState=Od(U),a.memoizedState=qd,A);if((a.mode&1)===0)return Nc(i,a,U,null);if(C.data==="$!"){if(x=C.nextSibling&&C.nextSibling.dataset,x)var de=x.dgst;return x=de,A=Error(n(419)),x=Bd(A,x,void 0),Nc(i,a,U,x)}if(de=(U&i.childLanes)!==0,lo||de){if(x=di,x!==null){switch(U&-U){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(x.suspendedLanes|U))!==0?0:C,C!==0&&C!==A.retryLane&&(A.retryLane=C,Vn(i,C),Ns(x,i,C,-1))}return af(),x=Bd(Error(n(421))),Nc(i,a,U,x)}return C.data==="$?"?(a.flags|=128,a.child=i.child,a=Zg.bind(null,i),C._reactRetry=a,null):(i=A.treeContext,Ke=Ni(C.nextSibling),ke=a,Ye=!0,Qe=null,i!==null&&(G[Z++]=De,G[Z++]=Re,G[Z++]=Ne,De=i.id,Re=i.overflow,Ne=a),a=zd(a,x.children),a.flags|=4096,a)}function Oh(i,a,h){i.lanes|=a;var x=i.alternate;x!==null&&(x.lanes|=a),io(i.return,a,h)}function Wd(i,a,h,x,C){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:x,tail:h,tailMode:C}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=x,A.tail=h,A.tailMode=C)}function zh(i,a,h){var x=a.pendingProps,C=x.revealOrder,A=x.tail;if(Zi(i,a,x.children,h),x=lr.current,(x&2)!==0)x=x&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Oh(i,h,a);else if(i.tag===19)Oh(i,h,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}x&=1}if(Qn(lr,x),(a.mode&1)===0)a.memoizedState=null;else switch(C){case"forwards":for(h=a.child,C=null;h!==null;)i=h.alternate,i!==null&&Io(i)===null&&(C=h),h=h.sibling;h=C,h===null?(C=a.child,a.child=null):(C=h.sibling,h.sibling=null),Wd(a,!1,C,h,A);break;case"backwards":for(h=null,C=a.child,a.child=null;C!==null;){if(i=C.alternate,i!==null&&Io(i)===null){a.child=C;break}i=C.sibling,C.sibling=h,h=C,C=i}Wd(a,!0,h,null,A);break;case"together":Wd(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Sc(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function ga(i,a,h){if(i!==null&&(a.dependencies=i.dependencies),Ll|=a.lanes,(h&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,h=rl(i,i.pendingProps),a.child=h,h.return=a;i.sibling!==null;)i=i.sibling,h=h.sibling=rl(i,i.pendingProps),h.return=a;h.sibling=null}return a.child}function Vg(i,a,h){switch(a.tag){case 3:Hh(a),dn();break;case 5:pc(a);break;case 1:Pi(a.type)&&fa(a);break;case 4:Ja(a,a.stateNode.containerInfo);break;case 10:var x=a.type._context,C=a.memoizedProps.value;Qn(ui,x._currentValue),x._currentValue=C;break;case 13:if(x=a.memoizedState,x!==null)return x.dehydrated!==null?(Qn(lr,lr.current&1),a.flags|=128,null):(h&a.child.childLanes)!==0?qh(i,a,h):(Qn(lr,lr.current&1),i=ga(i,a,h),i!==null?i.sibling:null);Qn(lr,lr.current&1);break;case 19:if(x=(h&a.childLanes)!==0,(i.flags&128)!==0){if(x)return zh(i,a,h);a.flags|=128}if(C=a.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Qn(lr,lr.current),x)break;return null;case 22:case 23:return a.lanes=0,Fh(i,a,h)}return ga(i,a,h)}var Wh,$d,$h,Gh;Wh=function(i,a){for(var h=a.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},$d=function(){},$h=function(i,a,h,x){var C=i.memoizedProps;if(C!==x){i=a.stateNode,gs(Ki.current);var A=null;switch(h){case"input":C=Ze(i,C),x=Ze(i,x),A=[];break;case"select":C=we({},C,{value:void 0}),x=we({},x,{value:void 0}),A=[];break;case"textarea":C=He(i,C),x=He(i,x),A=[];break;default:typeof C.onClick!="function"&&typeof x.onClick=="function"&&(i.onclick=qa)}pt(h,x);var U;h=null;for(ze in C)if(!x.hasOwnProperty(ze)&&C.hasOwnProperty(ze)&&C[ze]!=null)if(ze==="style"){var de=C[ze];for(U in de)de.hasOwnProperty(U)&&(h||(h={}),h[U]="")}else ze!=="dangerouslySetInnerHTML"&&ze!=="children"&&ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&ze!=="autoFocus"&&(o.hasOwnProperty(ze)?A||(A=[]):(A=A||[]).push(ze,null));for(ze in x){var Se=x[ze];if(de=C!=null?C[ze]:void 0,x.hasOwnProperty(ze)&&Se!==de&&(Se!=null||de!=null))if(ze==="style")if(de){for(U in de)!de.hasOwnProperty(U)||Se&&Se.hasOwnProperty(U)||(h||(h={}),h[U]="");for(U in Se)Se.hasOwnProperty(U)&&de[U]!==Se[U]&&(h||(h={}),h[U]=Se[U])}else h||(A||(A=[]),A.push(ze,h)),h=Se;else ze==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,de=de?de.__html:void 0,Se!=null&&de!==Se&&(A=A||[]).push(ze,Se)):ze==="children"?typeof Se!="string"&&typeof Se!="number"||(A=A||[]).push(ze,""+Se):ze!=="suppressContentEditableWarning"&&ze!=="suppressHydrationWarning"&&(o.hasOwnProperty(ze)?(Se!=null&&ze==="onScroll"&&tr("scroll",i),A||de===Se||(A=[])):(A=A||[]).push(ze,Se))}h&&(A=A||[]).push("style",h);var ze=A;(a.updateQueue=ze)&&(a.flags|=4)}},Gh=function(i,a,h,x){h!==x&&(a.flags|=4)};function Wu(i,a){if(!Ye)switch(i.tailMode){case"hidden":a=i.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var x=null;h!==null;)h.alternate!==null&&(x=h),h=h.sibling;x===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:x.sibling=null}}function ji(i){var a=i.alternate!==null&&i.alternate.child===i.child,h=0,x=0;if(a)for(var C=i.child;C!==null;)h|=C.lanes|C.childLanes,x|=C.subtreeFlags&14680064,x|=C.flags&14680064,C.return=i,C=C.sibling;else for(C=i.child;C!==null;)h|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=i,C=C.sibling;return i.subtreeFlags|=x,i.childLanes=h,a}function qg(i,a,h){var x=a.pendingProps;switch(Ce(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(a),null;case 1:return Pi(a.type)&&Yl(),ji(a),null;case 3:return x=a.stateNode,Wo(),Jn(Li),Jn(ei),qu(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(i===null||i.child===null)&&(Ln(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Qe!==null&&(rf(Qe),Qe=null))),$d(i,a),ji(a),null;case 5:Hu(a);var C=gs(Os.current);if(h=a.type,i!==null&&a.stateNode!=null)$h(i,a,h,x,C),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!x){if(a.stateNode===null)throw Error(n(166));return ji(a),null}if(i=gs(Ki.current),Ln(a)){x=a.stateNode,h=a.type;var A=a.memoizedProps;switch(x[Oo]=a,x[Oa]=A,i=(a.mode&1)!==0,h){case"dialog":tr("cancel",x),tr("close",x);break;case"iframe":case"object":case"embed":tr("load",x);break;case"video":case"audio":for(C=0;C<Us.length;C++)tr(Us[C],x);break;case"source":tr("error",x);break;case"img":case"image":case"link":tr("error",x),tr("load",x);break;case"details":tr("toggle",x);break;case"input":Le(x,A),tr("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!A.multiple},tr("invalid",x);break;case"textarea":bt(x,A),tr("invalid",x)}pt(h,A),C=null;for(var U in A)if(A.hasOwnProperty(U)){var de=A[U];U==="children"?typeof de=="string"?x.textContent!==de&&(A.suppressHydrationWarning!==!0&&Jl(x.textContent,de,i),C=["children",de]):typeof de=="number"&&x.textContent!==""+de&&(A.suppressHydrationWarning!==!0&&Jl(x.textContent,de,i),C=["children",""+de]):o.hasOwnProperty(U)&&de!=null&&U==="onScroll"&&tr("scroll",x)}switch(h){case"input":Be(x),et(x,A,!0);break;case"textarea":Be(x),At(x);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(x.onclick=qa)}x=C,a.updateQueue=x,x!==null&&(a.flags|=4)}else{U=C.nodeType===9?C:C.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=It(h)),i==="http://www.w3.org/1999/xhtml"?h==="script"?(i=U.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof x.is=="string"?i=U.createElement(h,{is:x.is}):(i=U.createElement(h),h==="select"&&(U=i,x.multiple?U.multiple=!0:x.size&&(U.size=x.size))):i=U.createElementNS(i,h),i[Oo]=a,i[Oa]=x,Wh(i,a,!1,!1),a.stateNode=i;e:{switch(U=ht(h,x),h){case"dialog":tr("cancel",i),tr("close",i),C=x;break;case"iframe":case"object":case"embed":tr("load",i),C=x;break;case"video":case"audio":for(C=0;C<Us.length;C++)tr(Us[C],i);C=x;break;case"source":tr("error",i),C=x;break;case"img":case"image":case"link":tr("error",i),tr("load",i),C=x;break;case"details":tr("toggle",i),C=x;break;case"input":Le(i,x),C=Ze(i,x),tr("invalid",i);break;case"option":C=x;break;case"select":i._wrapperState={wasMultiple:!!x.multiple},C=we({},x,{value:void 0}),tr("invalid",i);break;case"textarea":bt(i,x),C=He(i,x),tr("invalid",i);break;default:C=x}pt(h,C),de=C;for(A in de)if(de.hasOwnProperty(A)){var Se=de[A];A==="style"?Oe(i,Se):A==="dangerouslySetInnerHTML"?(Se=Se?Se.__html:void 0,Se!=null&&_e(i,Se)):A==="children"?typeof Se=="string"?(h!=="textarea"||Se!=="")&&Fe(i,Se):typeof Se=="number"&&Fe(i,""+Se):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(o.hasOwnProperty(A)?Se!=null&&A==="onScroll"&&tr("scroll",i):Se!=null&&q(i,A,Se,U))}switch(h){case"input":Be(i),et(i,x,!1);break;case"textarea":Be(i),At(i);break;case"option":x.value!=null&&i.setAttribute("value",""+re(x.value));break;case"select":i.multiple=!!x.multiple,A=x.value,A!=null?nt(i,!!x.multiple,A,!1):x.defaultValue!=null&&nt(i,!!x.multiple,x.defaultValue,!0);break;default:typeof C.onClick=="function"&&(i.onclick=qa)}switch(h){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ji(a),null;case 6:if(i&&a.stateNode!=null)Gh(i,a,i.memoizedProps,x);else{if(typeof x!="string"&&a.stateNode===null)throw Error(n(166));if(h=gs(Os.current),gs(Ki.current),Ln(a)){if(x=a.stateNode,h=a.memoizedProps,x[Oo]=a,(A=x.nodeValue!==h)&&(i=ke,i!==null))switch(i.tag){case 3:Jl(x.nodeValue,h,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Jl(x.nodeValue,h,(i.mode&1)!==0)}A&&(a.flags|=4)}else x=(h.nodeType===9?h:h.ownerDocument).createTextNode(x),x[Oo]=a,a.stateNode=x}return ji(a),null;case 13:if(Jn(lr),x=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ye&&Ke!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Sn(),dn(),a.flags|=98560,A=!1;else if(A=Ln(a),x!==null&&x.dehydrated!==null){if(i===null){if(!A)throw Error(n(318));if(A=a.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Oo]=a}else dn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ji(a),A=!1}else Qe!==null&&(rf(Qe),Qe=null),A=!0;if(!A)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=h,a):(x=x!==null,x!==(i!==null&&i.memoizedState!==null)&&x&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(lr.current&1)!==0?ni===0&&(ni=3):af())),a.updateQueue!==null&&(a.flags|=4),ji(a),null);case 4:return Wo(),$d(i,a),i===null&&aa(a.stateNode.containerInfo),ji(a),null;case 10:return Mi(a.type._context),ji(a),null;case 17:return Pi(a.type)&&Yl(),ji(a),null;case 19:if(Jn(lr),A=a.memoizedState,A===null)return ji(a),null;if(x=(a.flags&128)!==0,U=A.rendering,U===null)if(x)Wu(A,!1);else{if(ni!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(U=Io(i),U!==null){for(a.flags|=128,Wu(A,!1),x=U.updateQueue,x!==null&&(a.updateQueue=x,a.flags|=4),a.subtreeFlags=0,x=h,h=a.child;h!==null;)A=h,i=x,A.flags&=14680066,U=A.alternate,U===null?(A.childLanes=0,A.lanes=i,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=U.childLanes,A.lanes=U.lanes,A.child=U.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=U.memoizedProps,A.memoizedState=U.memoizedState,A.updateQueue=U.updateQueue,A.type=U.type,i=U.dependencies,A.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),h=h.sibling;return Qn(lr,lr.current&1|2),a.child}i=i.sibling}A.tail!==null&&or()>uu&&(a.flags|=128,x=!0,Wu(A,!1),a.lanes=4194304)}else{if(!x)if(i=Io(U),i!==null){if(a.flags|=128,x=!0,h=i.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),Wu(A,!0),A.tail===null&&A.tailMode==="hidden"&&!U.alternate&&!Ye)return ji(a),null}else 2*or()-A.renderingStartTime>uu&&h!==1073741824&&(a.flags|=128,x=!0,Wu(A,!1),a.lanes=4194304);A.isBackwards?(U.sibling=a.child,a.child=U):(h=A.last,h!==null?h.sibling=U:a.child=U,A.last=U)}return A.tail!==null?(a=A.tail,A.rendering=a,A.tail=a.sibling,A.renderingStartTime=or(),a.sibling=null,h=lr.current,Qn(lr,x?h&1|2:h&1),a):(ji(a),null);case 22:case 23:return sf(),x=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==x&&(a.flags|=8192),x&&(a.mode&1)!==0?(Eo&1073741824)!==0&&(ji(a),a.subtreeFlags&6&&(a.flags|=8192)):ji(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function Og(i,a){switch(Ce(a),a.tag){case 1:return Pi(a.type)&&Yl(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Wo(),Jn(Li),Jn(ei),qu(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return Hu(a),null;case 13:if(Jn(lr),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));dn()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Jn(lr),null;case 4:return Wo(),null;case 10:return Mi(a.type._context),null;case 22:case 23:return sf(),null;case 24:return null;default:return null}}var Cc=!1,Di=!1,zg=typeof WeakSet=="function"?WeakSet:Set,_t=null;function au(i,a){var h=i.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(x){Rr(i,a,x)}else h.current=null}function Gd(i,a,h){try{h()}catch(x){Rr(i,a,x)}}var Jh=!1;function Wg(i,a){if(kl=$r,i=xl(),ra(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var x=h.getSelection&&h.getSelection();if(x&&x.rangeCount!==0){h=x.anchorNode;var C=x.anchorOffset,A=x.focusNode;x=x.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var U=0,de=-1,Se=-1,ze=0,st=0,ut=i,ot=null;t:for(;;){for(var Tt;ut!==h||C!==0&&ut.nodeType!==3||(de=U+C),ut!==A||x!==0&&ut.nodeType!==3||(Se=U+x),ut.nodeType===3&&(U+=ut.nodeValue.length),(Tt=ut.firstChild)!==null;)ot=ut,ut=Tt;for(;;){if(ut===i)break t;if(ot===h&&++ze===C&&(de=U),ot===A&&++st===x&&(Se=U),(Tt=ut.nextSibling)!==null)break;ut=ot,ot=ut.parentNode}ut=Tt}h=de===-1||Se===-1?null:{start:de,end:Se}}else h=null}h=h||{start:0,end:0}}else h=null;for(ua={focusedElem:i,selectionRange:h},$r=!1,_t=a;_t!==null;)if(a=_t,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,_t=i;else for(;_t!==null;){a=_t;try{var Lt=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var jt=Lt.memoizedProps,qr=Lt.memoizedState,Ue=a.stateNode,Ae=Ue.getSnapshotBeforeUpdate(a.elementType===a.type?jt:ys(a.type,jt),qr);Ue.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Ve=a.stateNode.containerInfo;Ve.nodeType===1?Ve.textContent="":Ve.nodeType===9&&Ve.documentElement&&Ve.removeChild(Ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ft){Rr(a,a.return,ft)}if(i=a.sibling,i!==null){i.return=a.return,_t=i;break}_t=a.return}return Lt=Jh,Jh=!1,Lt}function $u(i,a,h){var x=a.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var C=x=x.next;do{if((C.tag&i)===i){var A=C.destroy;C.destroy=void 0,A!==void 0&&Gd(a,h,A)}C=C.next}while(C!==x)}}function kc(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&i)===i){var x=h.create;h.destroy=x()}h=h.next}while(h!==a)}}function Jd(i){var a=i.ref;if(a!==null){var h=i.stateNode;switch(i.tag){case 5:i=h;break;default:i=h}typeof a=="function"?a(i):a.current=i}}function Yh(i){var a=i.alternate;a!==null&&(i.alternate=null,Yh(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Oo],delete a[Oa],delete a[Ei],delete a[Pd],delete a[Md])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Kh(i){return i.tag===5||i.tag===3||i.tag===4}function Qh(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kh(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Yd(i,a,h){var x=i.tag;if(x===5||x===6)i=i.stateNode,a?h.nodeType===8?h.parentNode.insertBefore(i,a):h.insertBefore(i,a):(h.nodeType===8?(a=h.parentNode,a.insertBefore(i,h)):(a=h,a.appendChild(i)),h=h._reactRootContainer,h!=null||a.onclick!==null||(a.onclick=qa));else if(x!==4&&(i=i.child,i!==null))for(Yd(i,a,h),i=i.sibling;i!==null;)Yd(i,a,h),i=i.sibling}function Kd(i,a,h){var x=i.tag;if(x===5||x===6)i=i.stateNode,a?h.insertBefore(i,a):h.appendChild(i);else if(x!==4&&(i=i.child,i!==null))for(Kd(i,a,h),i=i.sibling;i!==null;)Kd(i,a,h),i=i.sibling}var Ci=null,ws=!1;function Xa(i,a,h){for(h=h.child;h!==null;)Xh(i,a,h),h=h.sibling}function Xh(i,a,h){if(vi&&typeof vi.onCommitFiberUnmount=="function")try{vi.onCommitFiberUnmount(es,h)}catch{}switch(h.tag){case 5:Di||au(h,a);case 6:var x=Ci,C=ws;Ci=null,Xa(i,a,h),Ci=x,ws=C,Ci!==null&&(ws?(i=Ci,h=h.stateNode,i.nodeType===8?i.parentNode.removeChild(h):i.removeChild(h)):Ci.removeChild(h.stateNode));break;case 18:Ci!==null&&(ws?(i=Ci,h=h.stateNode,i.nodeType===8?Ru(i.parentNode,h):i.nodeType===1&&Ru(i,h),sr(i)):Ru(Ci,h.stateNode));break;case 4:x=Ci,C=ws,Ci=h.stateNode.containerInfo,ws=!0,Xa(i,a,h),Ci=x,ws=C;break;case 0:case 11:case 14:case 15:if(!Di&&(x=h.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){C=x=x.next;do{var A=C,U=A.destroy;A=A.tag,U!==void 0&&((A&2)!==0||(A&4)!==0)&&Gd(h,a,U),C=C.next}while(C!==x)}Xa(i,a,h);break;case 1:if(!Di&&(au(h,a),x=h.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=h.memoizedProps,x.state=h.memoizedState,x.componentWillUnmount()}catch(de){Rr(h,a,de)}Xa(i,a,h);break;case 21:Xa(i,a,h);break;case 22:h.mode&1?(Di=(x=Di)||h.memoizedState!==null,Xa(i,a,h),Di=x):Xa(i,a,h);break;default:Xa(i,a,h)}}function Zh(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var h=i.stateNode;h===null&&(h=i.stateNode=new zg),a.forEach(function(x){var C=e1.bind(null,i,x);h.has(x)||(h.add(x),x.then(C,C))})}}function bs(i,a){var h=a.deletions;if(h!==null)for(var x=0;x<h.length;x++){var C=h[x];try{var A=i,U=a,de=U;e:for(;de!==null;){switch(de.tag){case 5:Ci=de.stateNode,ws=!1;break e;case 3:Ci=de.stateNode.containerInfo,ws=!0;break e;case 4:Ci=de.stateNode.containerInfo,ws=!0;break e}de=de.return}if(Ci===null)throw Error(n(160));Xh(A,U,C),Ci=null,ws=!1;var Se=C.alternate;Se!==null&&(Se.return=null),C.return=null}catch(ze){Rr(C,a,ze)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)em(a,i),a=a.sibling}function em(i,a){var h=i.alternate,x=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(bs(a,i),Ws(i),x&4){try{$u(3,i,i.return),kc(3,i)}catch(jt){Rr(i,i.return,jt)}try{$u(5,i,i.return)}catch(jt){Rr(i,i.return,jt)}}break;case 1:bs(a,i),Ws(i),x&512&&h!==null&&au(h,h.return);break;case 5:if(bs(a,i),Ws(i),x&512&&h!==null&&au(h,h.return),i.flags&32){var C=i.stateNode;try{Fe(C,"")}catch(jt){Rr(i,i.return,jt)}}if(x&4&&(C=i.stateNode,C!=null)){var A=i.memoizedProps,U=h!==null?h.memoizedProps:A,de=i.type,Se=i.updateQueue;if(i.updateQueue=null,Se!==null)try{de==="input"&&A.type==="radio"&&A.name!=null&&te(C,A),ht(de,U);var ze=ht(de,A);for(U=0;U<Se.length;U+=2){var st=Se[U],ut=Se[U+1];st==="style"?Oe(C,ut):st==="dangerouslySetInnerHTML"?_e(C,ut):st==="children"?Fe(C,ut):q(C,st,ut,ze)}switch(de){case"input":gt(C,A);break;case"textarea":Mt(C,A);break;case"select":var ot=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!A.multiple;var Tt=A.value;Tt!=null?nt(C,!!A.multiple,Tt,!1):ot!==!!A.multiple&&(A.defaultValue!=null?nt(C,!!A.multiple,A.defaultValue,!0):nt(C,!!A.multiple,A.multiple?[]:"",!1))}C[Oa]=A}catch(jt){Rr(i,i.return,jt)}}break;case 6:if(bs(a,i),Ws(i),x&4){if(i.stateNode===null)throw Error(n(162));C=i.stateNode,A=i.memoizedProps;try{C.nodeValue=A}catch(jt){Rr(i,i.return,jt)}}break;case 3:if(bs(a,i),Ws(i),x&4&&h!==null&&h.memoizedState.isDehydrated)try{sr(a.containerInfo)}catch(jt){Rr(i,i.return,jt)}break;case 4:bs(a,i),Ws(i);break;case 13:bs(a,i),Ws(i),C=i.child,C.flags&8192&&(A=C.memoizedState!==null,C.stateNode.isHidden=A,!A||C.alternate!==null&&C.alternate.memoizedState!==null||(Zd=or())),x&4&&Zh(i);break;case 22:if(st=h!==null&&h.memoizedState!==null,i.mode&1?(Di=(ze=Di)||st,bs(a,i),Di=ze):bs(a,i),Ws(i),x&8192){if(ze=i.memoizedState!==null,(i.stateNode.isHidden=ze)&&!st&&(i.mode&1)!==0)for(_t=i,st=i.child;st!==null;){for(ut=_t=st;_t!==null;){switch(ot=_t,Tt=ot.child,ot.tag){case 0:case 11:case 14:case 15:$u(4,ot,ot.return);break;case 1:au(ot,ot.return);var Lt=ot.stateNode;if(typeof Lt.componentWillUnmount=="function"){x=ot,h=ot.return;try{a=x,Lt.props=a.memoizedProps,Lt.state=a.memoizedState,Lt.componentWillUnmount()}catch(jt){Rr(x,h,jt)}}break;case 5:au(ot,ot.return);break;case 22:if(ot.memoizedState!==null){rm(ut);continue}}Tt!==null?(Tt.return=ot,_t=Tt):rm(ut)}st=st.sibling}e:for(st=null,ut=i;;){if(ut.tag===5){if(st===null){st=ut;try{C=ut.stateNode,ze?(A=C.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(de=ut.stateNode,Se=ut.memoizedProps.style,U=Se!=null&&Se.hasOwnProperty("display")?Se.display:null,de.style.display=ee("display",U))}catch(jt){Rr(i,i.return,jt)}}}else if(ut.tag===6){if(st===null)try{ut.stateNode.nodeValue=ze?"":ut.memoizedProps}catch(jt){Rr(i,i.return,jt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===i)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===i)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===i)break e;st===ut&&(st=null),ut=ut.return}st===ut&&(st=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:bs(a,i),Ws(i),x&4&&Zh(i);break;case 21:break;default:bs(a,i),Ws(i)}}function Ws(i){var a=i.flags;if(a&2){try{e:{for(var h=i.return;h!==null;){if(Kh(h)){var x=h;break e}h=h.return}throw Error(n(160))}switch(x.tag){case 5:var C=x.stateNode;x.flags&32&&(Fe(C,""),x.flags&=-33);var A=Qh(i);Kd(i,A,C);break;case 3:case 4:var U=x.stateNode.containerInfo,de=Qh(i);Yd(i,de,U);break;default:throw Error(n(161))}}catch(Se){Rr(i,i.return,Se)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function $g(i,a,h){_t=i,tm(i)}function tm(i,a,h){for(var x=(i.mode&1)!==0;_t!==null;){var C=_t,A=C.child;if(C.tag===22&&x){var U=C.memoizedState!==null||Cc;if(!U){var de=C.alternate,Se=de!==null&&de.memoizedState!==null||Di;de=Cc;var ze=Di;if(Cc=U,(Di=Se)&&!ze)for(_t=C;_t!==null;)U=_t,Se=U.child,U.tag===22&&U.memoizedState!==null?im(C):Se!==null?(Se.return=U,_t=Se):im(C);for(;A!==null;)_t=A,tm(A),A=A.sibling;_t=C,Cc=de,Di=ze}nm(i)}else(C.subtreeFlags&8772)!==0&&A!==null?(A.return=C,_t=A):nm(i)}}function nm(i){for(;_t!==null;){var a=_t;if((a.flags&8772)!==0){var h=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Di||kc(5,a);break;case 1:var x=a.stateNode;if(a.flags&4&&!Di)if(h===null)x.componentDidMount();else{var C=a.elementType===a.type?h.memoizedProps:ys(a.type,h.memoizedProps);x.componentDidUpdate(C,h.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var A=a.updateQueue;A!==null&&ma(a,A,x);break;case 3:var U=a.updateQueue;if(U!==null){if(h=null,a.child!==null)switch(a.child.tag){case 5:h=a.child.stateNode;break;case 1:h=a.child.stateNode}ma(a,U,h)}break;case 5:var de=a.stateNode;if(h===null&&a.flags&4){h=de;var Se=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":Se.autoFocus&&h.focus();break;case"img":Se.src&&(h.src=Se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ze=a.alternate;if(ze!==null){var st=ze.memoizedState;if(st!==null){var ut=st.dehydrated;ut!==null&&sr(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Di||a.flags&512&&Jd(a)}catch(ot){Rr(a,a.return,ot)}}if(a===i){_t=null;break}if(h=a.sibling,h!==null){h.return=a.return,_t=h;break}_t=a.return}}function rm(i){for(;_t!==null;){var a=_t;if(a===i){_t=null;break}var h=a.sibling;if(h!==null){h.return=a.return,_t=h;break}_t=a.return}}function im(i){for(;_t!==null;){var a=_t;try{switch(a.tag){case 0:case 11:case 15:var h=a.return;try{kc(4,a)}catch(Se){Rr(a,h,Se)}break;case 1:var x=a.stateNode;if(typeof x.componentDidMount=="function"){var C=a.return;try{x.componentDidMount()}catch(Se){Rr(a,C,Se)}}var A=a.return;try{Jd(a)}catch(Se){Rr(a,A,Se)}break;case 5:var U=a.return;try{Jd(a)}catch(Se){Rr(a,U,Se)}}}catch(Se){Rr(a,a.return,Se)}if(a===i){_t=null;break}var de=a.sibling;if(de!==null){de.return=a.return,_t=de;break}_t=a.return}}var Gg=Math.ceil,Tc=J.ReactCurrentDispatcher,Qd=J.ReactCurrentOwner,Jo=J.ReactCurrentBatchConfig,Rn=0,di=null,Yr=null,ki=0,Eo=0,lu=To(0),ni=0,Gu=null,Ll=0,Ic=0,Xd=0,Ju=null,uo=null,Zd=0,uu=1/0,va=null,Ac=!1,ef=null,Za=null,_c=!1,el=null,Ec=0,Yu=0,tf=null,Lc=-1,Pc=0;function eo(){return(Rn&6)!==0?or():Lc!==-1?Lc:Lc=or()}function tl(i){return(i.mode&1)===0?1:(Rn&2)!==0&&ki!==0?ki&-ki:Xn.transition!==null?(Pc===0&&(Pc=Me()),Pc):(i=dt,i!==0||(i=window.event,i=i===void 0?16:Co(i.type)),i)}function Ns(i,a,h,x){if(50<Yu)throw Yu=0,tf=null,Error(n(185));ct(i,h,x),((Rn&2)===0||i!==di)&&(i===di&&((Rn&2)===0&&(Ic|=h),ni===4&&nl(i,ki)),co(i,x),h===1&&Rn===0&&(a.mode&1)===0&&(uu=or()+500,Il&&L()))}function co(i,a){var h=i.callbackNode;Xr(i,a);var x=Qr(i,i===di?ki:0);if(x===0)h!==null&&Kr(h),i.callbackNode=null,i.callbackPriority=0;else if(a=x&-x,i.callbackPriority!==a){if(h!=null&&Kr(h),a===1)i.tag===0?k(sm.bind(null,i)):y(sm.bind(null,i)),Ed(function(){(Rn&6)===0&&L()}),h=null;else{switch(an(x)){case 1:h=yo;break;case 4:h=Ks;break;case 16:h=Es;break;case 536870912:h=ka;break;default:h=Es}h=mm(h,om.bind(null,i))}i.callbackPriority=a,i.callbackNode=h}}function om(i,a){if(Lc=-1,Pc=0,(Rn&6)!==0)throw Error(n(327));var h=i.callbackNode;if(cu()&&i.callbackNode!==h)return null;var x=Qr(i,i===di?ki:0);if(x===0)return null;if((x&30)!==0||(x&i.expiredLanes)!==0||a)a=Mc(i,x);else{a=x;var C=Rn;Rn|=2;var A=lm();(di!==i||ki!==a)&&(va=null,uu=or()+500,Ml(i,a));do try{Kg();break}catch(de){am(i,de)}while(!0);ti(),Tc.current=A,Rn=C,Yr!==null?a=0:(di=null,ki=0,a=ni)}if(a!==0){if(a===2&&(C=oe(i),C!==0&&(x=C,a=nf(i,C))),a===1)throw h=Gu,Ml(i,0),nl(i,x),co(i,or()),h;if(a===6)nl(i,x);else{if(C=i.current.alternate,(x&30)===0&&!Jg(C)&&(a=Mc(i,x),a===2&&(A=oe(i),A!==0&&(x=A,a=nf(i,A))),a===1))throw h=Gu,Ml(i,0),nl(i,x),co(i,or()),h;switch(i.finishedWork=C,i.finishedLanes=x,a){case 0:case 1:throw Error(n(345));case 2:jl(i,uo,va);break;case 3:if(nl(i,x),(x&130023424)===x&&(a=Zd+500-or(),10<a)){if(Qr(i,0)!==0)break;if(C=i.suspendedLanes,(C&x)!==x){eo(),i.pingedLanes|=i.suspendedLanes&C;break}i.timeoutHandle=Du(jl.bind(null,i,uo,va),a);break}jl(i,uo,va);break;case 4:if(nl(i,x),(x&4194240)===x)break;for(a=i.eventTimes,C=-1;0<x;){var U=31-ri(x);A=1<<U,U=a[U],U>C&&(C=U),x&=~A}if(x=C,x=or()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*Gg(x/1960))-x,10<x){i.timeoutHandle=Du(jl.bind(null,i,uo,va),x);break}jl(i,uo,va);break;case 5:jl(i,uo,va);break;default:throw Error(n(329))}}}return co(i,or()),i.callbackNode===h?om.bind(null,i):null}function nf(i,a){var h=Ju;return i.current.memoizedState.isDehydrated&&(Ml(i,a).flags|=256),i=Mc(i,a),i!==2&&(a=uo,uo=h,a!==null&&rf(a)),i}function rf(i){uo===null?uo=i:uo.push.apply(uo,i)}function Jg(i){for(var a=i;;){if(a.flags&16384){var h=a.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var x=0;x<h.length;x++){var C=h[x],A=C.getSnapshot;C=C.value;try{if(!Dn(A(),C))return!1}catch{return!1}}}if(h=a.child,a.subtreeFlags&16384&&h!==null)h.return=a,a=h;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function nl(i,a){for(a&=~Xd,a&=~Ic,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var h=31-ri(a),x=1<<h;i[h]=-1,a&=~x}}function sm(i){if((Rn&6)!==0)throw Error(n(327));cu();var a=Qr(i,0);if((a&1)===0)return co(i,or()),null;var h=Mc(i,a);if(i.tag!==0&&h===2){var x=oe(i);x!==0&&(a=x,h=nf(i,x))}if(h===1)throw h=Gu,Ml(i,0),nl(i,a),co(i,or()),h;if(h===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,jl(i,uo,va),co(i,or()),null}function of(i,a){var h=Rn;Rn|=1;try{return i(a)}finally{Rn=h,Rn===0&&(uu=or()+500,Il&&L())}}function Pl(i){el!==null&&el.tag===0&&(Rn&6)===0&&cu();var a=Rn;Rn|=1;var h=Jo.transition,x=dt;try{if(Jo.transition=null,dt=1,i)return i()}finally{dt=x,Jo.transition=h,Rn=a,(Rn&6)===0&&L()}}function sf(){Eo=lu.current,Jn(lu)}function Ml(i,a){i.finishedWork=null,i.finishedLanes=0;var h=i.timeoutHandle;if(h!==-1&&(i.timeoutHandle=-1,dc(h)),Yr!==null)for(h=Yr.return;h!==null;){var x=h;switch(Ce(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Yl();break;case 3:Wo(),Jn(Li),Jn(ei),qu();break;case 5:Hu(x);break;case 4:Wo();break;case 13:Jn(lr);break;case 19:Jn(lr);break;case 10:Mi(x.type._context);break;case 22:case 23:sf()}h=h.return}if(di=i,Yr=i=rl(i.current,null),ki=Eo=a,ni=0,Gu=null,Xd=Ic=Ll=0,uo=Ju=null,Yi!==null){for(a=0;a<Yi.length;a++)if(h=Yi[a],x=h.interleaved,x!==null){h.interleaved=null;var C=x.next,A=h.pending;if(A!==null){var U=A.next;A.next=C,x.next=U}h.pending=x}Yi=null}return i}function am(i,a){do{var h=Yr;try{if(ti(),Ql.current=wc,Ya){for(var x=dr.memoizedState;x!==null;){var C=x.queue;C!==null&&(C.pending=null),x=x.next}Ya=!1}if($o=0,_r=Dr=dr=null,vs=!1,Ka=0,Qd.current=null,h===null||h.return===null){ni=1,Gu=a,Yr=null;break}e:{var A=i,U=h.return,de=h,Se=a;if(a=ki,de.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var ze=Se,st=de,ut=st.tag;if((st.mode&1)===0&&(ut===0||ut===11||ut===15)){var ot=st.alternate;ot?(st.updateQueue=ot.updateQueue,st.memoizedState=ot.memoizedState,st.lanes=ot.lanes):(st.updateQueue=null,st.memoizedState=null)}var Tt=Ph(U);if(Tt!==null){Tt.flags&=-257,Mh(Tt,U,de,A,a),Tt.mode&1&&Lh(A,ze,a),a=Tt,Se=ze;var Lt=a.updateQueue;if(Lt===null){var jt=new Set;jt.add(Se),a.updateQueue=jt}else Lt.add(Se);break e}else{if((a&1)===0){Lh(A,ze,a),af();break e}Se=Error(n(426))}}else if(Ye&&de.mode&1){var qr=Ph(U);if(qr!==null){(qr.flags&65536)===0&&(qr.flags|=256),Mh(qr,U,de,A,a),Yn(su(Se,de));break e}}A=Se=su(Se,de),ni!==4&&(ni=2),Ju===null?Ju=[A]:Ju.push(A),A=U;do{switch(A.tag){case 3:A.flags|=65536,a&=-a,A.lanes|=a;var Ue=_h(A,Se,a);ao(A,Ue);break e;case 1:de=Se;var Ae=A.type,Ve=A.stateNode;if((A.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Ve!==null&&typeof Ve.componentDidCatch=="function"&&(Za===null||!Za.has(Ve)))){A.flags|=65536,a&=-a,A.lanes|=a;var ft=Eh(A,de,a);ao(A,ft);break e}}A=A.return}while(A!==null)}cm(h)}catch(Rt){a=Rt,Yr===h&&h!==null&&(Yr=h=h.return);continue}break}while(!0)}function lm(){var i=Tc.current;return Tc.current=wc,i===null?wc:i}function af(){(ni===0||ni===3||ni===2)&&(ni=4),di===null||(Ll&268435455)===0&&(Ic&268435455)===0||nl(di,ki)}function Mc(i,a){var h=Rn;Rn|=2;var x=lm();(di!==i||ki!==a)&&(va=null,Ml(i,a));do try{Yg();break}catch(C){am(i,C)}while(!0);if(ti(),Rn=h,Tc.current=x,Yr!==null)throw Error(n(261));return di=null,ki=0,ni}function Yg(){for(;Yr!==null;)um(Yr)}function Kg(){for(;Yr!==null&&!_s();)um(Yr)}function um(i){var a=hm(i.alternate,i,Eo);i.memoizedProps=i.pendingProps,a===null?cm(i):Yr=a,Qd.current=null}function cm(i){var a=i;do{var h=a.alternate;if(i=a.return,(a.flags&32768)===0){if(h=qg(h,a,Eo),h!==null){Yr=h;return}}else{if(h=Og(h,a),h!==null){h.flags&=32767,Yr=h;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ni=6,Yr=null;return}}if(a=a.sibling,a!==null){Yr=a;return}Yr=a=i}while(a!==null);ni===0&&(ni=5)}function jl(i,a,h){var x=dt,C=Jo.transition;try{Jo.transition=null,dt=1,Qg(i,a,h,x)}finally{Jo.transition=C,dt=x}return null}function Qg(i,a,h,x){do cu();while(el!==null);if((Rn&6)!==0)throw Error(n(327));h=i.finishedWork;var C=i.finishedLanes;if(h===null)return null;if(i.finishedWork=null,i.finishedLanes=0,h===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var A=h.lanes|h.childLanes;if(Ct(i,A),i===di&&(Yr=di=null,ki=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||_c||(_c=!0,mm(Es,function(){return cu(),null})),A=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||A){A=Jo.transition,Jo.transition=null;var U=dt;dt=1;var de=Rn;Rn|=4,Qd.current=null,Wg(i,h),em(h,i),ia(ua),$r=!!kl,ua=kl=null,i.current=h,$g(h),Zo(),Rn=de,dt=U,Jo.transition=A}else i.current=h;if(_c&&(_c=!1,el=i,Ec=C),A=i.pendingLanes,A===0&&(Za=null),ts(h.stateNode),co(i,or()),a!==null)for(x=i.onRecoverableError,h=0;h<a.length;h++)C=a[h],x(C.value,{componentStack:C.stack,digest:C.digest});if(Ac)throw Ac=!1,i=ef,ef=null,i;return(Ec&1)!==0&&i.tag!==0&&cu(),A=i.pendingLanes,(A&1)!==0?i===tf?Yu++:(Yu=0,tf=i):Yu=0,L(),null}function cu(){if(el!==null){var i=an(Ec),a=Jo.transition,h=dt;try{if(Jo.transition=null,dt=16>i?16:i,el===null)var x=!1;else{if(i=el,el=null,Ec=0,(Rn&6)!==0)throw Error(n(331));var C=Rn;for(Rn|=4,_t=i.current;_t!==null;){var A=_t,U=A.child;if((_t.flags&16)!==0){var de=A.deletions;if(de!==null){for(var Se=0;Se<de.length;Se++){var ze=de[Se];for(_t=ze;_t!==null;){var st=_t;switch(st.tag){case 0:case 11:case 15:$u(8,st,A)}var ut=st.child;if(ut!==null)ut.return=st,_t=ut;else for(;_t!==null;){st=_t;var ot=st.sibling,Tt=st.return;if(Yh(st),st===ze){_t=null;break}if(ot!==null){ot.return=Tt,_t=ot;break}_t=Tt}}}var Lt=A.alternate;if(Lt!==null){var jt=Lt.child;if(jt!==null){Lt.child=null;do{var qr=jt.sibling;jt.sibling=null,jt=qr}while(jt!==null)}}_t=A}}if((A.subtreeFlags&2064)!==0&&U!==null)U.return=A,_t=U;else e:for(;_t!==null;){if(A=_t,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:$u(9,A,A.return)}var Ue=A.sibling;if(Ue!==null){Ue.return=A.return,_t=Ue;break e}_t=A.return}}var Ae=i.current;for(_t=Ae;_t!==null;){U=_t;var Ve=U.child;if((U.subtreeFlags&2064)!==0&&Ve!==null)Ve.return=U,_t=Ve;else e:for(U=Ae;_t!==null;){if(de=_t,(de.flags&2048)!==0)try{switch(de.tag){case 0:case 11:case 15:kc(9,de)}}catch(Rt){Rr(de,de.return,Rt)}if(de===U){_t=null;break e}var ft=de.sibling;if(ft!==null){ft.return=de.return,_t=ft;break e}_t=de.return}}if(Rn=C,L(),vi&&typeof vi.onPostCommitFiberRoot=="function")try{vi.onPostCommitFiberRoot(es,i)}catch{}x=!0}return x}finally{dt=h,Jo.transition=a}}return!1}function dm(i,a,h){a=su(h,a),a=_h(i,a,1),i=so(i,a,1),a=eo(),i!==null&&(ct(i,1,a),co(i,a))}function Rr(i,a,h){if(i.tag===3)dm(i,i,h);else for(;a!==null;){if(a.tag===3){dm(a,i,h);break}else if(a.tag===1){var x=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Za===null||!Za.has(x))){i=su(h,i),i=Eh(a,i,1),a=so(a,i,1),i=eo(),a!==null&&(ct(a,1,i),co(a,i));break}}a=a.return}}function Xg(i,a,h){var x=i.pingCache;x!==null&&x.delete(a),a=eo(),i.pingedLanes|=i.suspendedLanes&h,di===i&&(ki&h)===h&&(ni===4||ni===3&&(ki&130023424)===ki&&500>or()-Zd?Ml(i,0):Xd|=h),co(i,a)}function fm(i,a){a===0&&((i.mode&1)===0?a=1:(a=wo,wo<<=1,(wo&130023424)===0&&(wo=4194304)));var h=eo();i=Vn(i,a),i!==null&&(ct(i,a,h),co(i,h))}function Zg(i){var a=i.memoizedState,h=0;a!==null&&(h=a.retryLane),fm(i,h)}function e1(i,a){var h=0;switch(i.tag){case 13:var x=i.stateNode,C=i.memoizedState;C!==null&&(h=C.retryLane);break;case 19:x=i.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(a),fm(i,h)}var hm;hm=function(i,a,h){if(i!==null)if(i.memoizedProps!==a.pendingProps||Li.current)lo=!0;else{if((i.lanes&h)===0&&(a.flags&128)===0)return lo=!1,Vg(i,a,h);lo=(i.flags&131072)!==0}else lo=!1,Ye&&(a.flags&1048576)!==0&&Xe(a,z,a.index);switch(a.lanes=0,a.tag){case 2:var x=a.type;Sc(i,a),i=a.pendingProps;var C=Wa(a,ei.current);vr(a,h),C=Al(null,a,x,i,C,h);var A=Go();return a.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Pi(x)?(A=!0,fa(a)):A=!1,a.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,Kl(a),C.updater=bc,a.stateNode=C,C._reactInternals=a,Fd(a,x,i,h),a=Vd(null,a,x,!0,A,h)):(a.tag=0,Ye&&A&&We(a),Zi(null,a,C,h),a=a.child),a;case 16:x=a.elementType;e:{switch(Sc(i,a),i=a.pendingProps,C=x._init,x=C(x._payload),a.type=x,C=a.tag=n1(x),i=ys(x,i),C){case 0:a=Hd(null,a,x,i,h);break e;case 1:a=Uh(null,a,x,i,h);break e;case 11:a=jh(null,a,x,i,h);break e;case 14:a=Dh(null,a,x,ys(x.type,i),h);break e}throw Error(n(306,x,""))}return a;case 0:return x=a.type,C=a.pendingProps,C=a.elementType===x?C:ys(x,C),Hd(i,a,x,C,h);case 1:return x=a.type,C=a.pendingProps,C=a.elementType===x?C:ys(x,C),Uh(i,a,x,C,h);case 3:e:{if(Hh(a),i===null)throw Error(n(387));x=a.pendingProps,A=a.memoizedState,C=A.element,Uu(i,a),ps(a,x,null,h);var U=a.memoizedState;if(x=U.element,A.isDehydrated)if(A={element:x,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},a.updateQueue.baseState=A,a.memoizedState=A,a.flags&256){C=su(Error(n(423)),a),a=Vh(i,a,x,h,C);break e}else if(x!==C){C=su(Error(n(424)),a),a=Vh(i,a,x,h,C);break e}else for(Ke=Ni(a.stateNode.containerInfo.firstChild),ke=a,Ye=!0,Qe=null,h=Hn(a,null,x,h),a.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(dn(),x===C){a=ga(i,a,h);break e}Zi(i,a,x,h)}a=a.child}return a;case 5:return pc(a),i===null&&xt(a),x=a.type,C=a.pendingProps,A=i!==null?i.memoizedProps:null,U=C.children,ju(x,C)?U=null:A!==null&&ju(x,A)&&(a.flags|=32),Bh(i,a),Zi(i,a,U,h),a.child;case 6:return i===null&&xt(a),null;case 13:return qh(i,a,h);case 4:return Ja(a,a.stateNode.containerInfo),x=a.pendingProps,i===null?a.child=Ur(a,null,x,h):Zi(i,a,x,h),a.child;case 11:return x=a.type,C=a.pendingProps,C=a.elementType===x?C:ys(x,C),jh(i,a,x,C,h);case 7:return Zi(i,a,a.pendingProps,h),a.child;case 8:return Zi(i,a,a.pendingProps.children,h),a.child;case 12:return Zi(i,a,a.pendingProps.children,h),a.child;case 10:e:{if(x=a.type._context,C=a.pendingProps,A=a.memoizedProps,U=C.value,Qn(ui,x._currentValue),x._currentValue=U,A!==null)if(Dn(A.value,U)){if(A.children===C.children&&!Li.current){a=ga(i,a,h);break e}}else for(A=a.child,A!==null&&(A.return=a);A!==null;){var de=A.dependencies;if(de!==null){U=A.child;for(var Se=de.firstContext;Se!==null;){if(Se.context===x){if(A.tag===1){Se=oo(-1,h&-h),Se.tag=2;var ze=A.updateQueue;if(ze!==null){ze=ze.shared;var st=ze.pending;st===null?Se.next=Se:(Se.next=st.next,st.next=Se),ze.pending=Se}}A.lanes|=h,Se=A.alternate,Se!==null&&(Se.lanes|=h),io(A.return,h,a),de.lanes|=h;break}Se=Se.next}}else if(A.tag===10)U=A.type===a.type?null:A.child;else if(A.tag===18){if(U=A.return,U===null)throw Error(n(341));U.lanes|=h,de=U.alternate,de!==null&&(de.lanes|=h),io(U,h,a),U=A.sibling}else U=A.child;if(U!==null)U.return=A;else for(U=A;U!==null;){if(U===a){U=null;break}if(A=U.sibling,A!==null){A.return=U.return,U=A;break}U=U.return}A=U}Zi(i,a,C.children,h),a=a.child}return a;case 9:return C=a.type,x=a.pendingProps.children,vr(a,h),C=jr(C),x=x(C),a.flags|=1,Zi(i,a,x,h),a.child;case 14:return x=a.type,C=ys(x,a.pendingProps),C=ys(x.type,C),Dh(i,a,x,C,h);case 15:return Rh(i,a,a.type,a.pendingProps,h);case 17:return x=a.type,C=a.pendingProps,C=a.elementType===x?C:ys(x,C),Sc(i,a),a.tag=1,Pi(x)?(i=!0,fa(a)):i=!1,vr(a,h),Ih(a,x,C),Fd(a,x,C,h),Vd(null,a,x,!0,i,h);case 19:return zh(i,a,h);case 22:return Fh(i,a,h)}throw Error(n(156,a.tag))};function mm(i,a){return qi(i,a)}function t1(i,a,h,x){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yo(i,a,h,x){return new t1(i,a,h,x)}function lf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function n1(i){if(typeof i=="function")return lf(i)?1:0;if(i!=null){if(i=i.$$typeof,i===D)return 11;if(i===ge)return 14}return 2}function rl(i,a){var h=i.alternate;return h===null?(h=Yo(i.tag,a,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=a,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&14680064,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,a=i.dependencies,h.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h}function jc(i,a,h,x,C,A){var U=2;if(x=i,typeof i=="function")lf(i)&&(U=1);else if(typeof i=="string")U=5;else e:switch(i){case ne:return Dl(h.children,C,A,a);case X:U=8,C|=8;break;case $:return i=Yo(12,h,a,C|2),i.elementType=$,i.lanes=A,i;case H:return i=Yo(13,h,a,C),i.elementType=H,i.lanes=A,i;case O:return i=Yo(19,h,a,C),i.elementType=O,i.lanes=A,i;case ie:return Dc(h,C,A,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case he:U=10;break e;case R:U=9;break e;case D:U=11;break e;case ge:U=14;break e;case xe:U=16,x=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=Yo(U,h,a,C),a.elementType=i,a.type=x,a.lanes=A,a}function Dl(i,a,h,x){return i=Yo(7,i,x,a),i.lanes=h,i}function Dc(i,a,h,x){return i=Yo(22,i,x,a),i.elementType=ie,i.lanes=h,i.stateNode={isHidden:!1},i}function uf(i,a,h){return i=Yo(6,i,null,a),i.lanes=h,i}function cf(i,a,h){return a=Yo(4,i.children!==null?i.children:[],i.key,a),a.lanes=h,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function r1(i,a,h,x,C){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rt(0),this.expirationTimes=rt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rt(0),this.identifierPrefix=x,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function df(i,a,h,x,C,A,U,de,Se){return i=new r1(i,a,h,de,Se),a===1?(a=1,A===!0&&(a|=8)):a=0,A=Yo(3,null,null,a),i.current=A,A.stateNode=i,A.memoizedState={element:x,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kl(A),i}function i1(i,a,h){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:x==null?null:""+x,children:i,containerInfo:a,implementation:h}}function pm(i){if(!i)return Vs;i=i._reactInternals;e:{if(Er(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Pi(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var h=i.type;if(Pi(h))return Bu(i,h,a)}return a}function gm(i,a,h,x,C,A,U,de,Se){return i=df(h,x,!0,i,C,A,U,de,Se),i.context=pm(null),h=i.current,x=eo(),C=tl(h),A=oo(x,C),A.callback=a??null,so(h,A,C),i.current.lanes=C,ct(i,C,x),co(i,x),i}function Rc(i,a,h,x){var C=a.current,A=eo(),U=tl(C);return h=pm(h),a.context===null?a.context=h:a.pendingContext=h,a=oo(A,U),a.payload={element:i},x=x===void 0?null:x,x!==null&&(a.callback=x),i=so(C,a,U),i!==null&&(Ns(i,C,U,A),ha(i,C,U)),U}function Fc(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function vm(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<a?h:a}}function ff(i,a){vm(i,a),(i=i.alternate)&&vm(i,a)}function o1(){return null}var xm=typeof reportError=="function"?reportError:function(i){console.error(i)};function hf(i){this._internalRoot=i}Bc.prototype.render=hf.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));Rc(i,a,null,null)},Bc.prototype.unmount=hf.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Pl(function(){Rc(null,i,null,null)}),a[li]=null}};function Bc(i){this._internalRoot=i}Bc.prototype.unstable_scheduleHydration=function(i){if(i){var a=zn();i={blockedOn:null,target:i,priority:a};for(var h=0;h<kr.length&&a!==0&&a<kr[h].priority;h++);kr.splice(h,0,i),h===0&&yt(i)}};function mf(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Uc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ym(){}function s1(i,a,h,x,C){if(C){if(typeof x=="function"){var A=x;x=function(){var ze=Fc(U);A.call(ze)}}var U=gm(a,x,i,0,null,!1,!1,"",ym);return i._reactRootContainer=U,i[li]=U.current,aa(i.nodeType===8?i.parentNode:i),Pl(),U}for(;C=i.lastChild;)i.removeChild(C);if(typeof x=="function"){var de=x;x=function(){var ze=Fc(Se);de.call(ze)}}var Se=df(i,0,!1,null,null,!1,!1,"",ym);return i._reactRootContainer=Se,i[li]=Se.current,aa(i.nodeType===8?i.parentNode:i),Pl(function(){Rc(a,Se,h,x)}),Se}function Hc(i,a,h,x,C){var A=h._reactRootContainer;if(A){var U=A;if(typeof C=="function"){var de=C;C=function(){var Se=Fc(U);de.call(Se)}}Rc(a,U,i,C)}else U=s1(h,a,i,C,x);return Fc(U)}Jt=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var h=Do(a.pendingLanes);h!==0&&(Zt(a,h|1),co(a,or()),(Rn&6)===0&&(uu=or()+500,L()))}break;case 13:Pl(function(){var x=Vn(i,1);if(x!==null){var C=eo();Ns(x,i,1,C)}}),ff(i,1)}},An=function(i){if(i.tag===13){var a=Vn(i,134217728);if(a!==null){var h=eo();Ns(a,i,134217728,h)}ff(i,134217728)}},rn=function(i){if(i.tag===13){var a=tl(i),h=Vn(i,a);if(h!==null){var x=eo();Ns(h,i,a,x)}ff(i,a)}},zn=function(){return dt},jn=function(i,a){var h=dt;try{return dt=i,a()}finally{dt=h}},Xt=function(i,a,h){switch(a){case"input":if(gt(i,h),a=h.name,h.type==="radio"&&a!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<h.length;a++){var x=h[a];if(x!==i&&x.form===i.form){var C=Tl(x);if(!C)throw Error(n(90));Ge(x),gt(x,C)}}}break;case"textarea":Mt(i,h);break;case"select":a=h.value,a!=null&&nt(i,!!h.multiple,a,!1)}},In=of,sn=Pl;var a1={usingClientEntryPoint:!1,Events:[za,ca,Tl,mt,zt,of]},Ku={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l1={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=hr(i),i===null?null:i.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||o1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{es=Vc.inject(l1),vi=Vc}catch{}}return fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1,fo.createPortal=function(i,a){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(a))throw Error(n(200));return i1(i,a,null,h)},fo.createRoot=function(i,a){if(!mf(i))throw Error(n(299));var h=!1,x="",C=xm;return a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=df(i,1,!1,null,null,h,!1,x,C),i[li]=a.current,aa(i.nodeType===8?i.parentNode:i),new hf(a)},fo.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=hr(a),i=i===null?null:i.stateNode,i},fo.flushSync=function(i){return Pl(i)},fo.hydrate=function(i,a,h){if(!Uc(a))throw Error(n(200));return Hc(null,i,a,!0,h)},fo.hydrateRoot=function(i,a,h){if(!mf(i))throw Error(n(405));var x=h!=null&&h.hydratedSources||null,C=!1,A="",U=xm;if(h!=null&&(h.unstable_strictMode===!0&&(C=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onRecoverableError!==void 0&&(U=h.onRecoverableError)),a=gm(a,null,i,1,h??null,C,!1,A,U),i[li]=a.current,aa(i),x)for(i=0;i<x.length;i++)h=x[i],C=h._getVersion,C=C(h._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[h,C]:a.mutableSourceEagerHydrationData.push(h,C);return new Bc(a)},fo.render=function(i,a,h){if(!Uc(a))throw Error(n(200));return Hc(null,i,a,!1,h)},fo.unmountComponentAtNode=function(i){if(!Uc(i))throw Error(n(40));return i._reactRootContainer?(Pl(function(){Hc(null,null,i,!1,function(){i._reactRootContainer=null,i[li]=null})}),!0):!1},fo.unstable_batchedUpdates=of,fo.unstable_renderSubtreeIntoContainer=function(i,a,h,x){if(!Uc(h))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return Hc(i,a,h,!1,x)},fo.version="18.3.1-next-f1338f8080-20240426",fo}var Im;function g1(){if(Im)return vf.exports;Im=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vf.exports=p1(),vf.exports}var Am;function v1(){if(Am)return qc;Am=1;var t=g1();return qc.createRoot=t.createRoot,qc.hydrateRoot=t.hydrateRoot,qc}var x1=v1();const y1=S0(x1);var Pe=sh();const cl=S0(Pe);var xn=(t=>(t.NEW="New",t.APPOINTMENT_BOOKED="Appointment Booked",t.QUOTED="Quoted",t.FOLLOW_UP_1="Follow Up 1",t.FOLLOW_UP_2="Follow Up 2",t.WON="Won",t.LOST="Lost",t.SURVEY="Survey",t.READY_FOR_PRODUCTION="Ready for Production",t))(xn||{});const Ts=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),Qo=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),ah=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),mo=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),ad=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),w1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6h1.5m-1.5 3h1.5m-1.5 3h1.5M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})}),lh=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),xd=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),C0=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.512 2.72a9.094 9.094 0 0 1-3.741-.479 3 3 0 0 1 4.682-2.72M13.5 3.75a9.094 9.094 0 0 1 9 0M4.5 3.75a9.094 9.094 0 0 0 9 0m-9 0a3 3 0 0 0 0 5.636m9-5.636a3 3 0 0 1 0 5.636m0 0a3 3 0 0 1-9 0"})}),Lf=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.495-2.495a1.5 1.5 0 0 1 2.122 0l2.121 2.121a1.5 1.5 0 0 1 0 2.122l-2.495 2.495M3 9l9-9 4.5 4.5-3 3-6-6-4.5 4.5 3 3"})}),Pf=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),k0=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),sc=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.512 2.72a9.094 9.094 0 0 1-3.741-.479 3 3 0 0 1 4.682-2.72M13.5 3.75a9.094 9.094 0 0 1 9 0M4.5 3.75a9.094 9.094 0 0 0 9 0m-9 0a3 3 0 0 0 0 5.636m9-5.636a3 3 0 0 1 0 5.636m0 0a3 3 0 0 1-9 0"})}),b1=sc,wa=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18"})}),N1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.455.09-.934.09-1.425v-2.287a6.75 6.75 0 016.75-6.75h2.25l.254-.017A2.373 2.373 0 0021 9.75v2.25zM12.75 6a3.75 3.75 0 00-3.75-3.75S6 3 6 6c0 1.865 1.343 3.422 3.146 3.684A6.75 6.75 0 0112.75 6z"})}),S1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})}),C1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9A2.25 2.25 0 0 0 4.5 18.75Z"})}),yu=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),uh=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),hl=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),Mf=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),Iu=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 3.75H6.168a2.25 2.25 0 0 0-2.18 2.583l.732 7.321a2.25 2.25 0 0 0 2.179 2.179h9.581a2.25 2.25 0 0 0 2.179-2.179l.732-7.321a2.25 2.25 0 0 0-2.18-2.583H15M9 3.75a3 3 0 0 1 6 0M9 3.75a3 3 0 0 0 6 0"})}),k1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),T1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),yd=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-1.025 1.11-1.115l.612-.162a2.25 2.25 0 0 1 1.865 1.865l.162.612c.095.55.572 1.025 1.11 1.115l.612.162a2.25 2.25 0 0 1 1.865 1.865l.162.612c.095.55.572 1.025 1.11 1.115l.612.162a2.25 2.25 0 0 1 0 3.482l-.612.162c-.55.09-.995.55-1.11 1.115l-.162.612a2.25 2.25 0 0 1-1.865 1.865l-.612.162c-.55.095-1.025.572-1.11 1.115l-.162.612a2.25 2.25 0 0 1-3.482 0l-.162-.612c-.09-.542-.56-1.025-1.11-1.115l-.612-.162a2.25 2.25 0 0 1-1.865-1.865l-.162-.612c-.095-.55-.572-1.025-1.11-1.115l-.612-.162a2.25 2.25 0 0 1 0-3.482l.612-.162c.55-.09.995.55 1.11-1.115l.162-.612a2.25 2.25 0 0 1 1.865-1.865l.612-.162Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"})]}),I1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286Zm0 13.036h.008v.008h-.008v-.008Z"})}),ld=t=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("rect",{x:"4",y:"3",width:"16",height:"18",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),s.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12",stroke:"currentColor",strokeWidth:"1.5"}),s.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"12",stroke:"currentColor",strokeWidth:"1"}),s.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21",stroke:"currentColor",strokeWidth:"1"}),s.jsx("line",{x1:"4",y1:"7.5",x2:"20",y2:"7.5",stroke:"currentColor",strokeWidth:"1"}),s.jsx("line",{x1:"4",y1:"16.5",x2:"20",y2:"16.5",stroke:"currentColor",strokeWidth:"1"})]}),ud=t=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("rect",{x:"4",y:"3",width:"16",height:"18",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),s.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"21",stroke:"currentColor",strokeWidth:"1.5"}),s.jsx("path",{d:"M12 18L5 15",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeDasharray:"2 2"}),s.jsx("path",{d:"M12 18L19 15",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeDasharray:"2 2"})]}),cd=t=>s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("rect",{x:"5",y:"3",width:"14",height:"18",rx:"1",stroke:"currentColor",strokeWidth:"1.5"}),s.jsx("rect",{x:"8",y:"6",width:"8",height:"5",rx:"0.5",stroke:"currentColor",strokeWidth:"1"}),s.jsx("circle",{cx:"16",cy:"12",r:"1",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.5"})]}),A1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-6.364-.386 1.591-1.591M3 12h2.25m.386-6.364 1.591 1.591M12 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"})}),_1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25c0 5.385 4.365 9.75 9.75 9.75 2.833 0 5.424-.962 7.5-2.548Z"})}),T0=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),jf=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),E1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"})}),I0=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678a1.5 1.5 0 0 1 1.242 1.242C21.768 7.545 22 10.245 22 13.5c0 3.255-.232 5.955-.678 8.583a1.5 1.5 0 0 1-1.242 1.242C17.455 23.768 14.755 24 12 24c-2.755 0-5.455-.232-8.083-.678a1.5 1.5 0 0 1-1.242-1.242C2.232 19.455 2 16.755 2 13.5c0-3.255.232-5.955.678-8.583a1.5 1.5 0 0 1 1.242-1.242C4.545 3.232 7.245 3 12 3Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 8.25h12M8.25 12h7.5M10.5 15.75h3"})]}),L1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9V9.75a4.5 4.5 0 0 1 9 0v9ZM18 9.75a2.25 2.25 0 0 0-2.25-2.25H8.25A2.25 2.25 0 0 0 6 9.75m12 9h2.25m-16.5 0H3.75m9-13.5V3.75M9 6.75h6"})}),P1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75c-.621 0-1.125-.504-1.125-1.125V17.25m12 0v-3.375c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v3.375m12 0h-12M15.75 6.75v-3.375c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v3.375m12 0h-12"})}),dd=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M9 12.75h4.5m-4.5 0a9 9 0 1 1 18 0 9 9 0 0 1-18 0Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 0 1-2.25 2.25h-1.5a2.25 2.25 0 0 1-2.25-2.25v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75"})]}),A0=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),M1=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.776 48.776 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})]}),j1=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})]}),ic=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125Z"})}),D1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),R1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),F1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})}),Df=t=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9V18a2.25 2.25 0 0 1-2.25 2.25H4.5A2.25 2.25 0 0 1 2.25 18V9m19.5 0a2.25 2.25 0 0 0-2.25-2.25H4.5A2.25 2.25 0 0 0 2.25 9m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 11.16a2.25 2.25 0 0 1-1.07-1.916V9"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})]}),B1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})}),U1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),fd=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m9.375 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5a1.125 1.125 0 0 1-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5Z"})}),_m=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),H1=t=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})}),kt=({label:t,...e})=>{const r=s.jsx("input",{...e,className:`w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 rounded-md focus:ring-blue-500 focus:border-blue-500 transition-colors ${e.className||""}`});return t?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),s.jsx("div",{className:"mt-1",children:r})]}):r},mu=t=>s.jsx("textarea",{...t,className:`w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 rounded-md focus:ring-blue-500 focus:border-blue-500 transition-colors ${t.className||""}`}),Nn=({label:t,...e})=>{const r=s.jsx("select",{...e,className:`w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-700 ${e.className||""}`,children:e.children});return t?s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),s.jsx("div",{className:"mt-1",children:r})]}):r},wt=({variant:t="primary",size:e="md",children:n,icon:r,...o})=>{const l="flex items-center justify-center font-semibold rounded-lg shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",u={lg:"px-6 py-3 text-base gap-3",md:"px-4 py-2 text-sm gap-2",sm:"p-2 text-sm"},f={primary:"bg-blue-600 text-white hover:bg-blue-700 disabled:bg-blue-400 dark:disabled:bg-blue-800",secondary:"bg-white dark:bg-gray-700 text-stone-700 dark:text-stone-200 border border-stone-300 dark:border-gray-600 hover:bg-stone-50 dark:hover:bg-gray-600",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-red-400"},p=n?u[e]:n?"":"p-2";return s.jsxs("button",{...o,className:`${l} ${f[t]} ${p} ${o.className||""}`,children:[r&&s.jsx(r,{className:n?"w-5 h-5":"w-4 h-4"}),n]})},wd=({status:t})=>{if(!t)return s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"-"});const e=t.toLowerCase();let n="bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";return e.includes("won")||e.includes("complete")?n="bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":e.includes("lost")?n="bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":e.includes("follow up")?n="bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300":e.includes("quoted")||e.includes("booked")?n="bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300":e.includes("survey")?n="bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300":e.includes("production")?n="bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300":e.includes("hold")&&(n="bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"),s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n}`,children:t})},Lo=({title:t,children:e,isHighlighted:n=!1})=>{const r=n?"bg-blue-50 dark:bg-blue-900/30":"";return s.jsxs("div",{className:`border-b border-stone-200 dark:border-gray-600 pb-4 mb-4 ${r} -mx-2 px-2 rounded-lg transition-colors duration-200`,children:[t&&s.jsx("div",{className:"w-full flex justify-between items-center pt-2 mb-3 text-left",children:s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:t})}),s.jsx("div",{className:"space-y-4",children:e})]})},Oc=({label:t,checked:e,onChange:n,disabled:r})=>s.jsxs("label",{className:`flex items-center gap-2 ${r?"cursor-not-allowed opacity-60":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:e,onChange:o=>n(o.target.checked),disabled:r,className:"h-4 w-4 rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-stone-700 dark:text-stone-300",children:t})]}),go=t=>{if(!t)return"Unnamed Client";if(t.companyName)return t.companyName;const e=t.contacts.find(n=>n.isPrimary);return e?`${e.firstName} ${e.lastName}`:"Unnamed Client"},po=t=>t?[t.line1,t.line2,t.townCity,t.county,t.postcode].filter(Boolean).join(", "):"N/A",V1=t=>{const e=new Date,n=new Date(t),r=Math.floor((e.getTime()-n.getTime())/1e3);if(r<5)return"just now";if(r<60)return`${r} seconds ago`;const o=Math.floor(r/60);if(o<60)return`${o} minute${o>1?"s":""} ago`;const l=Math.floor(o/60);if(l<24)return`${l} hour${l>1?"s":""} ago`;const u=Math.floor(l/24);if(u<30)return`${u} day${u>1?"s":""} ago`;const f=Math.floor(u/30);if(f<12)return`${f} month${f>1?"s":""} ago`;const m=Math.floor(f/12);return`${m} year${m>1?"s":""} ago`},al=(t,e,n,r)=>{var _,E;const o=new Set([0,t]),l=new Set([0,e]);n.forEach(T=>{const P=T.thickness||(T.type==="mullion"?r.mullion:r.transom),q=T.offset-P/2,J=T.offset+P/2;T.type==="mullion"?(o.add(q),o.add(J),T.start!==void 0&&l.add(T.start),T.end!==void 0&&l.add(T.end)):(l.add(q),l.add(J),T.start!==void 0&&o.add(T.start),T.end!==void 0&&o.add(T.end))});const u=[...o].sort((T,P)=>T-P).filter((T,P,q)=>P===0||T>q[P-1]),f=[...l].sort((T,P)=>T-P).filter((T,P,q)=>P===0||T>q[P-1]),m=[];for(let T=0;T<f.length-1;T++){m[T]=[];for(let P=0;P<u.length-1;P++){const q=(u[P]+u[P+1])/2,J=(f[T]+f[T+1])/2;let K=!1;for(const fe of n){const ne=fe.thickness||(fe.type==="mullion"?r.mullion:r.transom),X=fe.offset-ne/2,$=fe.offset+ne/2;if(fe.type==="mullion"){if(q>X&&q<$&&J>=(fe.start??0)&&J<=(fe.end??e)){K=!0;break}}else if(J>X&&J<$&&q>=(fe.start??0)&&q<=(fe.end??t)){K=!0;break}}m[T][P]=K?"frame":"glass"}}const p=[];if(m.length===0||m[0]&&m[0].length===0)return p;const v=new Map,w=new Map;let N=0;for(let T=0;T<m.length;T++)m[T].some(P=>P==="glass")&&(v.has(T)||(v.set(T,N),N++));let b=0;for(let T=0;T<(((_=m[0])==null?void 0:_.length)||0);T++){let P=!1;for(let q=0;q<m.length;q++)if(m[q][T]==="glass"){P=!0;break}P&&(w.has(T)||(w.set(T,b),b++))}const I=Array.from({length:m.length},()=>{var T;return Array(((T=m[0])==null?void 0:T.length)||0).fill(!1)});for(let T=0;T<m.length;T++)for(let P=0;P<(((E=m[T])==null?void 0:E.length)||0);P++)if(m[T][P]==="glass"&&!I[T][P]){let q=0;for(;P+q<m[T].length&&m[T][P+q]==="glass"&&!I[T][P+q];)q++;let J=1;for(;T+J<m.length;){let R=!0;for(let D=0;D<q;D++)if(m[T+J][P+D]!=="glass"||I[T+J][P+D]){R=!1;break}if(R)J++;else break}const K=u[P],fe=f[T],ne=u[P+q]-K,X=f[T+J]-fe,$=v.get(T)??0,he=w.get(P)??0;p.push({id:`${$}-${he}`,x:K,y:fe,width:ne,height:X});for(let R=0;R<J;R++)for(let D=0;D<q;D++)I[T+R][P+D]=!0}return p},ya=(t,e,n,r)=>{if(!n||n.length===0)return t>0&&e>0?[{id:"0-0",x:0,y:0,width:t,height:e}]:[];const o=n.filter(I=>I.type==="vertical").sort((I,_)=>I.offset-_.offset),l=n.filter(I=>I.type==="horizontal").sort((I,_)=>I.offset-_.offset),u=o.length*r,f=l.length*r,m=t-u,p=e-f,v=o.length+1,w=l.length+1,N=[];if(m<=0||p<=0)return N;let b=0;for(let I=0;I<v;I++){let _=0;const E=m/v;for(let T=0;T<w;T++){const P=p/w;N.push({id:`${T}-${I}`,x:b,y:_,width:E,height:P}),_+=P+(T<l.length?r:0)}b+=E+(I<o.length?r:0)}return N},q1=[{id:"leads",name:"Leads"},{id:"sales",name:"Quotes"},{id:"surveys",name:"Surveys"},{id:"production",name:"Production"},{id:"installation",name:"Installation"},{id:"reports",name:"Reports"},{id:"calendar",name:"Calendar"},{id:"system",name:"System",disabled:!0}],O1=[{id:"mat-1",name:"Engineered Redwood",type:"Timber",color:"#D3B48C",density:510},{id:"mat-2",name:"Accoya",type:"Timber",color:"#E0D6C5",density:510},{id:"mat-3",name:"Sapele",type:"Timber",color:"#885141",density:640},{id:"mat-4",name:"European Oak",type:"Timber",color:"#B89F7E",density:720},{id:"mat-5",name:"Hardwood Cill",type:"Cill",color:"#8C6E54"},{id:"mat-6",name:"Aluminium Cill",type:"Cill",color:"#B8C0C8"},{id:"mat-7",name:"RAL 9010 Pure White",type:"Finish",color:"#FFFFFF"},{id:"mat-8",name:"RAL 7016 Anthracite Grey",type:"Finish",color:"#383E42"},{id:"mat-9",name:"F&B Elephants Breath",type:"Finish",color:"#d3cdc4"},{id:"glass-1",name:"Standard Double Glazed",type:"Glass",thickness:24,uValue:1.2,spec:"4-16-4",color:"#e0f2fe"},{id:"glass-2",name:"Toughened Safety",type:"Glass",thickness:24,uValue:1.2,spec:"4T-16-4T",color:"#e0f2fe"},{id:"glass-3",name:"Acoustic Laminate",type:"Glass",thickness:24.8,uValue:1.1,spec:"6.4L-14-4T",color:"#dbeafe"},{id:"glass-4",name:"Obscure (Minster)",type:"Glass",thickness:24,uValue:1.2,spec:"4-16-4O",color:"#f0f9ff"},{id:"glass-5",name:"Low-E Triple Glazed",type:"Glass",thickness:36,uValue:.8,spec:"4-12-4-12-4",color:"#e0f2fe"},{id:"iron-1",name:"Standard Sash Locks",type:"Ironmongery"},{id:"iron-2",name:"Slimline Sash Locks",type:"Ironmongery"},{id:"iron-3",name:"Standard Friction Hinges",type:"Ironmongery"},{id:"iron-4",name:"Espagnolette",type:"Ironmongery"},{id:"iron-5",name:"3D Adjustable Hinges",type:"Ironmongery"},{id:"iron-6",name:"5-Point MPL",type:"Ironmongery"}],ch=["Homeowner","Contractor","Window Installer","Architect","Interior Designer"],z1=["Client","Partner","Architect","Builder","Designer","Other"],_0={USD:"$",GBP:"",EUR:""},E0=[{id:"manageClients",description:"Can add, edit, and delete clients."},{id:"manageQuotes",description:"Can create, edit, and manage quotes."},{id:"sendFollowUpEmails",description:"Can send AI-generated follow-up emails."},{id:"viewReports",description:"Can view the reports dashboard."},{id:"conductSurveys",description:"Can conduct surveys for won jobs."},{id:"manageStaff",description:"Can add, edit, and remove staff members and roles."},{id:"manageProductConfigurations",description:"Can edit product configurations."},{id:"manageSettings",description:"Can edit system-wide settings."},{id:"manageProduction",description:"Can manage the production schedule."},{id:"manageInstallation",description:"Can manage the installation schedule."}],W1={currency:"GBP",timezone:"UTC",dateFormat:"MDY",timeFormat:"24h",firstDayOfWeek:"Monday",workingWeek:["Monday","Tuesday","Wednesday","Thursday","Friday"],workingHoursStart:9,workingHoursEnd:17,customerTypeColors:{Homeowner:"#8B5CF6",Contractor:"#3B82F6","Window Installer":"#F97316",Architect:"#22C55E","Interior Designer":"#EC4899"},leadNumberPrefix:"L",leadNextNumber:1030,projectNumberPrefix:"P",projectNextNumber:105,smtpServer:"",smtpPort:587,smtpUser:"",smtpPass:"",smtpEncryption:"starttls",smtpFromAddress:"",developerModeEnabled:!1,enabledModules:["leads","sales","surveys","production","installation","reports","system","calendar"],labels:{leads:[{id:"ls-1",name:"New",color:"#BFDBFE",isProtected:!0},{id:"ls-2",name:"Contacted",color:"#A5F3FC"},{id:"ls-3",name:"Appointment Booked",color:"#A7F3D0"},{id:"ls-4",name:"Unqualified",color:"#FECACA"},{id:"ls-6",name:"Lost",color:"#FECACA"}],sales:[{id:"ss-1",name:"New",color:"#BFDBFE",isProtected:!0},{id:"ss-2",name:"Appointment Booked",color:"#A5F3FC"},{id:"ss-3",name:"Quoted",color:"#A7F3D0",isProtected:!0},{id:"ss-4",name:"Follow Up 1",color:"#FED7AA"},{id:"ss-5",name:"Follow Up 2",color:"#FEF08A"},{id:"ss-6",name:"Won",color:"#A7F3D0",isProtected:!1},{id:"ss-7",name:"Lost",color:"#FECACA",isProtected:!1},{id:"ss-8",name:"Survey",color:"#DDD6FE",isProtected:!0}],survey:[{id:"sur-1",name:"Survey Booked",color:"#BFDBFE"},{id:"sur-2",name:"Survey Complete",color:"#A7F3D0"},{id:"sur-3",name:"On Hold",color:"#FEF08A"},{id:"sur-4",name:"Ready for Production",color:"#C7D2FE",isProtected:!0}],production:[{id:"prod-1",name:"In Production",color:"#BFDBFE"},{id:"prod-2",name:"Production Complete",color:"#A7F3D0"}]},companyName:"Sash Style Pro",companyAddress:{line1:"123 Window Lane",townCity:"Design City",postcode:"DC 45678"},companyPhone:"(555) 123-4567",companyEmail:"contact@sashstyle.pro",companyWebsite:"www.sashstyle.pro"},$1=[{id:"role-admin",name:"Administrator",permissions:["manageClients","manageQuotes","manageStaff","manageProductConfigurations","manageSettings","viewReports","conductSurveys","sendFollowUpEmails","manageProduction","manageInstallation"]},{id:"role-sales",name:"Sales",permissions:["manageClients","manageQuotes","sendFollowUpEmails","viewReports"]},{id:"role-surveyor",name:"Surveyor",permissions:["conductSurveys"]},{id:"role-installer",name:"Installer",permissions:["manageInstallation"]}],G1=[{id:"team-1",name:"Sales & Quoting"},{id:"team-2",name:"Surveying"},{id:"team-3",name:"Installation & Fitting"}],Em=[{id:"staff-1",name:"Alex Johnson",initials:"AJ",teamId:"team-1",roleId:"role-admin",email:"alex.j@sashstyle.pro",mobile:"07123 456789"}],J1=[],Y1=[],K1=[],Q1=[],X1=[{id:"comp-sash-1",name:"Heritage Sliding Sash",itemType:"Sash",applicableTo:["Sash"],sashInfo:{head:55,stile:55,bottomRail:95,meetingStile:30,thickness:56},layout:{instances:[{id:"inst-comp-sash-1",overallWidth:1e3,overallHeight:1600,topSashHeight:800}]}},{id:"comp-casement-1",name:"45mm Flush Casement",itemType:"Casement",applicableTo:["Casement"],sashInfo:{head:45,stile:45,bottomRail:45,meetingStile:0,thickness:56},layout:{instances:[{id:"inst-comp-cas-1",overallWidth:600,overallHeight:1200}],placedSashes:[{paneId:"inst-comp-cas-1-0-0",type:"casement",hingeSide:"right"}]}},{id:"comp-casement-2",name:"45mm French Flush Casements",itemType:"Casement",applicableTo:["Casement"],sashInfo:{head:45,stile:45,bottomRail:45,meetingStile:22.5,thickness:56},layout:{instances:[{id:"inst-comp-cas-2",overallWidth:1200,overallHeight:1200}],mullions:[{id:"m-comp-cas-2-1",type:"mullion",offset:600,thickness:.1}],placedSashes:[{paneId:"inst-comp-cas-2-0-0",type:"casement",hingeSide:"left"},{paneId:"inst-comp-cas-2-0-1",type:"casement",hingeSide:"right"}]}},{id:"comp-casement-3",name:"55mm Flush Casement",itemType:"Casement",applicableTo:["Casement"],sashInfo:{head:55,stile:55,bottomRail:55,meetingStile:0,thickness:56},layout:{instances:[{id:"inst-comp-cas-3",overallWidth:600,overallHeight:1200}],placedSashes:[{paneId:"inst-comp-cas-3-0-0",type:"casement",hingeSide:"right"}]}},{id:"comp-casement-4",name:"55mm French Flush Casements",itemType:"Casement",applicableTo:["Casement"],sashInfo:{head:55,stile:55,bottomRail:55,meetingStile:27.5,thickness:56},layout:{instances:[{id:"inst-comp-cas-4",overallWidth:1200,overallHeight:1200}],mullions:[{id:"m-comp-cas-4-1",type:"mullion",offset:600,thickness:.1}],placedSashes:[{paneId:"inst-comp-cas-4-0-0",type:"casement",hingeSide:"left"},{paneId:"inst-comp-cas-4-0-1",type:"casement",hingeSide:"right"}]}},{id:"comp-casement-5",name:"68mm Stormproof Casement",itemType:"Casement",applicableTo:["Casement"],sashInfo:{head:68,stile:68,bottomRail:68,meetingStile:0,thickness:56},layout:{instances:[{id:"inst-comp-cas-5",overallWidth:600,overallHeight:1200}],placedSashes:[{paneId:"inst-comp-cas-5-0-0",type:"casement",hingeSide:"right"}]}},{id:"comp-door-1",name:"68mm Door",itemType:"Door",applicableTo:["Door"],sashInfo:{head:68,stile:68,bottomRail:68,meetingStile:0,thickness:56},layout:{instances:[{id:"inst-comp-door-1",overallWidth:900,overallHeight:2100}],placedSashes:[{paneId:"inst-comp-door-1-0-0",type:"door-sash",hingeSide:"right"}]}}],Z1=[{id:"range-1",name:"Heritage Range",itemType:"Sash",frameThickness:70,outerHeadHeight:95,outerCillHeight:70,outerLeftJambWidth:95,outerRightJambWidth:95,outerTransomHeight:95,outerMullionWidth:95,innerHeightHeight:95,innerCillHeight:70,innerLeftJambWidth:95,innerRightJambWidth:95,innerTransomHeight:95,innerMullionWidth:95,topRailHeight:55,bottomRailHeight:95,meetingRailHeight:30,stileWidth:55,materialSashId:"mat-1",materialFrameId:"mat-1",materialCillId:"mat-5",defaultGlassTypeId:"glass-1",rebateDepth:15,rebateWidth:12},{id:"range-2",name:"Modern Range",itemType:"Sash",frameThickness:70,outerHeadHeight:75,outerCillHeight:60,outerLeftJambWidth:75,outerRightJambWidth:75,outerTransomHeight:75,outerMullionWidth:75,innerHeightHeight:75,innerCillHeight:60,innerLeftJambWidth:75,innerRightJambWidth:75,innerTransomHeight:75,innerMullionWidth:75,topRailHeight:45,bottomRailHeight:75,meetingRailHeight:25,stileWidth:45,materialSashId:"mat-2",materialFrameId:"mat-2",materialCillId:"mat-6",defaultGlassTypeId:"glass-2",rebateDepth:15,rebateWidth:12},{id:"range-3",name:"Classic Range",itemType:"Casement",frameThickness:70,outerHeadHeight:80,outerCillHeight:80,outerLeftJambWidth:80,outerRightJambWidth:80,outerTransomHeight:80,outerMullionWidth:80,innerHeightHeight:80,innerCillHeight:80,innerLeftJambWidth:80,innerRightJambWidth:80,innerTransomHeight:80,innerMullionWidth:80,topRailHeight:80,bottomRailHeight:80,meetingRailHeight:0,stileWidth:80,materialSashId:"mat-1",materialFrameId:"mat-1",materialCillId:"mat-5",defaultGlassTypeId:"glass-1",openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12},{id:"range-4",name:"Contemporary Range",itemType:"Casement",frameThickness:70,outerHeadHeight:70,outerCillHeight:70,outerLeftJambWidth:70,outerRightJambWidth:70,outerTransomHeight:70,outerMullionWidth:70,innerHeightHeight:70,innerCillHeight:70,innerLeftJambWidth:70,innerRightJambWidth:70,innerTransomHeight:70,innerMullionWidth:70,topRailHeight:70,bottomRailHeight:70,meetingRailHeight:0,stileWidth:70,materialSashId:"mat-4",materialFrameId:"mat-4",materialCillId:"mat-5",defaultGlassTypeId:"glass-2",openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12},{id:"range-5",name:"Entrance Doors",itemType:"Door",frameThickness:70,outerHeadHeight:90,outerCillHeight:50,outerLeftJambWidth:90,outerRightJambWidth:90,outerTransomHeight:90,outerMullionWidth:90,innerHeightHeight:90,innerCillHeight:50,innerLeftJambWidth:90,innerRightJambWidth:90,innerTransomHeight:90,innerMullionWidth:90,topRailHeight:120,bottomRailHeight:150,meetingRailHeight:0,stileWidth:120,materialSashId:"mat-3",materialFrameId:"mat-3",materialCillId:"mat-5",defaultGlassTypeId:"glass-2",openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12},{id:"range-6",name:"Country Range",itemType:"Door",frameThickness:70,outerHeadHeight:85,outerCillHeight:50,outerLeftJambWidth:85,outerRightJambWidth:85,outerTransomHeight:85,outerMullionWidth:85,innerHeightHeight:85,innerCillHeight:50,innerLeftJambWidth:85,innerRightJambWidth:85,innerTransomHeight:85,innerMullionWidth:85,topRailHeight:110,bottomRailHeight:140,meetingRailHeight:0,stileWidth:110,materialSashId:"mat-4",materialFrameId:"mat-4",materialCillId:"mat-5",defaultGlassTypeId:"glass-2",openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12},{id:"range-7",name:"Screen Range",itemType:"Screen",frameThickness:70,outerHeadHeight:90,outerCillHeight:50,outerLeftJambWidth:90,outerRightJambWidth:90,outerTransomHeight:90,outerMullionWidth:90,innerHeightHeight:90,innerCillHeight:50,innerLeftJambWidth:90,innerRightJambWidth:90,innerTransomHeight:90,innerMullionWidth:90,topRailHeight:120,bottomRailHeight:150,meetingRailHeight:0,stileWidth:120,materialSashId:"mat-1",materialFrameId:"mat-1",materialCillId:"mat-5",defaultGlassTypeId:"glass-1",openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12}],e2=[{id:"pp-sash-1",name:"Heritage Sash",itemType:"Sash",productRangeId:"range-1",materialSashId:"mat-1",materialFrameId:"mat-1",materialCillId:"mat-5",externalFinishId:"mat-7",internalFinishId:"mat-7",frameThickness:70,outerHeadHeight:95,outerCillHeight:70,outerLeftJambWidth:95,outerRightJambWidth:95,outerTransomHeight:95,outerMullionWidth:95,innerHeightHeight:95,innerCillHeight:70,innerLeftJambWidth:95,innerRightJambWidth:95,innerTransomHeight:95,innerMullionWidth:95,topRailHeight:55,bottomRailHeight:95,meetingRailHeight:30,stileWidth:55,glazingBarThickness:25,ironmongery:{hinges:"N/A",mpls:"Standard Sash Locks"},rebateDepth:15,rebateWidth:12},{id:"pp-sash-2",name:"Slimline Sash",itemType:"Sash",productRangeId:"range-2",materialSashId:"mat-2",materialFrameId:"mat-2",materialCillId:"mat-6",externalFinishId:"mat-8",internalFinishId:"mat-8",frameThickness:70,outerHeadHeight:75,outerCillHeight:60,outerLeftJambWidth:75,outerRightJambWidth:75,outerTransomHeight:75,outerMullionWidth:75,innerHeightHeight:75,innerCillHeight:60,innerLeftJambWidth:75,innerRightJambWidth:75,innerTransomHeight:75,innerMullionWidth:75,topRailHeight:45,bottomRailHeight:75,meetingRailHeight:25,stileWidth:45,glazingBarThickness:20,ironmongery:{hinges:"N/A",mpls:"Slimline Sash Locks"},rebateDepth:15,rebateWidth:12},{id:"pp-casement-1",name:"Classic Casement",itemType:"Casement",productRangeId:"range-3",materialSashId:"mat-1",materialFrameId:"mat-1",materialCillId:"mat-5",externalFinishId:"mat-7",internalFinishId:"mat-7",frameThickness:70,outerHeadHeight:80,outerCillHeight:80,outerLeftJambWidth:80,outerRightJambWidth:80,outerTransomHeight:80,outerMullionWidth:80,innerHeightHeight:80,innerCillHeight:80,innerLeftJambWidth:80,innerRightJambWidth:80,innerTransomHeight:80,innerMullionWidth:80,topRailHeight:80,bottomRailHeight:80,meetingRailHeight:0,stileWidth:80,glazingBarThickness:25,ironmongery:{hinges:"Standard Friction Hinges",mpls:"Espagnolette"},openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12,defaultLayout:{instances:[{id:"inst-ppc-1",overallWidth:1200,overallHeight:1200}],mullions:[{id:"m-cas-1-1",type:"mullion",offset:600}],transoms:[],placedSashes:[{paneId:"inst-ppc-1-0-0",type:"casement",hingeSide:"left"},{paneId:"inst-ppc-1-0-1",type:"casement",hingeSide:"right"}]}},{id:"pp-casement-2",name:"Modern Flush Casement",itemType:"Casement",productRangeId:"range-4",materialSashId:"mat-4",materialFrameId:"mat-4",materialCillId:"mat-5",externalFinishId:"mat-8",internalFinishId:"mat-8",frameThickness:70,outerHeadHeight:70,outerCillHeight:70,outerLeftJambWidth:70,outerRightJambWidth:70,outerTransomHeight:70,outerMullionWidth:70,innerHeightHeight:70,innerCillHeight:70,innerLeftJambWidth:70,innerRightJambWidth:70,innerTransomHeight:70,innerMullionWidth:70,topRailHeight:70,bottomRailHeight:70,meetingRailHeight:0,stileWidth:70,glazingBarThickness:22,ironmongery:{hinges:"Concealed Hinges",mpls:"Espagnolette"},openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12,defaultLayout:{instances:[{id:"inst-ppc-2",overallWidth:1500,overallHeight:1e3}],mullions:[{id:"m-cas-2-1",type:"mullion",offset:750}],transoms:[],placedSashes:[{paneId:"inst-ppc-2-0-0",type:"fixed-glazing"},{paneId:"inst-ppc-2-0-1",type:"casement",hingeSide:"right"}]}},{id:"pp-door-1",name:"Classic French Door",itemType:"Door",productRangeId:"range-5",materialSashId:"mat-3",materialFrameId:"mat-3",materialCillId:"mat-5",externalFinishId:"mat-8",internalFinishId:"mat-7",frameThickness:70,outerHeadHeight:90,outerCillHeight:50,outerLeftJambWidth:90,outerRightJambWidth:90,outerTransomHeight:90,outerMullionWidth:90,innerHeightHeight:90,innerCillHeight:50,innerLeftJambWidth:90,innerRightJambWidth:90,innerTransomHeight:90,innerMullionWidth:90,topRailHeight:120,bottomRailHeight:150,meetingRailHeight:0,stileWidth:120,glazingBarThickness:30,ironmongery:{hinges:"3D Adjustable Hinges",mpls:"5-Point MPL"},openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12,defaultLayout:{instances:[{id:"inst-ppd-1",overallWidth:1800,overallHeight:2100}],mullions:[{id:"m-door-1-1",type:"mullion",offset:900}],transoms:[],placedSashes:[{paneId:"inst-ppd-1-0-0",type:"door-sash",hingeSide:"left"},{paneId:"inst-ppd-1-0-1",type:"door-sash",hingeSide:"right"}]}},{id:"pp-door-2",name:"Oak Stable Door",itemType:"Door",productRangeId:"range-6",materialSashId:"mat-4",materialFrameId:"mat-4",materialCillId:"mat-5",internalFinishId:"mat-9",frameThickness:70,outerHeadHeight:85,outerCillHeight:50,outerLeftJambWidth:85,outerRightJambWidth:85,outerTransomHeight:85,outerMullionWidth:85,innerHeightHeight:85,innerCillHeight:50,innerLeftJambWidth:85,innerRightJambWidth:85,innerTransomHeight:85,innerMullionWidth:85,topRailHeight:110,bottomRailHeight:140,meetingRailHeight:0,stileWidth:110,glazingBarThickness:28,ironmongery:{hinges:"3D Adjustable Hinges",mpls:"5-Point MPL"},openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12,defaultLayout:{instances:[{id:"inst-ppd-2",overallWidth:900,overallHeight:2050}],mullions:[],transoms:[{id:"t-door-2-1",type:"transom",offset:1025}],placedSashes:[{paneId:"inst-ppd-2-0-0",type:"door-sash",hingeSide:"right"},{paneId:"inst-ppd-2-1-0",type:"door-sash",hingeSide:"right"}]}},{id:"pp-screen-1",name:"Standard Screen",itemType:"Screen",productRangeId:"range-7",materialSashId:"mat-1",materialFrameId:"mat-1",materialCillId:"mat-5",externalFinishId:"mat-7",internalFinishId:"mat-7",frameThickness:70,outerHeadHeight:90,outerCillHeight:50,outerLeftJambWidth:90,outerRightJambWidth:90,outerTransomHeight:90,outerMullionWidth:90,innerHeightHeight:90,innerCillHeight:50,innerLeftJambWidth:90,innerRightJambWidth:90,innerTransomHeight:90,innerMullionWidth:90,topRailHeight:120,bottomRailHeight:150,meetingRailHeight:0,stileWidth:120,glazingBarThickness:30,ironmongery:{hinges:"3D Adjustable Hinges",mpls:"5-Point MPL"},openingDirection:"outward",glazingType:"externally",rebateDepth:15,rebateWidth:12,defaultLayout:{instances:[{id:"inst-pps-1",overallWidth:2400,overallHeight:2100}],mullions:[],transoms:[],placedSashes:[]}}],t2=[{id:"et-1",name:"Initial Quote Follow-up",subject:"Following up on your quote [Quote Number]",body:`Hi [Client Name],

Just wanted to follow up on the quote we sent on [Quote Date]. Please let me know if you have any questions.

Best,
[User Name]`}],Lm=[xn.QUOTED,xn.FOLLOW_UP_1,xn.FOLLOW_UP_2,xn.WON,xn.LOST],n2=({quote:t,client:e,onDragStart:n,onEditQuote:r,onGenerateEmail:o,hasPermission:l,systemSettings:u})=>{const f=e.assignedTo?t.assignedStaffName.split(" ").map(m=>m[0]).join(""):"?";return s.jsxs("div",{draggable:!0,onDragStart:m=>n(m,t.id),className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700 cursor-grab active:cursor-grabbing",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-stone-800 dark:text-stone-100",children:t.clientName}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:t.quoteNumber})]}),s.jsxs("div",{className:"flex gap-1",children:[l("sendFollowUpEmails")&&[xn.QUOTED,xn.FOLLOW_UP_1,xn.FOLLOW_UP_2].includes(t.status)&&s.jsx("button",{onClick:()=>o(t,e),className:"p-1.5 text-stone-500 hover:text-blue-600 rounded-full hover:bg-blue-100 dark:hover:bg-gray-700",title:"Generate Follow-up Email",children:s.jsx(ad,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 text-stone-500 hover:text-blue-600 rounded-full hover:bg-blue-100 dark:hover:bg-gray-700",title:"View Quote",children:s.jsx(mo,{className:"w-4 h-4"})})]})]}),s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-300 mt-2",children:t.projectReference||"No project reference"}),s.jsxs("div",{className:"mt-4 flex justify-between items-end",children:[s.jsx("p",{className:"font-bold text-lg text-stone-800 dark:text-stone-100",children:t.totalValue.toLocaleString(void 0,{style:"currency",currency:u.currency})}),s.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-200 text-blue-800 dark:bg-blue-900 dark:text-blue-200 text-xs font-bold flex items-center justify-center",title:`Assigned to ${t.assignedStaffName}`,children:f})]})]})},r2=({client:t,quotes:e,appointments:n,navigateTo:r})=>{const o=e.filter(m=>m.clientId===t.id).sort((m,p)=>new Date(p.date).getTime()-new Date(m.date).getTime()).slice(0,3),l=n.filter(m=>m.clientId===t.id&&new Date(m.start)>new Date).sort((m,p)=>new Date(m.start).getTime()-new Date(p.start).getTime()).slice(0,3),u=[...t.activity||[]].sort((m,p)=>new Date(p.timestamp).getTime()-new Date(m.timestamp).getTime()).find(m=>m.type==="note"),f=m=>r({view:"leadEditor",clientId:m});return s.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Contacts"}),t.contacts.map(m=>s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"font-medium",children:[m.firstName," ",m.lastName," ",m.isPrimary&&s.jsx("span",{className:"text-xs font-bold text-green-600",children:"(Primary)"})]}),s.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:m.email})]},m.id)),s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200 mt-4",children:"Addresses"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Billing:"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.officeAddressFormatted})]}),t.installationAddress&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Installation:"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.installationAddressFormatted})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Recent Activity"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[o.length>0&&o.map(m=>s.jsxs("p",{children:["Quote ",m.quoteNumber," - ",m.status]},m.id)),l.length>0&&l.map(m=>s.jsxs("p",{children:["Upcoming: ",m.title," on ",new Date(m.start).toLocaleDateString()]},m.id)),o.length===0&&l.length===0&&s.jsx("p",{className:"text-stone-500",children:"No recent quotes or appointments."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Latest Note"}),s.jsx("p",{className:"text-sm text-stone-500 bg-stone-100 dark:bg-gray-700/50 p-2 rounded italic",children:(u==null?void 0:u.content)||"No notes yet."}),s.jsx(wt,{variant:"secondary",onClick:()=>f(t.id),children:"View Full Details"})]})]})},i2=({clients:t,quotes:e,staff:n,currentUser:r,onEditQuote:o,onCreateQuote:l,onUpdateQuote:u,onGenerateEmail:f,hasPermission:m,systemSettings:p,appointments:v,navigateTo:w,onBookAppointment:N})=>{const[b,I]=Pe.useState("list"),[_,E]=Pe.useState(""),[T,P]=Pe.useState({key:"date",direction:"desc"}),[q,J]=Pe.useState(null),[K,fe]=Pe.useState(null),[ne,X]=Pe.useState(""),[$,he]=Pe.useState(""),[R,D]=Pe.useState("all"),[H,O]=Pe.useState(""),[ge,xe]=Pe.useState(""),ie=Pe.useMemo(()=>e.filter(re=>re.status!==xn.NEW&&re.status!==xn.APPOINTMENT_BOOKED).map(re=>{const se=t.find(Ge=>Ge.id===re.clientId);if(!se)return null;const ye=n.find(Ge=>Ge.id===se.assignedTo),Be=se.contacts.find(Ge=>Ge.isPrimary);return{...re,clientName:go(se),assignedStaffName:(ye==null?void 0:ye.name)||"Unassigned",totalValue:re.items.reduce((Ge,pe)=>Ge+pe.price*pe.quantity,0),primaryContactName:Be?`${Be.firstName} ${Be.lastName}`:"N/A",installationAddressFormatted:po(se.installationAddress)}}).filter(re=>re!==null),[e,t,n]),Y=Pe.useMemo(()=>ie.filter(re=>{const se=t.find(Be=>Be.id===re.clientId);if(!se)return!1;const ye=_.toLowerCase().trim();if(ye&&!(re.quoteNumber.toLowerCase().includes(ye)||re.clientName.toLowerCase().includes(ye)||re.projectReference&&re.projectReference.toLowerCase().includes(ye)||re.status.toLowerCase().includes(ye))||ne&&se.customerType!==ne||$&&re.status!==$)return!1;if(R!=="all"){const Be=new Date(re.date);if(Be.setHours(0,0,0,0),R==="custom"){if(H&&re.date<H||ge&&re.date>ge)return!1}else{const Ge={"7d":7,"30d":30,"90d":90}[R];if(Ge){const pe=new Date;if(pe.setHours(0,0,0,0),pe.setDate(pe.getDate()-Ge),Be<pe)return!1}}}return!0}),[ie,t,_,ne,$,R,H,ge]),ve=Pe.useMemo(()=>{let re=[...Y];return T!==null&&re.sort((se,ye)=>{const Be=se[T.key],Ge=ye[T.key];return Be<Ge?T.direction==="asc"?-1:1:Be>Ge?T.direction==="asc"?1:-1:0}),re},[Y,T]),we=Pe.useMemo(()=>Lm.reduce((re,se)=>(re[se]=Y.filter(ye=>ye.status===se),re),{}),[Y]),le=re=>{let se="asc";T&&T.key===re&&T.direction==="asc"&&(se="desc"),P({key:re,direction:se})},M=(re,se)=>{J(se),re.dataTransfer.effectAllowed="move"},W=re=>{re.preventDefault(),re.dataTransfer.dropEffect="move"},Q=(re,se)=>{if(re.preventDefault(),!q){J(null);return}const ye=e.find(Be=>Be.id===q);if(ye&&ye.status!==se&&(u({...ye,status:se}),m("sendFollowUpEmails")&&[xn.FOLLOW_UP_1,xn.FOLLOW_UP_2].includes(se))){const Be=t.find(Ge=>Ge.id===ye.clientId);Be&&f(ye,Be)}J(null)},ue=()=>{J(null)},ce=({active:re,onClick:se,children:ye,icon:Be})=>s.jsxs("button",{onClick:se,className:`flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium rounded-md ${re?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-gray-600"}`,children:[s.jsx(Be,{className:"w-5 h-5"}),ye]}),me=({sortKey:re,children:se,className:ye})=>{const Ge=(T==null?void 0:T.key)===re?(T==null?void 0:T.direction)==="asc"?"":"":"";return s.jsx("th",{className:`p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 cursor-pointer ${ye||""}`,onClick:()=>le(re),children:s.jsxs("div",{className:"flex items-center gap-2",children:[se,s.jsx("span",{className:"text-xs",children:Ge})]})})};return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(C0,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Quotes"})]}),s.jsx("div",{className:"flex-1 max-w-lg",children:s.jsxs("div",{className:"relative",children:[s.jsx(jf,{className:"w-5 h-5 text-stone-400 absolute left-3.5 top-1/2 -translate-y-1/2 pointer-events-none"}),s.jsx("input",{type:"text",placeholder:"Search my quotes...",value:_,onChange:re=>E(re.target.value),className:"w-full p-2 pl-10 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg"})]})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center p-1 bg-stone-100 dark:bg-gray-900 rounded-lg",children:[s.jsx(ce,{active:b==="kanban",onClick:()=>I("kanban"),icon:ic,children:"Email Follow Ups"}),s.jsx(ce,{active:b==="list",onClick:()=>I("list"),icon:D1,children:"List"})]})})]})}),b==="list"&&s.jsx("div",{className:"flex-shrink-0 p-4 bg-white dark:bg-gray-800 border-b border-stone-200 dark:border-gray-700",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-stone-500",children:"Customer Type"}),s.jsxs("select",{value:ne,onChange:re=>X(re.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white text-sm",children:[s.jsx("option",{value:"",children:"All Types"}),ch.map(re=>s.jsx("option",{value:re,children:re},re))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-stone-500",children:"Status"}),s.jsxs("select",{value:$,onChange:re=>he(re.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white text-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),p.labels.sales.map(re=>s.jsx("option",{value:re.name,children:re.name},re.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-stone-500",children:"Date Range"}),s.jsxs("select",{value:R,onChange:re=>D(re.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white text-sm",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"7d",children:"Last 7 Days"}),s.jsx("option",{value:"30d",children:"Last 30 Days"}),s.jsx("option",{value:"90d",children:"Last 90 Days"}),s.jsx("option",{value:"custom",children:"Custom Range"})]})]}),R==="custom"&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-stone-500",children:"Start Date"}),s.jsx("input",{type:"date",value:H,onChange:re=>O(re.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white text-sm dark:[color-scheme:dark]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-stone-500",children:"End Date"}),s.jsx("input",{type:"date",value:ge,onChange:re=>xe(re.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white text-sm dark:[color-scheme:dark]"})]})]})]})}),b==="kanban"?s.jsx("div",{className:"flex-grow overflow-x-auto p-4",onDragEnd:ue,children:s.jsx("div",{className:"flex gap-4 h-full min-w-max",children:Lm.map(re=>{var se;return s.jsxs("div",{onDragOver:W,onDrop:ye=>Q(ye,re),className:"w-80 bg-stone-100 dark:bg-gray-800/50 rounded-lg flex flex-col flex-shrink-0",children:[s.jsxs("h3",{className:"text-sm font-semibold uppercase text-stone-500 dark:text-stone-400 p-3 border-b-2 dark:border-gray-700 flex justify-between",children:[re,s.jsx("span",{className:"text-xs font-normal bg-stone-200 dark:bg-gray-700 px-2 py-0.5 rounded-full",children:((se=we[re])==null?void 0:se.length)||0})]}),s.jsxs("div",{className:"p-2 space-y-2 overflow-y-auto flex-grow",children:[(we[re]||[]).map(ye=>s.jsx(n2,{quote:ye,client:t.find(Be=>Be.id===ye.clientId),onDragStart:M,onEditQuote:o,onGenerateEmail:f,hasPermission:m,systemSettings:p},ye.id)),q&&s.jsx("div",{className:"h-20"})]})]},re)})})}):s.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx(me,{sortKey:"quoteNumber",children:"Quote #"}),s.jsx(me,{sortKey:"date",children:"Date"}),s.jsx(me,{sortKey:"clientName",children:"Client Name"}),s.jsx(me,{sortKey:"primaryContactName",children:"Primary Contact"}),s.jsx(me,{sortKey:"installationAddressFormatted",children:"Installation Address"}),s.jsx(me,{sortKey:"status",children:"Status"}),s.jsx(me,{sortKey:"totalValue",className:"text-right",children:"Value"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:ve.map(re=>s.jsxs(cl.Fragment,{children:[s.jsxs("tr",{onClick:()=>fe(se=>se===re.id?null:re.id),className:"hover:bg-stone-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[s.jsx("td",{className:"p-3 font-medium",children:re.quoteNumber}),s.jsx("td",{className:"p-3",children:new Date(re.date).toLocaleDateString()}),s.jsx("td",{className:"p-3 font-bold text-stone-800 dark:text-stone-100",children:re.clientName}),s.jsx("td",{className:"p-3",children:re.primaryContactName}),s.jsx("td",{className:"p-3 text-xs",children:re.installationAddressFormatted}),s.jsx("td",{className:"p-3",children:s.jsx(wd,{status:re.status})}),s.jsx("td",{className:"p-3 whitespace-nowrap text-right font-semibold",children:re.totalValue.toLocaleString(void 0,{style:"currency",currency:p.currency})}),s.jsx("td",{className:"p-3 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(wt,{size:"sm",variant:"secondary",onClick:se=>{se.stopPropagation(),N(re.clientId)},icon:wa,title:"Book Appointment"}),s.jsx(wt,{variant:"secondary",className:"px-3 py-2 text-xs font-semibold",onClick:se=>{se.stopPropagation(),w({view:"leadEditor",clientId:re.clientId})},children:"Lead Details"}),s.jsx(wt,{className:"px-3 py-2 text-xs font-semibold",onClick:se=>{se.stopPropagation(),o(re.id)},children:"View Quote"})]})})]}),K===re.id&&s.jsx("tr",{className:"bg-stone-100 dark:bg-gray-800/50",children:s.jsx("td",{colSpan:8,className:"p-0",children:(()=>{var Be,Ge;const se=t.find(pe=>pe.id===re.clientId);if(!se)return null;const ye={...se,displayName:go(se),primaryContactName:se.contacts.find(pe=>pe.isPrimary)?`${se.contacts.find(pe=>pe.isPrimary).firstName} ${se.contacts.find(pe=>pe.isPrimary).lastName}`:"No primary contact",quoteCount:e.filter(pe=>pe.clientId===se.id).length,assignedStaffName:((Be=n.find(pe=>pe.id===se.assignedTo))==null?void 0:Be.name)||"Unassigned",assignedStaffInitials:((Ge=n.find(pe=>pe.id===se.assignedTo))==null?void 0:Ge.initials)||"?",officeAddressFormatted:po(se.officeAddress),installationAddressFormatted:po(se.installationAddress)};return s.jsx(r2,{client:ye,quotes:e,appointments:v,navigateTo:w})})()})})]},re.id))})]})})})]})},o2="modulepreload",s2=function(t){return"/"+t},Pm={},Rf=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let u=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=u(n.map(p=>{if(p=s2(p),p in Pm)return;Pm[p]=!0;const v=p.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":o2,v||(N.as="script"),N.crossOrigin="",N.href=p,m&&N.setAttribute("nonce",m),document.head.appendChild(N),v)return new Promise((b,I)=>{N.addEventListener("load",b),N.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};function nr(t){"@babel/helpers - typeof";return nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(t)}var Hi=Uint8Array,Mo=Uint16Array,dh=Int32Array,bd=new Hi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nd=new Hi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ff=new Hi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),L0=function(t,e){for(var n=new Mo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var o=new dh(n[30]),r=1;r<30;++r)for(var l=n[r];l<n[r+1];++l)o[l]=l-n[r]<<5|r;return{b:n,r:o}},P0=L0(bd,2),M0=P0.b,Bf=P0.r;M0[28]=258,Bf[258]=28;var j0=L0(Nd,0),a2=j0.b,Mm=j0.r,Uf=new Mo(32768);for(var yr=0;yr<32768;++yr){var ol=(yr&43690)>>1|(yr&21845)<<1;ol=(ol&52428)>>2|(ol&13107)<<2,ol=(ol&61680)>>4|(ol&3855)<<4,Uf[yr]=((ol&65280)>>8|(ol&255)<<8)>>1}var Js=(function(t,e,n){for(var r=t.length,o=0,l=new Mo(e);o<r;++o)t[o]&&++l[t[o]-1];var u=new Mo(e);for(o=1;o<e;++o)u[o]=u[o-1]+l[o-1]<<1;var f;if(n){f=new Mo(1<<e);var m=15-e;for(o=0;o<r;++o)if(t[o])for(var p=o<<4|t[o],v=e-t[o],w=u[t[o]-1]++<<v,N=w|(1<<v)-1;w<=N;++w)f[Uf[w]>>m]=p}else for(f=new Mo(r),o=0;o<r;++o)t[o]&&(f[o]=Uf[u[t[o]-1]++]>>15-t[o]);return f}),dl=new Hi(288);for(var yr=0;yr<144;++yr)dl[yr]=8;for(var yr=144;yr<256;++yr)dl[yr]=9;for(var yr=256;yr<280;++yr)dl[yr]=7;for(var yr=280;yr<288;++yr)dl[yr]=8;var oc=new Hi(32);for(var yr=0;yr<32;++yr)oc[yr]=5;var l2=Js(dl,9,0),u2=Js(dl,9,1),c2=Js(oc,5,0),d2=Js(oc,5,1),wf=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ss=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},bf=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},fh=function(t){return(t+7)/8|0},D0=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Hi(t.subarray(e,n))},f2=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ks=function(t,e,n){var r=new Error(e||f2[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ks),!n)throw r;return r},h2=function(t,e,n,r){var o=t.length,l=0;if(!o||e.f&&!e.l)return n||new Hi(0);var u=!n,f=u||e.i!=2,m=e.i;u&&(n=new Hi(o*3));var p=function(Be){var Ge=n.length;if(Be>Ge){var pe=new Hi(Math.max(Ge*2,Be));pe.set(n),n=pe}},v=e.f||0,w=e.p||0,N=e.b||0,b=e.l,I=e.d,_=e.m,E=e.n,T=o*8;do{if(!b){v=Ss(t,w,1);var P=Ss(t,w+1,3);if(w+=3,P)if(P==1)b=u2,I=d2,_=9,E=5;else if(P==2){var fe=Ss(t,w,31)+257,ne=Ss(t,w+10,15)+4,X=fe+Ss(t,w+5,31)+1;w+=14;for(var $=new Hi(X),he=new Hi(19),R=0;R<ne;++R)he[Ff[R]]=Ss(t,w+R*3,7);w+=ne*3;for(var D=wf(he),H=(1<<D)-1,O=Js(he,D,1),R=0;R<X;){var ge=O[Ss(t,w,H)];w+=ge&15;var q=ge>>4;if(q<16)$[R++]=q;else{var xe=0,ie=0;for(q==16?(ie=3+Ss(t,w,3),w+=2,xe=$[R-1]):q==17?(ie=3+Ss(t,w,7),w+=3):q==18&&(ie=11+Ss(t,w,127),w+=7);ie--;)$[R++]=xe}}var Y=$.subarray(0,fe),ve=$.subarray(fe);_=wf(Y),E=wf(ve),b=Js(Y,_,1),I=Js(ve,E,1)}else ks(1);else{var q=fh(w)+4,J=t[q-4]|t[q-3]<<8,K=q+J;if(K>o){m&&ks(0);break}f&&p(N+J),n.set(t.subarray(q,K),N),e.b=N+=J,e.p=w=K*8,e.f=v;continue}if(w>T){m&&ks(0);break}}f&&p(N+131072);for(var we=(1<<_)-1,le=(1<<E)-1,M=w;;M=w){var xe=b[bf(t,w)&we],W=xe>>4;if(w+=xe&15,w>T){m&&ks(0);break}if(xe||ks(2),W<256)n[N++]=W;else if(W==256){M=w,b=null;break}else{var Q=W-254;if(W>264){var R=W-257,ue=bd[R];Q=Ss(t,w,(1<<ue)-1)+M0[R],w+=ue}var ce=I[bf(t,w)&le],me=ce>>4;ce||ks(3),w+=ce&15;var ve=a2[me];if(me>3){var ue=Nd[me];ve+=bf(t,w)&(1<<ue)-1,w+=ue}if(w>T){m&&ks(0);break}f&&p(N+131072);var re=N+Q;if(N<ve){var se=l-ve,ye=Math.min(ve,re);for(se+N<0&&ks(3);N<ye;++N)n[N]=r[se+N]}for(;N<re;++N)n[N]=n[N-ve]}}e.l=b,e.p=M,e.b=N,e.f=v,b&&(v=1,e.m=_,e.d=I,e.n=E)}while(!v);return N!=n.length&&u?D0(n,0,N):n.subarray(0,N)},xa=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Xu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Nf=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var o=n.length,l=n.slice();if(!o)return{t:F0,l:0};if(o==1){var u=new Hi(n[0].s+1);return u[n[0].s]=1,{t:u,l:1}}n.sort(function(K,fe){return K.f-fe.f}),n.push({s:-1,f:25001});var f=n[0],m=n[1],p=0,v=1,w=2;for(n[0]={s:-1,f:f.f+m.f,l:f,r:m};v!=o-1;)f=n[n[p].f<n[w].f?p++:w++],m=n[p!=v&&n[p].f<n[w].f?p++:w++],n[v++]={s:-1,f:f.f+m.f,l:f,r:m};for(var N=l[0].s,r=1;r<o;++r)l[r].s>N&&(N=l[r].s);var b=new Mo(N+1),I=Hf(n[v-1],b,0);if(I>e){var r=0,_=0,E=I-e,T=1<<E;for(l.sort(function(fe,ne){return b[ne.s]-b[fe.s]||fe.f-ne.f});r<o;++r){var P=l[r].s;if(b[P]>e)_+=T-(1<<I-b[P]),b[P]=e;else break}for(_>>=E;_>0;){var q=l[r].s;b[q]<e?_-=1<<e-b[q]++-1:++r}for(;r>=0&&_;--r){var J=l[r].s;b[J]==e&&(--b[J],++_)}I=e}return{t:new Hi(b),l:I}},Hf=function(t,e,n){return t.s==-1?Math.max(Hf(t.l,e,n+1),Hf(t.r,e,n+1)):e[t.s]=n},jm=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Mo(++e),r=0,o=t[0],l=1,u=function(m){n[r++]=m},f=1;f<=e;++f)if(t[f]==o&&f!=e)++l;else{if(!o&&l>2){for(;l>138;l-=138)u(32754);l>2&&(u(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(u(o),--l;l>6;l-=6)u(8304);l>2&&(u(l-3<<5|8208),l=0)}for(;l--;)u(o);l=1,o=t[f]}return{c:n.subarray(0,r),n:e}},Zu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},R0=function(t,e,n){var r=n.length,o=fh(e+2);t[o]=r&255,t[o+1]=r>>8,t[o+2]=t[o]^255,t[o+3]=t[o+1]^255;for(var l=0;l<r;++l)t[o+l+4]=n[l];return(o+4+r)*8},Dm=function(t,e,n,r,o,l,u,f,m,p,v){xa(e,v++,n),++o[256];for(var w=Nf(o,15),N=w.t,b=w.l,I=Nf(l,15),_=I.t,E=I.l,T=jm(N),P=T.c,q=T.n,J=jm(_),K=J.c,fe=J.n,ne=new Mo(19),X=0;X<P.length;++X)++ne[P[X]&31];for(var X=0;X<K.length;++X)++ne[K[X]&31];for(var $=Nf(ne,7),he=$.t,R=$.l,D=19;D>4&&!he[Ff[D-1]];--D);var H=p+5<<3,O=Zu(o,dl)+Zu(l,oc)+u,ge=Zu(o,N)+Zu(l,_)+u+14+3*D+Zu(ne,he)+2*ne[16]+3*ne[17]+7*ne[18];if(m>=0&&H<=O&&H<=ge)return R0(e,v,t.subarray(m,m+p));var xe,ie,Y,ve;if(xa(e,v,1+(ge<O)),v+=2,ge<O){xe=Js(N,b,0),ie=N,Y=Js(_,E,0),ve=_;var we=Js(he,R,0);xa(e,v,q-257),xa(e,v+5,fe-1),xa(e,v+10,D-4),v+=14;for(var X=0;X<D;++X)xa(e,v+3*X,he[Ff[X]]);v+=3*D;for(var le=[P,K],M=0;M<2;++M)for(var W=le[M],X=0;X<W.length;++X){var Q=W[X]&31;xa(e,v,we[Q]),v+=he[Q],Q>15&&(xa(e,v,W[X]>>5&127),v+=W[X]>>12)}}else xe=l2,ie=dl,Y=c2,ve=oc;for(var X=0;X<f;++X){var ue=r[X];if(ue>255){var Q=ue>>18&31;Xu(e,v,xe[Q+257]),v+=ie[Q+257],Q>7&&(xa(e,v,ue>>23&31),v+=bd[Q]);var ce=ue&31;Xu(e,v,Y[ce]),v+=ve[ce],ce>3&&(Xu(e,v,ue>>5&8191),v+=Nd[ce])}else Xu(e,v,xe[ue]),v+=ie[ue]}return Xu(e,v,xe[256]),v+ie[256]},m2=new dh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F0=new Hi(0),p2=function(t,e,n,r,o,l){var u=l.z||t.length,f=new Hi(r+u+5*(1+Math.ceil(u/7e3))+o),m=f.subarray(r,f.length-o),p=l.l,v=(l.r||0)&7;if(e){v&&(m[0]=l.r>>3);for(var w=m2[e-1],N=w>>13,b=w&8191,I=(1<<n)-1,_=l.p||new Mo(32768),E=l.h||new Mo(I+1),T=Math.ceil(n/3),P=2*T,q=function(Ze){return(t[Ze]^t[Ze+1]<<T^t[Ze+2]<<P)&I},J=new dh(25e3),K=new Mo(288),fe=new Mo(32),ne=0,X=0,$=l.i||0,he=0,R=l.w||0,D=0;$+2<u;++$){var H=q($),O=$&32767,ge=E[H];if(_[O]=ge,E[H]=O,R<=$){var xe=u-$;if((ne>7e3||he>24576)&&(xe>423||!p)){v=Dm(t,m,0,J,K,fe,X,he,D,$-D,v),he=ne=X=0,D=$;for(var ie=0;ie<286;++ie)K[ie]=0;for(var ie=0;ie<30;++ie)fe[ie]=0}var Y=2,ve=0,we=b,le=O-ge&32767;if(xe>2&&H==q($-le))for(var M=Math.min(N,xe)-1,W=Math.min(32767,$),Q=Math.min(258,xe);le<=W&&--we&&O!=ge;){if(t[$+Y]==t[$+Y-le]){for(var ue=0;ue<Q&&t[$+ue]==t[$+ue-le];++ue);if(ue>Y){if(Y=ue,ve=le,ue>M)break;for(var ce=Math.min(le,ue-2),me=0,ie=0;ie<ce;++ie){var re=$-le+ie&32767,se=_[re],ye=re-se&32767;ye>me&&(me=ye,ge=re)}}}O=ge,ge=_[O],le+=O-ge&32767}if(ve){J[he++]=268435456|Bf[Y]<<18|Mm[ve];var Be=Bf[Y]&31,Ge=Mm[ve]&31;X+=bd[Be]+Nd[Ge],++K[257+Be],++fe[Ge],R=$+Y,++ne}else J[he++]=t[$],++K[t[$]]}}for($=Math.max($,R);$<u;++$)J[he++]=t[$],++K[t[$]];v=Dm(t,m,p,J,K,fe,X,he,D,$-D,v),p||(l.r=v&7|m[v/8|0]<<3,v-=7,l.h=E,l.p=_,l.i=$,l.w=R)}else{for(var $=l.w||0;$<u+p;$+=65535){var pe=$+65535;pe>=u&&(m[v/8|0]=p,pe=u),v=R0(m,v+1,t.subarray($,pe))}l.i=u}return D0(f,0,r+fh(v)+o)},B0=function(){var t=1,e=0;return{p:function(n){for(var r=t,o=e,l=n.length|0,u=0;u!=l;){for(var f=Math.min(u+2655,l);u<f;++u)o+=r+=n[u];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}t=r,e=o},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},g2=function(t,e,n,r,o){if(!o&&(o={l:1},e.dictionary)){var l=e.dictionary.subarray(-32768),u=new Hi(l.length+t.length);u.set(l),u.set(t,l.length),t=u,o.w=l.length}return p2(t,e.level==null?6:e.level,e.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,o)},U0=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},v2=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var o=B0();o.p(e.dictionary),U0(t,2,o.d())}},x2=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ks(6,"invalid zlib data"),(t[1]>>5&1)==1&&ks(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Vf(t,e){e||(e={});var n=B0();n.p(t);var r=g2(t,e,e.dictionary?6:2,4);return v2(r,e),U0(r,r.length-4,n.d()),r}function y2(t,e){return h2(t.subarray(x2(t),-4),{i:2},e,e)}var w2=typeof TextDecoder<"u"&&new TextDecoder,b2=0;try{w2.decode(F0,{stream:!0}),b2=1}catch{}var Kt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Sf(){Kt.console&&typeof Kt.console.log=="function"&&Kt.console.log.apply(Kt.console,arguments)}var ur={log:Sf,warn:function(t){Kt.console&&(typeof Kt.console.warn=="function"?Kt.console.warn.apply(Kt.console,arguments):Sf.call(null,arguments))},error:function(t){Kt.console&&(typeof Kt.console.error=="function"?Kt.console.error.apply(Kt.console,arguments):Sf(t))}};function Cf(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Rl(r.response,e,n)},r.onerror=function(){ur.error("could not download file")},r.send()}function Rm(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function zc(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var nc,qf,Rl=Kt.saveAs||((typeof window>"u"?"undefined":nr(window))!=="object"||window!==Kt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Kt.URL||Kt.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener",typeof t=="string"?(o.href=t,o.origin!==location.origin?Rm(o.href)?Cf(t,e,n):zc(o,o.target="_blank"):zc(o)):(o.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(o.href)}),4e4),setTimeout((function(){zc(o)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(Rm(t))Cf(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){zc(r)}))}else navigator.msSaveOrOpenBlob((function(o,l){return l===void 0?l={autoBom:!1}:nr(l)!=="object"&&(ur.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Cf(t,e,n);var o=t.type==="application/octet-stream",l=/constructor/i.test(Kt.HTMLElement)||Kt.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&l)&&(typeof FileReader>"u"?"undefined":nr(FileReader))==="object"){var f=new FileReader;f.onloadend=function(){var v=f.result;v=u?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=v:location=v,r=null},f.readAsDataURL(t)}else{var m=Kt.URL||Kt.webkitURL,p=m.createObjectURL(t);r?r.location=p:location.href=p,r=null,setTimeout((function(){m.revokeObjectURL(p)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function H0(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(f){return[parseInt(f[1]),parseInt(f[2]),parseInt(f[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(f){return[parseInt(f[1],16),parseInt(f[2],16),parseInt(f[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(f){return[parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16),parseInt(f[3]+f[3],16)]}}],r=0;r<n.length;r++){var o=n[r].re,l=n[r].process,u=o.exec(t);u&&(e=l(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var f=this.r.toString(16),m=this.g.toString(16),p=this.b.toString(16);return f.length==1&&(f="0"+f),m.length==1&&(m="0"+m),p.length==1&&(p="0"+p),"#"+f+m+p}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function kf(t,e){var n=t[0],r=t[1],o=t[2],l=t[3];n=Ri(n,r,o,l,e[0],7,-680876936),l=Ri(l,n,r,o,e[1],12,-389564586),o=Ri(o,l,n,r,e[2],17,606105819),r=Ri(r,o,l,n,e[3],22,-1044525330),n=Ri(n,r,o,l,e[4],7,-176418897),l=Ri(l,n,r,o,e[5],12,1200080426),o=Ri(o,l,n,r,e[6],17,-1473231341),r=Ri(r,o,l,n,e[7],22,-45705983),n=Ri(n,r,o,l,e[8],7,1770035416),l=Ri(l,n,r,o,e[9],12,-1958414417),o=Ri(o,l,n,r,e[10],17,-42063),r=Ri(r,o,l,n,e[11],22,-1990404162),n=Ri(n,r,o,l,e[12],7,1804603682),l=Ri(l,n,r,o,e[13],12,-40341101),o=Ri(o,l,n,r,e[14],17,-1502002290),n=Fi(n,r=Ri(r,o,l,n,e[15],22,1236535329),o,l,e[1],5,-165796510),l=Fi(l,n,r,o,e[6],9,-1069501632),o=Fi(o,l,n,r,e[11],14,643717713),r=Fi(r,o,l,n,e[0],20,-373897302),n=Fi(n,r,o,l,e[5],5,-701558691),l=Fi(l,n,r,o,e[10],9,38016083),o=Fi(o,l,n,r,e[15],14,-660478335),r=Fi(r,o,l,n,e[4],20,-405537848),n=Fi(n,r,o,l,e[9],5,568446438),l=Fi(l,n,r,o,e[14],9,-1019803690),o=Fi(o,l,n,r,e[3],14,-187363961),r=Fi(r,o,l,n,e[8],20,1163531501),n=Fi(n,r,o,l,e[13],5,-1444681467),l=Fi(l,n,r,o,e[2],9,-51403784),o=Fi(o,l,n,r,e[7],14,1735328473),n=Bi(n,r=Fi(r,o,l,n,e[12],20,-1926607734),o,l,e[5],4,-378558),l=Bi(l,n,r,o,e[8],11,-2022574463),o=Bi(o,l,n,r,e[11],16,1839030562),r=Bi(r,o,l,n,e[14],23,-35309556),n=Bi(n,r,o,l,e[1],4,-1530992060),l=Bi(l,n,r,o,e[4],11,1272893353),o=Bi(o,l,n,r,e[7],16,-155497632),r=Bi(r,o,l,n,e[10],23,-1094730640),n=Bi(n,r,o,l,e[13],4,681279174),l=Bi(l,n,r,o,e[0],11,-358537222),o=Bi(o,l,n,r,e[3],16,-722521979),r=Bi(r,o,l,n,e[6],23,76029189),n=Bi(n,r,o,l,e[9],4,-640364487),l=Bi(l,n,r,o,e[12],11,-421815835),o=Bi(o,l,n,r,e[15],16,530742520),n=Ui(n,r=Bi(r,o,l,n,e[2],23,-995338651),o,l,e[0],6,-198630844),l=Ui(l,n,r,o,e[7],10,1126891415),o=Ui(o,l,n,r,e[14],15,-1416354905),r=Ui(r,o,l,n,e[5],21,-57434055),n=Ui(n,r,o,l,e[12],6,1700485571),l=Ui(l,n,r,o,e[3],10,-1894986606),o=Ui(o,l,n,r,e[10],15,-1051523),r=Ui(r,o,l,n,e[1],21,-2054922799),n=Ui(n,r,o,l,e[8],6,1873313359),l=Ui(l,n,r,o,e[15],10,-30611744),o=Ui(o,l,n,r,e[6],15,-1560198380),r=Ui(r,o,l,n,e[13],21,1309151649),n=Ui(n,r,o,l,e[4],6,-145523070),l=Ui(l,n,r,o,e[11],10,-1120210379),o=Ui(o,l,n,r,e[2],15,718787259),r=Ui(r,o,l,n,e[9],21,-343485551),t[0]=ll(n,t[0]),t[1]=ll(r,t[1]),t[2]=ll(o,t[2]),t[3]=ll(l,t[3])}function Sd(t,e,n,r,o,l){return e=ll(ll(e,t),ll(r,l)),ll(e<<o|e>>>32-o,n)}function Ri(t,e,n,r,o,l,u){return Sd(e&n|~e&r,t,e,o,l,u)}function Fi(t,e,n,r,o,l,u){return Sd(e&r|n&~r,t,e,o,l,u)}function Bi(t,e,n,r,o,l,u){return Sd(e^n^r,t,e,o,l,u)}function Ui(t,e,n,r,o,l,u){return Sd(n^(e|~r),t,e,o,l,u)}function V0(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)kf(r,N2(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(kf(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*n,kf(r,o),r}function N2(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}nc=Kt.atob.bind(Kt),qf=Kt.btoa.bind(Kt);var Fm="0123456789abcdef".split("");function S2(t){for(var e="",n=0;n<4;n++)e+=Fm[t>>8*n+4&15]+Fm[t>>8*n&15];return e}function C2(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Of(t){return V0(t).map(C2).join("")}var k2=(function(t){for(var e=0;e<t.length;e++)t[e]=S2(t[e]);return t.join("")})(V0("hello"))!="5d41402abc4b2a76b9719d911017c592";function ll(t,e){if(k2){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function zf(t,e){var n,r,o,l;if(t!==n){for(var u=(o=t,l=1+(256/t.length>>0),new Array(l+1).join(o)),f=[],m=0;m<256;m++)f[m]=m;var p=0;for(m=0;m<256;m++){var v=f[m];p=(p+v+u.charCodeAt(m))%256,f[m]=f[p],f[p]=v}n=t,r=f}else f=r;var w=e.length,N=0,b=0,I="";for(m=0;m<w;m++)b=(b+(v=f[N=(N+1)%256]))%256,f[N]=f[b],f[b]=v,u=f[(f[N]+f[b])%256],I+=String.fromCharCode(e.charCodeAt(m)^u);return I}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Bm={print:4,modify:8,copy:16,"annot-forms":32};function pu(t,e,n,r){this.v=1,this.r=2;var o=192;t.forEach((function(f){if(Bm.perm!==void 0)throw new Error("Invalid permission: "+f);o+=Bm[f]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(e+this.padding).substr(0,32),u=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,u),this.P=-(1+(255^o)),this.encryptionKey=Of(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=zf(this.encryptionKey,this.padding)}function gu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[r]}return e}function Um(t){if(nr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,o){if(o=o||!1,typeof n!="string"||typeof r!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var l=Math.random().toString(35);return e[n][l]=[r,!!o],l},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var l in e[n]){var u=e[n][l];try{u[0].apply(t,r)}catch(f){Kt.console&&ur.error("jsPDF PubSub Error",f.message,f)}u[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hd(t){if(!(this instanceof hd))return new hd(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function q0(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Fl(t,e,n,r,o){if(!(this instanceof Fl))return new Fl(t,e,n,r,o);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,q0.call(this,r,o)}function vu(t,e,n,r,o){if(!(this instanceof vu))return new vu(t,e,n,r,o);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,q0.call(this,r,o)}function Gt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],u=[],f=1,m=16,p="S",v=null;nr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,o=t.format||o,l=t.compress||t.compressPdf||l,(v=t.encryption||null)!==null&&(v.userPassword=v.userPassword||"",v.ownerPassword=v.ownerPassword||"",v.userPermissions=v.userPermissions||[]),f=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(m=t.floatPrecision),p=t.defaultPathOperation||"S"),u=t.filters||(l===!0?["FlateEncode"]:u),r=r||"mm",n=(""+(n||"P")).toLowerCase();var w=t.putOnlyUsedFonts||!1,N={},b={internal:{},__private__:{}};b.__private__.PubSub=Um;var I="1.3",_=b.__private__.getPdfVersion=function(){return I};b.__private__.setPdfVersion=function(S){I=S};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return E};var T=b.__private__.getPageFormat=function(S){return E[S]};o=o||"a4";var P={COMPAT:"compat",ADVANCED:"advanced"},q=P.COMPAT;function J(){this.saveGraphicsState(),te(new Dt(Ie,0,0,-Ie,0,js()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),p="n",q=P.ADVANCED}function K(){this.restoreGraphicsState(),p="S",q=P.COMPAT}var fe=b.__private__.combineFontStyleAndFontWeight=function(S,F){if(S=="bold"&&F=="normal"||S=="bold"&&F==400||S=="normal"&&F=="italic"||S=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(S=F==400||F==="normal"?S==="italic"?"italic":"normal":F!=700&&F!=="bold"||S!=="normal"?(F==700?"bold":F)+""+S:"bold"),S};b.advancedAPI=function(S){var F=q===P.COMPAT;return F&&J.call(this),typeof S!="function"||(S(this),F&&K.call(this)),this},b.compatAPI=function(S){var F=q===P.ADVANCED;return F&&K.call(this),typeof S!="function"||(S(this),F&&J.call(this)),this},b.isAdvancedAPI=function(){return q===P.ADVANCED};var ne,X=function(S){if(q!==P.ADVANCED)throw new Error(S+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=b.roundToPrecision=b.__private__.roundToPrecision=function(S,F){var ae=e||F;if(isNaN(S)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return S.toFixed(ae).replace(/0+$/,"")};ne=b.hpf=b.__private__.hpf=typeof m=="number"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return $(S,m)}:m==="smart"?function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return $(S,S>-1&&S<1?16:5)}:function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.hpf");return $(S,16)};var he=b.f2=b.__private__.f2=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f2");return $(S,2)},R=b.__private__.f3=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.f3");return $(S,3)},D=b.scale=b.__private__.scale=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.scale");return q===P.COMPAT?S*Ie:q===P.ADVANCED?S:void 0},H=function(S){return q===P.COMPAT?js()-S:q===P.ADVANCED?S:void 0},O=function(S){return D(H(S))};b.__private__.setPrecision=b.setPrecision=function(S){typeof parseInt(S,10)=="number"&&(e=parseInt(S,10))};var ge,xe="00000000000000000000000000000000",ie=b.__private__.getFileId=function(){return xe},Y=b.__private__.setFileId=function(S){return xe=S!==void 0&&/^[a-fA-F0-9]{32}$/.test(S)?S.toUpperCase():xe.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),v!==null&&(Ht=new pu(v.userPermissions,v.userPassword,v.ownerPassword,xe)),xe};b.setFileId=function(S){return Y(S),this},b.getFileId=function(){return ie()};var ve=b.__private__.convertDateToPDFDate=function(S){var F=S.getTimezoneOffset(),ae=F<0?"+":"-",be=Math.floor(Math.abs(F/60)),je=Math.abs(F%60),Je=[ae,Q(be),"'",Q(je),"'"].join("");return["D:",S.getFullYear(),Q(S.getMonth()+1),Q(S.getDate()),Q(S.getHours()),Q(S.getMinutes()),Q(S.getSeconds()),Je].join("")},we=b.__private__.convertPDFDateToDate=function(S){var F=parseInt(S.substr(2,4),10),ae=parseInt(S.substr(6,2),10)-1,be=parseInt(S.substr(8,2),10),je=parseInt(S.substr(10,2),10),Je=parseInt(S.substr(12,2),10),it=parseInt(S.substr(14,2),10);return new Date(F,ae,be,je,Je,it,0)},le=b.__private__.setCreationDate=function(S){var F;if(S===void 0&&(S=new Date),S instanceof Date)F=ve(S);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(S))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=S}return ge=F},M=b.__private__.getCreationDate=function(S){var F=ge;return S==="jsDate"&&(F=we(ge)),F};b.setCreationDate=function(S){return le(S),this},b.getCreationDate=function(S){return M(S)};var W,Q=b.__private__.padd2=function(S){return("0"+parseInt(S)).slice(-2)},ue=b.__private__.padd2Hex=function(S){return("00"+(S=S.toString())).substr(S.length)},ce=0,me=[],re=[],se=0,ye=[],Be=[],Ge=!1,pe=re,Ze=function(){ce=0,se=0,re=[],me=[],ye=[],xo=Kn(),ir=Kn()};b.__private__.setCustomOutputDestination=function(S){Ge=!0,pe=S};var Le=function(S){Ge||(pe=S)};b.__private__.resetCustomOutputDestination=function(){Ge=!1,pe=re};var te=b.__private__.out=function(S){return S=S.toString(),se+=S.length+1,pe.push(S),pe},gt=b.__private__.write=function(S){return te(arguments.length===1?S.toString():Array.prototype.join.call(arguments," "))},et=b.__private__.getArrayBuffer=function(S){for(var F=S.length,ae=new ArrayBuffer(F),be=new Uint8Array(ae);F--;)be[F]=S.charCodeAt(F);return ae},qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return qe};var at=t.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(S){return at=q===P.ADVANCED?S/Ie:S,this};var nt,He=b.__private__.getFontSize=b.getFontSize=function(){return q===P.COMPAT?at:at*Ie},bt=t.R2L||!1;b.__private__.setR2L=b.setR2L=function(S){return bt=S,this},b.__private__.getR2L=b.getR2L=function(){return bt};var Mt,At=b.__private__.setZoomMode=function(S){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(S))nt=S;else if(isNaN(S)){if(F.indexOf(S)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+S+'" is not recognized.');nt=S}else nt=parseInt(S,10)};b.__private__.getZoomMode=function(){return nt};var It,$e=b.__private__.setPageMode=function(S){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(S)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+S+'" is not recognized.');Mt=S};b.__private__.getPageMode=function(){return Mt};var Te=b.__private__.setLayoutMode=function(S){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(S)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+S+'" is not recognized.');It=S};b.__private__.getLayoutMode=function(){return It},b.__private__.setDisplayMode=b.setDisplayMode=function(S,F,ae){return At(S),Te(F),$e(ae),this};var _e={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(S){if(Object.keys(_e).indexOf(S)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _e[S]},b.__private__.getDocumentProperties=function(){return _e},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(S){for(var F in _e)_e.hasOwnProperty(F)&&S[F]&&(_e[F]=S[F]);return this},b.__private__.setDocumentProperty=function(S,F){if(Object.keys(_e).indexOf(S)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _e[S]=F};var Fe,Ie,lt,ee,Oe,tt={},pt={},ht=[],qt={},Pn={},Xt={},Cn={},Fn=null,wn=0,mt=[],zt=new Um(b),In=t.hotfixes||[],sn={},gn={},Mn=[],Dt=function S(F,ae,be,je,Je,it){if(!(this instanceof S))return new S(F,ae,be,je,Je,it);isNaN(F)&&(F=1),isNaN(ae)&&(ae=0),isNaN(be)&&(be=0),isNaN(je)&&(je=1),isNaN(Je)&&(Je=0),isNaN(it)&&(it=0),this._matrix=[F,ae,be,je,Je,it]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(S){this._matrix[0]=S}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(S){this._matrix[1]=S}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(S){this._matrix[2]=S}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(S){this._matrix[3]=S}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(S){this._matrix[4]=S}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(S){this._matrix[5]=S}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(S){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ne).join(S)},Dt.prototype.multiply=function(S){var F=S.sx*this.sx+S.shy*this.shx,ae=S.sx*this.shy+S.shy*this.sy,be=S.shx*this.sx+S.sy*this.shx,je=S.shx*this.shy+S.sy*this.sy,Je=S.tx*this.sx+S.ty*this.shx+this.tx,it=S.tx*this.shy+S.ty*this.sy+this.ty;return new Dt(F,ae,be,je,Je,it)},Dt.prototype.decompose=function(){var S=this.sx,F=this.shy,ae=this.shx,be=this.sy,je=this.tx,Je=this.ty,it=Math.sqrt(S*S+F*F),Nt=(S/=it)*ae+(F/=it)*be;ae-=S*Nt,be-=F*Nt;var Ut=Math.sqrt(ae*ae+be*be);return Nt/=Ut,S*(be/=Ut)<F*(ae/=Ut)&&(S=-S,F=-F,Nt=-Nt,it=-it),{scale:new Dt(it,0,0,Ut,0,0),translate:new Dt(1,0,0,1,je,Je),rotate:new Dt(S,F,-F,S,0,0),skew:new Dt(1,0,Nt,1,0,0)}},Dt.prototype.toString=function(S){return this.join(" ")},Dt.prototype.inversed=function(){var S=this.sx,F=this.shy,ae=this.shx,be=this.sy,je=this.tx,Je=this.ty,it=1/(S*be-F*ae),Nt=be*it,Ut=-F*it,on=-ae*it,nn=S*it;return new Dt(Nt,Ut,on,nn,-Nt*je-on*Je,-Ut*je-nn*Je)},Dt.prototype.applyToPoint=function(S){var F=S.x*this.sx+S.y*this.shx+this.tx,ae=S.x*this.shy+S.y*this.sy+this.ty;return new Bo(F,ae)},Dt.prototype.applyToRectangle=function(S){var F=this.applyToPoint(S),ae=this.applyToPoint(new Bo(S.x+S.w,S.y+S.h));return new Ms(F.x,F.y,ae.x-F.x,ae.y-F.y)},Dt.prototype.clone=function(){var S=this.sx,F=this.shy,ae=this.shx,be=this.sy,je=this.tx,Je=this.ty;return new Dt(S,F,ae,be,je,Je)},b.Matrix=Dt;var mi=b.matrixMult=function(S,F){return F.multiply(S)},rr=new Dt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=rr;var wr=function(S,F){if(!Pn[S]){var ae=(F instanceof Fl?"Sh":"P")+(Object.keys(qt).length+1).toString(10);F.id=ae,Pn[S]=ae,qt[ae]=F,zt.publish("addPattern",F)}};b.ShadingPattern=Fl,b.TilingPattern=vu,b.addShadingPattern=function(S,F){return X("addShadingPattern()"),wr(S,F),this},b.beginTilingPattern=function(S){X("beginTilingPattern()"),Ol(S.boundingBox[0],S.boundingBox[1],S.boundingBox[2]-S.boundingBox[0],S.boundingBox[3]-S.boundingBox[1],S.matrix)},b.endTilingPattern=function(S,F){X("endTilingPattern()"),F.stream=Be[W].join(`
`),wr(S,F),zt.publish("endTilingPattern",F),Mn.pop().restore()};var kn=b.__private__.newObject=function(){var S=Kn();return mn(S,!0),S},Kn=b.__private__.newObjectDeferred=function(){return ce++,me[ce]=function(){return se},ce},mn=function(S,F){return F=typeof F=="boolean"&&F,me[S]=se,F&&te(S+" 0 obj"),S},br=b.__private__.newAdditionalObject=function(){var S={objId:Kn(),content:""};return ye.push(S),S},xo=Kn(),ir=Kn(),pi=b.__private__.decodeColorString=function(S){var F=S.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var ae=parseFloat(F[0]);F=[ae,ae,ae,"r"]}for(var be="#",je=0;je<3;je++)be+=("0"+Math.floor(255*parseFloat(F[je])).toString(16)).slice(-2);return be},Er=b.__private__.encodeColorString=function(S){var F;typeof S=="string"&&(S={ch1:S});var ae=S.ch1,be=S.ch2,je=S.ch3,Je=S.ch4,it=S.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var Nt=new H0(ae);if(Nt.ok)ae=Nt.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var Ut=parseInt(ae.substr(1),16);ae=Ut>>16&255,be=Ut>>8&255,je=255&Ut}if(be===void 0||Je===void 0&&ae===be&&be===je)if(typeof ae=="string")F=ae+" "+it[0];else switch(S.precision){case 2:F=he(ae/255)+" "+it[0];break;case 3:default:F=R(ae/255)+" "+it[0]}else if(Je===void 0||nr(Je)==="object"){if(Je&&!isNaN(Je.a)&&Je.a===0)return F=["1.","1.","1.",it[1]].join(" ");if(typeof ae=="string")F=[ae,be,je,it[1]].join(" ");else switch(S.precision){case 2:F=[he(ae/255),he(be/255),he(je/255),it[1]].join(" ");break;default:case 3:F=[R(ae/255),R(be/255),R(je/255),it[1]].join(" ")}}else if(typeof ae=="string")F=[ae,be,je,Je,it[2]].join(" ");else switch(S.precision){case 2:F=[he(ae),he(be),he(je),he(Je),it[2]].join(" ");break;case 3:default:F=[R(ae),R(be),R(je),R(Je),it[2]].join(" ")}return F},gi=b.__private__.getFilters=function(){return u},fr=b.__private__.putStream=function(S){var F=(S=S||{}).data||"",ae=S.filters||gi(),be=S.alreadyAppliedFilters||[],je=S.addLength1||!1,Je=F.length,it=S.objectId,Nt=function(oi){return oi};if(v!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");v!==null&&(Nt=Ht.encryptor(it,0));var Ut={};ae===!0&&(ae=["FlateEncode"]);var on=S.additionalKeyValues||[],nn=(Ut=Gt.API.processDataByFilters!==void 0?Gt.API.processDataByFilters(F,ae):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Ut.data.length!==0&&(on.push({key:"Length",value:Ut.data.length}),je===!0&&on.push({key:"Length1",value:Je})),nn.length!=0)if(nn.split("/").length-1==1)on.push({key:"Filter",value:nn});else{on.push({key:"Filter",value:"["+nn+"]"});for(var bn=0;bn<on.length;bn+=1)if(on[bn].key==="DecodeParms"){for(var mr=[],Nr=0;Nr<Ut.reverseChain.split("/").length-1;Nr+=1)mr.push("null");mr.push(on[bn].value),on[bn].value="["+mr.join(" ")+"]"}}te("<<");for(var Pr=0;Pr<on.length;Pr++)te("/"+on[Pr].key+" "+on[Pr].value);te(">>"),Ut.data.length!==0&&(te("stream"),te(Nt(Ut.data)),te("endstream"))},Ti=b.__private__.putPage=function(S){var F=S.number,ae=S.data,be=S.objId,je=S.contentsObjId;mn(be,!0),te("<</Type /Page"),te("/Parent "+S.rootDictionaryObjId+" 0 R"),te("/Resources "+S.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(ne(S.mediaBox.bottomLeftX))+" "+parseFloat(ne(S.mediaBox.bottomLeftY))+" "+ne(S.mediaBox.topRightX)+" "+ne(S.mediaBox.topRightY)+"]"),S.cropBox!==null&&te("/CropBox ["+ne(S.cropBox.bottomLeftX)+" "+ne(S.cropBox.bottomLeftY)+" "+ne(S.cropBox.topRightX)+" "+ne(S.cropBox.topRightY)+"]"),S.bleedBox!==null&&te("/BleedBox ["+ne(S.bleedBox.bottomLeftX)+" "+ne(S.bleedBox.bottomLeftY)+" "+ne(S.bleedBox.topRightX)+" "+ne(S.bleedBox.topRightY)+"]"),S.trimBox!==null&&te("/TrimBox ["+ne(S.trimBox.bottomLeftX)+" "+ne(S.trimBox.bottomLeftY)+" "+ne(S.trimBox.topRightX)+" "+ne(S.trimBox.topRightY)+"]"),S.artBox!==null&&te("/ArtBox ["+ne(S.artBox.bottomLeftX)+" "+ne(S.artBox.bottomLeftY)+" "+ne(S.artBox.topRightX)+" "+ne(S.artBox.topRightY)+"]"),typeof S.userUnit=="number"&&S.userUnit!==1&&te("/UserUnit "+S.userUnit),zt.publish("putPage",{objId:be,pageContext:mt[F],pageNumber:F,page:ae}),te("/Contents "+je+" 0 R"),te(">>"),te("endobj");var Je=ae.join(`
`);return q===P.ADVANCED&&(Je+=`
Q`),mn(je,!0),fr({data:Je,filters:gi(),objectId:je}),te("endobj"),be},hr=b.__private__.putPages=function(){var S,F,ae=[];for(S=1;S<=wn;S++)mt[S].objId=Kn(),mt[S].contentsObjId=Kn();for(S=1;S<=wn;S++)ae.push(Ti({number:S,data:Be[S],objId:mt[S].objId,contentsObjId:mt[S].contentsObjId,mediaBox:mt[S].mediaBox,cropBox:mt[S].cropBox,bleedBox:mt[S].bleedBox,trimBox:mt[S].trimBox,artBox:mt[S].artBox,userUnit:mt[S].userUnit,rootDictionaryObjId:xo,resourceDictionaryObjId:ir}));mn(xo,!0),te("<</Type /Pages");var be="/Kids [";for(F=0;F<wn;F++)be+=ae[F]+" 0 R ";te(be+"]"),te("/Count "+wn),te(">>"),te("endobj"),zt.publish("postPutPages")},Xo=function(S){zt.publish("putFont",{font:S,out:te,newObject:kn,putStream:fr}),S.isAlreadyPutted!==!0&&(S.objectNumber=kn(),te("<<"),te("/Type /Font"),te("/BaseFont /"+gu(S.postScriptName)),te("/Subtype /Type1"),typeof S.encoding=="string"&&te("/Encoding /"+S.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},qi=function(){for(var S in tt)tt.hasOwnProperty(S)&&(w===!1||w===!0&&N.hasOwnProperty(S))&&Xo(tt[S])},Kr=function(S){S.objectNumber=kn();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[ne(S.x),ne(S.y),ne(S.x+S.width),ne(S.y+S.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+S.matrix.toString()+"]"});var ae=S.pages[1].join(`
`);fr({data:ae,additionalKeyValues:F,objectId:S.objectNumber}),te("endobj")},_s=function(){for(var S in sn)sn.hasOwnProperty(S)&&Kr(sn[S])},Zo=function(S,F){var ae,be=[],je=1/(F-1);for(ae=0;ae<1;ae+=je)be.push(ae);if(be.push(1),S[0].offset!=0){var Je={offset:0,color:S[0].color};S.unshift(Je)}if(S[S.length-1].offset!=1){var it={offset:1,color:S[S.length-1].color};S.push(it)}for(var Nt="",Ut=0,on=0;on<be.length;on++){for(ae=be[on];ae>S[Ut+1].offset;)Ut++;var nn=S[Ut].offset,bn=(ae-nn)/(S[Ut+1].offset-nn),mr=S[Ut].color,Nr=S[Ut+1].color;Nt+=ue(Math.round((1-bn)*mr[0]+bn*Nr[0]).toString(16))+ue(Math.round((1-bn)*mr[1]+bn*Nr[1]).toString(16))+ue(Math.round((1-bn)*mr[2]+bn*Nr[2]).toString(16))}return Nt.trim()},or=function(S,F){F||(F=21);var ae=kn(),be=Zo(S.colors,F),je=[];je.push({key:"FunctionType",value:"0"}),je.push({key:"Domain",value:"[0.0 1.0]"}),je.push({key:"Size",value:"["+F+"]"}),je.push({key:"BitsPerSample",value:"8"}),je.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),je.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fr({data:be,additionalKeyValues:je,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),te("endobj"),S.objectNumber=kn(),te("<< /ShadingType "+S.type),te("/ColorSpace /DeviceRGB");var Je="/Coords ["+ne(parseFloat(S.coords[0]))+" "+ne(parseFloat(S.coords[1]))+" ";S.type===2?Je+=ne(parseFloat(S.coords[2]))+" "+ne(parseFloat(S.coords[3])):Je+=ne(parseFloat(S.coords[2]))+" "+ne(parseFloat(S.coords[3]))+" "+ne(parseFloat(S.coords[4]))+" "+ne(parseFloat(S.coords[5])),te(Je+="]"),S.matrix&&te("/Matrix ["+S.matrix.toString()+"]"),te("/Function "+ae+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Ca=function(S,F){var ae=Kn(),be=kn();F.push({resourcesOid:ae,objectOid:be}),S.objectNumber=be;var je=[];je.push({key:"Type",value:"/Pattern"}),je.push({key:"PatternType",value:"1"}),je.push({key:"PaintType",value:"1"}),je.push({key:"TilingType",value:"1"}),je.push({key:"BBox",value:"["+S.boundingBox.map(ne).join(" ")+"]"}),je.push({key:"XStep",value:ne(S.xStep)}),je.push({key:"YStep",value:ne(S.yStep)}),je.push({key:"Resources",value:ae+" 0 R"}),S.matrix&&je.push({key:"Matrix",value:"["+S.matrix.toString()+"]"}),fr({data:S.stream,additionalKeyValues:je,objectId:S.objectNumber}),te("endobj")},yo=function(S){var F;for(F in qt)qt.hasOwnProperty(F)&&(qt[F]instanceof Fl?or(qt[F]):qt[F]instanceof vu&&Ca(qt[F],S))},Ks=function(S){for(var F in S.objectNumber=kn(),te("<<"),S)switch(F){case"opacity":te("/ca "+he(S[F]));break;case"stroke-opacity":te("/CA "+he(S[F]))}te(">>"),te("endobj")},Es=function(){var S;for(S in Xt)Xt.hasOwnProperty(S)&&Ks(Xt[S])},Lr=function(){for(var S in te("/XObject <<"),sn)sn.hasOwnProperty(S)&&sn[S].objectNumber>=0&&te("/"+S+" "+sn[S].objectNumber+" 0 R");zt.publish("putXobjectDict"),te(">>")},ka=function(){Ht.oid=kn(),te("<<"),te("/Filter /Standard"),te("/V "+Ht.v),te("/R "+Ht.r),te("/U <"+Ht.toHexString(Ht.U)+">"),te("/O <"+Ht.toHexString(Ht.O)+">"),te("/P "+Ht.P),te(">>"),te("endobj")},es=function(){for(var S in te("/Font <<"),tt)tt.hasOwnProperty(S)&&(w===!1||w===!0&&N.hasOwnProperty(S))&&te("/"+S+" "+tt[S].objectNumber+" 0 R");te(">>")},vi=function(){if(Object.keys(qt).length>0){for(var S in te("/Shading <<"),qt)qt.hasOwnProperty(S)&&qt[S]instanceof Fl&&qt[S].objectNumber>=0&&te("/"+S+" "+qt[S].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),te(">>")}},ts=function(S){if(Object.keys(qt).length>0){for(var F in te("/Pattern <<"),qt)qt.hasOwnProperty(F)&&qt[F]instanceof b.TilingPattern&&qt[F].objectNumber>=0&&qt[F].objectNumber<S&&te("/"+F+" "+qt[F].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),te(">>")}},ri=function(){if(Object.keys(Xt).length>0){var S;for(S in te("/ExtGState <<"),Xt)Xt.hasOwnProperty(S)&&Xt[S].objectNumber>=0&&te("/"+S+" "+Xt[S].objectNumber+" 0 R");zt.publish("putGStateDict"),te(">>")}},cr=function(S){mn(S.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),es(),vi(),ts(S.objectOid),ri(),Lr(),te(">>"),te("endobj")},Qs=function(){var S=[];qi(),Es(),_s(),yo(S),zt.publish("putResources"),S.forEach(cr),cr({resourcesOid:ir,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Xs=function(){zt.publish("putAdditionalObjects");for(var S=0;S<ye.length;S++){var F=ye[S];mn(F.objId,!0),te(F.content),te("endobj")}zt.publish("postPutAdditionalObjects")},jo=function(S){pt[S.fontName]=pt[S.fontName]||{},pt[S.fontName][S.fontStyle]=S.id},wo=function(S,F,ae,be,je){var Je={id:"F"+(Object.keys(tt).length+1).toString(10),postScriptName:S,fontName:F,fontStyle:ae,encoding:be,isStandardFont:je||!1,metadata:{}};return zt.publish("addFont",{font:Je,instance:this}),tt[Je.id]=Je,jo(Je),Je.id},Do=function(S){for(var F=0,ae=qe.length;F<ae;F++){var be=wo.call(this,S[F][0],S[F][1],S[F][2],qe[F][3],!0);w===!1&&(N[be]=!0);var je=S[F][0].split("-");jo({id:be,fontName:je[0],fontStyle:je[1]||""})}zt.publish("addFonts",{fonts:tt,dictionary:pt})},Qr=function(S){return S.foo=function(){try{return S.apply(this,arguments)}catch(be){var F=be.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var ae="Error in function "+F.split(`
`)[0].split("<")[0]+": "+be.message;if(!Kt.console)throw new Error(ae);Kt.console.error(ae,be),Kt.alert&&alert(ae)}},S.foo.bar=S,S.foo},ns=function(S,F){var ae,be,je,Je,it,Nt,Ut,on,nn;if(je=(F=F||{}).sourceEncoding||"Unicode",it=F.outputEncoding,(F.autoencode||it)&&tt[Fe].metadata&&tt[Fe].metadata[je]&&tt[Fe].metadata[je].encoding&&(Je=tt[Fe].metadata[je].encoding,!it&&tt[Fe].encoding&&(it=tt[Fe].encoding),!it&&Je.codePages&&(it=Je.codePages[0]),typeof it=="string"&&(it=Je[it]),it)){for(Ut=!1,Nt=[],ae=0,be=S.length;ae<be;ae++)(on=it[S.charCodeAt(ae)])?Nt.push(String.fromCharCode(on)):Nt.push(S[ae]),Nt[ae].charCodeAt(0)>>8&&(Ut=!0);S=Nt.join("")}for(ae=S.length;Ut===void 0&&ae!==0;)S.charCodeAt(ae-1)>>8&&(Ut=!0),ae--;if(!Ut)return S;for(Nt=F.noBOM?[]:[254,255],ae=0,be=S.length;ae<be;ae++){if((nn=(on=S.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+S+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nt.push(nn),Nt.push(on-(nn<<8))}return String.fromCharCode.apply(void 0,Nt)},Xr=b.__private__.pdfEscape=b.pdfEscape=function(S,F){return ns(S,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oe=b.__private__.beginPage=function(S){Be[++wn]=[],mt[wn]={objId:0,contentsObjId:0,userUnit:Number(f),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(S[0]),topRightY:Number(S[1])}},ct(wn),Le(Be[W])},Me=function(S,F){var ae,be,je;switch(n=F||n,typeof S=="string"&&(ae=T(S.toLowerCase()),Array.isArray(ae)&&(be=ae[0],je=ae[1])),Array.isArray(S)&&(be=S[0]*Ie,je=S[1]*Ie),isNaN(be)&&(be=o[0],je=o[1]),(be>14400||je>14400)&&(ur.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),je=Math.min(14400,je)),o=[be,je],n.substr(0,1)){case"l":je>be&&(o=[je,be]);break;case"p":be>je&&(o=[je,be])}oe(o),Yt(So),te($n),Ps!==0&&te(Ps+" J"),Wi!==0&&te(Wi+" j"),zt.publish("addPage",{pageNumber:wn})},rt=function(S){S>0&&S<=wn&&(Be.splice(S,1),mt.splice(S,1),wn--,W>wn&&(W=wn),this.setPage(W))},ct=function(S){S>0&&S<=wn&&(W=S)},Ct=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Be.length-1},Zt=function(S,F,ae){var be,je=void 0;return ae=ae||{},S=S!==void 0?S:tt[Fe].fontName,F=F!==void 0?F:tt[Fe].fontStyle,be=S.toLowerCase(),pt[be]!==void 0&&pt[be][F]!==void 0?je=pt[be][F]:pt[S]!==void 0&&pt[S][F]!==void 0?je=pt[S][F]:ae.disableWarning===!1&&ur.warn("Unable to look up font label for font '"+S+"', '"+F+"'. Refer to getFontList() for available fonts."),je||ae.noFallback||(je=pt.times[F])==null&&(je=pt.times.normal),je},dt=b.__private__.putInfo=function(){var S=kn(),F=function(be){return be};for(var ae in v!==null&&(F=Ht.encryptor(S,0)),te("<<"),te("/Producer ("+Xr(F("jsPDF "+Gt.version))+")"),_e)_e.hasOwnProperty(ae)&&_e[ae]&&te("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Xr(F(_e[ae]))+")");te("/CreationDate ("+Xr(F(ge))+")"),te(">>"),te("endobj")},an=b.__private__.putCatalog=function(S){var F=(S=S||{}).rootDictionaryObjId||xo;switch(kn(),te("<<"),te("/Type /Catalog"),te("/Pages "+F+" 0 R"),nt||(nt="fullwidth"),nt){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+nt;ae.substr(ae.length-1)==="%"&&(nt=parseInt(nt)/100),typeof nt=="number"&&te("/OpenAction [3 0 R /XYZ null null "+he(nt)+"]")}switch(It||(It="continuous"),It){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}Mt&&te("/PageMode /"+Mt),zt.publish("putCatalog"),te(">>"),te("endobj")},Jt=b.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(ce+1)),te("/Root "+ce+" 0 R"),te("/Info "+(ce-1)+" 0 R"),v!==null&&te("/Encrypt "+Ht.oid+" 0 R"),te("/ID [ <"+xe+"> <"+xe+"> ]"),te(">>")},An=b.__private__.putHeader=function(){te("%PDF-"+I),te("%")},rn=b.__private__.putXRef=function(){var S="0000000000";te("xref"),te("0 "+(ce+1)),te("0000000000 65535 f ");for(var F=1;F<=ce;F++)typeof me[F]=="function"?te((S+me[F]()).slice(-10)+" 00000 n "):me[F]!==void 0?te((S+me[F]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},zn=b.__private__.buildDocument=function(){Ze(),Le(re),zt.publish("buildDocument"),An(),hr(),Xs(),Qs(),v!==null&&ka(),dt(),an();var S=se;return rn(),Jt(),te("startxref"),te(""+S),te("%%EOF"),Le(Be[W]),re.join(`
`)},jn=b.__private__.getBlob=function(S){return new Blob([et(S)],{type:"application/pdf"})},fn=b.output=b.__private__.output=Qr((function(S,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",S){case void 0:return zn();case"save":b.save(F.filename);break;case"arraybuffer":return et(zn());case"blob":return jn(zn());case"bloburi":case"bloburl":if(Kt.URL!==void 0&&typeof Kt.URL.createObjectURL=="function")return Kt.URL&&Kt.URL.createObjectURL(jn(zn()))||void 0;ur.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",be=zn();try{ae=qf(be)}catch{ae=qf(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+F.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var je="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Je=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(je=F.pdfObjectUrl,Je="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+je+'"'+Je+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",Nt=Kt.open();return Nt!==null&&Nt.document.write(it),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Kt)==="[object Window]"){var Ut='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',on=Kt.open();if(on!==null){on.document.write(Ut);var nn=this;on.document.documentElement.querySelector("#pdfViewer").onload=function(){on.document.title=F.filename,on.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(nn.output("bloburl"))}}return on}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Kt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',mr=Kt.open();if(mr!==null&&(mr.document.write(bn),mr.document.title=F.filename),mr||typeof safari>"u")return mr;break;case"datauri":case"dataurl":return Kt.document.location.href=this.output("datauristring",F);default:return null}})),Wn=function(S){return Array.isArray(In)===!0&&In.indexOf(S)>-1};switch(r){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=Wn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ie=r}var Ht=null;le(),Y();var un=function(S){return v!==null?Ht.encryptor(S,0):function(F){return F}},Bn=b.__private__.getPageInfo=b.getPageInfo=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[S].objId,pageNumber:S,pageContext:mt[S]}},Et=b.__private__.getPageInfoByObjId=function(S){if(isNaN(S)||S%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in mt)if(mt[F].objId===S)break;return Bn(F)},tn=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:mt[W].objId,pageNumber:W,pageContext:mt[W]}};b.addPage=function(){return Me.apply(this,arguments),this},b.setPage=function(){return ct.apply(this,arguments),Le.call(this,Be[W]),this},b.insertPage=function(S){return this.addPage(),this.movePage(W,S),this},b.movePage=function(S,F){var ae,be;if(S>F){ae=Be[S],be=mt[S];for(var je=S;je>F;je--)Be[je]=Be[je-1],mt[je]=mt[je-1];Be[F]=ae,mt[F]=be,this.setPage(F)}else if(S<F){ae=Be[S],be=mt[S];for(var Je=S;Je<F;Je++)Be[Je]=Be[Je+1],mt[Je]=mt[Je+1];Be[F]=ae,mt[F]=be,this.setPage(F)}return this},b.deletePage=function(){return rt.apply(this,arguments),this},b.__private__.text=b.text=function(S,F,ae,be,je){var Je,it,Nt,Ut,on,nn,bn,mr,Nr,Pr=(be=be||{}).scope||this;if(typeof S=="number"&&typeof F=="number"&&(typeof ae=="string"||Array.isArray(ae))){var oi=ae;ae=F,F=S,S=oi}if(arguments[3]instanceof Dt?(X("The transform parameter of text() with a Matrix value"),Nr=je):(Nt=arguments[4],Ut=arguments[5],nr(bn=arguments[3])==="object"&&bn!==null||(typeof Nt=="string"&&(Ut=Nt,Nt=null),typeof bn=="string"&&(Ut=bn,bn=null),typeof bn=="number"&&(Nt=bn,bn=null),be={flags:bn,angle:Nt,align:Ut})),isNaN(F)||isNaN(ae)||S==null)throw new Error("Invalid arguments passed to jsPDF.text");if(S.length===0)return Pr;var Jr="",ko=!1,$i=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Ii,to=Pr.internal.scaleFactor;function Ds(er){return er=er.split("	").join(Array(be.TabLen||9).join(" ")),Xr(er,bn)}function gl(er){for(var Gn,Cr=er.concat(),Mr=[],Vo=Cr.length;Vo--;)typeof(Gn=Cr.shift())=="string"?Mr.push(Gn):Array.isArray(er)&&(Gn.length===1||Gn[1]===void 0&&Gn[2]===void 0)?Mr.push(Gn[0]):Mr.push([Gn[0],Gn[1],Gn[2]]);return Mr}function _a(er,Gn){var Cr;if(typeof er=="string")Cr=Gn(er)[0];else if(Array.isArray(er)){for(var Mr,Vo,Ua=er.concat(),sa=[],yl=Ua.length;yl--;)typeof(Mr=Ua.shift())=="string"?sa.push(Gn(Mr)[0]):Array.isArray(Mr)&&typeof Mr[0]=="string"&&(Vo=Gn(Mr[0],Mr[1],Mr[2]),sa.push([Vo[0],Vo[1],Vo[2]]));Cr=sa}return Cr}var Zs=!1,Ea=!0;if(typeof S=="string")Zs=!0;else if(Array.isArray(S)){var La=S.concat();it=[];for(var ea,Sr=La.length;Sr--;)(typeof(ea=La.shift())!="string"||Array.isArray(ea)&&typeof ea[0]!="string")&&(Ea=!1);Zs=Ea}if(Zs===!1)throw new Error('Type of text must be string or Array. "'+S+'" is not recognized.');typeof S=="string"&&(S=S.match(/[\r?\n]/)?S.split(/\r\n|\r|\n/g):[S]);var Pa=at/Pr.internal.scaleFactor,Ma=Pa*($i-1);switch(be.baseline){case"bottom":ae-=Ma;break;case"top":ae+=Pa-Ma;break;case"hanging":ae+=Pa-2*Ma;break;case"middle":ae+=Pa/2-Ma}if((nn=be.maxWidth||0)>0&&(typeof S=="string"?S=Pr.splitTextToSize(S,nn):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce((function(er,Gn){return er.concat(Pr.splitTextToSize(Gn,nn))}),[]))),Je={text:S,x:F,y:ae,options:be,mutex:{pdfEscape:Xr,activeFontKey:Fe,fonts:tt,activeFontSize:at}},zt.publish("preProcessText",Je),S=Je.text,Nt=(be=Je.options).angle,!(Nr instanceof Dt)&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,be.rotationDirection===0&&(Nt=-Nt),q===P.ADVANCED&&(Nt=-Nt);var ja=Math.cos(Nt),Da=Math.sin(Nt);Nr=new Dt(ja,Da,-Da,ja,0,0)}else Nt&&Nt instanceof Dt&&(Nr=Nt);q!==P.ADVANCED||Nr||(Nr=rr),(on=be.charSpace||Ro)!==void 0&&(Jr+=ne(D(on))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mr=be.horizontalScale)!==void 0&&(Jr+=ne(100*mr)+` Tz
`),be.lang;var xi=-1,ta=be.renderingMode!==void 0?be.renderingMode:be.stroke,is=Pr.internal.getCurrentPageInfo().pageContext;switch(ta){case 0:case!1:case"fill":xi=0;break;case 1:case!0:case"stroke":xi=1;break;case 2:case"fillThenStroke":xi=2;break;case 3:case"invisible":xi=3;break;case 4:case"fillAndAddForClipping":xi=4;break;case 5:case"strokeAndAddPathForClipping":xi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":xi=6;break;case 7:case"addToPathForClipping":xi=7}var zl=is.usedRenderingMode!==void 0?is.usedRenderingMode:-1;xi!==-1?Jr+=xi+` Tr
`:zl!==-1&&(Jr+=`0 Tr
`),xi!==-1&&(is.usedRenderingMode=xi),Ut=be.align||"left";var yi,Ra=at*$i,vl=Pr.internal.pageSize.getWidth(),Fa=tt[Fe];on=be.charSpace||Ro,nn=be.maxWidth||0,bn=Object.assign({autoencode:!0,noBOM:!0},be.flags);var Uo=[],Rs=function(er){return Pr.getStringUnitWidth(er,{font:Fa,charSpace:on,fontSize:at,doKerning:!1})*at/to};if(Object.prototype.toString.call(S)==="[object Array]"){var wi;it=gl(S),Ut!=="left"&&(yi=it.map(Rs));var si,Fs=0;if(Ut==="right"){F-=yi[0],S=[],Sr=it.length;for(var os=0;os<Sr;os++)os===0?(si=Br(F),wi=Tr(ae)):(si=D(Fs-yi[os]),wi=-Ra),S.push([it[os],si,wi]),Fs=yi[os]}else if(Ut==="center"){F-=yi[0]/2,S=[],Sr=it.length;for(var ss=0;ss<Sr;ss++)ss===0?(si=Br(F),wi=Tr(ae)):(si=D((Fs-yi[ss])/2),wi=-Ra),S.push([it[ss],si,wi]),Fs=yi[ss]}else if(Ut==="left"){S=[],Sr=it.length;for(var Ba=0;Ba<Sr;Ba++)S.push(it[Ba])}else if(Ut==="justify"&&Fa.encoding==="Identity-H"){S=[],Sr=it.length,nn=nn!==0?nn:vl;for(var as=0,Dn=0;Dn<Sr;Dn++)if(wi=Dn===0?Tr(ae):-Ra,si=Dn===0?Br(F):as,Dn<Sr-1){var ls=D((nn-yi[Dn])/(it[Dn].split(" ").length-1)),ai=it[Dn].split(" ");S.push([ai[0]+" ",si,wi]),as=0;for(var Gi=1;Gi<ai.length;Gi++){var na=(Rs(ai[Gi-1]+" "+ai[Gi])-Rs(ai[Gi]))*to+ls;Gi==ai.length-1?S.push([ai[Gi],na,0]):S.push([ai[Gi]+" ",na,0]),as-=na}}else S.push([it[Dn],si,wi]);S.push(["",as,0])}else{if(Ut!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(S=[],Sr=it.length,nn=nn!==0?nn:vl,Dn=0;Dn<Sr;Dn++)wi=Dn===0?Tr(ae):-Ra,si=Dn===0?Br(F):0,Dn<Sr-1?Uo.push(ne(D((nn-yi[Dn])/(it[Dn].split(" ").length-1)))):Uo.push(0),S.push([it[Dn],si,wi])}}var xl=typeof be.R2L=="boolean"?be.R2L:bt;xl===!0&&(S=_a(S,(function(er,Gn,Cr){return[er.split("").reverse().join(""),Gn,Cr]}))),Je={text:S,x:F,y:ae,options:be,mutex:{pdfEscape:Xr,activeFontKey:Fe,fonts:tt,activeFontSize:at}},zt.publish("postProcessText",Je),S=Je.text,ko=Je.mutex.isHex||!1;var ra=tt[Fe].encoding;ra!=="WinAnsiEncoding"&&ra!=="StandardEncoding"||(S=_a(S,(function(er,Gn,Cr){return[Ds(er),Gn,Cr]}))),it=gl(S),S=[];for(var ia,oa,Ji,us=0,Ho=1,cs=Array.isArray(it[0])?Ho:us,ds="",Bs=function(er,Gn,Cr){var Mr="";return Cr instanceof Dt?(Cr=typeof be.angle=="number"?mi(Cr,new Dt(1,0,0,1,er,Gn)):mi(new Dt(1,0,0,1,er,Gn),Cr),q===P.ADVANCED&&(Cr=mi(new Dt(1,0,0,-1,0,0),Cr)),Mr=Cr.join(" ")+` Tm
`):Mr=ne(er)+" "+ne(Gn)+` Td
`,Mr},Zr=0;Zr<it.length;Zr++){switch(ds="",cs){case Ho:Ji=(ko?"<":"(")+it[Zr][0]+(ko?">":")"),ia=parseFloat(it[Zr][1]),oa=parseFloat(it[Zr][2]);break;case us:Ji=(ko?"<":"(")+it[Zr]+(ko?">":")"),ia=Br(F),oa=Tr(ae)}Uo!==void 0&&Uo[Zr]!==void 0&&(ds=Uo[Zr]+` Tw
`),Zr===0?S.push(ds+Bs(ia,oa,Nr)+Ji):cs===us?S.push(ds+Ji):cs===Ho&&S.push(ds+Bs(ia,oa,Nr)+Ji)}S=cs===us?S.join(` Tj
T* `):S.join(` Tj
`),S+=` Tj
`;var Ai=`BT
/`;return Ai+=Fe+" "+at+` Tf
`,Ai+=ne(at*$i)+` TL
`,Ai+=Ir+`
`,Ai+=Jr,Ai+=S,te(Ai+="ET"),N[Fe]=!0,Pr};var kr=b.__private__.clip=b.clip=function(S){return te(S==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return kr("evenodd")},b.__private__.discardPath=b.discardPath=function(){return te("n"),this};var Ot=b.__private__.isValidStyle=function(S){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(S)!==-1&&(F=!0),F};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(S){return Ot(S)&&(p=S),this};var bo=b.__private__.getStyle=b.getStyle=function(S){var F=p;switch(S){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=S}return F},Oi=b.close=function(){return te("h"),this};b.stroke=function(){return te("S"),this},b.fill=function(S){return No("f",S),this},b.fillEvenOdd=function(S){return No("f*",S),this},b.fillStroke=function(S){return No("B",S),this},b.fillStrokeEvenOdd=function(S){return No("B*",S),this};var No=function(S,F){nr(F)==="object"?Un(F,S):te(S)},yt=function(S){S===null||q===P.ADVANCED&&S===void 0||(S=bo(S),te(S))};function _n(S,F,ae,be,je){var Je=new vu(F||this.boundingBox,ae||this.xStep,be||this.yStep,this.gState,je||this.matrix);Je.stream=this.stream;var it=S+"$$"+this.cloneIndex+++"$$";return wr(it,Je),Je}var Un=function(S,F){var ae=Pn[S.key],be=qt[ae];if(be instanceof Fl)te("q"),te(vn(F)),be.gState&&b.setGState(be.gState),te(S.matrix.toString()+" cm"),te("/"+ae+" sh"),te("Q");else if(be instanceof vu){var je=new Dt(1,0,0,-1,0,js());S.matrix&&(je=je.multiply(S.matrix||rr),ae=_n.call(be,S.key,S.boundingBox,S.xStep,S.yStep,je).id),te("q"),te("/Pattern cs"),te("/"+ae+" scn"),be.gState&&b.setGState(be.gState),te(F),te("Q")}},vn=function(S){switch(S){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ft=b.moveTo=function(S,F){return te(ne(D(S))+" "+ne(O(F))+" m"),this},sr=b.lineTo=function(S,F){return te(ne(D(S))+" "+ne(O(F))+" l"),this},pn=b.curveTo=function(S,F,ae,be,je,Je){return te([ne(D(S)),ne(O(F)),ne(D(ae)),ne(O(be)),ne(D(je)),ne(O(Je)),"c"].join(" ")),this};b.__private__.line=b.line=function(S,F,ae,be,je){if(isNaN(S)||isNaN(F)||isNaN(ae)||isNaN(be)||!Ot(je))throw new Error("Invalid arguments passed to jsPDF.line");return q===P.COMPAT?this.lines([[ae-S,be-F]],S,F,[1,1],je||"S"):this.lines([[ae-S,be-F]],S,F,[1,1]).stroke()},b.__private__.lines=b.lines=function(S,F,ae,be,je,Je){var it,Nt,Ut,on,nn,bn,mr,Nr,Pr,oi,Jr,ko;if(typeof S=="number"&&(ko=ae,ae=F,F=S,S=ko),be=be||[1,1],Je=Je||!1,isNaN(F)||isNaN(ae)||!Array.isArray(S)||!Array.isArray(be)||!Ot(je)||typeof Je!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ft(F,ae),it=be[0],Nt=be[1],on=S.length,oi=F,Jr=ae,Ut=0;Ut<on;Ut++)(nn=S[Ut]).length===2?(oi=nn[0]*it+oi,Jr=nn[1]*Nt+Jr,sr(oi,Jr)):(bn=nn[0]*it+oi,mr=nn[1]*Nt+Jr,Nr=nn[2]*it+oi,Pr=nn[3]*Nt+Jr,oi=nn[4]*it+oi,Jr=nn[5]*Nt+Jr,pn(bn,mr,Nr,Pr,oi,Jr));return Je&&Oi(),yt(je),this},b.path=function(S){for(var F=0;F<S.length;F++){var ae=S[F],be=ae.c;switch(ae.op){case"m":Ft(be[0],be[1]);break;case"l":sr(be[0],be[1]);break;case"c":pn.apply(this,be);break;case"h":Oi()}}return this},b.__private__.rect=b.rect=function(S,F,ae,be,je){if(isNaN(S)||isNaN(F)||isNaN(ae)||isNaN(be)||!Ot(je))throw new Error("Invalid arguments passed to jsPDF.rect");return q===P.COMPAT&&(be=-be),te([ne(D(S)),ne(O(F)),ne(D(ae)),ne(D(be)),"re"].join(" ")),yt(je),this},b.__private__.triangle=b.triangle=function(S,F,ae,be,je,Je,it){if(isNaN(S)||isNaN(F)||isNaN(ae)||isNaN(be)||isNaN(je)||isNaN(Je)||!Ot(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-S,be-F],[je-ae,Je-be],[S-je,F-Je]],S,F,[1,1],it,!0),this},b.__private__.roundedRect=b.roundedRect=function(S,F,ae,be,je,Je,it){if(isNaN(S)||isNaN(F)||isNaN(ae)||isNaN(be)||isNaN(je)||isNaN(Je)||!Ot(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return je=Math.min(je,.5*ae),Je=Math.min(Je,.5*be),this.lines([[ae-2*je,0],[je*Nt,0,je,Je-Je*Nt,je,Je],[0,be-2*Je],[0,Je*Nt,-je*Nt,Je,-je,Je],[2*je-ae,0],[-je*Nt,0,-je,-Je*Nt,-je,-Je],[0,2*Je-be],[0,-Je*Nt,je*Nt,-Je,je,-Je]],S+je,F,[1,1],it,!0),this},b.__private__.ellipse=b.ellipse=function(S,F,ae,be,je){if(isNaN(S)||isNaN(F)||isNaN(ae)||isNaN(be)||!Ot(je))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Je=4/3*(Math.SQRT2-1)*ae,it=4/3*(Math.SQRT2-1)*be;return Ft(S+ae,F),pn(S+ae,F-it,S+Je,F-be,S,F-be),pn(S-Je,F-be,S-ae,F-it,S-ae,F),pn(S-ae,F+it,S-Je,F+be,S,F+be),pn(S+Je,F+be,S+ae,F+it,S+ae,F),yt(je),this},b.__private__.circle=b.circle=function(S,F,ae,be){if(isNaN(S)||isNaN(F)||isNaN(ae)||!Ot(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(S,F,ae,ae,be)},b.setFont=function(S,F,ae){return ae&&(F=fe(F,ae)),Fe=Zt(S,F,{disableWarning:!1}),this};var $r=b.__private__.getFont=b.getFont=function(){return tt[Zt.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var S,F,ae={};for(S in pt)if(pt.hasOwnProperty(S))for(F in ae[S]=[],pt[S])pt[S].hasOwnProperty(F)&&ae[S].push(F);return ae},b.addFont=function(S,F,ae,be,je){var Je=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Je.indexOf(arguments[3])!==-1?je=arguments[3]:arguments[3]&&Je.indexOf(arguments[3])==-1&&(ae=fe(ae,be)),je=je||"Identity-H",wo.call(this,S,F,ae,je)};var Ii,So=t.lineWidth||.200025,ii=b.__private__.getLineWidth=b.getLineWidth=function(){return So},Yt=b.__private__.setLineWidth=b.setLineWidth=function(S){return So=S,te(ne(D(S))+" w"),this};b.__private__.setLineDash=Gt.API.setLineDash=Gt.API.setLineDashPattern=function(S,F){if(S=S||[],F=F||0,isNaN(F)||!Array.isArray(S))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return S=S.map((function(ae){return ne(D(ae))})).join(" "),F=ne(D(F)),te("["+S+"] "+F+" d"),this};var hn=b.__private__.getLineHeight=b.getLineHeight=function(){return at*Ii};b.__private__.getLineHeight=b.getLineHeight=function(){return at*Ii};var Co=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(S){return typeof(S=S||1.15)=="number"&&(Ii=S),this},Tn=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Ii};Co(t.lineHeight);var Br=b.__private__.getHorizontalCoordinate=function(S){return D(S)},Tr=b.__private__.getVerticalCoordinate=function(S){return q===P.ADVANCED?S:mt[W].mediaBox.topRightY-mt[W].mediaBox.bottomLeftY-D(S)},zi=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(S){return ne(Br(S))},cn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(S){return ne(Tr(S))},$n=t.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return pi($n)},b.__private__.setStrokeColor=b.setDrawColor=function(S,F,ae,be){return $n=Er({ch1:S,ch2:F,ch3:ae,ch4:be,pdfColorType:"draw",precision:2}),te($n),this};var Ls=t.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return pi(Ls)},b.__private__.setFillColor=b.setFillColor=function(S,F,ae,be){return Ls=Er({ch1:S,ch2:F,ch3:ae,ch4:be,pdfColorType:"fill",precision:2}),te(Ls),this};var Ir=t.textColor||"0 g",Gr=b.__private__.getTextColor=b.getTextColor=function(){return pi(Ir)};b.__private__.setTextColor=b.setTextColor=function(S,F,ae,be){return Ir=Er({ch1:S,ch2:F,ch3:ae,ch4:be,pdfColorType:"text",precision:3}),this};var Ro=t.charSpace,Fo=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ro||0)};b.__private__.setCharSpace=b.setCharSpace=function(S){if(isNaN(S))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ro=S,this};var Ps=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(S){var F=b.CapJoinStyles[S];if(F===void 0)throw new Error("Line cap style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ps=F,te(F+" J"),this};var Wi=0;b.__private__.setLineJoin=b.setLineJoin=function(S){var F=b.CapJoinStyles[S];if(F===void 0)throw new Error("Line join style of '"+S+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wi=F,te(F+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(S){if(S=S||0,isNaN(S))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(ne(D(S))+" M"),this},b.GState=hd,b.setGState=function(S){(S=typeof S=="string"?Xt[Cn[S]]:Ta(null,S)).equals(Fn)||(te("/"+S.id+" gs"),Fn=S)};var Ta=function(S,F){if(!S||!Cn[S]){var ae=!1;for(var be in Xt)if(Xt.hasOwnProperty(be)&&Xt[be].equals(F)){ae=!0;break}if(ae)F=Xt[be];else{var je="GS"+(Object.keys(Xt).length+1).toString(10);Xt[je]=F,F.id=je}return S&&(Cn[S]=F.id),zt.publish("addGState",F),F}};b.addGState=function(S,F){return Ta(S,F),this},b.saveGraphicsState=function(){return te("q"),ht.push({key:Fe,size:at,color:Ir}),this},b.restoreGraphicsState=function(){te("Q");var S=ht.pop();return Fe=S.key,at=S.size,Ir=S.color,Fn=null,this},b.setCurrentTransformationMatrix=function(S){return te(S.toString()+" cm"),this},b.comment=function(S){return te("#"+S),this};var Bo=function(S,F){var ae=S||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Je){isNaN(Je)||(ae=parseFloat(Je))}});var be=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Je){isNaN(Je)||(be=parseFloat(Je))}});var je="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return je},set:function(Je){je=Je.toString()}}),this},Ms=function(S,F,ae,be){Bo.call(this,S,F),this.type="rect";var je=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return je},set:function(it){isNaN(it)||(je=parseFloat(it))}});var Je=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Je},set:function(it){isNaN(it)||(Je=parseFloat(it))}}),this},Ia=function(){this.page=wn,this.currentPage=W,this.pages=Be.slice(0),this.pagesContext=mt.slice(0),this.x=lt,this.y=ee,this.matrix=Oe,this.width=rs(W),this.height=js(W),this.outputDestination=pe,this.id="",this.objectNumber=-1};Ia.prototype.restore=function(){wn=this.page,W=this.currentPage,mt=this.pagesContext,Be=this.pages,lt=this.x,ee=this.y,Oe=this.matrix,ml(W,this.width),pl(W,this.height),pe=this.outputDestination};var Ol=function(S,F,ae,be,je){Mn.push(new Ia),wn=W=0,Be=[],lt=S,ee=F,Oe=je,oe([ae,be])},Mu=function(S){if(gn[S])Mn.pop().restore();else{var F=new Ia,ae="Xo"+(Object.keys(sn).length+1).toString(10);F.id=ae,gn[S]=ae,sn[ae]=F,zt.publish("addFormObject",F),Mn.pop().restore()}};for(var Aa in b.beginFormObject=function(S,F,ae,be,je){return Ol(S,F,ae,be,je),this},b.endFormObject=function(S){return Mu(S),this},b.doFormObject=function(S,F){var ae=sn[gn[S]];return te("q"),te(F.toString()+" cm"),te("/"+ae.id+" Do"),te("Q"),this},b.getFormObject=function(S){var F=sn[gn[S]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},b.save=function(S,F){return S=S||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Rl(jn(zn()),S),typeof Rl.unload=="function"&&Kt.setTimeout&&setTimeout(Rl.unload,911),this):new Promise((function(ae,be){try{var je=Rl(jn(zn()),S);typeof Rl.unload=="function"&&Kt.setTimeout&&setTimeout(Rl.unload,911),ae(je)}catch(Je){be(Je.message)}}))},Gt.API)Gt.API.hasOwnProperty(Aa)&&(Aa==="events"&&Gt.API.events.length?(function(S,F){var ae,be,je;for(je=F.length-1;je!==-1;je--)ae=F[je][0],be=F[je][1],S.subscribe.apply(S,[ae].concat(typeof be=="function"?[be]:be))})(zt,Gt.API.events):b[Aa]=Gt.API[Aa]);var rs=b.getPageWidth=function(S){return(mt[S=S||W].mediaBox.topRightX-mt[S].mediaBox.bottomLeftX)/Ie},ml=b.setPageWidth=function(S,F){mt[S].mediaBox.topRightX=F*Ie+mt[S].mediaBox.bottomLeftX},js=b.getPageHeight=function(S){return(mt[S=S||W].mediaBox.topRightY-mt[S].mediaBox.bottomLeftY)/Ie},pl=b.setPageHeight=function(S,F){mt[S].mediaBox.topRightY=F*Ie+mt[S].mediaBox.bottomLeftY};return b.internal={pdfEscape:Xr,getStyle:bo,getFont:$r,getFontSize:He,getCharSpace:Fo,getTextColor:Gr,getLineHeight:hn,getLineHeightFactor:Tn,getLineWidth:ii,write:gt,getHorizontalCoordinate:Br,getVerticalCoordinate:Tr,getCoordinateString:zi,getVerticalCoordinateString:cn,collections:{},newObject:kn,newAdditionalObject:br,newObjectDeferred:Kn,newObjectDeferredBegin:mn,getFilters:gi,putStream:fr,events:zt,scaleFactor:Ie,pageSize:{getWidth:function(){return rs(W)},setWidth:function(S){ml(W,S)},getHeight:function(){return js(W)},setHeight:function(S){pl(W,S)}},encryptionOptions:v,encryption:Ht,getEncryptor:un,output:fn,getNumberOfPages:Ct,pages:Be,out:te,f2:he,f3:R,getPageInfo:Bn,getPageInfoByObjId:Et,getCurrentPageInfo:tn,getPDFVersion:_,Point:Bo,Rectangle:Ms,Matrix:Dt,hasHotfix:Wn},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return rs(W)},set:function(S){ml(W,S)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return js(W)},set:function(S){pl(W,S)},enumerable:!0,configurable:!0}),Do.call(b,qe),Fe="F1",Me(o,n),zt.publish("initialized"),b}pu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},pu.prototype.toHexString=function(t){return t.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},pu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},pu.prototype.processOwnerPassword=function(t,e){return zf(Of(e).substr(0,5),t)},pu.prototype.encryptor=function(t,e){var n=Of(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return zf(n,r)}},hd.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||nr(t)!==nr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Gt.API={events:[]},Gt.version="2.5.2";var Fr=Gt.API,hh=1,Hl=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},du=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ln=function(t){return t.toFixed(2)},sl=function(t){return t.toFixed(5)};Fr.__acroform__={};var vo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Hm=function(t){return t*hh},$s=function(t){var e=new z0,n=Pt.internal.getHeight(t)||0,r=Pt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ln(r)),Number(ln(n))],e},T2=Fr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},I2=Fr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},A2=Fr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},Or=Fr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return A2(t,e-1)},zr=Fr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return T2(t,e-1)},Wr=Fr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return I2(t,e-1)},_2=Fr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=t[0],l=t[1],u=t[2],f=t[3],m={};return m.lowerLeft_X=n(o)||0,m.lowerLeft_Y=r(l+f)||0,m.upperRight_X=n(o+u)||0,m.upperRight_Y=r(l)||0,[Number(ln(m.lowerLeft_X)),Number(ln(m.lowerLeft_Y)),Number(ln(m.upperRight_X)),Number(ln(m.upperRight_Y))]},E2=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Wf(t,n),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+ln(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var l=$s(t);return l.scope=t.scope,l.stream=e.join(`
`),l}},Wf=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map((function(R){return R.split(`
`)})):o.map((function(R){return[R]}));var l=n,u=Pt.internal.getHeight(t)||0;u=u<0?-u:u;var f=Pt.internal.getWidth(t)||0;f=f<0?-f:f;var m=function(R,D,H){if(R+1<o.length){var O=D+" "+o[R+1][0];return Wc(O,t,H).width<=f-4}return!1};l++;e:for(;l>0;){e="",l--;var p,v,w=Wc("3",t,l).height,N=t.multiline?u-l:(u-w)/2,b=N+=2,I=0,_=0,E=0;if(l<=0){e=`(...) Tj
`,e+="% Width of Text: "+Wc(e,t,l=12).width+", FieldWidth:"+f+`
`;break}for(var T="",P=0,q=0;q<o.length;q++)if(o.hasOwnProperty(q)){var J=!1;if(o[q].length!==1&&E!==o[q].length-1){if((w+2)*(P+2)+2>u)continue e;T+=o[q][E],J=!0,_=q,q--}else{T=(T+=o[q][E]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var K=parseInt(q),fe=m(K,T,l),ne=q>=o.length-1;if(fe&&!ne){T+=" ",E=0;continue}if(fe||ne){if(ne)_=K;else if(t.multiline&&(w+2)*(P+2)+2>u)continue e}else{if(!t.multiline||(w+2)*(P+2)+2>u)continue e;_=K}}for(var X="",$=I;$<=_;$++){var he=o[$];if(t.multiline){if($===_){X+=he[E]+" ",E=(E+1)%he.length;continue}if($===I){X+=he[he.length-1]+" ";continue}}X+=he[0]+" "}switch(X=X.substr(X.length-1)==" "?X.substr(0,X.length-1):X,v=Wc(X,t,l).width,t.textAlign){case"right":p=f-v-2;break;case"center":p=(f-v)/2;break;case"left":default:p=2}e+=ln(p)+" "+ln(b)+` Td
`,e+="("+Hl(X)+`) Tj
`,e+=-ln(p)+` 0 Td
`,b=-(l+2),v=0,I=J?_:_+1,P++,T=""}break}return r.text=e,r.fontSize=l,r},Wc=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:o}},L2={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},P2=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find((function(r){return r.type===n.type&&r.object===n.object}))===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},M2=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),nr(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete t[r]}},j2=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Is.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(L2)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");hh=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new W0,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)})),t.internal.events.subscribe("buildDocument",(function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];l.objId=void 0,l.hasAnnotation&&P2(l,n)}})(t)})),t.internal.events.subscribe("putCatalog",(function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)})),t.internal.events.subscribe("postPutPages",(function(n){(function(r,o){var l=!r;for(var u in r||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var f=r[u],m=[],p=f.Rect;if(f.Rect&&(f.Rect=_2(f.Rect,o)),o.internal.newObjectDeferredBegin(f.objId,!0),f.DA=Pt.createDefaultAppearanceStream(f),nr(f)==="object"&&typeof f.getKeyValueListForStream=="function"&&(m=f.getKeyValueListForStream()),f.Rect=p,f.hasAppearanceStream&&!f.appearanceStreamContent){var v=E2(f);m.push({key:"AP",value:"<</N "+v+">>"}),o.internal.acroformPlugin.xForms.push(v)}if(f.appearanceStreamContent){var w="";for(var N in f.appearanceStreamContent)if(f.appearanceStreamContent.hasOwnProperty(N)){var b=f.appearanceStreamContent[N];if(w+="/"+N+" ",w+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var u in b)if(b.hasOwnProperty(u)){var I=b[u];typeof I=="function"&&(I=I.call(o,f)),w+="/"+u+" "+I+" ",o.internal.acroformPlugin.xForms.indexOf(I)>=0||o.internal.acroformPlugin.xForms.push(I)}}else typeof(I=b)=="function"&&(I=I.call(o,f)),w+="/"+u+" "+I,o.internal.acroformPlugin.xForms.indexOf(I)>=0||o.internal.acroformPlugin.xForms.push(I);w+=">>"}m.push({key:"AP",value:`<<
`+w+">>"})}o.internal.putStream({additionalKeyValues:m,objectId:f.objId}),o.internal.out("endobj")}l&&M2(o.internal.acroformPlugin.xForms,o)})(n,t)})),t.internal.acroformPlugin.isInitialized=!0}},O0=Fr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(u){return u};if(Array.isArray(t)){for(var o="[",l=0;l<t.length;l++)switch(l!==0&&(o+=" "),nr(t[l])){case"boolean":case"number":case"object":o+=t[l].toString();break;case"string":t[l].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),o+="("+Hl(r(t[l].toString()))+")"):o+=t[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Tf=function(t,e,n){var r=function(o){return o};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Hl(r(t))+")"},Gs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Gs.prototype.toString=function(){return this.objId+" 0 R"},Gs.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Gs.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"}));for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:O0(o,this.objId,this.scope)}):o instanceof Gs?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):typeof o!="function"&&t.push({key:r,value:o}))}return t};var z0=function(){Gs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};vo(z0,Gs);var W0=function(){Gs.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Hl(n(t))+")"}},set:function(n){t=n}})};vo(W0,Gs);var Is=function t(){Gs.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Or(e,3)},set:function(T){T?this.F=zr(e,3):this.F=Wr(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');n=T}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(T){r=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(T){r[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(T){r[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(T){r[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(T){r[3]=T}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof md)return;l="FieldObject"+t.FieldNum++}var T=function(P){return P};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Hl(T(l))+")"},set:function(T){l=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(T){l=T}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(T){u=T}});var f="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return f},set:function(T){f=T}});var m=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return m},set:function(T){m=T}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/hh:p},set:function(T){p=T}});var v="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return v},set:function(T){v=T}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof md||this instanceof Bl))return Tf(w,this.objId,this.scope)},set:function(T){T=T.toString(),w=T}});var N=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(N)return this instanceof hi?N:Tf(N,this.objId,this.scope)},set:function(T){T=T.toString(),N=this instanceof hi?T:T.substr(0,1)==="("?du(T.substr(1,T.length-2)):du(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi?du(N.substr(1,N.length-1)):N},set:function(T){T=T.toString(),N=this instanceof hi?"/"+T:T}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof hi?b:Tf(b,this.objId,this.scope)},set:function(T){T=T.toString(),b=this instanceof hi?T:T.substr(0,1)==="("?du(T.substr(1,T.length-2)):du(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof hi?du(b.substr(1,b.length-1)):b},set:function(T){T=T.toString(),b=this instanceof hi?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var I,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(T){T=!!T,_=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(I)return I},set:function(T){I=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,1)},set:function(T){T?this.Ff=zr(this.Ff,1):this.Ff=Wr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,2)},set:function(T){T?this.Ff=zr(this.Ff,2):this.Ff=Wr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,3)},set:function(T){T?this.Ff=zr(this.Ff,3):this.Ff=Wr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');E=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(E){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};vo(Is,Gs);var wu=function(){Is.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return O0(e,this.objId,this.scope)},set:function(n){var r,o;o=[],typeof(r=n)=="string"&&(o=(function(l,u,f){f||(f=1);for(var m,p=[];m=u.exec(l);)p.push(m[f]);return p})(r,/\((.*?)\)/g)),e=o}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,18)},set:function(n){n?this.Ff=zr(this.Ff,18):this.Ff=Wr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=zr(this.Ff,19):this.Ff=Wr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,20)},set:function(n){n?(this.Ff=zr(this.Ff,20),e.sort()):this.Ff=Wr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,22)},set:function(n){n?this.Ff=zr(this.Ff,22):this.Ff=Wr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,23)},set:function(n){n?this.Ff=zr(this.Ff,23):this.Ff=Wr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,27)},set:function(n){n?this.Ff=zr(this.Ff,27):this.Ff=Wr(this.Ff,27)}}),this.hasAppearanceStream=!1};vo(wu,Is);var bu=function(){wu.call(this),this.fontName="helvetica",this.combo=!1};vo(bu,wu);var Nu=function(){bu.call(this),this.combo=!0};vo(Nu,bu);var td=function(){Nu.call(this),this.edit=!0};vo(td,Nu);var hi=function(){Is.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,15)},set:function(n){n?this.Ff=zr(this.Ff,15):this.Ff=Wr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,16)},set:function(n){n?this.Ff=zr(this.Ff,16):this.Ff=Wr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,17)},set:function(n){n?this.Ff=zr(this.Ff,17):this.Ff=Wr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,26)},set:function(n){n?this.Ff=zr(this.Ff,26):this.Ff=Wr(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,o=[];for(r in o.push("<<"),e)o.push("/"+r+" ("+Hl(n(e[r]))+")");return o.push(">>"),o.join(`
`)}},set:function(n){nr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};vo(hi,Is);var nd=function(){hi.call(this),this.pushButton=!0};vo(nd,hi);var Su=function(){hi.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};vo(Su,hi);var md=function(){var t,e;Is.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(o){t=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(o){e=o}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(f){return f};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,u=[];for(l in u.push("<<"),r)u.push("/"+l+" ("+Hl(o(r[l]))+")");return u.push(">>"),u.join(`
`)},set:function(o){nr(o)==="object"&&(r=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(o){typeof o=="string"&&(r.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(o){n="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};vo(md,Is),Su.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Su.prototype.createOption=function(t){var e=new md;return e.Parent=this,e.optionName=t,this.Kids.push(e),D2.call(this.scope,e),e};var rd=function(){hi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pt.CheckBox.createAppearanceStream()};vo(rd,hi);var Bl=function(){Is.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,13)},set:function(e){e?this.Ff=zr(this.Ff,13):this.Ff=Wr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,21)},set:function(e){e?this.Ff=zr(this.Ff,21):this.Ff=Wr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,23)},set:function(e){e?this.Ff=zr(this.Ff,23):this.Ff=Wr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,24)},set:function(e){e?this.Ff=zr(this.Ff,24):this.Ff=Wr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,25)},set:function(e){e?this.Ff=zr(this.Ff,25):this.Ff=Wr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,26)},set:function(e){e?this.Ff=zr(this.Ff,26):this.Ff=Wr(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};vo(Bl,Is);var id=function(){Bl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,14)},set:function(t){t?this.Ff=zr(this.Ff,14):this.Ff=Wr(this.Ff,14)}}),this.password=!0};vo(id,Bl);var Pt={CheckBox:{createAppearanceStream:function(){return{N:{On:Pt.CheckBox.YesNormal},D:{On:Pt.CheckBox.YesPushDown,Off:Pt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=$s(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),l=Wf(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ln(Pt.internal.getWidth(t))+" "+ln(Pt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ln(l.fontSize)+" Tf "+o),n.push("BT"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=$s(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],l=Pt.internal.getHeight(t),u=Pt.internal.getWidth(t),f=Wf(t,t.caption);return o.push("1 g"),o.push("0 0 "+ln(u)+" "+ln(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+ln(u-1)+" "+ln(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+n+" "+ln(f.fontSize)+" Tf "+r),o.push(f.text),o.push("ET"),o.push("Q"),e.stream=o.join(`
`),e},OffPushDown:function(t){var e=$s(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ln(Pt.internal.getWidth(t))+" "+ln(Pt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Pt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Pt.RadioButton.Circle.YesNormal,e.D[t]=Pt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=$s(t);e.scope=t.scope;var n=[],r=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Pt.internal.Bezier_C,l=Number((r*o).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sl(Pt.internal.getWidth(t)/2)+" "+sl(Pt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+l+" "+l+" "+r+" 0 "+r+" c"),n.push("-"+l+" "+r+" -"+r+" "+l+" -"+r+" 0 c"),n.push("-"+r+" -"+l+" -"+l+" -"+r+" 0 -"+r+" c"),n.push(l+" -"+r+" "+r+" -"+l+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=$s(t);e.scope=t.scope;var n=[],r=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*Pt.internal.Bezier_C).toFixed(5)),u=Number((r*Pt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sl(Pt.internal.getWidth(t)/2)+" "+sl(Pt.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sl(Pt.internal.getWidth(t)/2)+" "+sl(Pt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),n.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),n.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),n.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=$s(t);e.scope=t.scope;var n=[],r=Pt.internal.getWidth(t)<=Pt.internal.getHeight(t)?Pt.internal.getWidth(t)/4:Pt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var o=Number((2*r).toFixed(5)),l=Number((o*Pt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sl(Pt.internal.getWidth(t)/2)+" "+sl(Pt.internal.getHeight(t)/2)+" cm"),n.push(o+" 0 m"),n.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),n.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),n.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),n.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Pt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Pt.RadioButton.Cross.YesNormal,e.D[t]=Pt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=$s(t);e.scope=t.scope;var n=[],r=Pt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ln(Pt.internal.getWidth(t)-2)+" "+ln(Pt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ln(r.x1.x)+" "+ln(r.x1.y)+" m"),n.push(ln(r.x2.x)+" "+ln(r.x2.y)+" l"),n.push(ln(r.x4.x)+" "+ln(r.x4.y)+" m"),n.push(ln(r.x3.x)+" "+ln(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=$s(t);e.scope=t.scope;var n=Pt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ln(Pt.internal.getWidth(t))+" "+ln(Pt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ln(Pt.internal.getWidth(t)-2)+" "+ln(Pt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ln(n.x1.x)+" "+ln(n.x1.y)+" m"),r.push(ln(n.x2.x)+" "+ln(n.x2.y)+" l"),r.push(ln(n.x4.x)+" "+ln(n.x4.y)+" m"),r.push(ln(n.x3.x)+" "+ln(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=$s(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ln(Pt.internal.getWidth(t))+" "+ln(Pt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Pt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Pt.internal.getWidth(t),n=Pt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Pt.internal.getWidth=function(t){var e=0;return nr(t)==="object"&&(e=Hm(t.Rect[2])),e},Pt.internal.getHeight=function(t){var e=0;return nr(t)==="object"&&(e=Hm(t.Rect[3])),e};var D2=Fr.addField=function(t){if(j2(this,t),!(t instanceof Is))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Fr.AcroFormChoiceField=wu,Fr.AcroFormListBox=bu,Fr.AcroFormComboBox=Nu,Fr.AcroFormEditBox=td,Fr.AcroFormButton=hi,Fr.AcroFormPushButton=nd,Fr.AcroFormRadioButton=Su,Fr.AcroFormCheckBox=rd,Fr.AcroFormTextField=Bl,Fr.AcroFormPasswordField=id,Fr.AcroFormAppearance=Pt,Fr.AcroForm={ChoiceField:wu,ListBox:bu,ComboBox:Nu,EditBox:td,Button:hi,PushButton:nd,RadioButton:Su,CheckBox:rd,TextField:Bl,PasswordField:id,Appearance:Pt},Gt.AcroForm={ChoiceField:wu,ListBox:bu,ComboBox:Nu,EditBox:td,Button:hi,PushButton:nd,RadioButton:Su,CheckBox:rd,TextField:Bl,PasswordField:id,Appearance:Pt};Gt.AcroForm;function $0(t){return t.reduce((function(e,n,r){return e[n]=r,e}),{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(R,D){var H,O,ge,xe,ie,Y=e;if((D=D||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(fe(R))for(ie in n)for(ge=n[ie],H=0;H<ge.length;H+=1){for(xe=!0,O=0;O<ge[H].length;O+=1)if(ge[H][O]!==void 0&&ge[H][O]!==R[O]){xe=!1;break}if(xe===!0){Y=ie;break}}else for(ie in n)for(ge=n[ie],H=0;H<ge.length;H+=1){for(xe=!0,O=0;O<ge[H].length;O+=1)if(ge[H][O]!==void 0&&ge[H][O]!==R.charCodeAt(O)){xe=!1;break}if(xe===!0){Y=ie;break}}return Y===e&&D!==e&&(Y=D),Y},o=function R(D){for(var H=this.internal.write,O=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var xe=[];if(xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Image"}),xe.push({key:"Width",value:D.width}),xe.push({key:"Height",value:D.height}),D.colorSpace===E.INDEXED?xe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(xe.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===E.DEVICE_CMYK&&xe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),xe.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&xe.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var ie="",Y=0,ve=D.transparency.length;Y<ve;Y++)ie+=D.transparency[Y]+" "+D.transparency[Y]+" ";xe.push({key:"Mask",value:"["+ie+"]"})}D.sMask!==void 0&&xe.push({key:"SMask",value:D.objectId+1+" 0 R"});var we=D.filter!==void 0?["/"+D.filter]:void 0;if(O({data:D.data,additionalKeyValues:xe,alreadyAppliedFilters:we,objectId:D.objectId}),H("endobj"),"sMask"in D&&D.sMask!==void 0){var le="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,M={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:le,data:D.sMask};"filter"in D&&(M.filter=D.filter),R.call(this,M)}if(D.colorSpace===E.INDEXED){var W=this.internal.newObject();O({data:X(new Uint8Array(D.palette)),objectId:W}),H("endobj")}},l=function(){var R=this.internal.collections.addImage_images;for(var D in R)o.call(this,R[D])},u=function(){var R,D=this.internal.collections.addImage_images,H=this.internal.write;for(var O in D)H("/I"+(R=D[O]).index,R.objectId,"0","R")},f=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",u))},m=function(){var R=this.internal.collections.addImage_images;return f.call(this),R},p=function(){return Object.keys(this.internal.collections.addImage_images).length},v=function(R){return typeof t["process"+R.toUpperCase()]=="function"},w=function(R){return nr(R)==="object"&&R.nodeType===1},N=function(R,D){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var H=""+R.getAttribute("src");if(H.indexOf("data:image/")===0)return nc(unescape(H).split("base64,").pop());var O=t.loadFile(H,!0);if(O!==void 0)return O}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ge;switch(D){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;case"JPEG":case"JPG":default:ge="image/jpeg"}return nc(R.toDataURL(ge,1).split("base64,").pop())}},b=function(R){var D=this.internal.collections.addImage_images;if(D){for(var H in D)if(R===D[H].alias)return D[H]}},I=function(R,D,H){return R||D||(R=-96,D=-96),R<0&&(R=-1*H.width*72/R/this.internal.scaleFactor),D<0&&(D=-1*H.height*72/D/this.internal.scaleFactor),R===0&&(R=D*H.width/H.height),D===0&&(D=R*H.height/H.width),[R,D]},_=function(R,D,H,O,ge,xe){var ie=I.call(this,H,O,ge),Y=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,we=m.call(this);if(H=ie[0],O=ie[1],we[ge.index]=ge,xe){xe*=Math.PI/180;var le=Math.cos(xe),M=Math.sin(xe),W=function(ue){return ue.toFixed(4)},Q=[W(le),W(M),W(-1*M),W(le),0,0,"cm"]}this.internal.write("q"),xe?(this.internal.write([1,"0","0",1,Y(R),ve(D+O),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([Y(H),"0","0",Y(O),"0","0","cm"].join(" "))):this.internal.write([Y(H),"0","0",Y(O),Y(R),ve(D+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},P=t.__addimage__.sHashCode=function(R){var D,H,O=0;if(typeof R=="string")for(H=R.length,D=0;D<H;D++)O=(O<<5)-O+R.charCodeAt(D),O|=0;else if(fe(R))for(H=R.byteLength/2,D=0;D<H;D++)O=(O<<5)-O+R[D],O|=0;return O},q=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var D=!0;return R.length===0&&(D=!1),R.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(D=!1),D},J=t.__addimage__.extractImageFromDataUrl=function(R){var D=(R=R||"").split("base64,"),H=null;if(D.length===2){var O=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(O)&&(H={mimeType:O[1],charset:O[2],data:D[1]})}return H},K=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return K()&&R instanceof ArrayBuffer};var fe=t.__addimage__.isArrayBufferView=function(R){return K()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},ne=t.__addimage__.binaryStringToUint8Array=function(R){for(var D=R.length,H=new Uint8Array(D),O=0;O<D;O++)H[O]=R.charCodeAt(O);return H},X=t.__addimage__.arrayBufferToBinaryString=function(R){for(var D="",H=fe(R)?R:new Uint8Array(R),O=0;O<H.length;O+=8192)D+=String.fromCharCode.apply(null,H.subarray(O,O+8192));return D};t.addImage=function(){var R,D,H,O,ge,xe,ie,Y,ve;if(typeof arguments[1]=="number"?(D=e,H=arguments[1],O=arguments[2],ge=arguments[3],xe=arguments[4],ie=arguments[5],Y=arguments[6],ve=arguments[7]):(D=arguments[1],H=arguments[2],O=arguments[3],ge=arguments[4],xe=arguments[5],ie=arguments[6],Y=arguments[7],ve=arguments[8]),nr(R=arguments[0])==="object"&&!w(R)&&"imageData"in R){var we=R;R=we.imageData,D=we.format||D||e,H=we.x||H||0,O=we.y||O||0,ge=we.w||we.width||ge,xe=we.h||we.height||xe,ie=we.alias||ie,Y=we.compression||Y,ve=we.rotation||we.angle||ve}var le=this.internal.getFilters();if(Y===void 0&&le.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(H)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var M=$.call(this,R,D,ie,Y);return _.call(this,H,O,ge,xe,M,ve),this};var $=function(R,D,H,O){var ge,xe,ie;if(typeof R=="string"&&r(R)===e){R=unescape(R);var Y=he(R,!1);(Y!==""||(Y=t.loadFile(R,!0))!==void 0)&&(R=Y)}if(w(R)&&(R=N(R,D)),D=r(R,D),!v(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((ie=H)==null||ie.length===0)&&(H=(function(ve){return typeof ve=="string"||fe(ve)?P(ve):fe(ve.data)?P(ve.data):null})(R)),(ge=b.call(this,H))||(K()&&(R instanceof Uint8Array||D==="RGBA"||(xe=R,R=ne(R))),ge=this["process"+D.toUpperCase()](R,p.call(this),H,(function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in t.image_compression?ve:T.NONE})(O),xe)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},he=t.__addimage__.convertBase64ToBinaryString=function(R,D){var H;D=typeof D!="boolean"||D;var O,ge="";if(typeof R=="string"){O=(H=J(R))!==null?H.data:R;try{ge=nc(O)}catch(xe){if(D)throw q(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+xe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ge};t.getImageProperties=function(R){var D,H,O="";if(w(R)&&(R=N(R)),typeof R=="string"&&r(R)===e&&((O=he(R,!1))===""&&(O=t.loadFile(R)||""),R=O),H=r(R),!v(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!K()||R instanceof Uint8Array||(R=ne(R)),!(D=this["process"+H.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=H,D}})(Gt.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Gt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,o,l,u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString,m=this.internal.getPageInfoByObjId(n.objId),p=n.pageContext.annotations,v=!1,w=0;w<p.length&&!v;w++)switch((r=p[w]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(v=!0);break;case"reference":case"text":case"freetext":v=!0}if(v!=0){this.internal.write("/Annots [");for(var N=0;N<p.length;N++){r=p[N];var b=this.internal.pdfEscape,I=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(_.objId),P=r.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y)+"] ")+"/Contents ("+b(T(r.contents))+")",l+=" /Popup "+E.objId+" 0 R",l+=" /P "+m.objId+" 0 R",l+=" /T ("+b(T(P))+") >>",_.content=l;var q=_.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+u(r.bounds.x+30)+" "+f(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+f(r.bounds.y)+"] ")+" /Parent "+q,r.open&&(l+=" /Open true"),l+=" >>",E.content=l,this.internal.write(_.objId,"0 R",E.objId,"0 R");break;case"freetext":o="/Rect ["+u(r.bounds.x)+" "+f(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+f(r.bounds.y+r.bounds.h)+"] ";var J=r.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+b(I(r.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+J+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(o="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",l="",r.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+b(I(r.options.url))+") >>";else if(r.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,l+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var fe=f(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),l+=" /XYZ "+r.options.left+" "+fe+" "+r.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,o,l,u){var f=this.internal.getCurrentPageInfo(),m=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;f.pageContext.annotations.push({finalBounds:{x:m(n),y:p(r),w:m(n+o),h:p(r+l)},options:u,type:"link"})},t.textWithLink=function(n,r,o,l){var u,f,m=this.getTextWidth(n),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){f=l.maxWidth;var v=this.splitTextToSize(n,f).length;u=Math.ceil(p*v)}else f=m,u=p;return this.text(n,r,o,l),o+=.2*p,l.align==="center"&&(r-=m/2),l.align==="right"&&(r-=m),this.link(r,o-p,f,u,l),m},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}})(Gt.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var l=t.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},u=t.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},f=t.__arabicParser__.isArabicEndLetter=function(_){return u(_)&&l(_)&&e[_.charCodeAt(0)].length<=2},m=t.__arabicParser__.isArabicAlfLetter=function(_){return u(_)&&o.indexOf(_.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return u(_)&&l(_)&&e[_.charCodeAt(0)].length>=1};var p=t.__arabicParser__.arabicLetterHasFinalForm=function(_){return u(_)&&l(_)&&e[_.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(_){return u(_)&&l(_)&&e[_.charCodeAt(0)].length>=3};var v=t.__arabicParser__.arabicLetterHasMedialForm=function(_){return u(_)&&l(_)&&e[_.charCodeAt(0)].length==4},w=t.__arabicParser__.resolveLigatures=function(_){var E=0,T=n,P="",q=0;for(E=0;E<_.length;E+=1)T[_.charCodeAt(E)]!==void 0?(q++,typeof(T=T[_.charCodeAt(E)])=="number"&&(P+=String.fromCharCode(T),T=n,q=0),E===_.length-1&&(T=n,P+=_.charAt(E-(q-1)),E-=q-1,q=0)):(T=n,P+=_.charAt(E-q),E-=q,q=0);return P};t.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var N=t.__arabicParser__.getCorrectForm=function(_,E,T){return u(_)?l(_)===!1?-1:!p(_)||!u(E)&&!u(T)||!u(T)&&f(E)||f(_)&&!u(E)||f(_)&&m(E)||f(_)&&f(E)?0:v(_)&&u(E)&&!f(E)&&u(T)&&p(T)?3:f(_)||!u(T)?1:2:-1},b=function(_){var E=0,T=0,P=0,q="",J="",K="",fe=(_=_||"").split("\\s+"),ne=[];for(E=0;E<fe.length;E+=1){for(ne.push(""),T=0;T<fe[E].length;T+=1)q=fe[E][T],J=fe[E][T-1],K=fe[E][T+1],u(q)?(P=N(q,J,K),ne[E]+=P!==-1?String.fromCharCode(e[q.charCodeAt(0)][P]):q):ne[E]+=q;ne[E]=w(ne[E])}return ne.join(" ")},I=t.__arabicParser__.processArabic=t.processArabic=function(){var _,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(E)){var P=0;for(T=[],P=0;P<E.length;P+=1)Array.isArray(E[P])?T.push([b(E[P][0]),E[P][1],E[P][2]]):T.push([b(E[P])]);_=T}else _=b(E);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};t.events.push(["preProcessText",I])})(Gt.API),Gt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(f){n=f}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(f){r=isNaN(f)||Number.isInteger(f)===!1||f<0?150:f,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(f){o=isNaN(f)||Number.isInteger(f)===!1||f<0?300:f,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(f){l=f}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(f){u=f}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var o;if((n=n||"2d")!=="2d")return null;for(o in r)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=r[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Gt.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var m=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var v=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(_){w=_}});var N=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return N},set:function(_){N=_}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(_){b=_}});var I=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return I},set:function(_){I=_}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(m){return r.call(this),this.internal.__cell__.headerFunction=typeof m=="function"?m:void 0,this},t.getTextDimensions=function(m,p){r.call(this);var v=(p=p||{}).fontSize||this.getFontSize(),w=p.font||this.getFont(),N=p.scaleFactor||this.internal.scaleFactor,b=0,I=0,_=0,E=this;if(!Array.isArray(m)&&typeof m!="string"){if(typeof m!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");m=String(m)}var T=p.maxWidth;T>0?typeof m=="string"?m=this.splitTextToSize(m,T):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce((function(q,J){return q.concat(E.splitTextToSize(J,T))}),[])):m=Array.isArray(m)?m:[m];for(var P=0;P<m.length;P++)b<(_=this.getStringUnitWidth(m[P],{font:w})*v)&&(b=_);return b!==0&&(I=m.length),{w:b/=N,h:Math.max((I*v*this.getLineHeightFactor()-v*(this.getLineHeightFactor()-1))/N,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var m=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new l(m.left,m.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=t.cell=function(){var m;m=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var p=this.internal.__cell__.lastCell,v=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,N=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===m.lineNumber?(m.x=(p.x||0)+(p.width||0),m.y=p.y||0):p.y+p.height+m.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),m.y=w.top,b&&N&&(this.printHeaderRow(m.lineNumber,!0),m.y+=N[0].height)):m.y=p.y+p.height||m.y),m.text[0]!==void 0&&(this.rect(m.x,m.y,m.width,m.height,n===!0?"FD":void 0),m.align==="right"?this.text(m.text,m.x+m.width-v,m.y+v,{align:"right",baseline:"top"}):m.align==="center"?this.text(m.text,m.x+m.width/2,m.y+v,{align:"center",baseline:"top",maxWidth:m.width-v-v}):this.text(m.text,m.x+v,m.y+v,{align:"left",baseline:"top",maxWidth:m.width-v-v})),this.internal.__cell__.lastCell=m,this};t.table=function(m,p,v,w,N){if(r.call(this),!v)throw new Error("No data for PDF table.");var b,I,_,E,T=[],P=[],q=[],J={},K={},fe=[],ne=[],X=(N=N||{}).autoSize||!1,$=N.printHeaders!==!1,he=N.css&&N.css["font-size"]!==void 0?16*N.css["font-size"]:N.fontSize||12,R=N.margins||Object.assign({width:this.getPageWidth()},e),D=typeof N.padding=="number"?N.padding:3,H=N.headerBackgroundColor||"#c8c8c8",O=N.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=O,this.setFontSize(he),w==null)P=T=Object.keys(v[0]),q=T.map((function(){return"left"}));else if(Array.isArray(w)&&nr(w[0])==="object")for(T=w.map((function(we){return we.name})),P=w.map((function(we){return we.prompt||we.name||""})),q=w.map((function(we){return we.align||"left"})),b=0;b<w.length;b+=1)K[w[b].name]=w[b].width*(19.049976/25.4);else Array.isArray(w)&&typeof w[0]=="string"&&(P=T=w,q=T.map((function(){return"left"})));if(X||Array.isArray(w)&&typeof w[0]=="string")for(b=0;b<T.length;b+=1){for(J[E=T[b]]=v.map((function(we){return we[E]})),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(P[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),I=J[E],this.setFont(void 0,"normal"),_=0;_<I.length;_+=1)fe.push(this.getTextDimensions(I[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[E]=Math.max.apply(null,fe)+D+D,fe=[]}if($){var ge={};for(b=0;b<T.length;b+=1)ge[T[b]]={},ge[T[b]].text=P[b],ge[T[b]].align=q[b];var xe=f.call(this,ge,K);ne=T.map((function(we){return new l(m,p,K[we],xe,ge[we].text,void 0,ge[we].align)})),this.setTableHeaderRow(ne),this.printHeaderRow(1,!1)}var ie=w.reduce((function(we,le){return we[le.name]=le.align,we}),{});for(b=0;b<v.length;b+=1){"rowStart"in N&&N.rowStart instanceof Function&&N.rowStart({row:b,data:v[b]},this);var Y=f.call(this,v[b],K);for(_=0;_<T.length;_+=1){var ve=v[b][T[_]];"cellStart"in N&&N.cellStart instanceof Function&&N.cellStart({row:b,col:_,data:ve},this),u.call(this,new l(m,p,K[T[_]],Y,ve,b+2,ie[T[_]]))}}return this.internal.__cell__.table_x=m,this.internal.__cell__.table_y=p,this};var f=function(m,p){var v=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,N=this.internal.scaleFactor;return Object.keys(m).map((function(b){var I=m[b];return this.splitTextToSize(I.hasOwnProperty("text")?I.text:I,p[b]-v-v)}),this).map((function(b){return this.getLineHeightFactor()*b.length*w/N+v+v}),this).reduce((function(b,I){return Math.max(b,I)}),0)};t.setTableHeaderRow=function(m){r.call(this),this.internal.__cell__.tableHeaderRow=m},t.printHeaderRow=function(m,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var v;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var N=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){v=this.internal.__cell__.tableHeaderRow[b].clone(),p&&(v.y=this.internal.__cell__.margins.top||0,N.push(v)),v.lineNumber=m;var I=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,v),this.setTextColor(I)}N.length>0&&this.setTableHeaderRow(N),this.setFont(void 0,"normal"),n=!1}})(Gt.API);var G0={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},J0=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],$f=$0(J0),Y0=[100,200,300,400,500,600,700,800,900],R2=$0(Y0);function Gf(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(l){return G0[l=l||"normal"]?l:"normal"})(t.style),r=(function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}})(t.weight),o=(function(l){return typeof $f[l=l||"normal"]=="number"?l:"normal"})(t.stretch);return{family:e,style:n,weight:r,stretch:o,src:t.src||[],ref:t.ref||{name:e,style:[o,n,r].join(" ")}}}function Vm(t,e,n,r){var o;for(o=n;o>=0&&o<e.length;o+=r)if(t[e[o]])return t[e[o]];for(o=n;o>=0&&o<e.length;o-=r)if(t[e[o]])return t[e[o]]}var F2={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qm={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Om(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function B2(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",o=Object.assign({},F2,n.genericFontFamilies||{}),l=null,u=null,f=0;f<e.length;++f)if(o[(l=Gf(e[f])).family]&&(l.family=o[l.family]),t.hasOwnProperty(l.family)){u=t[l.family];break}if(!(u=u||t[r]))throw new Error("Could not find a font-family for the rule '"+Om(l)+"' and default family '"+r+"'.");if(u=(function(m,p){if(p[m])return p[m];var v=$f[m],w=v<=$f.normal?-1:1,N=Vm(p,J0,v,w);if(!N)throw new Error("Could not find a matching font-stretch value for "+m);return N})(l.stretch,u),u=(function(m,p){if(p[m])return p[m];for(var v=G0[m],w=0;w<v.length;++w)if(p[v[w]])return p[v[w]];throw new Error("Could not find a matching font-style for "+m)})(l.style,u),!(u=(function(m,p){if(p[m])return p[m];if(m===400&&p[500])return p[500];if(m===500&&p[400])return p[400];var v=R2[m],w=Vm(p,Y0,v,m<400?-1:1);if(!w)throw new Error("Could not find a matching font-weight for value "+m);return w})(l.weight,u)))throw new Error("Failed to resolve a font for the rule '"+Om(l)+"'.");return u}function zm(t){return t.trimLeft()}function U2(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function H2(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var $c,Wm,$m,If=["times"];(function(t){var e,n,r,o,l,u,f,m,p,v=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new m,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new u,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new u,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,u=this.internal.Point,f=this.internal.Rectangle,m=this.internal.Matrix,p=new v}]);var w=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=M;Object.defineProperty(this,"pdf",{get:function(){return W}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Le){Q=!!Le}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(Le){ue=!!Le}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Le){isNaN(Le)||(ce=Le)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(Le){isNaN(Le)||(me=Le)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Le){var te;typeof Le=="number"?te=[Le,Le,Le,Le]:((te=new Array(4))[0]=Le[0],te[1]=Le.length>=2?Le[1]:te[0],te[2]=Le.length>=3?Le[2]:te[0],te[3]=Le.length>=4?Le[3]:te[1]),p.margin=te}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(Le){re=Le}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(Le){se=Le}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(Le){ye=Le}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Le){Le instanceof v&&(p=Le)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Le){p.path=Le}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Le){Be=Le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Le){var te;te=N(Le),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Le){var te=N(Le);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Le){["butt","round","square"].indexOf(Le)!==-1&&(this.ctx.lineCap=Le,this.pdf.setLineCap(Le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Le){isNaN(Le)||(this.ctx.lineWidth=Le,this.pdf.setLineWidth(Le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Le){["bevel","round","miter"].indexOf(Le)!==-1&&(this.ctx.lineJoin=Le,this.pdf.setLineJoin(Le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Le){isNaN(Le)||(this.ctx.miterLimit=Le,this.pdf.setMiterLimit(Le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Le){this.ctx.textBaseline=Le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Le){["right","end","center","left","start"].indexOf(Le)!==-1&&(this.ctx.textAlign=Le)}});var Ge=null;function pe(Le,te){if(Ge===null){var gt=(function(et){var qe=[];return Object.keys(et).forEach((function(at){et[at].forEach((function(nt){var He=null;switch(nt){case"bold":He={family:at,weight:"bold"};break;case"italic":He={family:at,style:"italic"};break;case"bolditalic":He={family:at,weight:"bold",style:"italic"};break;case"":case"normal":He={family:at}}He!==null&&(He.ref={name:at,style:nt},qe.push(He))}))})),qe})(Le.getFontList());Ge=(function(et){for(var qe={},at=0;at<et.length;++at){var nt=Gf(et[at]),He=nt.family,bt=nt.stretch,Mt=nt.style,At=nt.weight;qe[He]=qe[He]||{},qe[He][bt]=qe[He][bt]||{},qe[He][bt][Mt]=qe[He][bt][Mt]||{},qe[He][bt][Mt][At]=nt}return qe})(gt.concat(te))}return Ge}var Ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ze},set:function(Le){Ge=null,Ze=Le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Le){var te;if(this.ctx.font=Le,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Le))!==null){var gt=te[1],et=(te[2],te[3]),qe=te[4],at=(te[5],te[6]),nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(qe)[2];qe=Math.floor(nt==="px"?parseFloat(qe)*this.pdf.internal.scaleFactor:nt==="em"?parseFloat(qe)*this.pdf.getFontSize():parseFloat(qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(qe);var He=(function(_e){var Fe,Ie,lt=[],ee=_e.trim();if(ee==="")return If;if(ee in qm)return[qm[ee]];for(;ee!=="";){switch(Ie=null,Fe=(ee=zm(ee)).charAt(0)){case'"':case"'":Ie=U2(ee.substring(1),Fe);break;default:Ie=H2(ee)}if(Ie===null||(lt.push(Ie[0]),(ee=zm(Ie[1]))!==""&&ee.charAt(0)!==","))return If;ee=ee.replace(/^,/,"")}return lt})(at);if(this.fontFaces){var bt=B2(pe(this.pdf,this.fontFaces),He.map((function(_e){return{family:_e,stretch:"normal",weight:et,style:gt}})));this.pdf.setFont(bt.ref.name,bt.ref.style)}else{var Mt="";(et==="bold"||parseInt(et,10)>=700||gt==="bold")&&(Mt="bold"),gt==="italic"&&(Mt+="italic"),Mt.length===0&&(Mt="normal");for(var At="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},$e=0;$e<He.length;$e++){if(this.pdf.internal.getFont(He[$e],Mt,{noFallback:!0,disableWarning:!0})!==void 0){At=He[$e];break}if(Mt==="bolditalic"&&this.pdf.internal.getFont(He[$e],"bold",{noFallback:!0,disableWarning:!0})!==void 0)At=He[$e],Mt="bold";else if(this.pdf.internal.getFont(He[$e],"normal",{noFallback:!0,disableWarning:!0})!==void 0){At=He[$e],Mt="normal";break}}if(At===""){for(var Te=0;Te<He.length;Te++)if(It[He[Te]]){At=It[He[Te]];break}}At=At===""?"Times":At,this.pdf.setFont(At,Mt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Le){this.ctx.globalCompositeOperation=Le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Le){this.ctx.globalAlpha=Le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Le){this.ctx.lineDashOffset=Le,le.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Le){this.ctx.lineDash=Le,le.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Le){this.ctx.ignoreClearRect=!!Le}})};w.prototype.setLineDash=function(M){this.lineDash=M},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){J.call(this,"fill",!1)},w.prototype.stroke=function(){J.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(M,W){if(isNaN(M)||isNaN(W))throw ur.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new u(M,W));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new u(M,W)},w.prototype.closePath=function(){var M=new u(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&nr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){M=new u(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(M.x,M.y)},w.prototype.lineTo=function(M,W){if(isNaN(M)||isNaN(W))throw ur.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new u(M,W));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new u(Q.x,Q.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),J.call(this,null,!0)},w.prototype.quadraticCurveTo=function(M,W,Q,ue){if(isNaN(Q)||isNaN(ue)||isNaN(M)||isNaN(W))throw ur.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new u(Q,ue)),me=this.ctx.transform.applyToPoint(new u(M,W));this.path.push({type:"qct",x1:me.x,y1:me.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new u(ce.x,ce.y)},w.prototype.bezierCurveTo=function(M,W,Q,ue,ce,me){if(isNaN(ce)||isNaN(me)||isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue))throw ur.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new u(ce,me)),se=this.ctx.transform.applyToPoint(new u(M,W)),ye=this.ctx.transform.applyToPoint(new u(Q,ue));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:ye.x,y2:ye.y,x:re.x,y:re.y}),this.ctx.lastPoint=new u(re.x,re.y)},w.prototype.arc=function(M,W,Q,ue,ce,me){if(isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue)||isNaN(ce))throw ur.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new u(M,W));M=re.x,W=re.y;var se=this.ctx.transform.applyToPoint(new u(0,Q)),ye=this.ctx.transform.applyToPoint(new u(0,0));Q=Math.sqrt(Math.pow(se.x-ye.x,2)+Math.pow(se.y-ye.y,2))}Math.abs(ce-ue)>=2*Math.PI&&(ue=0,ce=2*Math.PI),this.path.push({type:"arc",x:M,y:W,radius:Q,startAngle:ue,endAngle:ce,counterclockwise:me})},w.prototype.arcTo=function(M,W,Q,ue,ce){throw new Error("arcTo not implemented.")},w.prototype.rect=function(M,W,Q,ue){if(isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue))throw ur.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,W),this.lineTo(M+Q,W),this.lineTo(M+Q,W+ue),this.lineTo(M,W+ue),this.lineTo(M,W),this.lineTo(M+Q,W),this.lineTo(M,W)},w.prototype.fillRect=function(M,W,Q,ue){if(isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue))throw ur.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,W,Q,ue),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},w.prototype.strokeRect=function(M,W,Q,ue){if(isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue))throw ur.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");I.call(this)||(this.beginPath(),this.rect(M,W,Q,ue),this.stroke())},w.prototype.clearRect=function(M,W,Q,ue){if(isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue))throw ur.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,W,Q,ue))},w.prototype.save=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new v(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},w.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(W),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var N=function(M){var W,Q,ue,ce;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))W=0,Q=0,ue=0,ce=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(me!==null)W=parseInt(me[1]),Q=parseInt(me[2]),ue=parseInt(me[3]),ce=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)W=parseInt(me[1]),Q=parseInt(me[2]),ue=parseInt(me[3]),ce=parseFloat(me[4]);else{if(ce=1,typeof M=="string"&&M.charAt(0)!=="#"){var re=new H0(M);M=re.ok?re.toHex():"#000000"}M.length===4?(W=M.substring(1,2),W+=W,Q=M.substring(2,3),Q+=Q,ue=M.substring(3,4),ue+=ue):(W=M.substring(1,3),Q=M.substring(3,5),ue=M.substring(5,7)),W=parseInt(W,16),Q=parseInt(Q,16),ue=parseInt(ue,16)}}return{r:W,g:Q,b:ue,a:ce,style:M}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},I=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(M,W,Q,ue){if(isNaN(W)||isNaN(Q)||typeof M!="string")throw ur.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!b.call(this)){var ce=Y(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:M,x:W,y:Q,scale:me,angle:ce,align:this.textAlign,maxWidth:ue})}},w.prototype.strokeText=function(M,W,Q,ue){if(isNaN(W)||isNaN(Q)||typeof M!="string")throw ur.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!I.call(this)){ue=isNaN(ue)?void 0:ue;var ce=Y(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:M,x:W,y:Q,scale:me,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:ue})}},w.prototype.measureText=function(M){if(typeof M!="string")throw ur.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,Q=this.pdf.internal.scaleFactor,ue=W.internal.getFontSize(),ce=W.getStringUnitWidth(M)*ue/W.internal.scaleFactor,me=function(re){var se=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this};return new me({width:ce*=Math.round(96*Q/72*1e4)/1e4})},w.prototype.scale=function(M,W){if(isNaN(M)||isNaN(W))throw ur.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new m(M,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},w.prototype.rotate=function(M){if(isNaN(M))throw ur.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new m(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},w.prototype.translate=function(M,W){if(isNaN(M)||isNaN(W))throw ur.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new m(1,0,0,1,M,W);this.ctx.transform=this.ctx.transform.multiply(Q)},w.prototype.transform=function(M,W,Q,ue,ce,me){if(isNaN(M)||isNaN(W)||isNaN(Q)||isNaN(ue)||isNaN(ce)||isNaN(me))throw ur.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new m(M,W,Q,ue,ce,me);this.ctx.transform=this.ctx.transform.multiply(re)},w.prototype.setTransform=function(M,W,Q,ue,ce,me){M=isNaN(M)?1:M,W=isNaN(W)?0:W,Q=isNaN(Q)?0:Q,ue=isNaN(ue)?1:ue,ce=isNaN(ce)?0:ce,me=isNaN(me)?0:me,this.ctx.transform=new m(M,W,Q,ue,ce,me)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(M,W,Q,ue,ce,me,re,se,ye){var Be=this.pdf.getImageProperties(M),Ge=1,pe=1,Ze=1,Le=1;ue!==void 0&&se!==void 0&&(Ze=se/ue,Le=ye/ce,Ge=Be.width/ue*se/ue,pe=Be.height/ce*ye/ce),me===void 0&&(me=W,re=Q,W=0,Q=0),ue!==void 0&&se===void 0&&(se=ue,ye=ce),ue===void 0&&se===void 0&&(se=Be.width,ye=Be.height);for(var te,gt=this.ctx.transform.decompose(),et=Y(gt.rotate.shx),qe=new m,at=(qe=(qe=(qe=qe.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale)).applyToRectangle(new f(me-W*Ze,re-Q*Le,ue*Ge,ce*pe)),nt=E.call(this,at),He=[],bt=0;bt<nt.length;bt+=1)He.indexOf(nt[bt])===-1&&He.push(nt[bt]);if(q(He),this.autoPaging)for(var Mt=He[0],At=He[He.length-1],It=Mt;It<At+1;It++){this.pdf.setPage(It);var $e=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=It===1?this.posY+this.margin[0]:this.margin[0],_e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=It===1?0:_e+(It-2)*Fe;if(this.ctx.clip_path.length!==0){var lt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(te,this.posX+this.margin[3],-Ie+Te+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=lt}var ee=JSON.parse(JSON.stringify(at));ee=P([ee],this.posX+this.margin[3],-Ie+Te+this.ctx.prevPageLastElemOffset)[0];var Oe=(It>Mt||It<At)&&_.call(this);Oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$e,Fe,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",ee.x,ee.y,ee.w,ee.h,null,null,et),Oe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",at.x,at.y,at.w,at.h,null,null,et)};var E=function(M,W,Q){var ue=[];W=W||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ue.push(Math.floor((M.y+ce)/Q)+1);break;case"arc":ue.push(Math.floor((M.y+ce-M.radius)/Q)+1),ue.push(Math.floor((M.y+ce+M.radius)/Q)+1);break;case"qct":var me=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ue.push(Math.floor((me.y+ce)/Q)+1),ue.push(Math.floor((me.y+me.h+ce)/Q)+1);break;case"bct":var re=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ue.push(Math.floor((re.y+ce)/Q)+1),ue.push(Math.floor((re.y+re.h+ce)/Q)+1);break;case"rect":ue.push(Math.floor((M.y+ce)/Q)+1),ue.push(Math.floor((M.y+M.h+ce)/Q)+1)}for(var se=0;se<ue.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<ue[se];)T.call(this);return ue},T=function(){var M=this.fillStyle,W=this.strokeStyle,Q=this.font,ue=this.lineCap,ce=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=W,this.font=Q,this.lineCap=ue,this.lineWidth=ce,this.lineJoin=me},P=function(M,W,Q){for(var ue=0;ue<M.length;ue++)switch(M[ue].type){case"bct":M[ue].x2+=W,M[ue].y2+=Q;case"qct":M[ue].x1+=W,M[ue].y1+=Q;case"mt":case"lt":case"arc":default:M[ue].x+=W,M[ue].y+=Q}return M},q=function(M){return M.sort((function(W,Q){return W-Q}))},J=function(M,W){for(var Q,ue,ce=this.fillStyle,me=this.strokeStyle,re=this.lineCap,se=this.lineWidth,ye=Math.abs(se*this.ctx.transform.scaleX),Be=this.lineJoin,Ge=JSON.parse(JSON.stringify(this.path)),pe=JSON.parse(JSON.stringify(this.path)),Ze=[],Le=0;Le<pe.length;Le++)if(pe[Le].x!==void 0)for(var te=E.call(this,pe[Le]),gt=0;gt<te.length;gt+=1)Ze.indexOf(te[gt])===-1&&Ze.push(te[gt]);for(var et=0;et<Ze.length;et++)for(;this.pdf.internal.getNumberOfPages()<Ze[et];)T.call(this);if(q(Ze),this.autoPaging)for(var qe=Ze[0],at=Ze[Ze.length-1],nt=qe;nt<at+1;nt++){this.pdf.setPage(nt),this.fillStyle=ce,this.strokeStyle=me,this.lineCap=re,this.lineWidth=ye,this.lineJoin=Be;var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=nt===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=nt===1?0:Mt+(nt-2)*At;if(this.ctx.clip_path.length!==0){var $e=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Q,this.posX+this.margin[3],-It+bt+this.ctx.prevPageLastElemOffset),K.call(this,M,!0),this.path=$e}if(ue=JSON.parse(JSON.stringify(Ge)),this.path=P(ue,this.posX+this.margin[3],-It+bt+this.ctx.prevPageLastElemOffset),W===!1||nt===0){var Te=(nt>qe||nt<at)&&_.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,At,null).clip().discardPath()),K.call(this,M,W),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=ye,K.call(this,M,W),this.lineWidth=se;this.path=Ge},K=function(M,W){if((M!=="stroke"||W||!I.call(this))&&(M==="stroke"||W||!b.call(this))){for(var Q,ue,ce=[],me=this.path,re=0;re<me.length;re++){var se=me[re];switch(se.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:se,deltas:[],abs:[]});break;case"lt":var ye=ce.length;if(me[re-1]&&!isNaN(me[re-1].x)&&(Q=[se.x-me[re-1].x,se.y-me[re-1].y],ye>0)){for(;ye>=0;ye--)if(ce[ye-1].close!==!0&&ce[ye-1].begin!==!0){ce[ye-1].deltas.push(Q),ce[ye-1].abs.push(se);break}}break;case"bct":Q=[se.x1-me[re-1].x,se.y1-me[re-1].y,se.x2-me[re-1].x,se.y2-me[re-1].y,se.x-me[re-1].x,se.y-me[re-1].y],ce[ce.length-1].deltas.push(Q);break;case"qct":var Be=me[re-1].x+2/3*(se.x1-me[re-1].x),Ge=me[re-1].y+2/3*(se.y1-me[re-1].y),pe=se.x+2/3*(se.x1-se.x),Ze=se.y+2/3*(se.y1-se.y),Le=se.x,te=se.y;Q=[Be-me[re-1].x,Ge-me[re-1].y,pe-me[re-1].x,Ze-me[re-1].y,Le-me[re-1].x,te-me[re-1].y],ce[ce.length-1].deltas.push(Q);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(se)}}ue=W?null:M==="stroke"?"stroke":"fill";for(var gt=!1,et=0;et<ce.length;et++)if(ce[et].arc)for(var qe=ce[et].abs,at=0;at<qe.length;at++){var nt=qe[at];nt.type==="arc"?X.call(this,nt.x,nt.y,nt.radius,nt.startAngle,nt.endAngle,nt.counterclockwise,void 0,W,!gt):H.call(this,nt.x,nt.y),gt=!0}else if(ce[et].close===!0)this.pdf.internal.out("h"),gt=!1;else if(ce[et].begin!==!0){var He=ce[et].start.x,bt=ce[et].start.y;O.call(this,ce[et].deltas,He,bt),gt=!0}ue&&$.call(this,ue),W&&he.call(this)}},fe=function(M){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Q;case"top":return M+W-Q;case"hanging":return M+W-2*Q;case"middle":return M+W/2-Q;case"ideographic":return M;case"alphabetic":default:return M}},ne=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(W,Q){this.colorStops.push([W,Q])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var X=function(M,W,Q,ue,ce,me,re,se,ye){for(var Be=xe.call(this,Q,ue,ce,me),Ge=0;Ge<Be.length;Ge++){var pe=Be[Ge];Ge===0&&(ye?R.call(this,pe.x1+M,pe.y1+W):H.call(this,pe.x1+M,pe.y1+W)),ge.call(this,M,W,pe.x2,pe.y2,pe.x3,pe.y3,pe.x4,pe.y4)}se?he.call(this):$.call(this,re)},$=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(M,W){this.pdf.internal.out(n(M)+" "+r(W)+" m")},D=function(M){var W;switch(M.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var Q=this.pdf.getTextDimensions(M.text),ue=fe.call(this,M.y),ce=ne.call(this,ue)-Q.h,me=this.ctx.transform.applyToPoint(new u(M.x,ue)),re=this.ctx.transform.decompose(),se=new m;se=(se=(se=se.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var ye,Be,Ge,pe=this.ctx.transform.applyToRectangle(new f(M.x,ue,Q.w,Q.h)),Ze=se.applyToRectangle(new f(M.x,ce,Q.w,Q.h)),Le=E.call(this,Ze),te=[],gt=0;gt<Le.length;gt+=1)te.indexOf(Le[gt])===-1&&te.push(Le[gt]);if(q(te),this.autoPaging)for(var et=te[0],qe=te[te.length-1],at=et;at<qe+1;at++){this.pdf.setPage(at);var nt=at===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[2],Mt=bt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],It=At-this.margin[3],$e=at===1?0:He+(at-2)*Mt;if(this.ctx.clip_path.length!==0){var Te=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(ye,this.posX+this.margin[3],-1*$e+nt),K.call(this,"fill",!0),this.path=Te}var _e=P([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-$e+nt+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*M.scale),Ge=this.lineWidth,this.lineWidth=Ge*M.scale);var Fe=this.autoPaging!=="text";if(Fe||_e.y+_e.h<=bt){if(Fe||_e.y>=nt&&_e.x<=At){var Ie=Fe?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||At-_e.x)[0],lt=P([JSON.parse(JSON.stringify(pe))],this.posX+this.margin[3],-$e+nt+this.ctx.prevPageLastElemOffset)[0],ee=Fe&&(at>et||at<qe)&&_.call(this);ee&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Mt,null).clip().discardPath()),this.pdf.text(Ie,lt.x,lt.y,{angle:M.angle,align:W,renderingMode:M.renderingMode}),ee&&this.pdf.restoreGraphicsState()}}else _e.y<bt&&(this.ctx.prevPageLastElemOffset+=bt-_e.y);M.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Ge)}else M.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*M.scale),Ge=this.lineWidth,this.lineWidth=Ge*M.scale),this.pdf.text(M.text,me.x+this.posX,me.y+this.posY,{angle:M.angle,align:W,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=Ge)},H=function(M,W,Q,ue){Q=Q||0,ue=ue||0,this.pdf.internal.out(n(M+Q)+" "+r(W+ue)+" l")},O=function(M,W,Q){return this.pdf.lines(M,W,Q,null,null)},ge=function(M,W,Q,ue,ce,me,re,se){this.pdf.internal.out([e(o(Q+M)),e(l(ue+W)),e(o(ce+M)),e(l(me+W)),e(o(re+M)),e(l(se+W)),"c"].join(" "))},xe=function(M,W,Q,ue){for(var ce=2*Math.PI,me=Math.PI/2;W>Q;)W-=ce;var re=Math.abs(Q-W);re<ce&&ue&&(re=ce-re);for(var se=[],ye=ue?-1:1,Be=W;re>1e-5;){var Ge=Be+ye*Math.min(re,me);se.push(ie.call(this,M,Be,Ge)),re-=Math.abs(Ge-Be),Be=Ge}return se},ie=function(M,W,Q){var ue=(Q-W)/2,ce=M*Math.cos(ue),me=M*Math.sin(ue),re=ce,se=-me,ye=re*re+se*se,Be=ye+re*ce+se*me,Ge=4/3*(Math.sqrt(2*ye*Be)-Be)/(re*me-se*ce),pe=re-Ge*se,Ze=se+Ge*re,Le=pe,te=-Ze,gt=ue+W,et=Math.cos(gt),qe=Math.sin(gt);return{x1:M*Math.cos(W),y1:M*Math.sin(W),x2:pe*et-Ze*qe,y2:pe*qe+Ze*et,x3:Le*et-te*qe,y3:Le*qe+te*et,x4:M*Math.cos(Q),y4:M*Math.sin(Q)}},Y=function(M){return 180*M/Math.PI},ve=function(M,W,Q,ue,ce,me){var re=M+.5*(Q-M),se=W+.5*(ue-W),ye=ce+.5*(Q-ce),Be=me+.5*(ue-me),Ge=Math.min(M,ce,re,ye),pe=Math.max(M,ce,re,ye),Ze=Math.min(W,me,se,Be),Le=Math.max(W,me,se,Be);return new f(Ge,Ze,pe-Ge,Le-Ze)},we=function(M,W,Q,ue,ce,me,re,se){var ye,Be,Ge,pe,Ze,Le,te,gt,et,qe,at,nt,He,bt,Mt=Q-M,At=ue-W,It=ce-Q,$e=me-ue,Te=re-ce,_e=se-me;for(Be=0;Be<41;Be++)et=(te=(Ge=M+(ye=Be/40)*Mt)+ye*((Ze=Q+ye*It)-Ge))+ye*(Ze+ye*(ce+ye*Te-Ze)-te),qe=(gt=(pe=W+ye*At)+ye*((Le=ue+ye*$e)-pe))+ye*(Le+ye*(me+ye*_e-Le)-gt),Be==0?(at=et,nt=qe,He=et,bt=qe):(at=Math.min(at,et),nt=Math.min(nt,qe),He=Math.max(He,et),bt=Math.max(bt,qe));return new f(Math.round(at),Math.round(nt),Math.round(He-at),Math.round(bt-nt))},le=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,W,Q=(M=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:W}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Gt.API),(function(t){var e=function(l){var u,f,m,p,v,w,N,b,I,_;for(f=[],m=0,p=(l+=u="\0\0\0\0".slice(l.length%4||4)).length;p>m;m+=4)(v=(l.charCodeAt(m)<<24)+(l.charCodeAt(m+1)<<16)+(l.charCodeAt(m+2)<<8)+l.charCodeAt(m+3))!==0?(w=(v=((v=((v=((v=(v-(_=v%85))/85)-(I=v%85))/85)-(b=v%85))/85)-(N=v%85))/85)%85,f.push(w+33,N+33,b+33,I+33,_+33)):f.push(122);return(function(E,T){for(var P=T;P>0;P--)E.pop()})(f,u.length),String.fromCharCode.apply(String,f)+"~>"},n=function(l){var u,f,m,p,v,w=String,N="length",b=255,I="charCodeAt",_="slice",E="replace";for(l[_](-2),l=l[_](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),m=[],p=0,v=(l+=u="uuuuu"[_](l[N]%5||5))[N];v>p;p+=5)f=52200625*(l[I](p)-33)+614125*(l[I](p+1)-33)+7225*(l[I](p+2)-33)+85*(l[I](p+3)-33)+(l[I](p+4)-33),m.push(b&f>>24,b&f>>16,b&f>>8,b&f);return(function(T,P){for(var q=P;q>0;q--)T.pop()})(m,u[N]),w.fromCharCode.apply(w,m)},r=function(l){var u=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),u.test(l)===!1)return"";for(var f="",m=0;m<l.length;m+=2)f+=String.fromCharCode("0x"+(l[m]+l[m+1]));return f},o=function(l){for(var u=new Uint8Array(l.length),f=l.length;f--;)u[f]=l.charCodeAt(f);return l=(u=Vf(u)).reduce((function(m,p){return m+String.fromCharCode(p)}),"")};t.processDataByFilters=function(l,u){var f=0,m=l||"",p=[];for(typeof(u=u||[])=="string"&&(u=[u]),f=0;f<u.length;f+=1)switch(u[f]){case"ASCII85Decode":case"/ASCII85Decode":m=n(m),p.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":m=e(m),p.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":m=r(m),p.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":m=m.split("").map((function(v){return("0"+v.charCodeAt().toString(16)).slice(-2)})).join("")+">",p.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":m=o(m),p.push("/FlateDecode");break;default:throw new Error('The filter: "'+u[f]+'" is not implemented')}return{data:m,reverseChain:p.reverse().join(" ")}}})(Gt.API),(function(t){t.loadFile=function(e,n,r){return(function(o,l,u){l=l!==!1,u=typeof u=="function"?u:function(){};var f=void 0;try{f=(function(m,p,v){var w=new XMLHttpRequest,N=0,b=function(I){var _=I.length,E=[],T=String.fromCharCode;for(N=0;N<_;N+=1)E.push(T(255&I.charCodeAt(N)));return E.join("")};if(w.open("GET",m,!p),w.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(w.onload=function(){w.status===200?v(b(this.responseText)):v(void 0)}),w.send(null),p&&w.status===200)return b(w.responseText)})(o,l,u)}catch{}return f})(e,n,r)},t.loadImageFile=t.loadFile})(Gt.API),(function(t){function e(){return(Kt.html2canvas?Promise.resolve(Kt.html2canvas):Rf(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(u){return Promise.reject(new Error("Could not load html2canvas: "+u))})).then((function(u){return u.default?u.default:u}))}function n(){return(Kt.DOMPurify?Promise.resolve(Kt.DOMPurify):Rf(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(u){return Promise.reject(new Error("Could not load dompurify: "+u))})).then((function(u){return u.default?u.default:u}))}var r=function(u){var f=nr(u);return f==="undefined"?"undefined":f==="string"||u instanceof String?"string":f==="number"||u instanceof Number?"number":f==="function"||u instanceof Function?"function":u&&u.constructor===Array?"array":u&&u.nodeType===1?"element":f==="object"?"object":"unknown"},o=function(u,f){var m=document.createElement(u);for(var p in f.className&&(m.className=f.className),f.innerHTML&&f.dompurify&&(m.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)m.style[p]=f.style[p];return m},l=function u(f){var m=Object.assign(u.convert(Promise.resolve()),JSON.parse(JSON.stringify(u.template))),p=u.convert(Promise.resolve(),m);return p=(p=p.setProgress(1,u,1,[u])).set(f)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(u,f){return u.__proto__=f||l.prototype,u},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(u,f){return this.then((function(){switch(f=f||(function(m){switch(r(m)){case"string":return"string";case"element":return m.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(u)){case"string":return this.then(n).then((function(m){return this.set({src:o("div",{innerHTML:u,dompurify:m})})}));case"element":return this.set({src:u});case"canvas":return this.set({canvas:u});case"img":return this.set({img:u});default:return this.error("Unknown source type.")}}))},l.prototype.to=function(u){switch(u){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var u={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=(function m(p,v){for(var w=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),N=p.firstChild;N;N=N.nextSibling)v!==!0&&N.nodeType===1&&N.nodeName==="SCRIPT"||w.appendChild(m(N,v));return p.nodeType===1&&(p.nodeName==="CANVAS"?(w.width=p.width,w.height=p.height,w.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(w.value=p.value),w.addEventListener("load",(function(){w.scrollTop=p.scrollTop,w.scrollLeft=p.scrollLeft}),!0)),w})(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(u.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:u}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},l.prototype.toCanvas=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then((function(f){var m=Object.assign({},this.opt.html2canvas);return delete m.onrendered,f(this.prop.container,m)})).then((function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)}))},l.prototype.toContext2d=function(){var u=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(u).then(e).then((function(f){var m=this.opt.jsPDF,p=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,w=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete w.onrendered,m.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,m.context2d.posX=this.opt.x,m.context2d.posY=this.opt.y,m.context2d.margin=this.opt.margin,m.context2d.fontFaces=p,p)for(var N=0;N<p.length;++N){var b=p[N],I=b.src.find((function(_){return _.format==="truetype"}));I&&m.addFont(I.url,b.ref.name,b.ref.style)}return w.windowHeight=w.windowHeight||0,w.windowHeight=w.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):w.windowHeight,m.context2d.save(!0),f(this.prop.container,w)})).then((function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)}))},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var u=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=u}))},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},l.prototype.output=function(u,f,m){return(m=m||"pdf").toLowerCase()==="img"||m.toLowerCase()==="image"?this.outputImg(u,f):this.outputPdf(u,f)},l.prototype.outputPdf=function(u,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(u,f)}))},l.prototype.outputImg=function(u){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(u){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+u+'" is not supported.'}}))},l.prototype.save=function(u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(u?{filename:u}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},l.prototype.set=function(u){if(r(u)!=="object")return this;var f=Object.keys(u||{}).map((function(m){if(m in l.template.prop)return function(){this.prop[m]=u[m]};switch(m){case"margin":return this.setMargin.bind(this,u.margin);case"jsPDF":return function(){return this.opt.jsPDF=u.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,u.pageSize);default:return function(){this.opt[m]=u[m]}}}),this);return this.then((function(){return this.thenList(f)}))},l.prototype.get=function(u,f){return this.then((function(){var m=u in l.template.prop?this.prop[u]:this.opt[u];return f?f(m):m}))},l.prototype.setMargin=function(u){return this.then((function(){switch(r(u)){case"number":u=[u,u,u,u];case"array":if(u.length===2&&(u=[u[0],u[1],u[0],u[1]]),u.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=u})).then(this.setPageSize)},l.prototype.setPageSize=function(u){function f(m,p){return Math.floor(m*p/72*96)}return this.then((function(){(u=u||Gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(u.inner={width:u.width-this.opt.margin[1]-this.opt.margin[3],height:u.height-this.opt.margin[0]-this.opt.margin[2]},u.inner.px={width:f(u.inner.width,u.k),height:f(u.inner.height,u.k)},u.inner.ratio=u.inner.height/u.inner.width),this.prop.pageSize=u}))},l.prototype.setProgress=function(u,f,m,p){return u!=null&&(this.progress.val=u),f!=null&&(this.progress.state=f),m!=null&&(this.progress.n=m),p!=null&&(this.progress.stack=p),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(u,f,m,p){return this.setProgress(u?this.progress.val+u:null,f||null,m?this.progress.n+m:null,p?this.progress.stack.concat(p):null)},l.prototype.then=function(u,f){var m=this;return this.thenCore(u,f,(function(p,v){return m.updateProgress(null,null,1,[p]),Promise.prototype.then.call(this,(function(w){return m.updateProgress(null,p),w})).then(p,v).then((function(w){return m.updateProgress(1),w}))}))},l.prototype.thenCore=function(u,f,m){m=m||Promise.prototype.then,u&&(u=u.bind(this)),f&&(f=f.bind(this));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),v=m.call(p,u,f);return l.convert(v,this.__proto__)},l.prototype.thenExternal=function(u,f){return Promise.prototype.then.call(this,u,f)},l.prototype.thenList=function(u){var f=this;return u.forEach((function(m){f=f.thenCore(m)})),f},l.prototype.catch=function(u){u&&(u=u.bind(this));var f=Promise.prototype.catch.call(this,u);return l.convert(f,this)},l.prototype.catchExternal=function(u){return Promise.prototype.catch.call(this,u)},l.prototype.error=function(u){return this.then((function(){throw new Error(u)}))},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Gt.getPageSize=function(u,f,m){if(nr(u)==="object"){var p=u;u=p.orientation,f=p.unit||f,m=p.format||m}f=f||"mm",m=m||"a4",u=(""+(u||"P")).toLowerCase();var v,w=(""+m).toLowerCase(),N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+f}var b,I=0,_=0;if(N.hasOwnProperty(w))I=N[w][1]/v,_=N[w][0]/v;else try{I=m[1],_=m[0]}catch{throw new Error("Invalid format: "+m)}if(u==="p"||u==="portrait")u="p",_>I&&(b=_,_=I,I=b);else{if(u!=="l"&&u!=="landscape")throw"Invalid orientation: "+u;u="l",I>_&&(b=_,_=I,I=b)}return{width:_,height:I,unit:f,k:v,orientation:u}},t.html=function(u,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Gf):null;var m=new l(f);return f.worker?m:m.from(u).doCallback()}})(Gt.API),Gt.API.addJS=function(t){return $m=t,this.internal.events.subscribe("postPutResources",(function(){$c=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($c+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Wm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$m+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){$c!==void 0&&Wm!==void 0&&this.internal.out("/Names <</JavaScript "+$c+" 0 R>>")})),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=n.outline.render().split(/\r\n/),l=0;l<o.length;l++){var u=o[l],f=r.exec(u);if(f!=null){var m=f[1];n.internal.newObjectDeferredBegin(m,!1)}n.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,v=[];for(l=0;l<p;l++){var w=n.internal.newObject();v.push(w);var N=n.internal.getPageInfo(l+1);n.internal.write("<< /D["+N.objId+" 0 R /XYZ null null null]>> endobj")}var b=n.internal.newObject();for(n.internal.write("<< /Names [ "),l=0;l<v.length;l++)n.internal.write("(page_"+(l+1)+")"+v[l]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+b+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,o,l){var u={title:o,options:l,children:[]};return r==null&&(r=this.root),r.children.push(u),u},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var o=0;o<r.children.length;o++)this.genIds_r(r.children[o])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<r.children.length;l++){var u=r.children[l];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),l>0&&this.line("/Prev "+this.makeRef(r.children[l-1])),l<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[l+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var f=this.count=this.count_r({count:0},u);if(f>0&&this.line("/Count "+f),u.options&&u.options.pageNumber){var m=n.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+m.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,o){for(var l=0;l<o.children.length;l++)r.count++,this.count_r(r,o.children[l]);return r.count}}])})(Gt.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,o,l,u,f){var m,p=this.decode.DCT_DECODE,v=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=u||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(m=(function(w){for(var N,b=256*w.charCodeAt(4)+w.charCodeAt(5),I=w.length,_={width:0,height:0,numcomponents:1},E=4;E<I;E+=2){if(E+=b,e.indexOf(w.charCodeAt(E+1))!==-1){N=256*w.charCodeAt(E+5)+w.charCodeAt(E+6),_={width:256*w.charCodeAt(E+7)+w.charCodeAt(E+8),height:N,numcomponents:w.charCodeAt(E+9)};break}b=256*w.charCodeAt(E+2)+w.charCodeAt(E+3)}return _})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:f=this.color_spaces.DEVICE_GRAY;break;case 4:f=this.color_spaces.DEVICE_CMYK;break;case 3:f=this.color_spaces.DEVICE_RGB}v={data:n,width:m.width,height:m.height,colorSpace:f,bitsPerComponent:8,filter:p,index:r,alias:o}}return v}})(Gt.API);var fu,Gc,Gm,Jm,Ym,V2=(function(){var t,e,n;function r(l){var u,f,m,p,v,w,N,b,I,_,E,T,P,q;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},w=null;;){switch(u=this.readUInt32(),I=(function(){var J,K;for(K=[],J=0;J<4;++J)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":w&&this.animation.frames.push(w),this.pos+=4,w={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},v=this.readUInt16(),p=this.readUInt16()||100,w.delay=1e3*v/p,w.disposeOp=this.data[this.pos++],w.blendOp=this.data[this.pos++],w.data=[];break;case"IDAT":case"fdAT":for(I==="fdAT"&&(this.pos+=4,u-=4),l=(w!=null?w.data:void 0)||this.imgData,T=0;0<=u?T<u:T>u;0<=u?++T:--T)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(m=this.palette.length/3,this.transparency.indexed=this.read(u),this.transparency.indexed.length>m)throw new Error("More transparent colors than palette size");if((_=m-this.transparency.indexed.length)>0)for(P=0;0<=_?P<_:P>_;0<=_?++P:--P)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":N=(E=this.read(u)).indexOf(0),b=String.fromCharCode.apply(String,E.slice(0,N)),this.text[b]=String.fromCharCode.apply(String,E.slice(N+1));break;case"IEND":return w&&this.animation.frames.push(w),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(q=this.colorType)===4||q===6,f=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*f,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(l){var u,f;for(f=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)f.push(this.data[this.pos++]);return f},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(l){var u=this.pixelBitlength/8,f=new Uint8Array(this.width*this.height*u),m=0,p=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function v(w,N,b,I){var _,E,T,P,q,J,K,fe,ne,X,$,he,R,D,H,O,ge,xe,ie,Y,ve,we=Math.ceil((p.width-w)/b),le=Math.ceil((p.height-N)/I),M=p.width==we&&p.height==le;for(D=u*we,he=M?f:new Uint8Array(D*le),J=l.length,R=0,E=0;R<le&&m<J;){switch(l[m++]){case 0:for(P=ge=0;ge<D;P=ge+=1)he[E++]=l[m++];break;case 1:for(P=xe=0;xe<D;P=xe+=1)_=l[m++],q=P<u?0:he[E-u],he[E++]=(_+q)%256;break;case 2:for(P=ie=0;ie<D;P=ie+=1)_=l[m++],T=(P-P%u)/u,H=R&&he[(R-1)*D+T*u+P%u],he[E++]=(H+_)%256;break;case 3:for(P=Y=0;Y<D;P=Y+=1)_=l[m++],T=(P-P%u)/u,q=P<u?0:he[E-u],H=R&&he[(R-1)*D+T*u+P%u],he[E++]=(_+Math.floor((q+H)/2))%256;break;case 4:for(P=ve=0;ve<D;P=ve+=1)_=l[m++],T=(P-P%u)/u,q=P<u?0:he[E-u],R===0?H=O=0:(H=he[(R-1)*D+T*u+P%u],O=T&&he[(R-1)*D+(T-1)*u+P%u]),K=q+H-O,fe=Math.abs(K-q),X=Math.abs(K-H),$=Math.abs(K-O),ne=fe<=X&&fe<=$?q:X<=$?H:O,he[E++]=(_+ne)%256;break;default:throw new Error("Invalid filter algorithm: "+l[m-1])}if(!M){var W=((N+R*I)*p.width+w)*u,Q=R*D;for(P=0;P<we;P+=1){for(var ue=0;ue<u;ue+=1)f[W++]=he[Q++];W+=(b-1)*u}}R++}}return l=y2(l),p.interlaceMethod==1?(v(0,0,8,8),v(4,0,8,8),v(0,4,4,8),v(2,0,4,4),v(0,2,2,4),v(1,0,2,2),v(0,1,1,2)):v(0,0,1,1),f},r.prototype.decodePalette=function(){var l,u,f,m,p,v,w,N,b;for(f=this.palette,v=this.transparency.indexed||[],p=new Uint8Array((v.length||0)+f.length),m=0,l=0,u=w=0,N=f.length;w<N;u=w+=3)p[m++]=f[u],p[m++]=f[u+1],p[m++]=f[u+2],p[m++]=(b=v[l++])!=null?b:255;return p},r.prototype.copyToImageData=function(l,u){var f,m,p,v,w,N,b,I,_,E,T;if(m=this.colors,_=null,f=this.hasAlphaChannel,this.palette.length&&(_=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),m=4,f=!0),I=(p=l.data||l).length,w=_||u,v=N=0,m===1)for(;v<I;)b=_?4*u[v/4]:N,E=w[b++],p[v++]=E,p[v++]=E,p[v++]=E,p[v++]=f?w[b++]:255,N=b;else for(;v<I;)b=_?4*u[v/4]:N,p[v++]=w[b++],p[v++]=w[b++],p[v++]=w[b++],p[v++]=f?w[b++]:255,N=b},r.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(Kt)==="[object Window]"){try{e=Kt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return o(),t=function(l){var u;if(o()===!0)return n.width=l.width,n.height=l.height,n.clearRect(0,0,l.width,l.height),n.putImageData(l,0,0),(u=new Image).src=e.toDataURL(),u;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(l){var u,f,m,p,v,w,N,b;if(this.animation){for(b=[],f=v=0,w=(N=this.animation.frames).length;v<w;f=++v)u=N[f],m=l.createImageData(u.width,u.height),p=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(m,p),u.imageData=m,b.push(u.image=t(m));return b}},r.prototype.renderFrame=function(l,u){var f,m,p;return f=(m=this.animation.frames)[u],p=m[u-1],u===0&&l.clearRect(0,0,this.width,this.height),(p!=null?p.disposeOp:void 0)===1?l.clearRect(p.xOffset,p.yOffset,p.width,p.height):(p!=null?p.disposeOp:void 0)===2&&l.putImageData(p.imageData,p.xOffset,p.yOffset),f.blendOp===0&&l.clearRect(f.xOffset,f.yOffset,f.width,f.height),l.drawImage(f.image,f.xOffset,f.yOffset)},r.prototype.animate=function(l){var u,f,m,p,v,w,N=this;return f=0,w=this.animation,p=w.numFrames,m=w.frames,v=w.numPlays,(u=function(){var b,I;if(b=f++%p,I=m[b],N.renderFrame(l,b),p>1&&f/p<v)return N.animation._timeout=setTimeout(u,I.delay)})()},r.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},r.prototype.render=function(l){var u,f;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(f=u.createImageData(this.width,this.height),this.copyToImageData(f,this.decodePixels()),u.putImageData(f,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function q2(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,o=t[e++],l=o>>7,u=1<<(7&o)+1;t[e++],t[e++];var f=null,m=null;l&&(f=e,m=u,e+=3*u);var p=!0,v=[],w=0,N=null,b=0,I=null;for(this.width=n,this.height=r;p&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,I=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=t[e++];w=t[e++]|t[e++]<<8,N=t[e++],(1&_)==0&&(N=null),b=_>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,P=t[e++]|t[e++]<<8,q=t[e++]|t[e++]<<8,J=t[e++],K=J>>6&1,fe=1<<(7&J)+1,ne=f,X=m,$=!1;J>>7&&($=!0,ne=e,X=fe,e+=3*fe);var he=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}v.push({x:E,y:T,width:P,height:q,has_local_palette:$,palette_offset:ne,palette_size:X,data_offset:he,data_length:e-he,transparent_index:N,interlaced:!!K,delay:w,disposal:b});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return v.length},this.loopCount=function(){return I},this.frameInfo=function(D){if(D<0||D>=v.length)throw new Error("Frame index out of range.");return v[D]},this.decodeAndBlitFrameBGRA=function(D,H){var O=this.frameInfo(D),ge=O.width*O.height,xe=new Uint8Array(ge);Km(t,O.data_offset,xe,ge);var ie=O.palette_offset,Y=O.transparent_index;Y===null&&(Y=256);var ve=O.width,we=n-ve,le=ve,M=4*(O.y*n+O.x),W=4*((O.y+O.height)*n+O.x),Q=M,ue=4*we;O.interlaced===!0&&(ue+=4*n*7);for(var ce=8,me=0,re=xe.length;me<re;++me){var se=xe[me];if(le===0&&(le=ve,(Q+=ue)>=W&&(ue=4*we+4*n*(ce-1),Q=M+(ve+we)*(ce<<1),ce>>=1)),se===Y)Q+=4;else{var ye=t[ie+3*se],Be=t[ie+3*se+1],Ge=t[ie+3*se+2];H[Q++]=Ge,H[Q++]=Be,H[Q++]=ye,H[Q++]=255}--le}},this.decodeAndBlitFrameRGBA=function(D,H){var O=this.frameInfo(D),ge=O.width*O.height,xe=new Uint8Array(ge);Km(t,O.data_offset,xe,ge);var ie=O.palette_offset,Y=O.transparent_index;Y===null&&(Y=256);var ve=O.width,we=n-ve,le=ve,M=4*(O.y*n+O.x),W=4*((O.y+O.height)*n+O.x),Q=M,ue=4*we;O.interlaced===!0&&(ue+=4*n*7);for(var ce=8,me=0,re=xe.length;me<re;++me){var se=xe[me];if(le===0&&(le=ve,(Q+=ue)>=W&&(ue=4*we+4*n*(ce-1),Q=M+(ve+we)*(ce<<1),ce>>=1)),se===Y)Q+=4;else{var ye=t[ie+3*se],Be=t[ie+3*se+1],Ge=t[ie+3*se+2];H[Q++]=ye,H[Q++]=Be,H[Q++]=Ge,H[Q++]=255}--le}}}function Km(t,e,n,r){for(var o=t[e++],l=1<<o,u=l+1,f=u+1,m=o+1,p=(1<<m)-1,v=0,w=0,N=0,b=t[e++],I=new Int32Array(4096),_=null;;){for(;v<16&&b!==0;)w|=t[e++]<<v,v+=8,b===1?b=t[e++]:--b;if(v<m)break;var E=w&p;if(w>>=m,v-=m,E!==l){if(E===u)break;for(var T=E<f?E:_,P=0,q=T;q>l;)q=I[q]>>8,++P;var J=q;if(N+P+(T!==E?1:0)>r)return void ur.log("Warning, gif stream longer than expected.");n[N++]=J;var K=N+=P;for(T!==E&&(n[N++]=J),q=T;P--;)q=I[q],n[--K]=255&q,q>>=8;_!==null&&f<4096&&(I[f++]=_<<8|J,f>=p+1&&m<12&&(++m,p=p<<1|1)),_=E}else f=u+1,p=(1<<(m=o+1))-1,_=null}return N!==r&&ur.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Af(t){var e,n,r,o,l,u=Math.floor,f=new Array(64),m=new Array(64),p=new Array(64),v=new Array(64),w=new Array(65535),N=new Array(65535),b=new Array(64),I=new Array(64),_=[],E=0,T=7,P=new Array(64),q=new Array(64),J=new Array(64),K=new Array(256),fe=new Array(2048),ne=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],X=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function xe(M,W){for(var Q=0,ue=0,ce=new Array,me=1;me<=16;me++){for(var re=1;re<=M[me];re++)ce[W[ue]]=[],ce[W[ue]][0]=Q,ce[W[ue]][1]=me,ue++,Q++;Q*=2}return ce}function ie(M){for(var W=M[0],Q=M[1]-1;Q>=0;)W&1<<Q&&(E|=1<<T),Q--,--T<0&&(E==255?(Y(255),Y(0)):Y(E),T=7,E=0)}function Y(M){_.push(M)}function ve(M){Y(M>>8&255),Y(255&M)}function we(M,W,Q,ue,ce){for(var me,re=ce[0],se=ce[240],ye=(function(qe,at){var nt,He,bt,Mt,At,It,$e,Te,_e,Fe,Ie=0;for(_e=0;_e<8;++_e){nt=qe[Ie],He=qe[Ie+1],bt=qe[Ie+2],Mt=qe[Ie+3],At=qe[Ie+4],It=qe[Ie+5],$e=qe[Ie+6];var lt=nt+(Te=qe[Ie+7]),ee=nt-Te,Oe=He+$e,tt=He-$e,pt=bt+It,ht=bt-It,qt=Mt+At,Pn=Mt-At,Xt=lt+qt,Cn=lt-qt,Fn=Oe+pt,wn=Oe-pt;qe[Ie]=Xt+Fn,qe[Ie+4]=Xt-Fn;var mt=.707106781*(wn+Cn);qe[Ie+2]=Cn+mt,qe[Ie+6]=Cn-mt;var zt=.382683433*((Xt=Pn+ht)-(wn=tt+ee)),In=.5411961*Xt+zt,sn=1.306562965*wn+zt,gn=.707106781*(Fn=ht+tt),Mn=ee+gn,Dt=ee-gn;qe[Ie+5]=Dt+In,qe[Ie+3]=Dt-In,qe[Ie+1]=Mn+sn,qe[Ie+7]=Mn-sn,Ie+=8}for(Ie=0,_e=0;_e<8;++_e){nt=qe[Ie],He=qe[Ie+8],bt=qe[Ie+16],Mt=qe[Ie+24],At=qe[Ie+32],It=qe[Ie+40],$e=qe[Ie+48];var mi=nt+(Te=qe[Ie+56]),rr=nt-Te,wr=He+$e,kn=He-$e,Kn=bt+It,mn=bt-It,br=Mt+At,xo=Mt-At,ir=mi+br,pi=mi-br,Er=wr+Kn,gi=wr-Kn;qe[Ie]=ir+Er,qe[Ie+32]=ir-Er;var fr=.707106781*(gi+pi);qe[Ie+16]=pi+fr,qe[Ie+48]=pi-fr;var Ti=.382683433*((ir=xo+mn)-(gi=kn+rr)),hr=.5411961*ir+Ti,Xo=1.306562965*gi+Ti,qi=.707106781*(Er=mn+kn),Kr=rr+qi,_s=rr-qi;qe[Ie+40]=_s+hr,qe[Ie+24]=_s-hr,qe[Ie+8]=Kr+Xo,qe[Ie+56]=Kr-Xo,Ie++}for(_e=0;_e<64;++_e)Fe=qe[_e]*at[_e],b[_e]=Fe>0?Fe+.5|0:Fe-.5|0;return b})(M,W),Be=0;Be<64;++Be)I[ne[Be]]=ye[Be];var Ge=I[0]-Q;Q=I[0],Ge==0?ie(ue[0]):(ie(ue[N[me=32767+Ge]]),ie(w[me]));for(var pe=63;pe>0&&I[pe]==0;)pe--;if(pe==0)return ie(re),Q;for(var Ze,Le=1;Le<=pe;){for(var te=Le;I[Le]==0&&Le<=pe;)++Le;var gt=Le-te;if(gt>=16){Ze=gt>>4;for(var et=1;et<=Ze;++et)ie(se);gt&=15}me=32767+I[Le],ie(ce[(gt<<4)+N[me]]),ie(w[me]),Le++}return pe!=63&&ie(re),Q}function le(M){M=Math.min(Math.max(M,1),100),l!=M&&((function(W){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var ce=u((Q[ue]*W+50)/100);ce=Math.min(Math.max(ce,1),255),f[ne[ue]]=ce}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var se=u((me[re]*W+50)/100);se=Math.min(Math.max(se,1),255),m[ne[re]]=se}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,Ge=0;Ge<8;Ge++)for(var pe=0;pe<8;pe++)p[Be]=1/(f[ne[Be]]*ye[Ge]*ye[pe]*8),v[Be]=1/(m[ne[Be]]*ye[Ge]*ye[pe]*8),Be++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),l=M)}this.encode=function(M,W){W&&le(W),_=new Array,E=0,T=7,ve(65496),ve(65504),ve(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),ve(1),ve(1),Y(0),Y(0),(function(){ve(65499),ve(132),Y(0);for(var He=0;He<64;He++)Y(f[He]);Y(1);for(var bt=0;bt<64;bt++)Y(m[bt])})(),(function(He,bt){ve(65472),ve(17),Y(8),ve(bt),ve(He),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)})(M.width,M.height),(function(){ve(65476),ve(418),Y(0);for(var He=0;He<16;He++)Y(X[He+1]);for(var bt=0;bt<=11;bt++)Y($[bt]);Y(16);for(var Mt=0;Mt<16;Mt++)Y(he[Mt+1]);for(var At=0;At<=161;At++)Y(R[At]);Y(1);for(var It=0;It<16;It++)Y(D[It+1]);for(var $e=0;$e<=11;$e++)Y(H[$e]);Y(17);for(var Te=0;Te<16;Te++)Y(O[Te+1]);for(var _e=0;_e<=161;_e++)Y(ge[_e])})(),ve(65498),ve(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var Q=0,ue=0,ce=0;E=0,T=7,this.encode.displayName="_encode_";for(var me,re,se,ye,Be,Ge,pe,Ze,Le,te=M.data,gt=M.width,et=M.height,qe=4*gt,at=0;at<et;){for(me=0;me<qe;){for(Be=qe*at+me,pe=-1,Ze=0,Le=0;Le<64;Le++)Ge=Be+(Ze=Le>>3)*qe+(pe=4*(7&Le)),at+Ze>=et&&(Ge-=qe*(at+1+Ze-et)),me+pe>=qe&&(Ge-=me+pe-qe+4),re=te[Ge++],se=te[Ge++],ye=te[Ge++],P[Le]=(fe[re]+fe[se+256>>0]+fe[ye+512>>0]>>16)-128,q[Le]=(fe[re+768>>0]+fe[se+1024>>0]+fe[ye+1280>>0]>>16)-128,J[Le]=(fe[re+1280>>0]+fe[se+1536>>0]+fe[ye+1792>>0]>>16)-128;Q=we(P,p,Q,e,r),ue=we(q,v,ue,n,o),ce=we(J,v,ce,n,o),me+=32}at+=8}if(T>=0){var nt=[];nt[1]=T+1,nt[0]=(1<<T+1)-1,ie(nt)}return ve(65497),new Uint8Array(_)},t=t||50,(function(){for(var M=String.fromCharCode,W=0;W<256;W++)K[W]=M(W)})(),e=xe(X,$),n=xe(D,H),r=xe(he,R),o=xe(O,ge),(function(){for(var M=1,W=2,Q=1;Q<=15;Q++){for(var ue=M;ue<W;ue++)N[32767+ue]=Q,w[32767+ue]=[],w[32767+ue][1]=Q,w[32767+ue][0]=ue;for(var ce=-(W-1);ce<=-M;ce++)N[32767+ce]=Q,w[32767+ce]=[],w[32767+ce][1]=Q,w[32767+ce][0]=W-1+ce;M<<=1,W<<=1}})(),(function(){for(var M=0;M<256;M++)fe[M]=19595*M,fe[M+256>>0]=38470*M,fe[M+512>>0]=7471*M+32768,fe[M+768>>0]=-11059*M,fe[M+1024>>0]=-21709*M,fe[M+1280>>0]=32768*M+8421375,fe[M+1536>>0]=-27439*M,fe[M+1792>>0]=-5329*M})(),le(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cs(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Qm(t){function e(X){if(!X)throw Error("assert :P")}function n(X,$,he){for(var R=0;4>R;R++)if(X[$+R]!=he.charCodeAt(R))return!0;return!1}function r(X,$,he,R,D){for(var H=0;H<D;H++)X[$+H]=he[R+H]}function o(X,$,he,R){for(var D=0;D<R;D++)X[$+D]=he}function l(X){return new Int32Array(X)}function u(X,$){for(var he=[],R=0;R<X;R++)he.push(new $);return he}function f(X,$){var he=[];return(function R(D,H,O){for(var ge=O[H],xe=0;xe<ge&&(D.push(O.length>H+1?[]:new $),!(O.length<H+1));xe++)R(D[xe],H+1,O)})(he,0,X),he}var m=function(){var X=this;function $(g,y){for(var k=1<<y-1>>>0;g&k;)k>>>=1;return k?(g&k-1)+k:g}function he(g,y,k,L,j){e(!(L%k));do g[y+(L-=k)]=j;while(0<L)}function R(g,y,k,L,j){if(e(2328>=j),512>=j)var B=l(512);else if((B=l(j))==null)return 0;return(function(V,z,G,Z,Ne,De){var Re,Ee,Xe=z,We=1<<G,Ce=l(16),ke=l(16);for(e(Ne!=0),e(Z!=null),e(V!=null),e(0<G),Ee=0;Ee<Ne;++Ee){if(15<Z[Ee])return 0;++Ce[Z[Ee]]}if(Ce[0]==Ne)return 0;for(ke[1]=0,Re=1;15>Re;++Re){if(Ce[Re]>1<<Re)return 0;ke[Re+1]=ke[Re]+Ce[Re]}for(Ee=0;Ee<Ne;++Ee)Re=Z[Ee],0<Z[Ee]&&(De[ke[Re]++]=Ee);if(ke[15]==1)return(Z=new D).g=0,Z.value=De[0],he(V,Xe,1,We,Z),We;var Ke,Ye=-1,Qe=We-1,St=0,vt=1,Vt=1,xt=1<<G;for(Ee=0,Re=1,Ne=2;Re<=G;++Re,Ne<<=1){if(vt+=Vt<<=1,0>(Vt-=Ce[Re]))return 0;for(;0<Ce[Re];--Ce[Re])(Z=new D).g=Re,Z.value=De[Ee++],he(V,Xe+St,Ne,xt,Z),St=$(St,Re)}for(Re=G+1,Ne=2;15>=Re;++Re,Ne<<=1){if(vt+=Vt<<=1,0>(Vt-=Ce[Re]))return 0;for(;0<Ce[Re];--Ce[Re]){if(Z=new D,(St&Qe)!=Ye){for(Xe+=xt,Ke=1<<(Ye=Re)-G;15>Ye&&!(0>=(Ke-=Ce[Ye]));)++Ye,Ke<<=1;We+=xt=1<<(Ke=Ye-G),V[z+(Ye=St&Qe)].g=Ke+G,V[z+Ye].value=Xe-z-Ye}Z.g=Re-G,Z.value=De[Ee++],he(V,Xe+(St>>G),Ne,xt,Z),St=$(St,Re)}}return vt!=2*ke[15]-1?0:We})(g,y,k,L,j,B)}function D(){this.value=this.g=0}function H(){this.value=this.g=0}function O(){this.G=u(5,D),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Sr,H)}function ge(g,y,k,L){e(g!=null),e(y!=null),e(2147483648>L),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=y,g.pa=k,g.Jd=y,g.Yc=k+L,g.Zc=4<=L?k+L-4+1:k,me(g)}function xe(g,y){for(var k=0;0<y--;)k|=se(g,128)<<y;return k}function ie(g,y){var k=xe(g,y);return re(g)?-k:k}function Y(g,y,k,L){var j,B=0;for(e(g!=null),e(y!=null),e(4294967288>L),g.Sb=L,g.Ra=0,g.u=0,g.h=0,4<L&&(L=4),j=0;j<L;++j)B+=y[k+j]<<8*j;g.Ra=B,g.bb=L,g.oa=y,g.pa=k}function ve(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<ja-8>>>0,++g.bb,g.u-=8;Q(g)&&(g.h=1,g.u=0)}function we(g,y){if(e(0<=y),!g.h&&y<=Ma){var k=W(g)&Pa[y];return g.u+=y,ve(g),k}return g.h=1,g.u=0}function le(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(g){return g.Ra>>>(g.u&ja-1)>>>0}function Q(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>ja}function ue(g,y){g.u=y,g.h=Q(g)}function ce(g){g.u>=Da&&(e(g.u>=Da),ve(g))}function me(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function re(g){return xe(g,1)}function se(g,y){var k=g.Ca;0>g.b&&me(g);var L=g.b,j=k*y>>>8,B=(g.I>>>L>j)+0;for(B?(k-=j,g.I-=j+1<<L>>>0):k=j+1,L=k,j=0;256<=L;)j+=8,L>>=8;return L=7^j+xi[L],g.b-=L,g.Ca=(k<<L)-1,B}function ye(g,y,k){g[y+0]=k>>24&255,g[y+1]=k>>16&255,g[y+2]=k>>8&255,g[y+3]=k>>0&255}function Be(g,y){return g[y+0]<<0|g[y+1]<<8}function Ge(g,y){return Be(g,y)|g[y+2]<<16}function pe(g,y){return Be(g,y)|Be(g,y+2)<<16}function Ze(g,y){var k=1<<y;return e(g!=null),e(0<y),g.X=l(k),g.X==null?0:(g.Mb=32-y,g.Xa=y,1)}function Le(g,y){e(g!=null),e(y!=null),e(g.Xa==y.Xa),r(y.X,0,g.X,0,1<<y.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function gt(g,y,k,L){e(k!=null),e(L!=null);var j=k[0],B=L[0];return j==0&&(j=(g*B+y/2)/y),B==0&&(B=(y*j+g/2)/g),0>=j||0>=B?0:(k[0]=j,L[0]=B,1)}function et(g,y){return g+(1<<y)-1>>>y}function qe(g,y){return((4278255360&g)+(4278255360&y)>>>0&4278255360)+((16711935&g)+(16711935&y)>>>0&16711935)>>>0}function at(g,y){X[y]=function(k,L,j,B,V,z,G){var Z;for(Z=0;Z<V;++Z){var Ne=X[g](z[G+Z-1],j,B+Z);z[G+Z]=qe(k[L+Z],Ne)}}}function nt(){this.ud=this.hd=this.jd=0}function He(g,y){return((4278124286&(g^y))>>>1)+(g&y)>>>0}function bt(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Mt(g,y){return bt(g+(g-y+.5>>1))}function At(g,y,k){return Math.abs(y-k)-Math.abs(g-k)}function It(g,y,k,L,j,B,V){for(L=B[V-1],k=0;k<j;++k)B[V+k]=L=qe(g[y+k],L)}function $e(g,y,k,L,j){var B;for(B=0;B<k;++B){var V=g[y+B],z=V>>8&255,G=16711935&(G=(G=16711935&V)+((z<<16)+z));L[j+B]=(4278255360&V)+G>>>0}}function Te(g,y){y.jd=g>>0&255,y.hd=g>>8&255,y.ud=g>>16&255}function _e(g,y,k,L,j,B){var V;for(V=0;V<L;++V){var z=y[k+V],G=z>>>8,Z=z,Ne=255&(Ne=(Ne=z>>>16)+((g.jd<<24>>24)*(G<<24>>24)>>>5));Z=255&(Z=(Z=Z+((g.hd<<24>>24)*(G<<24>>24)>>>5))+((g.ud<<24>>24)*(Ne<<24>>24)>>>5)),j[B+V]=(4278255360&z)+(Ne<<16)+Z}}function Fe(g,y,k,L,j){X[y]=function(B,V,z,G,Z,Ne,De,Re,Ee){for(G=De;G<Re;++G)for(De=0;De<Ee;++De)Z[Ne++]=j(z[L(B[V++])])},X[g]=function(B,V,z,G,Z,Ne,De){var Re=8>>B.b,Ee=B.Ea,Xe=B.K[0],We=B.w;if(8>Re)for(B=(1<<B.b)-1,We=(1<<Re)-1;V<z;++V){var Ce,ke=0;for(Ce=0;Ce<Ee;++Ce)Ce&B||(ke=L(G[Z++])),Ne[De++]=j(Xe[ke&We]),ke>>=Re}else X["VP8LMapColor"+k](G,Z,Xe,We,Ne,De,V,z,Ee)}}function Ie(g,y,k,L,j){for(k=y+k;y<k;){var B=g[y++];L[j++]=B>>16&255,L[j++]=B>>8&255,L[j++]=B>>0&255}}function lt(g,y,k,L,j){for(k=y+k;y<k;){var B=g[y++];L[j++]=B>>16&255,L[j++]=B>>8&255,L[j++]=B>>0&255,L[j++]=B>>24&255}}function ee(g,y,k,L,j){for(k=y+k;y<k;){var B=(V=g[y++])>>16&240|V>>12&15,V=V>>0&240|V>>28&15;L[j++]=B,L[j++]=V}}function Oe(g,y,k,L,j){for(k=y+k;y<k;){var B=(V=g[y++])>>16&248|V>>13&7,V=V>>5&224|V>>3&31;L[j++]=B,L[j++]=V}}function tt(g,y,k,L,j){for(k=y+k;y<k;){var B=g[y++];L[j++]=B>>0&255,L[j++]=B>>8&255,L[j++]=B>>16&255}}function pt(g,y,k,L,j,B){if(B==0)for(k=y+k;y<k;)ye(L,((B=g[y++])[0]>>24|B[1]>>8&65280|B[2]<<8&16711680|B[3]<<24)>>>0),j+=32;else r(L,j,g,y,k)}function ht(g,y){X[y][0]=X[g+"0"],X[y][1]=X[g+"1"],X[y][2]=X[g+"2"],X[y][3]=X[g+"3"],X[y][4]=X[g+"4"],X[y][5]=X[g+"5"],X[y][6]=X[g+"6"],X[y][7]=X[g+"7"],X[y][8]=X[g+"8"],X[y][9]=X[g+"9"],X[y][10]=X[g+"10"],X[y][11]=X[g+"11"],X[y][12]=X[g+"12"],X[y][13]=X[g+"13"],X[y][14]=X[g+"0"],X[y][15]=X[g+"0"]}function qt(g){return g==Va||g==aa||g==Nl||g==Sl}function Pn(){this.eb=[],this.size=this.A=this.fb=0}function Xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Cn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pn,this.f.kb=new Xt,this.sd=null}function Fn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mt(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function zt(g,y){var k=g.T,L=y.ba.f.RGBA,j=L.eb,B=L.fb+g.ka*L.A,V=Ei[y.ba.S],z=g.y,G=g.O,Z=g.f,Ne=g.N,De=g.ea,Re=g.W,Ee=y.cc,Xe=y.dc,We=y.Mc,Ce=y.Nc,ke=g.ka,Ke=g.ka+g.T,Ye=g.U,Qe=Ye+1>>1;for(ke==0?V(z,G,null,null,Z,Ne,De,Re,Z,Ne,De,Re,j,B,null,null,Ye):(V(y.ec,y.fc,z,G,Ee,Xe,We,Ce,Z,Ne,De,Re,j,B-L.A,j,B,Ye),++k);ke+2<Ke;ke+=2)Ee=Z,Xe=Ne,We=De,Ce=Re,Ne+=g.Rc,Re+=g.Rc,B+=2*L.A,V(z,(G+=2*g.fa)-g.fa,z,G,Ee,Xe,We,Ce,Z,Ne,De,Re,j,B-L.A,j,B,Ye);return G+=g.fa,g.j+Ke<g.o?(r(y.ec,y.fc,z,G,Ye),r(y.cc,y.dc,Z,Ne,Qe),r(y.Mc,y.Nc,De,Re,Qe),k--):1&Ke||V(z,G,null,null,Z,Ne,De,Re,Z,Ne,De,Re,j,B+L.A,null,null,Ye),k}function In(g,y,k){var L=g.F,j=[g.J];if(L!=null){var B=g.U,V=y.ba.S,z=V==bl||V==Nl;y=y.ba.f.RGBA;var G=[0],Z=g.ka;G[0]=g.T,g.Kb&&(Z==0?--G[0]:(--Z,j[0]-=g.width),g.j+g.ka+g.T==g.o&&(G[0]=g.o-g.j-Z));var Ne=y.eb;Z=y.fb+Z*y.A,g=Gn(L,j[0],g.width,B,G,Ne,Z+(z?0:3),y.A),e(k==G),g&&qt(V)&&Ai(Ne,Z,z,B,G,y.A)}return 0}function sn(g){var y=g.ma,k=y.ba.S,L=11>k,j=k==Us||k==wl||k==bl||k==tr||k==12||qt(k);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Ea(y.Oa,g,j?11:12))return 0;if(j&&qt(k)&&it(),g.da)alert("todo:use_scaling");else{if(L){if(y.Ib=mt,g.Kb){if(k=g.U+1>>1,y.memory=l(g.U+2*k),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+g.U,y.Mc=y.cc,y.Nc=y.dc+k,y.Ib=zt,it()}}else alert("todo:EmitYUV");j&&(y.Jb=In,L&&je())}if(L&&!ei){for(g=0;256>g;++g)Li[g]=89858*(g-128)+To>>fs,Pi[g]=-22014*(g-128)+To,Wa[g]=-45773*(g-128),da[g]=113618*(g-128)+To>>fs;for(g=Jn;g<Qn;++g)y=76283*(g-16)+To>>fs,Yl[g-Jn]=$i(y,255),hc[g-Jn]=$i(y+8>>4,15);ei=1}return 1}function gn(g){var y=g.ma,k=g.U,L=g.T;return e(!(1&g.ka)),0>=k||0>=L?0:(k=y.Ib(g,y),y.Jb!=null&&y.Jb(g,y,k),y.Dc+=k,1)}function Mn(g){g.ma.memory=null}function Dt(g,y,k,L){return we(g,8)!=47?0:(y[0]=we(g,14)+1,k[0]=we(g,14)+1,L[0]=we(g,1),we(g,3)!=0?0:!g.h)}function mi(g,y){if(4>g)return g+1;var k=g-2>>1;return(2+(1&g)<<k)+we(y,k)+1}function rr(g,y){return 120<y?y-120:1<=(k=((k=_d[y-1])>>4)*g+(8-(15&k)))?k:1;var k}function wr(g,y,k){var L=W(k),j=g[y+=255&L].g-8;return 0<j&&(ue(k,k.u+8),L=W(k),y+=g[y].value,y+=L&(1<<j)-1),ue(k,k.u+g[y].g),g[y].value}function kn(g,y,k){return k.g+=g.g,k.value+=g.value<<y>>>0,e(8>=k.g),g.g}function Kn(g,y,k){var L=g.xc;return e((y=L==0?0:g.vc[g.md*(k>>L)+(y>>L)])<g.Wb),g.Ya[y]}function mn(g,y,k,L){var j=g.ab,B=g.c*y,V=g.C;y=V+y;var z=k,G=L;for(L=g.Ta,k=g.Ua;0<j--;){var Z=g.gc[j],Ne=V,De=y,Re=z,Ee=G,Xe=(G=L,z=k,Z.Ea);switch(e(Ne<De),e(De<=Z.nc),Z.hc){case 2:zl(Re,Ee,(De-Ne)*Xe,G,z);break;case 0:var We=Ne,Ce=De,ke=G,Ke=z,Ye=(xt=Z).Ea;We==0&&(ta(Re,Ee,null,null,1,ke,Ke),It(Re,Ee+1,0,0,Ye-1,ke,Ke+1),Ee+=Ye,Ke+=Ye,++We);for(var Qe=1<<xt.b,St=Qe-1,vt=et(Ye,xt.b),Vt=xt.K,xt=xt.w+(We>>xt.b)*vt;We<Ce;){var En=Vt,Ln=xt,Sn=1;for(is(Re,Ee,ke,Ke-Ye,1,ke,Ke);Sn<Ye;){var dn=(Sn&~St)+Qe;dn>Ye&&(dn=Ye),(0,Uo[En[Ln++]>>8&15])(Re,Ee+ +Sn,ke,Ke+Sn-Ye,dn-Sn,ke,Ke+Sn),Sn=dn}Ee+=Ye,Ke+=Ye,++We&St||(xt+=vt)}De!=Z.nc&&r(G,z-Xe,G,z+(De-Ne-1)*Xe,Xe);break;case 1:for(Xe=Re,Ce=Ee,Ye=(Re=Z.Ea)-(Ke=Re&~(ke=(Ee=1<<Z.b)-1)),We=et(Re,Z.b),Qe=Z.K,Z=Z.w+(Ne>>Z.b)*We;Ne<De;){for(St=Qe,vt=Z,Vt=new nt,xt=Ce+Ke,En=Ce+Re;Ce<xt;)Te(St[vt++],Vt),Rs(Vt,Xe,Ce,Ee,G,z),Ce+=Ee,z+=Ee;Ce<En&&(Te(St[vt++],Vt),Rs(Vt,Xe,Ce,Ye,G,z),Ce+=Ye,z+=Ye),++Ne&ke||(Z+=We)}break;case 3:if(Re==G&&Ee==z&&0<Z.b){for(Ce=G,Re=Xe=z+(De-Ne)*Xe-(Ke=(De-Ne)*et(Z.Ea,Z.b)),Ee=G,ke=z,We=[],Ke=(Ye=Ke)-1;0<=Ke;--Ke)We[Ke]=Ee[ke+Ke];for(Ke=Ye-1;0<=Ke;--Ke)Ce[Re+Ke]=We[Ke];yi(Z,Ne,De,G,Xe,G,z)}else yi(Z,Ne,De,Re,Ee,G,z)}z=L,G=k}G!=k&&r(L,k,z,G,B)}function br(g,y){var k=g.V,L=g.Ba+g.c*g.C,j=y-g.C;if(e(y<=g.l.o),e(16>=j),0<j){var B=g.l,V=g.Ta,z=g.Ua,G=B.width;if(mn(g,j,k,L),j=z=[z],e((k=g.C)<(L=y)),e(B.v<B.va),L>B.o&&(L=B.o),k<B.j){var Z=B.j-k;k=B.j,j[0]+=Z*G}if(k>=L?k=0:(j[0]+=4*B.v,B.ka=k-B.j,B.U=B.va-B.v,B.T=L-k,k=1),k){if(z=z[0],11>(k=g.ca).S){var Ne=k.f.RGBA,De=(L=k.S,j=B.U,B=B.T,Z=Ne.eb,Ne.A),Re=B;for(Ne=Ne.fb+g.Ma*Ne.A;0<Re--;){var Ee=V,Xe=z,We=j,Ce=Z,ke=Ne;switch(L){case Wl:wi(Ee,Xe,We,Ce,ke);break;case Us:si(Ee,Xe,We,Ce,ke);break;case Va:si(Ee,Xe,We,Ce,ke),Ai(Ce,ke,0,We,1,0);break;case lc:ss(Ee,Xe,We,Ce,ke);break;case wl:pt(Ee,Xe,We,Ce,ke,1);break;case aa:pt(Ee,Xe,We,Ce,ke,1),Ai(Ce,ke,0,We,1,0);break;case bl:pt(Ee,Xe,We,Ce,ke,0);break;case Nl:pt(Ee,Xe,We,Ce,ke,0),Ai(Ce,ke,1,We,1,0);break;case tr:Fs(Ee,Xe,We,Ce,ke);break;case Sl:Fs(Ee,Xe,We,Ce,ke),er(Ce,ke,We,1,0);break;case $l:os(Ee,Xe,We,Ce,ke);break;default:e(0)}z+=G,Ne+=De}g.Ma+=B}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=k.height)}}g.C=y,e(g.C<=g.i)}function xo(g){var y;if(0<g.ua)return 0;for(y=0;y<g.Wb;++y){var k=g.Ya[y].G,L=g.Ya[y].H;if(0<k[1][L[1]+0].g||0<k[2][L[2]+0].g||0<k[3][L[3]+0].g)return 0}return 1}function ir(g,y,k,L,j,B){if(g.Z!=0){var V=g.qd,z=g.rd;for(e(li[g.Z]!=null);y<k;++y)li[g.Z](V,z,L,j,L,j,B),V=L,z=j,j+=B;g.qd=V,g.rd=z}}function pi(g,y){var k=g.l.ma,L=k.Z==0||k.Z==1?g.l.j:g.C;if(L=g.C<L?L:g.C,e(y<=g.l.o),y>L){var j=g.l.width,B=k.ca,V=k.tb+j*L,z=g.V,G=g.Ba+g.c*L,Z=g.gc;e(g.ab==1),e(Z[0].hc==3),vl(Z[0],L,y,z,G,B,V),ir(k,L,y,B,V,j)}g.C=g.Ma=y}function Er(g,y,k,L,j,B,V){var z=g.$/L,G=g.$%L,Z=g.m,Ne=g.s,De=k+g.$,Re=De;j=k+L*j;var Ee=k+L*B,Xe=280+Ne.ua,We=g.Pb?z:16777216,Ce=0<Ne.ua?Ne.Wa:null,ke=Ne.wc,Ke=De<Ee?Kn(Ne,G,z):null;e(g.C<B),e(Ee<=j);var Ye=!1;e:for(;;){for(;Ye||De<Ee;){var Qe=0;if(z>=We){var St=De-k;e((We=g).Pb),We.wd=We.m,We.xd=St,0<We.s.ua&&Le(We.s.Wa,We.s.vb),We=z+Jl}if(G&ke||(Ke=Kn(Ne,G,z)),e(Ke!=null),Ke.Qb&&(y[De]=Ke.qb,Ye=!0),!Ye)if(ce(Z),Ke.jc){Qe=Z,St=y;var vt=De,Vt=Ke.pd[W(Qe)&Sr-1];e(Ke.jc),256>Vt.g?(ue(Qe,Qe.u+Vt.g),St[vt]=Vt.value,Qe=0):(ue(Qe,Qe.u+Vt.g-256),e(256<=Vt.value),Qe=Vt.value),Qe==0&&(Ye=!0)}else Qe=wr(Ke.G[0],Ke.H[0],Z);if(Z.h)break;if(Ye||256>Qe){if(!Ye)if(Ke.nd)y[De]=(Ke.qb|Qe<<8)>>>0;else{if(ce(Z),Ye=wr(Ke.G[1],Ke.H[1],Z),ce(Z),St=wr(Ke.G[2],Ke.H[2],Z),vt=wr(Ke.G[3],Ke.H[3],Z),Z.h)break;y[De]=(vt<<24|Ye<<16|Qe<<8|St)>>>0}if(Ye=!1,++De,++G>=L&&(G=0,++z,V!=null&&z<=B&&!(z%16)&&V(g,z),Ce!=null))for(;Re<De;)Qe=y[Re++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe}else if(280>Qe){if(Qe=mi(Qe-256,Z),St=wr(Ke.G[4],Ke.H[4],Z),ce(Z),St=rr(L,St=mi(St,Z)),Z.h)break;if(De-k<St||j-De<Qe)break e;for(vt=0;vt<Qe;++vt)y[De+vt]=y[De+vt-St];for(De+=Qe,G+=Qe;G>=L;)G-=L,++z,V!=null&&z<=B&&!(z%16)&&V(g,z);if(e(De<=j),G&ke&&(Ke=Kn(Ne,G,z)),Ce!=null)for(;Re<De;)Qe=y[Re++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe}else{if(!(Qe<Xe))break e;for(Ye=Qe-280,e(Ce!=null);Re<De;)Qe=y[Re++],Ce.X[(506832829*Qe&4294967295)>>>Ce.Mb]=Qe;Qe=De,e(!(Ye>>>(St=Ce).Xa)),y[Qe]=St.X[Ye],Ye=!0}Ye||e(Z.h==Q(Z))}if(g.Pb&&Z.h&&De<j)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Le(g.s.vb,g.s.Wa);else{if(Z.h)break e;V!=null&&V(g,z>B?B:z),g.a=0,g.$=De-k}return 1}return g.a=3,0}function gi(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var y=g.Wa;y!=null&&(y.X=null),g.vb=null,e(g!=null)}function fr(){var g=new Mu;return g==null?null:(g.a=0,g.xb=Oa,ht("Predictor","VP8LPredictors"),ht("Predictor","VP8LPredictors_C"),ht("PredictorAdd","VP8LPredictorsAdd"),ht("PredictorAdd","VP8LPredictorsAdd_C"),zl=$e,Rs=_e,wi=Ie,si=lt,Fs=ee,os=Oe,ss=tt,X.VP8LMapColor32b=Ra,X.VP8LMapColor8b=Fa,g)}function Ti(g,y,k,L,j){var B=1,V=[g],z=[y],G=L.m,Z=L.s,Ne=null,De=0;e:for(;;){if(k)for(;B&&we(G,1);){var Re=V,Ee=z,Xe=L,We=1,Ce=Xe.m,ke=Xe.gc[Xe.ab],Ke=we(Ce,2);if(Xe.Oc&1<<Ke)B=0;else{switch(Xe.Oc|=1<<Ke,ke.hc=Ke,ke.Ea=Re[0],ke.nc=Ee[0],ke.K=[null],++Xe.ab,e(4>=Xe.ab),Ke){case 0:case 1:ke.b=we(Ce,3)+2,We=Ti(et(ke.Ea,ke.b),et(ke.nc,ke.b),0,Xe,ke.K),ke.K=ke.K[0];break;case 3:var Ye,Qe=we(Ce,8)+1,St=16<Qe?0:4<Qe?1:2<Qe?2:3;if(Re[0]=et(ke.Ea,St),ke.b=St,Ye=We=Ti(Qe,1,0,Xe,ke.K)){var vt,Vt=Qe,xt=ke,En=1<<(8>>xt.b),Ln=l(En);if(Ln==null)Ye=0;else{var Sn=xt.K[0],dn=xt.w;for(Ln[0]=xt.K[0][0],vt=1;vt<1*Vt;++vt)Ln[vt]=qe(Sn[dn+vt],Ln[vt-1]);for(;vt<4*En;++vt)Ln[vt]=0;xt.K[0]=null,xt.K[0]=Ln,Ye=1}}We=Ye;break;case 2:break;default:e(0)}B=We}}if(V=V[0],z=z[0],B&&we(G,1)&&!(B=1<=(De=we(G,4))&&11>=De)){L.a=3;break e}var Yn;if(Yn=B)t:{var Xn,Qt,pr,Si=L,Ar=V,Ur=z,Hn=De,ui=k,ci=Si.m,gr=Si.s,Hr=[null],ti=1,Mi=0,io=cc[Hn];n:for(;;){if(ui&&we(ci,1)){var vr=we(ci,3)+2,jr=et(Ar,vr),Yi=et(Ur,vr),qs=jr*Yi;if(!Ti(jr,Yi,0,Si,Hr))break n;for(Hr=Hr[0],gr.xc=vr,Xn=0;Xn<qs;++Xn){var ms=Hr[Xn]>>8&65535;Hr[Xn]=ms,ms>=ti&&(ti=ms+1)}}if(ci.h)break n;for(Qt=0;5>Qt;++Qt){var Vn=la[Qt];!Qt&&0<Hn&&(Vn+=1<<Hn),Mi<Vn&&(Mi=Vn)}var zo=u(ti*io,D),Kl=ti,Uu=u(Kl,O);if(Uu==null)var oo=null;else e(65536>=Kl),oo=Uu;var so=l(Mi);if(oo==null||so==null||zo==null){Si.a=1;break n}var ha=zo;for(Xn=pr=0;Xn<ti;++Xn){var ao=oo[Xn],ps=ao.G,ma=ao.H,$a=0,Ki=1,Ga=0;for(Qt=0;5>Qt;++Qt){Vn=la[Qt],ps[Qt]=ha,ma[Qt]=pr,!Qt&&0<Hn&&(Vn+=1<<Hn);i:{var Os,gs=Vn,Ja=Si,Wo=so,pc=ha,Hu=pr,lr=0,Io=Ja.m,Vu=we(Io,1);if(o(Wo,0,0,gs),Vu){var qu=we(Io,1)+1,Ql=we(Io,1),Xl=we(Io,Ql==0?1:8);Wo[Xl]=1,qu==2&&(Wo[Xl=we(Io,8)]=1);var $o=1}else{var dr=l(19),Dr=we(Io,4)+4;if(19<Dr){Ja.a=3;var _r=0;break i}for(Os=0;Os<Dr;++Os)dr[Ad[Os]]=we(Io,3);var Ya=void 0,vs=void 0,Ka=Ja,jd=dr,Vr=gs,Zl=Wo,Al=0,Go=Ka.m,Ao=8,Qi=u(128,D);r:for(;R(Qi,0,7,jd,19);){if(we(Go,1)){var _l=2+2*we(Go,3);if((Ya=2+we(Go,_l))>Vr)break r}else Ya=Vr;for(vs=0;vs<Vr&&Ya--;){ce(Go);var eu=Qi[0+(127&W(Go))];ue(Go,Go.u+eu.g);var zs=eu.value;if(16>zs)Zl[vs++]=zs,zs!=0&&(Ao=zs);else{var gc=zs==16,Ou=zs-16,vc=Gl[Ou],zu=we(Go,Cl[Ou])+vc;if(vs+zu>Vr)break r;for(var xc=gc?Ao:0;0<zu--;)Zl[vs++]=xc}}Al=1;break r}Al||(Ka.a=3),$o=Al}($o=$o&&!Io.h)&&(lr=R(pc,Hu,8,Wo,gs)),$o&&lr!=0?_r=lr:(Ja.a=3,_r=0)}if(_r==0)break n;if(Ki&&uc[Qt]==1&&(Ki=ha[pr].g==0),$a+=ha[pr].g,pr+=_r,3>=Qt){var Qa,tu=so[0];for(Qa=1;Qa<Vn;++Qa)so[Qa]>tu&&(tu=so[Qa]);Ga+=tu}}if(ao.nd=Ki,ao.Qb=0,Ki&&(ao.qb=(ps[3][ma[3]+0].value<<24|ps[1][ma[1]+0].value<<16|ps[2][ma[2]+0].value)>>>0,$a==0&&256>ps[0][ma[0]+0].value&&(ao.Qb=1,ao.qb+=ps[0][ma[0]+0].value<<8)),ao.jc=!ao.Qb&&6>Ga,ao.jc){var El,Xi=ao;for(El=0;El<Sr;++El){var xs=El,_o=Xi.pd[xs],pa=Xi.G[0][Xi.H[0]+xs];256<=pa.value?(_o.g=pa.g+256,_o.value=pa.value):(_o.g=0,_o.value=0,xs>>=kn(pa,8,_o),xs>>=kn(Xi.G[1][Xi.H[1]+xs],16,_o),xs>>=kn(Xi.G[2][Xi.H[2]+xs],0,_o),kn(Xi.G[3][Xi.H[3]+xs],24,_o))}}}gr.vc=Hr,gr.Wb=ti,gr.Ya=oo,gr.yc=zo,Yn=1;break t}Yn=0}if(!(B=Yn)){L.a=3;break e}if(0<De){if(Z.ua=1<<De,!Ze(Z.Wa,De)){L.a=1,B=0;break e}}else Z.ua=0;var nu=L,ru=V,yc=z,iu=nu.s,ou=iu.xc;if(nu.c=ru,nu.i=yc,iu.md=et(ru,ou),iu.wc=ou==0?-1:(1<<ou)-1,k){L.xb=Oo;break e}if((Ne=l(V*z))==null){L.a=1,B=0;break e}B=(B=Er(L,Ne,0,V,z,z,null))&&!G.h;break e}return B?(j!=null?j[0]=Ne:(e(Ne==null),e(k)),L.$=0,k||gi(Z)):gi(Z),B}function hr(g,y){var k=g.c*g.i,L=k+y+16*y;return e(g.c<=y),g.V=l(L),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+k+y,1)}function Xo(g,y){var k=g.C,L=y-k,j=g.V,B=g.Ba+g.c*k;for(e(y<=g.l.o);0<L;){var V=16<L?16:L,z=g.l.ma,G=g.l.width,Z=G*V,Ne=z.ca,De=z.tb+G*k,Re=g.Ta,Ee=g.Ua;mn(g,V,j,B),Cr(Re,Ee,Ne,De,Z),ir(z,k,k+V,Ne,De,G),L-=V,j+=V*g.c,k+=V}e(k==y),g.C=g.Ma=y}function qi(){this.ub=this.yd=this.td=this.Rb=0}function Kr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _s(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Zo(){this.Yb=(function(){var g=[];return(function y(k,L,j){for(var B=j[L],V=0;V<B&&(k.push(j.length>L+1?[]:0),!(j.length<L+1));V++)y(k[V],L+1,j)})(g,0,[3,11]),g})()}function or(){this.jb=l(3),this.Wc=f([4,8],Zo),this.Xc=f([4,17],Zo)}function Ca(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function yo(){this.ld=this.La=this.dd=this.tc=0}function Ks(){this.Na=this.la=0}function Es(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Lr(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ka(){this.uc=this.M=this.Nb=0,this.wa=Array(new yo),this.Y=0,this.ya=Array(new Lr),this.aa=0,this.l=new ts}function es(){this.y=l(16),this.f=l(8),this.ea=l(8)}function vi(){this.cb=this.a=0,this.sc="",this.m=new le,this.Od=new qi,this.Kc=new Kr,this.ed=new Ca,this.Qa=new _s,this.Ic=this.$c=this.Aa=0,this.D=new ka,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,le),this.ia=0,this.pb=u(4,Es),this.Pa=new or,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new es),this.Hd=0,this.rb=Array(new Ks),this.sb=0,this.wa=Array(new yo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Lr),this.L=this.aa=0,this.gd=f([4,2],yo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ri(){var g=new vi;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,ua||(ua=jo)),g}function cr(g,y,k){return g.a==0&&(g.a=y,g.sc=k,g.cb=0),0}function Qs(g,y,k){return 3<=k&&g[y+0]==157&&g[y+1]==1&&g[y+2]==42}function Xs(g,y){if(g==null)return 0;if(g.a=0,g.sc="OK",y==null)return cr(g,2,"null VP8Io passed to VP8GetHeaders()");var k=y.data,L=y.w,j=y.ha;if(4>j)return cr(g,7,"Truncated header.");var B=k[L+0]|k[L+1]<<8|k[L+2]<<16,V=g.Od;if(V.Rb=!(1&B),V.td=B>>1&7,V.yd=B>>4&1,V.ub=B>>5,3<V.td)return cr(g,3,"Incorrect keyframe parameters.");if(!V.yd)return cr(g,4,"Frame not displayable.");L+=3,j-=3;var z=g.Kc;if(V.Rb){if(7>j)return cr(g,7,"cannot parse picture header");if(!Qs(k,L,j))return cr(g,3,"Bad code word");z.c=16383&(k[L+4]<<8|k[L+3]),z.Td=k[L+4]>>6,z.i=16383&(k[L+6]<<8|k[L+5]),z.Ud=k[L+6]>>6,L+=7,j-=7,g.za=z.c+15>>4,g.Ub=z.i+15>>4,y.width=z.c,y.height=z.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((B=g.Pa).jb,0,255,B.jb.length),e((B=g.Qa)!=null),B.Cb=0,B.Bb=0,B.Fb=1,o(B.Zb,0,0,B.Zb.length),o(B.Lb,0,0,B.Lb)}if(V.ub>j)return cr(g,7,"bad partition length");ge(B=g.m,k,L,V.ub),L+=V.ub,j-=V.ub,V.Rb&&(z.Ld=re(B),z.Kd=re(B)),z=g.Qa;var G,Z=g.Pa;if(e(B!=null),e(z!=null),z.Cb=re(B),z.Cb){if(z.Bb=re(B),re(B)){for(z.Fb=re(B),G=0;4>G;++G)z.Zb[G]=re(B)?ie(B,7):0;for(G=0;4>G;++G)z.Lb[G]=re(B)?ie(B,6):0}if(z.Bb)for(G=0;3>G;++G)Z.jb[G]=re(B)?xe(B,8):255}else z.Bb=0;if(B.Ka)return cr(g,3,"cannot parse segment header");if((z=g.ed).zd=re(B),z.Tb=xe(B,6),z.wb=xe(B,3),z.Pc=re(B),z.Pc&&re(B)){for(Z=0;4>Z;++Z)re(B)&&(z.vd[Z]=ie(B,6));for(Z=0;4>Z;++Z)re(B)&&(z.od[Z]=ie(B,6))}if(g.L=z.Tb==0?0:z.zd?1:2,B.Ka)return cr(g,3,"cannot parse filter header");var Ne=j;if(j=G=L,L=G+Ne,z=Ne,g.Xb=(1<<xe(g.m,2))-1,Ne<3*(Z=g.Xb))k=7;else{for(G+=3*Z,z-=3*Z,Ne=0;Ne<Z;++Ne){var De=k[j+0]|k[j+1]<<8|k[j+2]<<16;De>z&&(De=z),ge(g.Jc[+Ne],k,G,De),G+=De,z-=De,j+=3}ge(g.Jc[+Z],k,G,z),k=G<L?0:5}if(k!=0)return cr(g,k,"cannot parse partitions");for(k=xe(G=g.m,7),j=re(G)?ie(G,4):0,L=re(G)?ie(G,4):0,z=re(G)?ie(G,4):0,Z=re(G)?ie(G,4):0,G=re(G)?ie(G,4):0,Ne=g.Qa,De=0;4>De;++De){if(Ne.Cb){var Re=Ne.Zb[De];Ne.Fb||(Re+=k)}else{if(0<De){g.pb[De]=g.pb[0];continue}Re=k}var Ee=g.pb[De];Ee.Sc[0]=qa[$i(Re+j,127)],Ee.Sc[1]=kl[$i(Re+0,127)],Ee.Eb[0]=2*qa[$i(Re+L,127)],Ee.Eb[1]=101581*kl[$i(Re+z,127)]>>16,8>Ee.Eb[1]&&(Ee.Eb[1]=8),Ee.Qc[0]=qa[$i(Re+Z,117)],Ee.Qc[1]=kl[$i(Re+G,127)],Ee.lc=Re+G}if(!V.Rb)return cr(g,4,"Not a key frame.");for(re(B),V=g.Pa,k=0;4>k;++k){for(j=0;8>j;++j)for(L=0;3>L;++L)for(z=0;11>z;++z)Z=se(B,Ld[k][j][L][z])?xe(B,8):fc[k][j][L][z],V.Wc[k][j].Yb[L][z]=Z;for(j=0;17>j;++j)V.Xc[k][j]=V.Wc[k][Ru[j]]}return g.kc=re(B),g.kc&&(g.Bd=xe(B,8)),g.cb=1}function jo(g,y,k,L,j,B,V){var z=y[j].Yb[k];for(k=0;16>j;++j){if(!se(g,z[k+0]))return j;for(;!se(g,z[k+1]);)if(z=y[++j].Yb[0],k=0,j==16)return 16;var G=y[j+1].Yb;if(se(g,z[k+2])){var Z=g,Ne=0;if(se(Z,(Re=z)[(De=k)+3]))if(se(Z,Re[De+6])){for(z=0,De=2*(Ne=se(Z,Re[De+8]))+(Re=se(Z,Re[De+9+Ne])),Ne=0,Re=ju[De];Re[z];++z)Ne+=Ne+se(Z,Re[z]);Ne+=3+(8<<De)}else se(Z,Re[De+7])?(Ne=7+2*se(Z,165),Ne+=se(Z,145)):Ne=5+se(Z,159);else Ne=se(Z,Re[De+4])?3+se(Z,Re[De+5]):2;z=G[2]}else Ne=1,z=G[1];G=V+Du[j],0>(Z=g).b&&me(Z);var De,Re=Z.b,Ee=(De=Z.Ca>>1)-(Z.I>>Re)>>31;--Z.b,Z.Ca+=Ee,Z.Ca|=1,Z.I-=(De+1&Ee)<<Re,B[G]=((Ne^Ee)-Ee)*L[(0<j)+0]}return 16}function wo(g){var y=g.rb[g.sb-1];y.la=0,y.Na=0,o(g.zc,0,0,g.zc.length),g.ja=0}function Do(g,y){if(g==null)return 0;if(y==null)return cr(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Xs(g,y))return 0;if(e(g.cb),y.ac==null||y.ac(y)){y.ob&&(g.L=0);var k=fa[g.L];if(g.L==2?(g.yb=0,g.zb=0):(g.yb=y.v-k>>4,g.zb=y.j-k>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=y.o+15+k>>4,g.Hb=y.va+15+k>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var L=g.ed;for(k=0;4>k;++k){var j;if(g.Qa.Cb){var B=g.Qa.Lb[k];g.Qa.Fb||(B+=L.Tb)}else B=L.Tb;for(j=0;1>=j;++j){var V=g.gd[k][j],z=B;if(L.Pc&&(z+=L.vd[0],j&&(z+=L.od[0])),0<(z=0>z?0:63<z?63:z)){var G=z;0<L.wb&&(G=4<L.wb?G>>2:G>>1)>9-L.wb&&(G=9-L.wb),1>G&&(G=1),V.dd=G,V.tc=2*z+G,V.ld=40<=z?2:15<=z?1:0}else V.tc=0;V.La=j}}}k=0}else cr(g,6,"Frame setup failed"),k=g.a;if(k=k==0){if(k){g.$c=0,0<g.Aa||(g.Ic=hs);e:{k=g.Ic,L=4*(G=g.za);var Z=32*G,Ne=G+1,De=0<g.L?G*(0<g.Aa?2:1):0,Re=(g.Aa==2?2:1)*G;if((V=L+832+(j=3*(16*k+fa[g.L])/2*Z)+(B=g.Fa!=null&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=V)k=0;else{if(V>g.Vb){if(g.Vb=0,g.Ec=l(V),g.Fc=0,g.Ec==null){k=cr(g,1,"no memory during frame initialization.");break e}g.Vb=V}V=g.Ec,z=g.Fc,g.Ac=V,g.Bc=z,z+=L,g.Gd=u(Z,es),g.Hd=0,g.rb=u(Ne+1,Ks),g.sb=1,g.wa=De?u(De,yo):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=G),e(!0),g.oc=V,g.pc=z,z+=832,g.ya=u(Re,Lr),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,g.Aa==2&&(g.D.aa+=G),g.R=16*G,g.B=8*G,G=(Z=fa[g.L])*g.R,Z=Z/2*g.B,g.sa=V,g.ta=z+G,g.qa=g.sa,g.ra=g.ta+16*k*g.R+Z,g.Ha=g.qa,g.Ia=g.ra+8*k*g.B+Z,g.$c=0,z+=j,g.mb=B?V:null,g.nb=B?z:null,e(z+B<=g.Fc+g.Vb),wo(g),o(g.Ac,g.Bc,0,L),k=1}}if(k){if(y.ka=0,y.y=g.sa,y.O=g.ta,y.f=g.qa,y.N=g.ra,y.ea=g.Ha,y.Vd=g.Ia,y.fa=g.R,y.Rc=g.B,y.F=null,y.J=0,!yl){for(k=-255;255>=k;++k)Mr[255+k]=0>k?-k:k;for(k=-1020;1020>=k;++k)Vo[1020+k]=-128>k?-128:127<k?127:k;for(k=-112;112>=k;++k)Ua[112+k]=-16>k?-16:15<k?15:k;for(k=-255;510>=k;++k)sa[255+k]=0>k?0:255<k?255:k;yl=1}Ba=dt,as=rt,ls=ct,ai=Ct,Gi=Zt,Dn=Me,na=Ls,xl=Ir,ra=Fo,ia=Ps,oa=Gr,Ji=Ro,us=Wi,Ho=Ta,cs=Tn,ds=Br,Bs=Tr,Zr=zi,ro[0]=Ot,ro[1]=Jt,ro[2]=tn,ro[3]=kr,ro[4]=bo,ro[5]=No,ro[6]=Oi,ro[7]=yt,ro[8]=Un,ro[9]=_n,Ni[0]=Wn,Ni[1]=rn,Ni[2]=zn,Ni[3]=jn,Ni[4]=Ht,Ni[5]=un,Ni[6]=Bn,_i[0]=pn,_i[1]=An,_i[2]=vn,_i[3]=Ft,_i[4]=Ii,_i[5]=$r,_i[6]=So,k=1}else k=0}k&&(k=(function(Ee,Xe){for(Ee.M=0;Ee.M<Ee.Va;++Ee.M){var We,Ce=Ee.Jc[Ee.M&Ee.Xb],ke=Ee.m,Ke=Ee;for(We=0;We<Ke.za;++We){var Ye=ke,Qe=Ke,St=Qe.Ac,vt=Qe.Bc+4*We,Vt=Qe.zc,xt=Qe.ya[Qe.aa+We];if(Qe.Qa.Bb?xt.$b=se(Ye,Qe.Pa.jb[0])?2+se(Ye,Qe.Pa.jb[2]):se(Ye,Qe.Pa.jb[1]):xt.$b=0,Qe.kc&&(xt.Ad=se(Ye,Qe.Bd)),xt.Za=!se(Ye,145)+0,xt.Za){var En=xt.Ob,Ln=0;for(Qe=0;4>Qe;++Qe){var Sn,dn=Vt[0+Qe];for(Sn=0;4>Sn;++Sn){dn=Ed[St[vt+Sn]][dn];for(var Yn=dc[se(Ye,dn[0])];0<Yn;)Yn=dc[2*Yn+se(Ye,dn[Yn])];dn=-Yn,St[vt+Sn]=dn}r(En,Ln,St,vt,4),Ln+=4,Vt[0+Qe]=dn}}else dn=se(Ye,156)?se(Ye,128)?1:3:se(Ye,163)?2:0,xt.Ob[0]=dn,o(St,vt,dn,4),o(Vt,0,dn,4);xt.Dd=se(Ye,142)?se(Ye,114)?se(Ye,183)?1:3:2:0}if(Ke.m.Ka)return cr(Ee,7,"Premature end-of-partition0 encountered.");for(;Ee.ja<Ee.za;++Ee.ja){if(Ke=Ce,Ye=(ke=Ee).rb[ke.sb-1],St=ke.rb[ke.sb+ke.ja],We=ke.ya[ke.aa+ke.ja],vt=ke.kc?We.Ad:0)Ye.la=St.la=0,We.Za||(Ye.Na=St.Na=0),We.Hc=0,We.Gc=0,We.ia=0;else{var Xn,Qt;if(Ye=St,St=Ke,vt=ke.Pa.Xc,Vt=ke.ya[ke.aa+ke.ja],xt=ke.pb[Vt.$b],Qe=Vt.ad,En=0,Ln=ke.rb[ke.sb-1],dn=Sn=0,o(Qe,En,0,384),Vt.Za)var pr=0,Si=vt[3];else{Yn=l(16);var Ar=Ye.Na+Ln.Na;if(Ar=ua(St,vt[1],Ar,xt.Eb,0,Yn,0),Ye.Na=Ln.Na=(0<Ar)+0,1<Ar)Ba(Yn,0,Qe,En);else{var Ur=Yn[0]+3>>3;for(Yn=0;256>Yn;Yn+=16)Qe[En+Yn]=Ur}pr=1,Si=vt[0]}var Hn=15&Ye.la,ui=15&Ln.la;for(Yn=0;4>Yn;++Yn){var ci=1&ui;for(Ur=Qt=0;4>Ur;++Ur)Hn=Hn>>1|(ci=(Ar=ua(St,Si,Ar=ci+(1&Hn),xt.Sc,pr,Qe,En))>pr)<<7,Qt=Qt<<2|(3<Ar?3:1<Ar?2:Qe[En+0]!=0),En+=16;Hn>>=4,ui=ui>>1|ci<<7,Sn=(Sn<<8|Qt)>>>0}for(Si=Hn,pr=ui>>4,Xn=0;4>Xn;Xn+=2){for(Qt=0,Hn=Ye.la>>4+Xn,ui=Ln.la>>4+Xn,Yn=0;2>Yn;++Yn){for(ci=1&ui,Ur=0;2>Ur;++Ur)Ar=ci+(1&Hn),Hn=Hn>>1|(ci=0<(Ar=ua(St,vt[2],Ar,xt.Qc,0,Qe,En)))<<3,Qt=Qt<<2|(3<Ar?3:1<Ar?2:Qe[En+0]!=0),En+=16;Hn>>=2,ui=ui>>1|ci<<5}dn|=Qt<<4*Xn,Si|=Hn<<4<<Xn,pr|=(240&ui)<<Xn}Ye.la=Si,Ln.la=pr,Vt.Hc=Sn,Vt.Gc=dn,Vt.ia=43690&dn?0:xt.ia,vt=!(Sn|dn)}if(0<ke.L&&(ke.wa[ke.Y+ke.ja]=ke.gd[We.$b][We.Za],ke.wa[ke.Y+ke.ja].La|=!vt),Ke.Ka)return cr(Ee,7,"Premature end-of-file encountered.")}if(wo(Ee),ke=Xe,Ke=1,We=(Ce=Ee).D,Ye=0<Ce.L&&Ce.M>=Ce.zb&&Ce.M<=Ce.Va,Ce.Aa==0)e:{if(We.M=Ce.M,We.uc=Ye,_a(Ce,We),Ke=1,We=(Qt=Ce.D).Nb,Ye=(dn=fa[Ce.L])*Ce.R,St=dn/2*Ce.B,Yn=16*We*Ce.R,Ur=8*We*Ce.B,vt=Ce.sa,Vt=Ce.ta-Ye+Yn,xt=Ce.qa,Qe=Ce.ra-St+Ur,En=Ce.Ha,Ln=Ce.Ia-St+Ur,ui=(Hn=Qt.M)==0,Sn=Hn>=Ce.Va-1,Ce.Aa==2&&_a(Ce,Qt),Qt.uc)for(ci=(Ar=Ce).D.M,e(Ar.D.uc),Qt=Ar.yb;Qt<Ar.Hb;++Qt){pr=Qt,Si=ci;var gr=(Hr=(Vn=Ar).D).Nb;Xn=Vn.R;var Hr=Hr.wa[Hr.Y+pr],ti=Vn.sa,Mi=Vn.ta+16*gr*Xn+16*pr,io=Hr.dd,vr=Hr.tc;if(vr!=0)if(e(3<=vr),Vn.L==1)0<pr&&ds(ti,Mi,Xn,vr+4),Hr.La&&Zr(ti,Mi,Xn,vr),0<Si&&cs(ti,Mi,Xn,vr+4),Hr.La&&Bs(ti,Mi,Xn,vr);else{var jr=Vn.B,Yi=Vn.qa,qs=Vn.ra+8*gr*jr+8*pr,ms=Vn.Ha,Vn=Vn.Ia+8*gr*jr+8*pr;gr=Hr.ld,0<pr&&(xl(ti,Mi,Xn,vr+4,io,gr),ia(Yi,qs,ms,Vn,jr,vr+4,io,gr)),Hr.La&&(Ji(ti,Mi,Xn,vr,io,gr),Ho(Yi,qs,ms,Vn,jr,vr,io,gr)),0<Si&&(na(ti,Mi,Xn,vr+4,io,gr),ra(Yi,qs,ms,Vn,jr,vr+4,io,gr)),Hr.La&&(oa(ti,Mi,Xn,vr,io,gr),us(Yi,qs,ms,Vn,jr,vr,io,gr))}}if(Ce.ia&&alert("todo:DitherRow"),ke.put!=null){if(Qt=16*Hn,Hn=16*(Hn+1),ui?(ke.y=Ce.sa,ke.O=Ce.ta+Yn,ke.f=Ce.qa,ke.N=Ce.ra+Ur,ke.ea=Ce.Ha,ke.W=Ce.Ia+Ur):(Qt-=dn,ke.y=vt,ke.O=Vt,ke.f=xt,ke.N=Qe,ke.ea=En,ke.W=Ln),Sn||(Hn-=dn),Hn>ke.o&&(Hn=ke.o),ke.F=null,ke.J=null,Ce.Fa!=null&&0<Ce.Fa.length&&Qt<Hn&&(ke.J=pl(Ce,ke,Qt,Hn-Qt),ke.F=Ce.mb,ke.F==null&&ke.F.length==0)){Ke=cr(Ce,3,"Could not decode alpha data.");break e}Qt<ke.j&&(dn=ke.j-Qt,Qt=ke.j,e(!(1&dn)),ke.O+=Ce.R*dn,ke.N+=Ce.B*(dn>>1),ke.W+=Ce.B*(dn>>1),ke.F!=null&&(ke.J+=ke.width*dn)),Qt<Hn&&(ke.O+=ke.v,ke.N+=ke.v>>1,ke.W+=ke.v>>1,ke.F!=null&&(ke.J+=ke.v),ke.ka=Qt-ke.j,ke.U=ke.va-ke.v,ke.T=Hn-Qt,Ke=ke.put(ke))}We+1!=Ce.Ic||Sn||(r(Ce.sa,Ce.ta-Ye,vt,Vt+16*Ce.R,Ye),r(Ce.qa,Ce.ra-St,xt,Qe+8*Ce.B,St),r(Ce.Ha,Ce.Ia-St,En,Ln+8*Ce.B,St))}if(!Ke)return cr(Ee,6,"Output aborted.")}return 1})(g,y)),y.bc!=null&&y.bc(y),k&=1}return k?(g.cb=0,k):0}function Qr(g,y,k,L,j){j=g[y+k+32*L]+(j>>3),g[y+k+32*L]=-256&j?0>j?0:255:j}function ns(g,y,k,L,j,B){Qr(g,y,0,k,L+j),Qr(g,y,1,k,L+B),Qr(g,y,2,k,L-B),Qr(g,y,3,k,L-j)}function Xr(g){return(20091*g>>16)+g}function oe(g,y,k,L){var j,B=0,V=l(16);for(j=0;4>j;++j){var z=g[y+0]+g[y+8],G=g[y+0]-g[y+8],Z=(35468*g[y+4]>>16)-Xr(g[y+12]),Ne=Xr(g[y+4])+(35468*g[y+12]>>16);V[B+0]=z+Ne,V[B+1]=G+Z,V[B+2]=G-Z,V[B+3]=z-Ne,B+=4,y++}for(j=B=0;4>j;++j)z=(g=V[B+0]+4)+V[B+8],G=g-V[B+8],Z=(35468*V[B+4]>>16)-Xr(V[B+12]),Qr(k,L,0,0,z+(Ne=Xr(V[B+4])+(35468*V[B+12]>>16))),Qr(k,L,1,0,G+Z),Qr(k,L,2,0,G-Z),Qr(k,L,3,0,z-Ne),B++,L+=32}function Me(g,y,k,L){var j=g[y+0]+4,B=35468*g[y+4]>>16,V=Xr(g[y+4]),z=35468*g[y+1]>>16;ns(k,L,0,j+V,g=Xr(g[y+1]),z),ns(k,L,1,j+B,g,z),ns(k,L,2,j-B,g,z),ns(k,L,3,j-V,g,z)}function rt(g,y,k,L,j){oe(g,y,k,L),j&&oe(g,y+16,k,L+4)}function ct(g,y,k,L){as(g,y+0,k,L,1),as(g,y+32,k,L+128,1)}function Ct(g,y,k,L){var j;for(g=g[y+0]+4,j=0;4>j;++j)for(y=0;4>y;++y)Qr(k,L,y,j,g)}function Zt(g,y,k,L){g[y+0]&&ai(g,y+0,k,L),g[y+16]&&ai(g,y+16,k,L+4),g[y+32]&&ai(g,y+32,k,L+128),g[y+48]&&ai(g,y+48,k,L+128+4)}function dt(g,y,k,L){var j,B=l(16);for(j=0;4>j;++j){var V=g[y+0+j]+g[y+12+j],z=g[y+4+j]+g[y+8+j],G=g[y+4+j]-g[y+8+j],Z=g[y+0+j]-g[y+12+j];B[0+j]=V+z,B[8+j]=V-z,B[4+j]=Z+G,B[12+j]=Z-G}for(j=0;4>j;++j)V=(g=B[0+4*j]+3)+B[3+4*j],z=B[1+4*j]+B[2+4*j],G=B[1+4*j]-B[2+4*j],Z=g-B[3+4*j],k[L+0]=V+z>>3,k[L+16]=Z+G>>3,k[L+32]=V-z>>3,k[L+48]=Z-G>>3,L+=64}function an(g,y,k){var L,j=y-32,B=bi,V=255-g[j-1];for(L=0;L<k;++L){var z,G=B,Z=V+g[y-1];for(z=0;z<k;++z)g[y+z]=G[Z+g[j+z]];y+=32}}function Jt(g,y){an(g,y,4)}function An(g,y){an(g,y,8)}function rn(g,y){an(g,y,16)}function zn(g,y){var k;for(k=0;16>k;++k)r(g,y+32*k,g,y-32,16)}function jn(g,y){var k;for(k=16;0<k;--k)o(g,y,g[y-1],16),y+=32}function fn(g,y,k){var L;for(L=0;16>L;++L)o(y,k+32*L,g,16)}function Wn(g,y){var k,L=16;for(k=0;16>k;++k)L+=g[y-1+32*k]+g[y+k-32];fn(L>>5,g,y)}function Ht(g,y){var k,L=8;for(k=0;16>k;++k)L+=g[y-1+32*k];fn(L>>4,g,y)}function un(g,y){var k,L=8;for(k=0;16>k;++k)L+=g[y+k-32];fn(L>>4,g,y)}function Bn(g,y){fn(128,g,y)}function Et(g,y,k){return g+2*y+k+2>>2}function tn(g,y){var k,L=y-32;for(L=new Uint8Array([Et(g[L-1],g[L+0],g[L+1]),Et(g[L+0],g[L+1],g[L+2]),Et(g[L+1],g[L+2],g[L+3]),Et(g[L+2],g[L+3],g[L+4])]),k=0;4>k;++k)r(g,y+32*k,L,0,L.length)}function kr(g,y){var k=g[y-1],L=g[y-1+32],j=g[y-1+64],B=g[y-1+96];ye(g,y+0,16843009*Et(g[y-1-32],k,L)),ye(g,y+32,16843009*Et(k,L,j)),ye(g,y+64,16843009*Et(L,j,B)),ye(g,y+96,16843009*Et(j,B,B))}function Ot(g,y){var k,L=4;for(k=0;4>k;++k)L+=g[y+k-32]+g[y-1+32*k];for(L>>=3,k=0;4>k;++k)o(g,y+32*k,L,4)}function bo(g,y){var k=g[y-1+0],L=g[y-1+32],j=g[y-1+64],B=g[y-1-32],V=g[y+0-32],z=g[y+1-32],G=g[y+2-32],Z=g[y+3-32];g[y+0+96]=Et(L,j,g[y-1+96]),g[y+1+96]=g[y+0+64]=Et(k,L,j),g[y+2+96]=g[y+1+64]=g[y+0+32]=Et(B,k,L),g[y+3+96]=g[y+2+64]=g[y+1+32]=g[y+0+0]=Et(V,B,k),g[y+3+64]=g[y+2+32]=g[y+1+0]=Et(z,V,B),g[y+3+32]=g[y+2+0]=Et(G,z,V),g[y+3+0]=Et(Z,G,z)}function Oi(g,y){var k=g[y+1-32],L=g[y+2-32],j=g[y+3-32],B=g[y+4-32],V=g[y+5-32],z=g[y+6-32],G=g[y+7-32];g[y+0+0]=Et(g[y+0-32],k,L),g[y+1+0]=g[y+0+32]=Et(k,L,j),g[y+2+0]=g[y+1+32]=g[y+0+64]=Et(L,j,B),g[y+3+0]=g[y+2+32]=g[y+1+64]=g[y+0+96]=Et(j,B,V),g[y+3+32]=g[y+2+64]=g[y+1+96]=Et(B,V,z),g[y+3+64]=g[y+2+96]=Et(V,z,G),g[y+3+96]=Et(z,G,G)}function No(g,y){var k=g[y-1+0],L=g[y-1+32],j=g[y-1+64],B=g[y-1-32],V=g[y+0-32],z=g[y+1-32],G=g[y+2-32],Z=g[y+3-32];g[y+0+0]=g[y+1+64]=B+V+1>>1,g[y+1+0]=g[y+2+64]=V+z+1>>1,g[y+2+0]=g[y+3+64]=z+G+1>>1,g[y+3+0]=G+Z+1>>1,g[y+0+96]=Et(j,L,k),g[y+0+64]=Et(L,k,B),g[y+0+32]=g[y+1+96]=Et(k,B,V),g[y+1+32]=g[y+2+96]=Et(B,V,z),g[y+2+32]=g[y+3+96]=Et(V,z,G),g[y+3+32]=Et(z,G,Z)}function yt(g,y){var k=g[y+0-32],L=g[y+1-32],j=g[y+2-32],B=g[y+3-32],V=g[y+4-32],z=g[y+5-32],G=g[y+6-32],Z=g[y+7-32];g[y+0+0]=k+L+1>>1,g[y+1+0]=g[y+0+64]=L+j+1>>1,g[y+2+0]=g[y+1+64]=j+B+1>>1,g[y+3+0]=g[y+2+64]=B+V+1>>1,g[y+0+32]=Et(k,L,j),g[y+1+32]=g[y+0+96]=Et(L,j,B),g[y+2+32]=g[y+1+96]=Et(j,B,V),g[y+3+32]=g[y+2+96]=Et(B,V,z),g[y+3+64]=Et(V,z,G),g[y+3+96]=Et(z,G,Z)}function _n(g,y){var k=g[y-1+0],L=g[y-1+32],j=g[y-1+64],B=g[y-1+96];g[y+0+0]=k+L+1>>1,g[y+2+0]=g[y+0+32]=L+j+1>>1,g[y+2+32]=g[y+0+64]=j+B+1>>1,g[y+1+0]=Et(k,L,j),g[y+3+0]=g[y+1+32]=Et(L,j,B),g[y+3+32]=g[y+1+64]=Et(j,B,B),g[y+3+64]=g[y+2+64]=g[y+0+96]=g[y+1+96]=g[y+2+96]=g[y+3+96]=B}function Un(g,y){var k=g[y-1+0],L=g[y-1+32],j=g[y-1+64],B=g[y-1+96],V=g[y-1-32],z=g[y+0-32],G=g[y+1-32],Z=g[y+2-32];g[y+0+0]=g[y+2+32]=k+V+1>>1,g[y+0+32]=g[y+2+64]=L+k+1>>1,g[y+0+64]=g[y+2+96]=j+L+1>>1,g[y+0+96]=B+j+1>>1,g[y+3+0]=Et(z,G,Z),g[y+2+0]=Et(V,z,G),g[y+1+0]=g[y+3+32]=Et(k,V,z),g[y+1+32]=g[y+3+64]=Et(L,k,V),g[y+1+64]=g[y+3+96]=Et(j,L,k),g[y+1+96]=Et(B,j,L)}function vn(g,y){var k;for(k=0;8>k;++k)r(g,y+32*k,g,y-32,8)}function Ft(g,y){var k;for(k=0;8>k;++k)o(g,y,g[y-1],8),y+=32}function sr(g,y,k){var L;for(L=0;8>L;++L)o(y,k+32*L,g,8)}function pn(g,y){var k,L=8;for(k=0;8>k;++k)L+=g[y+k-32]+g[y-1+32*k];sr(L>>4,g,y)}function $r(g,y){var k,L=4;for(k=0;8>k;++k)L+=g[y+k-32];sr(L>>3,g,y)}function Ii(g,y){var k,L=4;for(k=0;8>k;++k)L+=g[y-1+32*k];sr(L>>3,g,y)}function So(g,y){sr(128,g,y)}function ii(g,y,k){var L=g[y-k],j=g[y+0],B=3*(j-L)+qo[1020+g[y-2*k]-g[y+k]],V=Ha[112+(B+4>>3)];g[y-k]=bi[255+L+Ha[112+(B+3>>3)]],g[y+0]=bi[255+j-V]}function Yt(g,y,k,L){var j=g[y+0],B=g[y+k];return no[255+g[y-2*k]-g[y-k]]>L||no[255+B-j]>L}function hn(g,y,k,L){return 4*no[255+g[y-k]-g[y+0]]+no[255+g[y-2*k]-g[y+k]]<=L}function Co(g,y,k,L,j){var B=g[y-3*k],V=g[y-2*k],z=g[y-k],G=g[y+0],Z=g[y+k],Ne=g[y+2*k],De=g[y+3*k];return 4*no[255+z-G]+no[255+V-Z]>L?0:no[255+g[y-4*k]-B]<=j&&no[255+B-V]<=j&&no[255+V-z]<=j&&no[255+De-Ne]<=j&&no[255+Ne-Z]<=j&&no[255+Z-G]<=j}function Tn(g,y,k,L){var j=2*L+1;for(L=0;16>L;++L)hn(g,y+L,k,j)&&ii(g,y+L,k)}function Br(g,y,k,L){var j=2*L+1;for(L=0;16>L;++L)hn(g,y+L*k,1,j)&&ii(g,y+L*k,1)}function Tr(g,y,k,L){var j;for(j=3;0<j;--j)Tn(g,y+=4*k,k,L)}function zi(g,y,k,L){var j;for(j=3;0<j;--j)Br(g,y+=4,k,L)}function cn(g,y,k,L,j,B,V,z){for(B=2*B+1;0<j--;){if(Co(g,y,k,B,V))if(Yt(g,y,k,z))ii(g,y,k);else{var G=g,Z=y,Ne=k,De=G[Z-2*Ne],Re=G[Z-Ne],Ee=G[Z+0],Xe=G[Z+Ne],We=G[Z+2*Ne],Ce=27*(Ke=qo[1020+3*(Ee-Re)+qo[1020+De-Xe]])+63>>7,ke=18*Ke+63>>7,Ke=9*Ke+63>>7;G[Z-3*Ne]=bi[255+G[Z-3*Ne]+Ke],G[Z-2*Ne]=bi[255+De+ke],G[Z-Ne]=bi[255+Re+Ce],G[Z+0]=bi[255+Ee-Ce],G[Z+Ne]=bi[255+Xe-ke],G[Z+2*Ne]=bi[255+We-Ke]}y+=L}}function $n(g,y,k,L,j,B,V,z){for(B=2*B+1;0<j--;){if(Co(g,y,k,B,V))if(Yt(g,y,k,z))ii(g,y,k);else{var G=g,Z=y,Ne=k,De=G[Z-Ne],Re=G[Z+0],Ee=G[Z+Ne],Xe=Ha[112+((We=3*(Re-De))+4>>3)],We=Ha[112+(We+3>>3)],Ce=Xe+1>>1;G[Z-2*Ne]=bi[255+G[Z-2*Ne]+Ce],G[Z-Ne]=bi[255+De+We],G[Z+0]=bi[255+Re-Xe],G[Z+Ne]=bi[255+Ee-Ce]}y+=L}}function Ls(g,y,k,L,j,B){cn(g,y,k,1,16,L,j,B)}function Ir(g,y,k,L,j,B){cn(g,y,1,k,16,L,j,B)}function Gr(g,y,k,L,j,B){var V;for(V=3;0<V;--V)$n(g,y+=4*k,k,1,16,L,j,B)}function Ro(g,y,k,L,j,B){var V;for(V=3;0<V;--V)$n(g,y+=4,1,k,16,L,j,B)}function Fo(g,y,k,L,j,B,V,z){cn(g,y,j,1,8,B,V,z),cn(k,L,j,1,8,B,V,z)}function Ps(g,y,k,L,j,B,V,z){cn(g,y,1,j,8,B,V,z),cn(k,L,1,j,8,B,V,z)}function Wi(g,y,k,L,j,B,V,z){$n(g,y+4*j,j,1,8,B,V,z),$n(k,L+4*j,j,1,8,B,V,z)}function Ta(g,y,k,L,j,B,V,z){$n(g,y+4,1,j,8,B,V,z),$n(k,L+4,1,j,8,B,V,z)}function Bo(){this.ba=new Cn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ms(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ia(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ol(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new O,this.yc=new D}function Mu(){this.xb=this.a=0,this.l=new ts,this.ca=new Cn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ol,this.ab=0,this.gc=u(4,Ia),this.Oc=0}function Aa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rs(g,y,k,L,j,B,V){for(g=g==null?0:g[y+0],y=0;y<V;++y)j[B+y]=g+k[L+y]&255,g=j[B+y]}function ml(g,y,k,L,j,B,V){var z;if(g==null)rs(null,null,k,L,j,B,V);else for(z=0;z<V;++z)j[B+z]=g[y+z]+k[L+z]&255}function js(g,y,k,L,j,B,V){if(g==null)rs(null,null,k,L,j,B,V);else{var z,G=g[y+0],Z=G,Ne=G;for(z=0;z<V;++z)Z=Ne+(G=g[y+z])-Z,Ne=k[L+z]+(-256&Z?0>Z?0:255:Z)&255,Z=G,j[B+z]=Ne}}function pl(g,y,k,L){var j=y.width,B=y.o;if(e(g!=null&&y!=null),0>k||0>=L||k+L>B)return null;if(!g.Cc){if(g.ga==null){var V;if(g.ga=new Aa,(V=g.ga==null)||(V=y.width*y.o,e(g.Gb.length==0),g.Gb=l(V),g.Uc=0,g.Gb==null?V=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,V=1),V=!V),!V){V=g.ga;var z=g.Fa,G=g.P,Z=g.qc,Ne=g.mb,De=g.nb,Re=G+1,Ee=Z-1,Xe=V.l;if(e(z!=null&&Ne!=null&&y!=null),li[0]=null,li[1]=rs,li[2]=ml,li[3]=js,V.ca=Ne,V.tb=De,V.c=y.width,V.i=y.height,e(0<V.c&&0<V.i),1>=Z)y=0;else if(V.$a=z[G+0]>>0&3,V.Z=z[G+0]>>2&3,V.Lc=z[G+0]>>4&3,G=z[G+0]>>6&3,0>V.$a||1<V.$a||4<=V.Z||1<V.Lc||G)y=0;else if(Xe.put=gn,Xe.ac=sn,Xe.bc=Mn,Xe.ma=V,Xe.width=y.width,Xe.height=y.height,Xe.Da=y.Da,Xe.v=y.v,Xe.va=y.va,Xe.j=y.j,Xe.o=y.o,V.$a)e:{e(V.$a==1),y=fr();t:for(;;){if(y==null){y=0;break e}if(e(V!=null),V.mc=y,y.c=V.c,y.i=V.i,y.l=V.l,y.l.ma=V,y.l.width=V.c,y.l.height=V.i,y.a=0,Y(y.m,z,Re,Ee),!Ti(V.c,V.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&xo(y.s)?(V.ic=1,z=y.c*y.i,y.Ta=null,y.Ua=0,y.V=l(z),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):(V.ic=0,y=hr(y,V.c)),!y))break t;y=1;break e}V.mc=null,y=0}else y=Ee>=V.c*V.i;V=!y}if(V)return null;g.ga.Lc!=1?g.Ga=0:L=B-k}e(g.ga!=null),e(k+L<=B);e:{if(y=(z=g.ga).c,B=z.l.o,z.$a==0){if(Re=g.rc,Ee=g.Vc,Xe=g.Fa,G=g.P+1+k*y,Z=g.mb,Ne=g.nb+k*y,e(G<=g.P+g.qc),z.Z!=0)for(e(li[z.Z]!=null),V=0;V<L;++V)li[z.Z](Re,Ee,Xe,G,Z,Ne,y),Re=Z,Ee=Ne,Ne+=y,G+=y;else for(V=0;V<L;++V)r(Z,Ne,Xe,G,y),Re=Z,Ee=Ne,Ne+=y,G+=y;g.rc=Re,g.Vc=Ee}else{if(e(z.mc!=null),y=k+L,e((V=z.mc)!=null),e(y<=V.i),V.C>=y)y=1;else if(z.ic||je(),z.ic){z=V.V,Re=V.Ba,Ee=V.c;var We=V.i,Ce=(Xe=1,G=V.$/Ee,Z=V.$%Ee,Ne=V.m,De=V.s,V.$),ke=Ee*We,Ke=Ee*y,Ye=De.wc,Qe=Ce<Ke?Kn(De,Z,G):null;e(Ce<=ke),e(y<=We),e(xo(De));t:for(;;){for(;!Ne.h&&Ce<Ke;){if(Z&Ye||(Qe=Kn(De,Z,G)),e(Qe!=null),ce(Ne),256>(We=wr(Qe.G[0],Qe.H[0],Ne)))z[Re+Ce]=We,++Ce,++Z>=Ee&&(Z=0,++G<=y&&!(G%16)&&pi(V,G));else{if(!(280>We)){Xe=0;break t}We=mi(We-256,Ne);var St,vt=wr(Qe.G[4],Qe.H[4],Ne);if(ce(Ne),!(Ce>=(vt=rr(Ee,vt=mi(vt,Ne)))&&ke-Ce>=We)){Xe=0;break t}for(St=0;St<We;++St)z[Re+Ce+St]=z[Re+Ce+St-vt];for(Ce+=We,Z+=We;Z>=Ee;)Z-=Ee,++G<=y&&!(G%16)&&pi(V,G);Ce<Ke&&Z&Ye&&(Qe=Kn(De,Z,G))}e(Ne.h==Q(Ne))}pi(V,G>y?y:G);break t}!Xe||Ne.h&&Ce<ke?(Xe=0,V.a=Ne.h?5:3):V.$=Ce,y=Xe}else y=Er(V,V.V,V.Ba,V.c,V.i,y,Xo);if(!y){L=0;break e}}k+L>=B&&(g.Cc=1),L=1}if(!L)return null;if(g.Cc&&((L=g.ga)!=null&&(L.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+k*j}function S(g,y,k,L,j,B){for(;0<j--;){var V,z=g,G=y+(k?1:0),Z=g,Ne=y+(k?0:3);for(V=0;V<L;++V){var De=Z[Ne+4*V];De!=255&&(De*=32897,z[G+4*V+0]=z[G+4*V+0]*De>>23,z[G+4*V+1]=z[G+4*V+1]*De>>23,z[G+4*V+2]=z[G+4*V+2]*De>>23)}y+=B}}function F(g,y,k,L,j){for(;0<L--;){var B;for(B=0;B<k;++B){var V=g[y+2*B+0],z=15&(Z=g[y+2*B+1]),G=4369*z,Z=(240&Z|Z>>4)*G>>16;g[y+2*B+0]=(240&V|V>>4)*G>>16&240|(15&V|V<<4)*G>>16>>4&15,g[y+2*B+1]=240&Z|z}y+=j}}function ae(g,y,k,L,j,B,V,z){var G,Z,Ne=255;for(Z=0;Z<j;++Z){for(G=0;G<L;++G){var De=g[y+G];B[V+4*G]=De,Ne&=De}y+=k,V+=z}return Ne!=255}function be(g,y,k,L,j){var B;for(B=0;B<j;++B)k[L+B]=g[y+B]>>8}function je(){Ai=S,er=F,Gn=ae,Cr=be}function Je(g,y,k){X[g]=function(L,j,B,V,z,G,Z,Ne,De,Re,Ee,Xe,We,Ce,ke,Ke,Ye){var Qe,St=Ye-1>>1,vt=z[G+0]|Z[Ne+0]<<16,Vt=De[Re+0]|Ee[Xe+0]<<16;e(L!=null);var xt=3*vt+Vt+131074>>2;for(y(L[j+0],255&xt,xt>>16,We,Ce),B!=null&&(xt=3*Vt+vt+131074>>2,y(B[V+0],255&xt,xt>>16,ke,Ke)),Qe=1;Qe<=St;++Qe){var En=z[G+Qe]|Z[Ne+Qe]<<16,Ln=De[Re+Qe]|Ee[Xe+Qe]<<16,Sn=vt+En+Vt+Ln+524296,dn=Sn+2*(En+Vt)>>3;xt=dn+vt>>1,vt=(Sn=Sn+2*(vt+Ln)>>3)+En>>1,y(L[j+2*Qe-1],255&xt,xt>>16,We,Ce+(2*Qe-1)*k),y(L[j+2*Qe-0],255&vt,vt>>16,We,Ce+(2*Qe-0)*k),B!=null&&(xt=Sn+Vt>>1,vt=dn+Ln>>1,y(B[V+2*Qe-1],255&xt,xt>>16,ke,Ke+(2*Qe-1)*k),y(B[V+2*Qe+0],255&vt,vt>>16,ke,Ke+(2*Qe+0)*k)),vt=En,Vt=Ln}1&Ye||(xt=3*vt+Vt+131074>>2,y(L[j+Ye-1],255&xt,xt>>16,We,Ce+(Ye-1)*k),B!=null&&(xt=3*Vt+vt+131074>>2,y(B[V+Ye-1],255&xt,xt>>16,ke,Ke+(Ye-1)*k)))}}function it(){Ei[Wl]=Pd,Ei[Us]=Hs,Ei[lc]=Md,Ei[wl]=za,Ei[bl]=ca,Ei[tr]=Tl,Ei[$l]=Fu,Ei[Va]=Hs,Ei[aa]=za,Ei[Nl]=ca,Ei[Sl]=Tl}function Nt(g){return g&-16384?0>g?0:255:g>>Vs}function Ut(g,y){return Nt((19077*g>>8)+(26149*y>>8)-14234)}function on(g,y,k){return Nt((19077*g>>8)-(6419*y>>8)-(13320*k>>8)+8708)}function nn(g,y){return Nt((19077*g>>8)+(33050*y>>8)-17685)}function bn(g,y,k,L,j){L[j+0]=Ut(g,k),L[j+1]=on(g,y,k),L[j+2]=nn(g,y)}function mr(g,y,k,L,j){L[j+0]=nn(g,y),L[j+1]=on(g,y,k),L[j+2]=Ut(g,k)}function Nr(g,y,k,L,j){var B=on(g,y,k);y=B<<3&224|nn(g,y)>>3,L[j+0]=248&Ut(g,k)|B>>5,L[j+1]=y}function Pr(g,y,k,L,j){var B=240&nn(g,y)|15;L[j+0]=240&Ut(g,k)|on(g,y,k)>>4,L[j+1]=B}function oi(g,y,k,L,j){L[j+0]=255,bn(g,y,k,L,j+1)}function Jr(g,y,k,L,j){mr(g,y,k,L,j),L[j+3]=255}function ko(g,y,k,L,j){bn(g,y,k,L,j),L[j+3]=255}function $i(g,y){return 0>g?0:g>y?y:g}function to(g,y,k){X[g]=function(L,j,B,V,z,G,Z,Ne,De){for(var Re=Ne+(-2&De)*k;Ne!=Re;)y(L[j+0],B[V+0],z[G+0],Z,Ne),y(L[j+1],B[V+0],z[G+0],Z,Ne+k),j+=2,++V,++G,Ne+=2*k;1&De&&y(L[j+0],B[V+0],z[G+0],Z,Ne)}}function Ds(g,y,k){return k==0?g==0?y==0?6:5:y==0?4:0:k}function gl(g,y,k,L,j){switch(g>>>30){case 3:as(y,k,L,j,0);break;case 2:Dn(y,k,L,j);break;case 1:ai(y,k,L,j)}}function _a(g,y){var k,L,j=y.M,B=y.Nb,V=g.oc,z=g.pc+40,G=g.oc,Z=g.pc+584,Ne=g.oc,De=g.pc+600;for(k=0;16>k;++k)V[z+32*k-1]=129;for(k=0;8>k;++k)G[Z+32*k-1]=129,Ne[De+32*k-1]=129;for(0<j?V[z-1-32]=G[Z-1-32]=Ne[De-1-32]=129:(o(V,z-32-1,127,21),o(G,Z-32-1,127,9),o(Ne,De-32-1,127,9)),L=0;L<g.za;++L){var Re=y.ya[y.aa+L];if(0<L){for(k=-1;16>k;++k)r(V,z+32*k-4,V,z+32*k+12,4);for(k=-1;8>k;++k)r(G,Z+32*k-4,G,Z+32*k+4,4),r(Ne,De+32*k-4,Ne,De+32*k+4,4)}var Ee=g.Gd,Xe=g.Hd+L,We=Re.ad,Ce=Re.Hc;if(0<j&&(r(V,z-32,Ee[Xe].y,0,16),r(G,Z-32,Ee[Xe].f,0,8),r(Ne,De-32,Ee[Xe].ea,0,8)),Re.Za){var ke=V,Ke=z-32+16;for(0<j&&(L>=g.za-1?o(ke,Ke,Ee[Xe].y[15],4):r(ke,Ke,Ee[Xe+1].y,0,4)),k=0;4>k;k++)ke[Ke+128+k]=ke[Ke+256+k]=ke[Ke+384+k]=ke[Ke+0+k];for(k=0;16>k;++k,Ce<<=2)ke=V,Ke=z+Bu[k],ro[Re.Ob[k]](ke,Ke),gl(Ce,We,16*+k,ke,Ke)}else if(ke=Ds(L,j,Re.Ob[0]),Ni[ke](V,z),Ce!=0)for(k=0;16>k;++k,Ce<<=2)gl(Ce,We,16*+k,V,z+Bu[k]);for(k=Re.Gc,ke=Ds(L,j,Re.Dd),_i[ke](G,Z),_i[ke](Ne,De),Ce=We,ke=G,Ke=Z,255&(Re=k>>0)&&(170&Re?ls(Ce,256,ke,Ke):Gi(Ce,256,ke,Ke)),Re=Ne,Ce=De,255&(k>>=8)&&(170&k?ls(We,320,Re,Ce):Gi(We,320,Re,Ce)),j<g.Ub-1&&(r(Ee[Xe].y,0,V,z+480,16),r(Ee[Xe].f,0,G,Z+224,8),r(Ee[Xe].ea,0,Ne,De+224,8)),k=8*B*g.B,Ee=g.sa,Xe=g.ta+16*L+16*B*g.R,We=g.qa,Re=g.ra+8*L+k,Ce=g.Ha,ke=g.Ia+8*L+k,k=0;16>k;++k)r(Ee,Xe+k*g.R,V,z+32*k,16);for(k=0;8>k;++k)r(We,Re+k*g.B,G,Z+32*k,8),r(Ce,ke+k*g.B,Ne,De+32*k,8)}}function Zs(g,y,k,L,j,B,V,z,G){var Z=[0],Ne=[0],De=0,Re=G!=null?G.kd:0,Ee=G??new Ms;if(g==null||12>k)return 7;Ee.data=g,Ee.w=y,Ee.ha=k,y=[y],k=[k],Ee.gb=[Ee.gb];e:{var Xe=y,We=k,Ce=Ee.gb;if(e(g!=null),e(We!=null),e(Ce!=null),Ce[0]=0,12<=We[0]&&!n(g,Xe[0],"RIFF")){if(n(g,Xe[0]+8,"WEBP")){Ce=3;break e}var ke=pe(g,Xe[0]+4);if(12>ke||4294967286<ke){Ce=3;break e}if(Re&&ke>We[0]-8){Ce=7;break e}Ce[0]=ke,Xe[0]+=12,We[0]-=12}Ce=0}if(Ce!=0)return Ce;for(ke=0<Ee.gb[0],k=k[0];;){e:{var Ke=g;We=y,Ce=k;var Ye=Z,Qe=Ne,St=Xe=[0];if((xt=De=[De])[0]=0,8>Ce[0])Ce=7;else{if(!n(Ke,We[0],"VP8X")){if(pe(Ke,We[0]+4)!=10){Ce=3;break e}if(18>Ce[0]){Ce=7;break e}var vt=pe(Ke,We[0]+8),Vt=1+Ge(Ke,We[0]+12);if(2147483648<=Vt*(Ke=1+Ge(Ke,We[0]+15))){Ce=3;break e}St!=null&&(St[0]=vt),Ye!=null&&(Ye[0]=Vt),Qe!=null&&(Qe[0]=Ke),We[0]+=18,Ce[0]-=18,xt[0]=1}Ce=0}}if(De=De[0],Xe=Xe[0],Ce!=0)return Ce;if(We=!!(2&Xe),!ke&&De)return 3;if(B!=null&&(B[0]=!!(16&Xe)),V!=null&&(V[0]=We),z!=null&&(z[0]=0),V=Z[0],Xe=Ne[0],De&&We&&G==null){Ce=0;break}if(4>k){Ce=7;break}if(ke&&De||!ke&&!De&&!n(g,y[0],"ALPH")){k=[k],Ee.na=[Ee.na],Ee.P=[Ee.P],Ee.Sa=[Ee.Sa];e:{vt=g,Ce=y,ke=k;var xt=Ee.gb;Ye=Ee.na,Qe=Ee.P,St=Ee.Sa,Vt=22,e(vt!=null),e(ke!=null),Ke=Ce[0];var En=ke[0];for(e(Ye!=null),e(St!=null),Ye[0]=null,Qe[0]=null,St[0]=0;;){if(Ce[0]=Ke,ke[0]=En,8>En){Ce=7;break e}var Ln=pe(vt,Ke+4);if(4294967286<Ln){Ce=3;break e}var Sn=8+Ln+1&-2;if(Vt+=Sn,0<xt&&Vt>xt){Ce=3;break e}if(!n(vt,Ke,"VP8 ")||!n(vt,Ke,"VP8L")){Ce=0;break e}if(En[0]<Sn){Ce=7;break e}n(vt,Ke,"ALPH")||(Ye[0]=vt,Qe[0]=Ke+8,St[0]=Ln),Ke+=Sn,En-=Sn}}if(k=k[0],Ee.na=Ee.na[0],Ee.P=Ee.P[0],Ee.Sa=Ee.Sa[0],Ce!=0)break}k=[k],Ee.Ja=[Ee.Ja],Ee.xa=[Ee.xa];e:if(xt=g,Ce=y,ke=k,Ye=Ee.gb[0],Qe=Ee.Ja,St=Ee.xa,vt=Ce[0],Ke=!n(xt,vt,"VP8 "),Vt=!n(xt,vt,"VP8L"),e(xt!=null),e(ke!=null),e(Qe!=null),e(St!=null),8>ke[0])Ce=7;else{if(Ke||Vt){if(xt=pe(xt,vt+4),12<=Ye&&xt>Ye-12){Ce=3;break e}if(Re&&xt>ke[0]-8){Ce=7;break e}Qe[0]=xt,Ce[0]+=8,ke[0]-=8,St[0]=Vt}else St[0]=5<=ke[0]&&xt[vt+0]==47&&!(xt[vt+4]>>5),Qe[0]=ke[0];Ce=0}if(k=k[0],Ee.Ja=Ee.Ja[0],Ee.xa=Ee.xa[0],y=y[0],Ce!=0)break;if(4294967286<Ee.Ja)return 3;if(z==null||We||(z[0]=Ee.xa?2:1),V=[V],Xe=[Xe],Ee.xa){if(5>k){Ce=7;break}z=V,Re=Xe,We=B,g==null||5>k?g=0:5<=k&&g[y+0]==47&&!(g[y+4]>>5)?(ke=[0],xt=[0],Ye=[0],Y(Qe=new M,g,y,k),Dt(Qe,ke,xt,Ye)?(z!=null&&(z[0]=ke[0]),Re!=null&&(Re[0]=xt[0]),We!=null&&(We[0]=Ye[0]),g=1):g=0):g=0}else{if(10>k){Ce=7;break}z=Xe,g==null||10>k||!Qs(g,y+3,k-3)?g=0:(Re=g[y+0]|g[y+1]<<8|g[y+2]<<16,We=16383&(g[y+7]<<8|g[y+6]),g=16383&(g[y+9]<<8|g[y+8]),1&Re||3<(Re>>1&7)||!(Re>>4&1)||Re>>5>=Ee.Ja||!We||!g?g=0:(V&&(V[0]=We),z&&(z[0]=g),g=1))}if(!g||(V=V[0],Xe=Xe[0],De&&(Z[0]!=V||Ne[0]!=Xe)))return 3;G!=null&&(G[0]=Ee,G.offset=y-G.w,e(4294967286>y-G.w),e(G.offset==G.ha-k));break}return Ce==0||Ce==7&&De&&G==null?(B!=null&&(B[0]|=Ee.na!=null&&0<Ee.na.length),L!=null&&(L[0]=V),j!=null&&(j[0]=Xe),0):Ce}function Ea(g,y,k){var L=y.width,j=y.height,B=0,V=0,z=L,G=j;if(y.Da=g!=null&&0<g.Da,y.Da&&(z=g.cd,G=g.bd,B=g.v,V=g.j,11>k||(B&=-2,V&=-2),0>B||0>V||0>=z||0>=G||B+z>L||V+G>j))return 0;if(y.v=B,y.j=V,y.va=B+z,y.o=V+G,y.U=z,y.T=G,y.da=g!=null&&0<g.da,y.da){if(!gt(z,G,k=[g.ib],B=[g.hb]))return 0;y.ib=k[0],y.hb=B[0]}return y.ob=g!=null&&g.ob,y.Kb=g==null||!g.Sd,y.da&&(y.ob=y.ib<3*L/4&&y.hb<3*j/4,y.Kb=0),1}function La(g){if(g==null)return 2;if(11>g.S){var y=g.f.RGBA;y.fb+=(g.height-1)*y.A,y.A=-y.A}else y=g.f.kb,g=g.height,y.O+=(g-1)*y.fa,y.fa=-y.fa,y.N+=(g-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(g-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(g-1)*y.lb,y.lb=-y.lb);return 0}function ea(g,y,k,L){if(L==null||0>=g||0>=y)return 2;if(k!=null){if(k.Da){var j=k.cd,B=k.bd,V=-2&k.v,z=-2&k.j;if(0>V||0>z||0>=j||0>=B||V+j>g||z+B>y)return 2;g=j,y=B}if(k.da){if(!gt(g,y,j=[k.ib],B=[k.hb]))return 2;g=j[0],y=B[0]}}L.width=g,L.height=y;e:{var G=L.width,Z=L.height;if(g=L.S,0>=G||0>=Z||!(g>=Wl&&13>g))g=2;else{if(0>=L.Rd&&L.sd==null){V=B=j=y=0;var Ne=(z=G*Il[g])*Z;if(11>g||(B=(Z+1)/2*(y=(G+1)/2),g==12&&(V=(j=G)*Z)),(Z=l(Ne+2*B+V))==null){g=1;break e}L.sd=Z,11>g?((G=L.f.RGBA).eb=Z,G.fb=0,G.A=z,G.size=Ne):((G=L.f.kb).y=Z,G.O=0,G.fa=z,G.Fd=Ne,G.f=Z,G.N=0+Ne,G.Ab=y,G.Cd=B,G.ea=Z,G.W=0+Ne+B,G.Db=y,G.Ed=B,g==12&&(G.F=Z,G.J=0+Ne+2*B),G.Tc=V,G.lb=j)}if(y=1,j=L.S,B=L.width,V=L.height,j>=Wl&&13>j)if(11>j)g=L.f.RGBA,y&=(z=Math.abs(g.A))*(V-1)+B<=g.size,y&=z>=B*Il[j],y&=g.eb!=null;else{g=L.f.kb,z=(B+1)/2,Ne=(V+1)/2,G=Math.abs(g.fa),Z=Math.abs(g.Ab);var De=Math.abs(g.Db),Re=Math.abs(g.lb),Ee=Re*(V-1)+B;y&=G*(V-1)+B<=g.Fd,y&=Z*(Ne-1)+z<=g.Cd,y=(y&=De*(Ne-1)+z<=g.Ed)&G>=B&Z>=z&De>=z,y&=g.y!=null,y&=g.f!=null,y&=g.ea!=null,j==12&&(y&=Re>=B,y&=Ee<=g.Tc,y&=g.F!=null)}else y=0;g=y?0:2}}return g!=0||k!=null&&k.fd&&(g=La(L)),g}var Sr=64,Pa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ma=24,ja=32,Da=8,xi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];at("Predictor0","PredictorAdd0"),X.Predictor0=function(){return 4278190080},X.Predictor1=function(g){return g},X.Predictor2=function(g,y,k){return y[k+0]},X.Predictor3=function(g,y,k){return y[k+1]},X.Predictor4=function(g,y,k){return y[k-1]},X.Predictor5=function(g,y,k){return He(He(g,y[k+1]),y[k+0])},X.Predictor6=function(g,y,k){return He(g,y[k-1])},X.Predictor7=function(g,y,k){return He(g,y[k+0])},X.Predictor8=function(g,y,k){return He(y[k-1],y[k+0])},X.Predictor9=function(g,y,k){return He(y[k+0],y[k+1])},X.Predictor10=function(g,y,k){return He(He(g,y[k-1]),He(y[k+0],y[k+1]))},X.Predictor11=function(g,y,k){var L=y[k+0];return 0>=At(L>>24&255,g>>24&255,(y=y[k-1])>>24&255)+At(L>>16&255,g>>16&255,y>>16&255)+At(L>>8&255,g>>8&255,y>>8&255)+At(255&L,255&g,255&y)?L:g},X.Predictor12=function(g,y,k){var L=y[k+0];return(bt((g>>24&255)+(L>>24&255)-((y=y[k-1])>>24&255))<<24|bt((g>>16&255)+(L>>16&255)-(y>>16&255))<<16|bt((g>>8&255)+(L>>8&255)-(y>>8&255))<<8|bt((255&g)+(255&L)-(255&y)))>>>0},X.Predictor13=function(g,y,k){var L=y[k-1];return(Mt((g=He(g,y[k+0]))>>24&255,L>>24&255)<<24|Mt(g>>16&255,L>>16&255)<<16|Mt(g>>8&255,L>>8&255)<<8|Mt(g>>0&255,L>>0&255))>>>0};var ta=X.PredictorAdd0;X.PredictorAdd1=It,at("Predictor2","PredictorAdd2"),at("Predictor3","PredictorAdd3"),at("Predictor4","PredictorAdd4"),at("Predictor5","PredictorAdd5"),at("Predictor6","PredictorAdd6"),at("Predictor7","PredictorAdd7"),at("Predictor8","PredictorAdd8"),at("Predictor9","PredictorAdd9"),at("Predictor10","PredictorAdd10"),at("Predictor11","PredictorAdd11"),at("Predictor12","PredictorAdd12"),at("Predictor13","PredictorAdd13");var is=X.PredictorAdd2;Fe("ColorIndexInverseTransform","MapARGB","32b",(function(g){return g>>8&255}),(function(g){return g})),Fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(g){return g}),(function(g){return g>>8&255}));var zl,yi=X.ColorIndexInverseTransform,Ra=X.MapARGB,vl=X.VP8LColorIndexInverseTransformAlpha,Fa=X.MapAlpha,Uo=X.VP8LPredictorsAdd=[];Uo.length=16,(X.VP8LPredictors=[]).length=16,(X.VP8LPredictorsAdd_C=[]).length=16,(X.VP8LPredictors_C=[]).length=16;var Rs,wi,si,Fs,os,ss,Ba,as,Dn,ls,ai,Gi,na,xl,ra,ia,oa,Ji,us,Ho,cs,ds,Bs,Zr,Ai,er,Gn,Cr,Mr=l(511),Vo=l(2041),Ua=l(225),sa=l(767),yl=0,qo=Vo,Ha=Ua,bi=sa,no=Mr,Wl=0,Us=1,lc=2,wl=3,bl=4,tr=5,$l=6,Va=7,aa=8,Nl=9,Sl=10,Cl=[2,3,7],Gl=[3,3,11],la=[280,256,256,256,40],uc=[0,1,1,1,0],Ad=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],_d=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],cc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Jl=8,qa=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ua=null,ju=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Du=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ed=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ld=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ru=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ni=[],ro=[],_i=[],Oo=1,Oa=2,li=[],Ei=[];Je("UpsampleRgbLinePair",bn,3),Je("UpsampleBgrLinePair",mr,3),Je("UpsampleRgbaLinePair",ko,4),Je("UpsampleBgraLinePair",Jr,4),Je("UpsampleArgbLinePair",oi,4),Je("UpsampleRgba4444LinePair",Pr,2),Je("UpsampleRgb565LinePair",Nr,2);var Pd=X.UpsampleRgbLinePair,Md=X.UpsampleBgrLinePair,Hs=X.UpsampleRgbaLinePair,za=X.UpsampleBgraLinePair,ca=X.UpsampleArgbLinePair,Tl=X.UpsampleRgba4444LinePair,Fu=X.UpsampleRgb565LinePair,fs=16,To=1<<fs-1,Jn=-227,Qn=482,Vs=6,ei=0,Li=l(256),da=l(256),Wa=l(256),Pi=l(256),Yl=l(Qn-Jn),hc=l(Qn-Jn);to("YuvToRgbRow",bn,3),to("YuvToBgrRow",mr,3),to("YuvToRgbaRow",ko,4),to("YuvToBgraRow",Jr,4),to("YuvToArgbRow",oi,4),to("YuvToRgba4444Row",Pr,2),to("YuvToRgb565Row",Nr,2);var Bu=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fa=[0,2,8],mc=[8,7,6,4,4,2,2,2,1,1,1,1],hs=1;this.WebPDecodeRGBA=function(g,y,k,L,j){var B=Us,V=new Bo,z=new Cn;V.ba=z,z.S=B,z.width=[z.width],z.height=[z.height];var G=z.width,Z=z.height,Ne=new Fn;if(Ne==null||g==null)var De=2;else e(Ne!=null),De=Zs(g,y,k,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(De!=0?G=0:(G!=null&&(G[0]=Ne.width[0]),Z!=null&&(Z[0]=Ne.height[0]),G=1),G){z.width=z.width[0],z.height=z.height[0],L!=null&&(L[0]=z.width),j!=null&&(j[0]=z.height);e:{if(L=new ts,(j=new Ms).data=g,j.w=y,j.ha=k,j.kd=1,y=[0],e(j!=null),((g=Zs(j.data,j.w,j.ha,null,null,null,y,null,j))==0||g==7)&&y[0]&&(g=4),(y=g)==0){if(e(V!=null),L.data=j.data,L.w=j.w+j.offset,L.ha=j.ha-j.offset,L.put=gn,L.ac=sn,L.bc=Mn,L.ma=V,j.xa){if((g=fr())==null){V=1;break e}if((function(Re,Ee){var Xe=[0],We=[0],Ce=[0];t:for(;;){if(Re==null)return 0;if(Ee==null)return Re.a=2,0;if(Re.l=Ee,Re.a=0,Y(Re.m,Ee.data,Ee.w,Ee.ha),!Dt(Re.m,Xe,We,Ce)){Re.a=3;break t}if(Re.xb=Oa,Ee.width=Xe[0],Ee.height=We[0],!Ti(Xe[0],We[0],1,Re,null))break t;return 1}return e(Re.a!=0),0})(g,L)){if(L=(y=ea(L.width,L.height,V.Oa,V.ba))==0){t:{L=g;n:for(;;){if(L==null){L=0;break t}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((k=L.l)!=null),e((j=k.ma)!=null),L.xb!=0){if(L.ca=j.ba,L.tb=j.tb,e(L.ca!=null),!Ea(j.Oa,k,wl)){L.a=2;break n}if(!hr(L,k.width)||k.da)break n;if((k.da||qt(L.ca.S))&&je(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&je()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!Ze(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!Er(L,L.V,L.Ba,L.c,L.i,k.o,br))break n;j.Dc=L.Ma,L=1;break t}e(L.a!=0),L=0}L=!L}L&&(y=g.a)}else y=g.a}else{if((g=new ri)==null){V=1;break e}if(g.Fa=j.na,g.P=j.P,g.qc=j.Sa,Xs(g,L)){if((y=ea(L.width,L.height,V.Oa,V.ba))==0){if(g.Aa=0,k=V.Oa,e((j=g)!=null),k!=null){if(0<(G=0>(G=k.Md)?0:100<G?255:255*G/100)){for(Z=Ne=0;4>Z;++Z)12>(De=j.pb[Z]).lc&&(De.ia=G*mc[0>De.lc?0:De.lc]>>3),Ne|=De.ia;Ne&&(alert("todo:VP8InitRandom"),j.ia=1)}j.Ga=k.Id,100<j.Ga?j.Ga=100:0>j.Ga&&(j.Ga=0)}Do(g,L)||(y=g.a)}}else y=g.a}y==0&&V.Oa!=null&&V.Oa.fd&&(y=La(V.ba))}V=y}B=V!=0?null:11>B?z.f.RGBA.eb:z.f.kb.y}else B=null;return B};var Il=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(X,$){for(var he="",R=0;R<4;R++)he+=String.fromCharCode(X[$++]);return he}function v(X,$){return(X[$+0]<<0|X[$+1]<<8|X[$+2]<<16)>>>0}function w(X,$){return(X[$+0]<<0|X[$+1]<<8|X[$+2]<<16|X[$+3]<<24)>>>0}new m;var N=[0],b=[0],I=[],_=new m,E=t,T=(function(X,$){var he={},R=0,D=!1,H=0,O=0;if(he.frames=[],!(function(W,Q,ue,ce){for(var me=0;me<ce;me++)if(W[Q+me]!=ue.charCodeAt(me))return!0;return!1})(X,$,"RIFF",4)){var ge,xe;for(w(X,$+=4),$+=8;$<X.length;){var ie=p(X,$),Y=w(X,$+=4);$+=4;var ve=Y+(1&Y);switch(ie){case"VP8 ":case"VP8L":he.frames[R]===void 0&&(he.frames[R]={}),(M=he.frames[R]).src_off=D?O:$-8,M.src_size=H+Y+8,R++,D&&(D=!1,H=0,O=0);break;case"VP8X":(M=he.header={}).feature_flags=X[$];var we=$+4;M.canvas_width=1+v(X,we),we+=3,M.canvas_height=1+v(X,we),we+=3;break;case"ALPH":D=!0,H=ve+8,O=$-8;break;case"ANIM":(M=he.header).bgcolor=w(X,$),we=$+4,M.loop_count=(ge=X)[(xe=we)+0]<<0|ge[xe+1]<<8,we+=2;break;case"ANMF":var le,M;(M=he.frames[R]={}).offset_x=2*v(X,$),$+=3,M.offset_y=2*v(X,$),$+=3,M.width=1+v(X,$),$+=3,M.height=1+v(X,$),$+=3,M.duration=v(X,$),$+=3,le=X[$++],M.dispose=1&le,M.blend=le>>1&1}ie!="ANMF"&&($+=ve)}return he}})(E,0);T.response=E,T.rgbaoutput=!0,T.dataurl=!1;var P=T.header?T.header:null,q=T.frames?T.frames:null;if(P){P.loop_counter=P.loop_count,N=[P.canvas_height],b=[P.canvas_width];for(var J=0;J<q.length&&q[J].blend!=0;J++);}var K=q[0],fe=_.WebPDecodeRGBA(E,K.src_off,K.src_size,b,N);K.rgba=fe,K.imgwidth=b[0],K.imgheight=N[0];for(var ne=0;ne<b[0]*N[0]*4;ne++)I[ne]=fe[ne];return this.width=b,this.height=N,this.data=I,this}(function(t){var e=function(){return typeof Vf=="function"},n=function(N,b,I,_){var E=4,T=u;switch(_){case t.image_compression.FAST:E=1,T=l;break;case t.image_compression.MEDIUM:E=6,T=f;break;case t.image_compression.SLOW:E=9,T=m}N=r(N,b,I,T);var P=Vf(N,{level:E});return t.__addimage__.arrayBufferToBinaryString(P)},r=function(N,b,I,_){for(var E,T,P,q=N.length/b,J=new Uint8Array(N.length+q),K=v(),fe=0;fe<q;fe+=1){if(P=fe*b,E=N.subarray(P,P+b),_)J.set(_(E,I,T),P+fe);else{for(var ne,X=K.length,$=[];ne<X;ne+=1)$[ne]=K[ne](E,I,T);var he=w($.concat());J.set($[he],P+fe)}T=E}return J},o=function(N){var b=Array.apply([],N);return b.unshift(0),b},l=function(N,b){var I,_=[],E=N.length;_[0]=1;for(var T=0;T<E;T+=1)I=N[T-b]||0,_[T+1]=N[T]-I+256&255;return _},u=function(N,b,I){var _,E=[],T=N.length;E[0]=2;for(var P=0;P<T;P+=1)_=I&&I[P]||0,E[P+1]=N[P]-_+256&255;return E},f=function(N,b,I){var _,E,T=[],P=N.length;T[0]=3;for(var q=0;q<P;q+=1)_=N[q-b]||0,E=I&&I[q]||0,T[q+1]=N[q]+256-(_+E>>>1)&255;return T},m=function(N,b,I){var _,E,T,P,q=[],J=N.length;q[0]=4;for(var K=0;K<J;K+=1)_=N[K-b]||0,E=I&&I[K]||0,T=I&&I[K-b]||0,P=p(_,E,T),q[K+1]=N[K]-P+256&255;return q},p=function(N,b,I){if(N===b&&b===I)return N;var _=Math.abs(b-I),E=Math.abs(N-I),T=Math.abs(N+b-I-I);return _<=E&&_<=T?N:E<=T?b:I},v=function(){return[o,l,u,f,m]},w=function(N){var b=N.map((function(I){return I.reduce((function(_,E){return _+Math.abs(E)}),0)}));return b.indexOf(Math.min.apply(null,b))};t.processPNG=function(N,b,I,_){var E,T,P,q,J,K,fe,ne,X,$,he,R,D,H,O,ge=this.decode.FLATE_DECODE,xe="";if(this.__addimage__.isArrayBuffer(N)&&(N=new Uint8Array(N)),this.__addimage__.isArrayBufferView(N)){if(N=(P=new V2(N)).imgData,T=P.bits,E=P.colorSpace,J=P.colors,[4,6].indexOf(P.colorType)!==-1){if(P.bits===8){X=(ne=P.pixelBitlength==32?new Uint32Array(P.decodePixels().buffer):P.pixelBitlength==16?new Uint16Array(P.decodePixels().buffer):new Uint8Array(P.decodePixels().buffer)).length,he=new Uint8Array(X*P.colors),$=new Uint8Array(X);var ie,Y=P.pixelBitlength-P.bits;for(H=0,O=0;H<X;H++){for(D=ne[H],ie=0;ie<Y;)he[O++]=D>>>ie&255,ie+=P.bits;$[H]=D>>>ie&255}}if(P.bits===16){X=(ne=new Uint32Array(P.decodePixels().buffer)).length,he=new Uint8Array(X*(32/P.pixelBitlength)*P.colors),$=new Uint8Array(X*(32/P.pixelBitlength)),R=P.colors>1,H=0,O=0;for(var ve=0;H<X;)D=ne[H++],he[O++]=D>>>0&255,R&&(he[O++]=D>>>16&255,D=ne[H++],he[O++]=D>>>0&255),$[ve++]=D>>>16&255;T=8}_!==t.image_compression.NONE&&e()?(N=n(he,P.width*P.colors,P.colors,_),fe=n($,P.width,1,_)):(N=he,fe=$,ge=void 0)}if(P.colorType===3&&(E=this.color_spaces.INDEXED,K=P.palette,P.transparency.indexed)){var we=P.transparency.indexed,le=0;for(H=0,X=we.length;H<X;++H)le+=we[H];if((le/=255)===X-1&&we.indexOf(0)!==-1)q=[we.indexOf(0)];else if(le!==X){for(ne=P.decodePixels(),$=new Uint8Array(ne.length),H=0,X=ne.length;H<X;H++)$[H]=we[ne[H]];fe=n($,P.width,1)}}var M=(function(W){var Q;switch(W){case t.image_compression.FAST:Q=11;break;case t.image_compression.MEDIUM:Q=13;break;case t.image_compression.SLOW:Q=14;break;default:Q=12}return Q})(_);return ge===this.decode.FLATE_DECODE&&(xe="/Predictor "+M+" "),xe+="/Colors "+J+" /BitsPerComponent "+T+" /Columns "+P.width,(this.__addimage__.isArrayBuffer(N)||this.__addimage__.isArrayBufferView(N))&&(N=this.__addimage__.arrayBufferToBinaryString(N)),(fe&&this.__addimage__.isArrayBuffer(fe)||this.__addimage__.isArrayBufferView(fe))&&(fe=this.__addimage__.arrayBufferToBinaryString(fe)),{alias:I,data:N,index:b,filter:ge,decodeParameters:xe,transparency:q,palette:K,sMask:fe,predictor:M,width:P.width,height:P.height,bitsPerComponent:T,colorSpace:E}}}})(Gt.API),(function(t){t.processGIF89A=function(e,n,r,o){var l=new q2(e),u=l.width,f=l.height,m=[];l.decodeAndBlitFrameRGBA(0,m);var p={data:m,width:u,height:f},v=new Af(100).encode(p,100);return t.processJPEG.call(this,v,n,r,o)},t.processGIF87A=t.processGIF89A})(Gt.API),Cs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:n,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cs.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ur.log("bit decode error:"+n)}},Cs.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var l=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*o*4,f=0;f<8&&8*o+f<this.width;f++){var m=this.palette[l>>7-f&1];this.data[u+4*f]=m.blue,this.data[u+4*f+1]=m.green,this.data[u+4*f+2]=m.red,this.data[u+4*f+3]=255}n!==0&&(this.pos+=4-n)}},Cs.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<t;o++){var l=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*o*4,f=l>>4,m=15&l,p=this.palette[f];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*o+1>=this.width)break;p=this.palette[m],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},Cs.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+4*r;if(o<this.palette.length){var u=this.palette[o];this.data[l]=u.red,this.data[l+1]=u.green,this.data[l+2]=u.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}t!==0&&(this.pos+=4-t)}},Cs.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(l&e)/e*255|0,f=(l>>5&e)/e*255|0,m=(l>>10&e)/e*255|0,p=l>>15?255:0,v=r*this.width*4+4*o;this.data[v]=m,this.data[v+1]=f,this.data[v+2]=u,this.data[v+3]=p}this.pos+=t}},Cs.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(u&e)/e*255|0,m=(u>>5&n)/n*255|0,p=(u>>11)/e*255|0,v=o*this.width*4+4*l;this.data[v]=p,this.data[v+1]=m,this.data[v+2]=f,this.data[v+3]=255}this.pos+=t}},Cs.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*n;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},Cs.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),f=e*this.width*4+4*n;this.data[f]=l,this.data[f+1]=o,this.data[f+2]=r,this.data[f+3]=u}},Cs.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,r,o){var l=new Cs(e,!1),u=l.width,f=l.height,m={data:l.getData(),width:u,height:f},p=new Af(100).encode(m,100);return t.processJPEG.call(this,p,n,r,o)}})(Gt.API),Qm.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,r,o){var l=new Qm(e),u=l.width,f=l.height,m={data:l.getData(),width:u,height:f},p=new Af(100).encode(m,100);return t.processJPEG.call(this,p,n,r,o)}})(Gt.API),Gt.API.processRGBA=function(t,e,n){for(var r=t.data,o=r.length,l=new Uint8Array(o/4*3),u=new Uint8Array(o/4),f=0,m=0,p=0;p<o;p+=4){var v=r[p],w=r[p+1],N=r[p+2],b=r[p+3];l[f++]=v,l[f++]=w,l[f++]=N,u[m++]=b}var I=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:I,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Gt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},fu=Gt.API,Gc=fu.getCharWidthsArray=function(t,e){var n,r,o=(e=e||{}).font||this.internal.getFont(),l=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),f=e.widths?e.widths:o.metadata.Unicode.widths,m=f.fof?f.fof:1,p=e.kerning?e.kerning:o.metadata.Unicode.kerning,v=p.fof?p.fof:1,w=e.doKerning!==!1,N=0,b=t.length,I=0,_=f[0]||m,E=[];for(n=0;n<b;n++)r=t.charCodeAt(n),typeof o.metadata.widthOfString=="function"?E.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+u*(1e3/l)||0)/1e3):(N=w&&nr(p[r])==="object"&&!isNaN(parseInt(p[r][I],10))?p[r][I]/v:0,E.push((f[r]||_)/m+N)),I=r;return E},Gm=fu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return fu.processArabic&&(t=fu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,o)/n:Gc.apply(this,arguments).reduce((function(l,u){return l+u}),0)},Jm=function(t,e,n,r){for(var o=[],l=0,u=t.length,f=0;l!==u&&f+e[l]<n;)f+=e[l],l++;o.push(t.slice(0,l));var m=l;for(f=0;l!==u;)f+e[l]>r&&(o.push(t.slice(m,l)),f=0,m=l),f+=e[l],l++;return m!==l&&o.push(t.slice(m,l)),o},Ym=function(t,e,n){n||(n={});var r,o,l,u,f,m,p,v=[],w=[v],N=n.textIndent||0,b=0,I=0,_=t.split(" "),E=Gc.apply(this,[" ",n])[0];if(m=n.lineIndent===-1?_[0].length+2:n.lineIndent||0){var T=Array(m).join(" "),P=[];_.map((function(J){(J=J.split(/\s*\n/)).length>1?P=P.concat(J.map((function(K,fe){return(fe&&K.length?`
`:"")+K}))):P.push(J[0])})),_=P,m=Gm.apply(this,[T,n])}for(l=0,u=_.length;l<u;l++){var q=0;if(r=_[l],m&&r[0]==`
`&&(r=r.substr(1),q=1),N+b+(I=(o=Gc.apply(this,[r,n])).reduce((function(J,K){return J+K}),0))>e||q){if(I>e){for(f=Jm.apply(this,[r,o,e-(N+b),e]),v.push(f.shift()),v=[f.pop()];f.length;)w.push([f.shift()]);I=o.slice(r.length-(v[0]?v[0].length:0)).reduce((function(J,K){return J+K}),0)}else v=[r];w.push(v),N=I+m,b=E}else v.push(r),N+=b+I,b=E}return p=m?function(J,K){return(K?T:"")+J.join(" ")}:function(J){return J.join(" ")},w.map(p)},fu.splitTextToSize=function(t,e,n){var r,o=(n=n||{}).fontSize||this.internal.getFontSize(),l=(function(v){if(v.widths&&v.kerning)return{widths:v.widths,kerning:v.kerning};var w=this.internal.getFont(v.fontName,v.fontStyle);return w.metadata.Unicode?{widths:w.metadata.Unicode.widths||{0:1},kerning:w.metadata.Unicode.kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/o;l.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=n.lineIndent;var f,m,p=[];for(f=0,m=r.length;f<m;f++)p=p.concat(Ym.apply(this,[r[f],u,l]));return p},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var l=function(w){return"0x"+parseInt(w,10).toString(16)},u=t.__fontmetrics__.compress=function(w){var N,b,I,_,E=["{"];for(var T in w){if(N=w[T],isNaN(parseInt(T,10))?b="'"+T+"'":(T=parseInt(T,10),b=(b=l(T).slice(2)).slice(0,-1)+r[b.slice(-1)]),typeof N=="number")N<0?(I=l(N).slice(3),_="-"):(I=l(N).slice(2),_=""),I=_+I.slice(0,-1)+r[I.slice(-1)];else{if(nr(N)!=="object")throw new Error("Don't know what to do with value type "+nr(N)+".");I=u(N)}E.push(b+I)}return E.push("}"),E.join("")},f=t.__fontmetrics__.uncompress=function(w){if(typeof w!="string")throw new Error("Invalid argument passed to uncompress.");for(var N,b,I,_,E={},T=1,P=E,q=[],J="",K="",fe=w.length-1,ne=1;ne<fe;ne+=1)(_=w[ne])=="'"?N?(I=N.join(""),N=void 0):N=[]:N?N.push(_):_=="{"?(q.push([P,I]),P={},I=void 0):_=="}"?((b=q.pop())[0][b[1]]=P,I=void 0,P=b[0]):_=="-"?T=-1:I===void 0?n.hasOwnProperty(_)?(J+=n[_],I=parseInt(J,16)*T,T=1,J=""):J+=_:n.hasOwnProperty(_)?(K+=n[_],P[I]=parseInt(K,16)*T,T=1,I=void 0,K=""):K+=_;return E},m={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},p={Unicode:{Courier:m,"Courier-Bold":m,"Courier-BoldOblique":m,"Courier-Oblique":m,Helvetica:m,"Helvetica-Bold":m,"Helvetica-BoldOblique":m,"Helvetica-Oblique":m,"Times-Roman":m,"Times-Bold":m,"Times-BoldItalic":m,"Times-Italic":m}},v={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(w){var N=w.font,b=v.Unicode[N.postScriptName];b&&(N.metadata.Unicode={},N.metadata.Unicode.widths=b.widths,N.metadata.Unicode.kerning=b.kerning);var I=p.Unicode[N.postScriptName];I&&(N.metadata.Unicode.encoding=I,N.encoding=I.codePages[0])}])})(Gt.API),(function(t){var e=function(n){for(var r=n.length,o=new Uint8Array(r),l=0;l<r;l++)o[l]=n.charCodeAt(l);return o};t.API.events.push(["addFont",function(n){var r=void 0,o=n.font,l=n.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(r=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(u,f){f=/^\x00\x01\x00\x00/.test(f)?e(f):e(nc(f)),u.metadata=t.API.TTFFont.open(f),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(o,r)}}])})(Gt),(function(t){function e(){return(Kt.canvg?Promise.resolve(Kt.canvg):Rf(()=>import("./index.es-Bri4ffR6.js"),[])).catch((function(n){return Promise.reject(new Error("Could not load canvg: "+n))})).then((function(n){return n.default?n.default:n}))}Gt.API.addSvgAsImage=function(n,r,o,l,u,f,m,p){if(isNaN(r)||isNaN(o))throw ur.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(u))throw ur.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var v=document.createElement("canvas");v.width=l,v.height=u;var w=v.getContext("2d");w.fillStyle="#fff",w.fillRect(0,0,v.width,v.height);var N={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return e().then((function(I){return I.fromString(w,n,N)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(I){return I.render(N)})).then((function(){b.addImage(v.toDataURL("image/jpeg",1),r,o,l,u,m,p)}))}})(),Gt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,n);return this},Gt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,o,l,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},f=Object.keys(u),m=[],p=0,v=0,w=0;function N(I,_){var E,T=!1;for(E=0;E<I.length;E+=1)I[E]===_&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var b=f.length;for(w=0;w<b;w+=1)n[f[w]].value=n[f[w]].defaultValue,n[f[w]].explicitSet=!1}if(nr(t)==="object"){for(o in t)if(l=t[o],N(f,o)&&l!==void 0){if(n[o].type==="boolean"&&typeof l=="boolean")n[o].value=l;else if(n[o].type==="name"&&N(n[o].valueSet,l))n[o].value=l;else if(n[o].type==="integer"&&Number.isInteger(l))n[o].value=l;else if(n[o].type==="array"){for(p=0;p<l.length;p+=1)if(r=!0,l[p].length===1&&typeof l[p][0]=="number")m.push(String(l[p]-1));else if(l[p].length>1){for(v=0;v<l[p].length;v+=1)typeof l[p][v]!="number"&&(r=!1);r===!0&&m.push([l[p][0]-1,l[p][1]-1].join(" "))}n[o].value="["+m.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var I,_=[];for(I in n)n[I].explicitSet===!0&&(n[I].type==="name"?_.push("/"+I+" /"+n[I].value):_.push("/"+I+" "+n[I].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),f=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),m=unescape(encodeURIComponent("</x:xmpmeta>")),p=l.length+u.length+f.length+o.length+m.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(o+l+u+f+m),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(Gt.API),(function(t){var e=t.API,n=e.pdfEscape16=function(l,u){for(var f,m=u.metadata.Unicode.widths,p=["","0","00","000","0000"],v=[""],w=0,N=l.length;w<N;++w){if(f=u.metadata.characterToGlyph(l.charCodeAt(w)),u.metadata.glyIdsUsed.push(f),u.metadata.toUnicode[f]=l.charCodeAt(w),m.indexOf(f)==-1&&(m.push(f),m.push([parseInt(u.metadata.widthOfGlyph(f),10)])),f=="0")return v.join("");f=f.toString(16),v.push(p[4-f.length],f)}return v.join("")},r=function(l){var u,f,m,p,v,w,N;for(v=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,m=[],w=0,N=(f=Object.keys(l).sort((function(b,I){return b-I}))).length;w<N;w++)u=f[w],m.length>=100&&(v+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar`,m=[]),l[u]!==void 0&&l[u]!==null&&typeof l[u].toString=="function"&&(p=("0000"+l[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),m.push("<"+u+"><"+p+">"));return m.length&&(v+=`
`+m.length+` beginbfchar
`+m.join(`
`)+`
endbfchar
`),v+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(l){(function(u){var f=u.font,m=u.out,p=u.newObject,v=u.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="Identity-H"){for(var w=f.metadata.Unicode.widths,N=f.metadata.subset.encode(f.metadata.glyIdsUsed,1),b="",I=0;I<N.length;I++)b+=String.fromCharCode(N[I]);var _=p();v({data:b,addLength1:!0,objectId:_}),m("endobj");var E=p();v({data:r(f.metadata.toUnicode),addLength1:!0,objectId:E}),m("endobj");var T=p();m("<<"),m("/Type /FontDescriptor"),m("/FontName /"+gu(f.fontName)),m("/FontFile2 "+_+" 0 R"),m("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),m("/Flags "+f.metadata.flags),m("/StemV "+f.metadata.stemV),m("/ItalicAngle "+f.metadata.italicAngle),m("/Ascent "+f.metadata.ascender),m("/Descent "+f.metadata.decender),m("/CapHeight "+f.metadata.capHeight),m(">>"),m("endobj");var P=p();m("<<"),m("/Type /Font"),m("/BaseFont /"+gu(f.fontName)),m("/FontDescriptor "+T+" 0 R"),m("/W "+t.API.PDFObject.convert(w)),m("/CIDToGIDMap /Identity"),m("/DW 1000"),m("/Subtype /CIDFontType2"),m("/CIDSystemInfo"),m("<<"),m("/Supplement 0"),m("/Registry (Adobe)"),m("/Ordering ("+f.encoding+")"),m(">>"),m(">>"),m("endobj"),f.objectNumber=p(),m("<<"),m("/Type /Font"),m("/Subtype /Type0"),m("/ToUnicode "+E+" 0 R"),m("/BaseFont /"+gu(f.fontName)),m("/Encoding /"+f.encoding),m("/DescendantFonts ["+P+" 0 R]"),m(">>"),m("endobj"),f.isAlreadyPutted=!0}})(l)}]),e.events.push(["putFont",function(l){(function(u){var f=u.font,m=u.out,p=u.newObject,v=u.putStream;if(f.metadata instanceof t.API.TTFFont&&f.encoding==="WinAnsiEncoding"){for(var w=f.metadata.rawData,N="",b=0;b<w.length;b++)N+=String.fromCharCode(w[b]);var I=p();v({data:N,addLength1:!0,objectId:I}),m("endobj");var _=p();v({data:r(f.metadata.toUnicode),addLength1:!0,objectId:_}),m("endobj");var E=p();m("<<"),m("/Descent "+f.metadata.decender),m("/CapHeight "+f.metadata.capHeight),m("/StemV "+f.metadata.stemV),m("/Type /FontDescriptor"),m("/FontFile2 "+I+" 0 R"),m("/Flags 96"),m("/FontBBox "+t.API.PDFObject.convert(f.metadata.bbox)),m("/FontName /"+gu(f.fontName)),m("/ItalicAngle "+f.metadata.italicAngle),m("/Ascent "+f.metadata.ascender),m(">>"),m("endobj"),f.objectNumber=p();for(var T=0;T<f.metadata.hmtx.widths.length;T++)f.metadata.hmtx.widths[T]=parseInt(f.metadata.hmtx.widths[T]*(1e3/f.metadata.head.unitsPerEm));m("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+gu(f.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+f.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(f.metadata.hmtx.widths)+">>"),m("endobj"),f.isAlreadyPutted=!0}})(l)}]);var o=function(l){var u,f=l.text||"",m=l.x,p=l.y,v=l.options||{},w=l.mutex||{},N=w.pdfEscape,b=w.activeFontKey,I=w.fonts,_=b,E="",T=0,P="",q=I[_].encoding;if(I[_].encoding!=="Identity-H")return{text:f,x:m,y:p,options:v,mutex:w};for(P=f,_=b,Array.isArray(f)&&(P=f[0]),T=0;T<P.length;T+=1)I[_].metadata.hasOwnProperty("cmap")&&(u=I[_].metadata.cmap.unicode.codeMap[P[T].charCodeAt(0)]),u||P[T].charCodeAt(0)<256&&I[_].metadata.hasOwnProperty("Unicode")?E+=P[T]:E+="";var J="";return parseInt(_.slice(1))<14||q==="WinAnsiEncoding"?J=N(E,_).split("").map((function(K){return K.charCodeAt(0).toString(16)})).join(""):q==="Identity-H"&&(J=n(E,I[_])),w.isHex=!0,{text:J,x:m,y:p,options:v,mutex:w}};e.events.push(["postProcessText",function(l){var u=l.text||"",f=[],m={text:u,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?f.push([o(Object.assign({},m,{text:u[p][0]})).text,u[p][1],u[p][2]]):f.push(o(Object.assign({},m,{text:u[p]})).text);l.text=f}else l.text=o(Object.assign({},m,{text:u})).text}])})(Gt),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(Gt.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var o,l,u,f,m,p,v,w=e,N=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,q=0;this.__bidiEngine__={};var J=function(R){var D=R.charCodeAt(),H=D>>8,O=_[H];return O!==void 0?w[256*O+(255&D)]:H===252||H===253?"AL":T.test(H)?"L":H===8?"R":"N"},K=function(R){for(var D,H=0;H<R.length;H++){if((D=J(R.charAt(H)))==="L")return!1;if(D==="R")return!0}return!1},fe=function(R,D,H,O){var ge,xe,ie,Y,ve=D[O];switch(ve){case"L":case"R":P=!1;break;case"N":case"AN":break;case"EN":P&&(ve="AN");break;case"AL":P=!0,ve="R";break;case"WS":ve="N";break;case"CS":O<1||O+1>=D.length||(ge=H[O-1])!=="EN"&&ge!=="AN"||(xe=D[O+1])!=="EN"&&xe!=="AN"?ve="N":P&&(xe="AN"),ve=xe===ge?xe:"N";break;case"ES":ve=(ge=O>0?H[O-1]:"B")==="EN"&&O+1<D.length&&D[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&H[O-1]==="EN"){ve="EN";break}if(P){ve="N";break}for(ie=O+1,Y=D.length;ie<Y&&D[ie]==="ET";)ie++;ve=ie<Y&&D[ie]==="EN"?"EN":"N";break;case"NSM":if(u&&!f){for(Y=D.length,ie=O+1;ie<Y&&D[ie]==="NSM";)ie++;if(ie<Y){var we=R[O],le=we>=1425&&we<=2303||we===64286;if(ge=D[ie],le&&(ge==="R"||ge==="AL")){ve="R";break}}}ve=O<1||(ge=D[O-1])==="B"?"N":H[O-1];break;case"B":P=!1,o=!0,ve=q;break;case"S":l=!0,ve="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"BN":ve="N"}return ve},ne=function(R,D,H){var O=R.split("");return H&&X(O,H,{hiLevel:q}),O.reverse(),D&&D.reverse(),O.join("")},X=function(R,D,H){var O,ge,xe,ie,Y,ve=-1,we=R.length,le=0,M=[],W=q?b:N,Q=[];for(P=!1,o=!1,l=!1,ge=0;ge<we;ge++)Q[ge]=J(R[ge]);for(xe=0;xe<we;xe++){if(Y=le,M[xe]=fe(R,Q,M,xe),O=240&(le=W[Y][I[M[xe]]]),le&=15,D[xe]=ie=W[le][5],O>0)if(O===16){for(ge=ve;ge<xe;ge++)D[ge]=1;ve=-1}else ve=-1;if(W[le][6])ve===-1&&(ve=xe);else if(ve>-1){for(ge=ve;ge<xe;ge++)D[ge]=ie;ve=-1}Q[xe]==="B"&&(D[xe]=0),H.hiLevel|=ie}l&&(function(ue,ce,me){for(var re=0;re<me;re++)if(ue[re]==="S"){ce[re]=q;for(var se=re-1;se>=0&&ue[se]==="WS";se--)ce[se]=q}})(Q,D,we)},$=function(R,D,H,O,ge){if(!(ge.hiLevel<R)){if(R===1&&q===1&&!o)return D.reverse(),void(H&&H.reverse());for(var xe,ie,Y,ve,we=D.length,le=0;le<we;){if(O[le]>=R){for(Y=le+1;Y<we&&O[Y]>=R;)Y++;for(ve=le,ie=Y-1;ve<ie;ve++,ie--)xe=D[ve],D[ve]=D[ie],D[ie]=xe,H&&(xe=H[ve],H[ve]=H[ie],H[ie]=xe);le=Y}le++}}},he=function(R,D,H){var O=R.split(""),ge={hiLevel:q};return H||(H=[]),X(O,H,ge),(function(xe,ie,Y){if(Y.hiLevel!==0&&v)for(var ve,we=0;we<xe.length;we++)ie[we]===1&&(ve=E.indexOf(xe[we]))>=0&&(xe[we]=E[ve+1])})(O,H,ge),$(2,O,D,H,ge),$(1,O,D,H,ge),O.join("")};return this.__bidiEngine__.doBidiReorder=function(R,D,H){if((function(ge,xe){if(xe)for(var ie=0;ie<ge.length;ie++)xe[ie]=ie;f===void 0&&(f=K(ge)),p===void 0&&(p=K(ge))})(R,D),u||!m||p)if(u&&m&&f^p)q=f?1:0,R=ne(R,D,H);else if(!u&&m&&p)q=f?1:0,R=he(R,D,H),R=ne(R,D);else if(!u||f||m||p){if(u&&!m&&f^p)R=ne(R,D),f?(q=0,R=he(R,D,H)):(q=1,R=he(R,D,H),R=ne(R,D));else if(u&&f&&!m&&p)q=1,R=he(R,D,H),R=ne(R,D);else if(!u&&!m&&f^p){var O=v;f?(q=1,R=he(R,D,H),q=0,v=!1,R=he(R,D,H),v=O):(q=0,R=he(R,D,H),R=ne(R,D),q=1,v=!1,R=he(R,D,H),v=O,R=ne(R,D))}}else q=0,R=he(R,D,H);else q=f?1:0,R=he(R,D,H);return R},this.__bidiEngine__.setOptions=function(R){R&&(u=R.isInputVisual,m=R.isOutputVisual,f=R.isInputRtl,p=R.isOutputRtl,v=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var o=r.text,l=(r.x,r.y,r.options||{}),u=(r.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,n.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var f=0;for(u=[],f=0;f<o.length;f+=1)Object.prototype.toString.call(o[f])==="[object Array]"?u.push([n.doBidiReorder(o[f][0]),o[f][1],o[f][2]]):u.push([n.doBidiReorder(o[f])]);r.text=u}else r.text=n.doBidiReorder(o);n.setOptions({isInputVisual:!0})}])})(Gt),Gt.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new fl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new r5(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new O2(this.contents),this.head=new W2(this),this.name=new K2(this),this.cmap=new K0(this),this.toUnicode={},this.hhea=new $2(this),this.maxp=new Q2(this),this.hmtx=new X2(this),this.post=new J2(this),this.os2=new G2(this),this.loca=new n5(this),this.glyf=new Z2(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,f,m,p;for(p=[],u=0,f=(m=this.bbox).length;u<f;u++)e=m[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(o=this.post.italic_angle),(32768&(n=o>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var o,l,u,f;for(u=0,l=0,f=(e=""+e).length;0<=f?l<f:l>f;l=0<=f?++l:--l)o=e.charCodeAt(l),u+=this.widthOfGlyph(this.characterToGlyph(o))+r*(1e3/n)||0;return u*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t})();var As,fl=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,o;for(o=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)o.push(this.writeByte(e.charCodeAt(n)));return o},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,o,l,u,f,m;return e=this.readByte(),n=this.readByte(),r=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),f=this.readByte(),m=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^o)+16777216*(255^l)+65536*(255^u)+256*(255^f)+(255^m)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*o+16777216*l+65536*u+256*f+m},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,o,l;for(l=[],r=0,o=e.length;r<o;r++)n=e[r],l.push(this.writeByte(n));return l},t})(),O2=(function(){var t;function e(n){var r,o,l;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,o,l,u,f,m,p,v,w,N,b,I,_;for(_ in b=Object.keys(n).length,m=Math.log(2),w=16*Math.floor(Math.log(b)/m),u=Math.floor(w/m),v=16*b-w,(o=new fl).writeInt(this.scalarType),o.writeShort(b),o.writeShort(w),o.writeShort(u),o.writeShort(v),l=16*b,p=o.pos+l,f=null,I=[],n)for(N=n[_],o.writeString(_),o.writeInt(t(N)),o.writeInt(p),o.writeInt(N.length),I=I.concat(N),_==="head"&&(f=p),p+=N.length;p%4;)I.push(0),p++;return o.write(I),r=2981146554-t(o.data),o.pos=f+8,o.writeUInt32(r),o.data},t=function(n){var r,o,l,u;for(n=Q0.call(n);n.length%4;)n.push(0);for(l=new fl(n),o=0,r=0,u=n.length;r<u;r=r+=4)o+=l.readUInt32();return 4294967295&o},e})(),z2={}.hasOwnProperty,Ys=function(t,e){for(var n in e)z2.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};As=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var W2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new fl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e})(),Xm=(function(){function t(e,n){var r,o,l,u,f,m,p,v,w,N,b,I,_,E,T,P,q;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(m=0;m<256;++m)this.codeMap[m]=e.readByte();break;case 4:for(b=e.readUInt16(),N=b/2,e.pos+=6,l=(function(){var J,K;for(K=[],m=J=0;0<=N?J<N:J>N;m=0<=N?++J:--J)K.push(e.readUInt16());return K})(),e.pos+=2,_=(function(){var J,K;for(K=[],m=J=0;0<=N?J<N:J>N;m=0<=N?++J:--J)K.push(e.readUInt16());return K})(),p=(function(){var J,K;for(K=[],m=J=0;0<=N?J<N:J>N;m=0<=N?++J:--J)K.push(e.readUInt16());return K})(),v=(function(){var J,K;for(K=[],m=J=0;0<=N?J<N:J>N;m=0<=N?++J:--J)K.push(e.readUInt16());return K})(),o=(this.length-e.pos+this.offset)/2,f=(function(){var J,K;for(K=[],m=J=0;0<=o?J<o:J>o;m=0<=o?++J:--J)K.push(e.readUInt16());return K})(),m=T=0,q=l.length;T<q;m=++T)for(E=l[m],r=P=I=_[m];I<=E?P<=E:P>=E;r=I<=E?++P:--P)v[m]===0?u=r+p[m]:(u=f[v[m]/2+(r-I)-(N-m)]||0)!==0&&(u+=p[m]),this.codeMap[r]=65535&u}e.pos=w}return t.encode=function(e,n){var r,o,l,u,f,m,p,v,w,N,b,I,_,E,T,P,q,J,K,fe,ne,X,$,he,R,D,H,O,ge,xe,ie,Y,ve,we,le,M,W,Q,ue,ce,me,re,se,ye,Be,Ge;switch(O=new fl,u=Object.keys(e).sort((function(pe,Ze){return pe-Ze})),n){case"macroman":for(_=0,E=(function(){var pe=[];for(I=0;I<256;++I)pe.push(0);return pe})(),P={0:0},l={},ge=0,ve=u.length;ge<ve;ge++)P[se=e[o=u[ge]]]==null&&(P[se]=++_),l[o]={old:e[o],new:P[e[o]]},E[o]=P[e[o]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(E),{charMap:l,subtable:O.data,maxGlyphID:_+1};case"unicode":for(D=[],w=[],q=0,P={},r={},T=p=null,xe=0,we=u.length;xe<we;xe++)P[K=e[o=u[xe]]]==null&&(P[K]=++q),r[o]={old:K,new:P[K]},f=P[K]-o,T!=null&&f===p||(T&&w.push(T),D.push(o),p=f),T=o;for(T&&w.push(T),w.push(65535),D.push(65535),he=2*($=D.length),X=2*Math.pow(Math.log($)/Math.LN2,2),N=Math.log(X/2)/Math.LN2,ne=2*$-X,m=[],fe=[],b=[],I=ie=0,le=D.length;ie<le;I=++ie){if(R=D[I],v=w[I],R===65535){m.push(0),fe.push(0);break}if(R-(H=r[R].new)>=32768)for(m.push(0),fe.push(2*(b.length+$-I)),o=Y=R;R<=v?Y<=v:Y>=v;o=R<=v?++Y:--Y)b.push(r[o].new);else m.push(H-R),fe.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*$+2*b.length),O.writeUInt16(0),O.writeUInt16(he),O.writeUInt16(X),O.writeUInt16(N),O.writeUInt16(ne),me=0,M=w.length;me<M;me++)o=w[me],O.writeUInt16(o);for(O.writeUInt16(0),re=0,W=D.length;re<W;re++)o=D[re],O.writeUInt16(o);for(ye=0,Q=m.length;ye<Q;ye++)f=m[ye],O.writeUInt16(f);for(Be=0,ue=fe.length;Be<ue;Be++)J=fe[Be],O.writeUInt16(J);for(Ge=0,ce=b.length;Ge<ce;Ge++)_=b[Ge],O.writeUInt16(_);return{charMap:r,subtable:O.data,maxGlyphID:q+1}}},t})(),K0=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,o,l;for(n.pos=this.offset,this.version=n.readUInt16(),l=n.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)r=new Xm(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var o,l;return r==null&&(r="macroman"),o=Xm.encode(n,r),(l=new fl).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},e})(),$2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),G2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var r,o;for(o=[],r=0;r<10;++r)o.push(n.readByte());return o})(),this.charRange=(function(){var r,o;for(o=[],r=0;r<4;++r)o.push(n.readInt());return o})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var r,o;for(o=[],r=0;r<2;r=++r)o.push(n.readInt());return o})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),J2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="post",e.prototype.parse=function(n){var r,o,l;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var u;for(o=n.readUInt16(),this.glyphNameIndex=[],u=0;0<=o?u<o:u>o;u=0<=o?++u:--u)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],l=[];n.pos<this.offset+this.length;)r=n.readByte(),l.push(this.names.push(n.readString(r)));return l;case 151552:return o=n.readUInt16(),this.offsets=n.read(o);case 196608:break;case 262144:return this.map=(function(){var f,m,p;for(p=[],u=f=0,m=this.file.maxp.numGlyphs;0<=m?f<m:f>m;u=0<=m?++f:--f)p.push(n.readUInt32());return p}).call(this)}},e})(),Y2=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},K2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="name",e.prototype.parse=function(n){var r,o,l,u,f,m,p,v,w,N,b;for(n.pos=this.offset,n.readShort(),r=n.readShort(),m=n.readShort(),o=[],u=0;0<=r?u<r:u>r;u=0<=r?++u:--u)o.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+m+n.readShort()});for(p={},u=w=0,N=o.length;w<N;u=++w)l=o[u],n.pos=l.offset,v=n.readString(l.length),f=new Y2(v,l),p[b=l.nameID]==null&&(p[b]=[]),p[l.nameID].push(f);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},e})(),Q2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),X2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,o,l,u,f,m,p;for(n.pos=this.offset,this.metrics=[],r=0,m=this.file.hhea.numberOfMetrics;0<=m?r<m:r>m;r=0<=m?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var v,w;for(w=[],r=v=0;0<=l?v<l:v>l;r=0<=l?++v:--v)w.push(n.readInt16());return w})(),this.widths=(function(){var v,w,N,b;for(b=[],v=0,w=(N=this.metrics).length;v<w;v++)u=N[v],b.push(u.advance);return b}).call(this),o=this.widths[this.widths.length-1],p=[],r=f=0;0<=l?f<l:f>l;r=0<=l?++f:--f)p.push(this.widths.push(o));return p},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),Q0=[].slice,Z2=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,o,l,u,f,m,p,v,w,N;return n in this.cache?this.cache[n]:(u=this.file.loca,r=this.file.contents,o=u.indexOf(n),(l=u.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+o,f=(m=new fl(r.read(l))).readShort(),v=m.readShort(),N=m.readShort(),p=m.readShort(),w=m.readShort(),this.cache[n]=f===-1?new t5(m,v,N,p,w):new e5(m,f,v,N,p,w),this.cache[n]))},e.prototype.encode=function(n,r,o){var l,u,f,m,p;for(f=[],u=[],m=0,p=r.length;m<p;m++)l=n[r[m]],u.push(f.length),l&&(f=f.concat(l.encode(o)));return u.push(f.length),{table:f,offsets:u}},e})(),e5=(function(){function t(e,n,r,o,l,u){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=o,this.xMax=l,this.yMax=u,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),t5=(function(){function t(e,n,r,o,l){var u,f;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;f=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&f;)u.pos+=1&f?4:2,128&f?u.pos+=8:64&f?u.pos+=4:8&f&&(u.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new fl(Q0.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),n5=(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Ys(e,As),e.prototype.tag="loca",e.prototype.parse=function(n){var r,o;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var l,u;for(u=[],o=0,l=this.length;o<l;o+=2)u.push(2*n.readUInt16());return u}).call(this):(function(){var l,u;for(u=[],o=0,l=this.length;o<l;o+=4)u.push(n.readUInt32());return u}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var o=new Uint32Array(this.offsets.length),l=0,u=0,f=0;f<o.length;++f)if(o[f]=l,u<r.length&&r[u]==f){++u,o[f]=l;var m=this.offsets[f],p=this.offsets[f+1]-m;p>0&&(l+=p)}for(var v=new Array(4*o.length),w=0;w<o.length;++w)v[4*w+3]=255&o[w],v[4*w+2]=(65280&o[w])>>8,v[4*w+1]=(16711680&o[w])>>16,v[4*w]=(4278190080&o[w])>>24;return v},e})(),r5=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,o,l;for(n in o=this.font.cmap.tables[0].codeMap,e={},l=this.subset)r=l[n],e[n]=o[r];return e},t.prototype.glyphsFor=function(e){var n,r,o,l,u,f,m;for(o={},u=0,f=e.length;u<f;u++)o[l=e[u]]=this.font.glyf.glyphFor(l);for(l in n=[],o)(r=o[l])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(l in m=this.glyphsFor(n))r=m[l],o[l]=r;return o},t.prototype.encode=function(e,n){var r,o,l,u,f,m,p,v,w,N,b,I,_,E,T;for(o in r=K0.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),b={0:0},T=r.charMap)b[(m=T[o]).old]=m.new;for(I in N=r.maxGlyphID,u)I in b||(b[I]=N++);return v=(function(P){var q,J;for(q in J={},P)J[P[q]]=q;return J})(b),w=Object.keys(v).sort((function(P,q){return P-q})),_=(function(){var P,q,J;for(J=[],P=0,q=w.length;P<q;P++)f=w[P],J.push(v[f]);return J})(),l=this.font.glyf.encode(u,_,b),p=this.font.loca.encode(l.offsets,_),E={cmap:this.font.cmap.raw(),glyf:l.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t})();Gt.API.PDFObject=(function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,o,l,u;if(Array.isArray(n))return"["+(function(){var f,m,p;for(p=[],f=0,m=n.length;f<m;f++)r=n[f],p.push(e.convert(r));return p})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(o in l=["<<"],n)u=n[o],l.push("/"+o+" "+e.convert(u));return l.push(">>"),l.join(`
`)}return""+n},e})();const ba=({isOpen:t,onClose:e,title:n,children:r,size:o="lg"})=>{if(!t)return null;const l={md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:s.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full ${l[o]}`,onClick:u=>u.stopPropagation(),children:[s.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:n}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300","aria-label":"Close modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-4",children:r})]})})},Zm=({x:t,y:e,length:n,label:r,isVertical:o,offset:l})=>{let f=o?{x1:t-l,y1:e,x2:t-l,y2:e+n}:{x1:t,y1:e-l,x2:t+n,y2:e-l},m=o?{x:t-l-4,y:e+n/2,transform:`rotate(-90, ${t-l-4}, ${e+n/2})`}:{x:t+n/2,y:e-l-4};return s.jsxs("g",{stroke:"#333",strokeWidth:"0.5",fill:"#333",fontSize:"8",textAnchor:"middle",dominantBaseline:"middle",children:[s.jsx("line",{...f}),s.jsx("line",{x1:f.x1,y1:f.y1,x2:o?f.x1+4:f.x1,y2:o?f.y1:f.y1+4}),s.jsx("line",{x1:f.x2,y1:f.y2,x2:o?f.x2+4:f.x2,y2:o?f.y2:f.y2-4}),s.jsx("text",{...m,children:r})]})},i5=({x:t,y:e,width:n,height:r,hingeSide:o,strokeWidth:l=1})=>{if(!o)return null;const u=t+n/2,f=e+r/2;let m="";return o==="top"?m=`M ${t},${e+r} L ${u},${e} L ${t+n},${e+r}`:o==="bottom"?m=`M ${t},${e} L ${u},${e+r} L ${t+n},${e}`:o==="left"?m=`M ${t+n},${e} L ${t},${f} L ${t+n},${e+r}`:o==="right"&&(m=`M ${t},${e} L ${t+n},${f} L ${t},${e+r}`),s.jsx("g",{className:"pointer-events-none text-black/40 dark:text-stone-300/60",strokeDasharray:"3 3",children:s.jsx("path",{d:m,stroke:"currentColor",strokeWidth:l,fill:"none"})})},Cd=({item:t,materials:e,showDimensions:n=!0,showHinges:r=!1})=>{var R,D,H,O,ge,xe;const{windowInstances:l,pairSpacing:u=0,pairRebate:f=0,glazingBarThickness:m,isNewFrame:p}=t;if(!l||l.length===0)return null;const v=l.reduce((ie,Y)=>ie+Y.overallWidth,0)+(l.length>1?(l.length-1)*u:0)-(l.length>1?(l.length-1)*f:0),w=Math.max(...l.map(ie=>ie.overallHeight)),N=`-30 -30 ${v+60} ${w+60}`,{head:b,stile:I,bottomRail:_,meetingStile:E}=t.sashInfo,T=((R=e.find(ie=>ie.id===t.externalFinishId))==null?void 0:R.color)||((D=e.find(ie=>ie.id===t.materialFrameId))==null?void 0:D.color)||"#D1B48C",P=((H=e.find(ie=>ie.id===t.externalFinishId))==null?void 0:H.color)||((O=e.find(ie=>ie.id===t.materialSashId))==null?void 0:O.color)||"#D3B48C",q=((ge=e.find(ie=>ie.id===t.cillFinishId))==null?void 0:ge.color)||((xe=e.find(ie=>ie.id===t.materialCillId))==null?void 0:xe.color)||"#8C6E54",J="#e0f2fe",K=p?t.frameInfo.outer.head:0,fe=p?t.frameInfo.outer.leftJamb:0,ne=p?t.frameInfo.outer.rightJamb:0,X=p?t.frameInfo.outer.cill:0,$=p?t.frameInfo.outer.mullion:0,he=p?t.frameInfo.outer.transom:0;return s.jsxs("svg",{viewBox:N,className:"max-w-full max-h-full",children:[s.jsx("g",{stroke:"black",strokeWidth:"0.5",children:(()=>{let ie=0;return l.map(Y=>{const ve=ie;ie+=Y.overallWidth+(l.length>1?u-f:0);const{overallWidth:we,overallHeight:le}=Y,M=(w-le)/2,W=we-fe-ne,Q=le-K-X,ue=(t.mullions||[]).filter(me=>!me.instanceId||me.instanceId===Y.id),ce=(t.transoms||[]).filter(me=>!me.instanceId||me.instanceId===Y.id);return s.jsxs("g",{transform:`translate(${ve}, ${M})`,children:[p&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:"0",y:"0",width:we,height:K,fill:T}),s.jsx("rect",{x:"0",y:K,width:fe,height:Q,fill:T}),s.jsx("rect",{x:we-ne,y:K,width:ne,height:Q,fill:T}),s.jsx("rect",{x:"0",y:le-X,width:we,height:X,fill:q})]}),t.itemType==="Sash"?s.jsx(s.Fragment,{children:(()=>{const me=Y.topSashHeight||(Q+b-_)/2,re=Q-me,se=W;return s.jsxs(s.Fragment,{children:[s.jsxs("g",{transform:`translate(${fe}, ${K+me})`,children:[s.jsx("rect",{x:0,y:0,width:se,height:re,fill:P}),s.jsx("g",{transform:`translate(${I}, ${E})`,children:(()=>{const ye=se-I*2,Be=re-E-_;return ya(ye,Be,Y.bottomSashGlazingBars,m).map(pe=>s.jsx("rect",{x:pe.x,y:pe.y,width:pe.width,height:pe.height,fill:J,stroke:"none"},pe.id))})()})]}),s.jsxs("g",{transform:`translate(${fe}, ${K})`,children:[s.jsx("rect",{x:"0",y:"0",width:se,height:me,fill:P}),s.jsx("g",{transform:`translate(${I}, ${b})`,children:(()=>{const ye=se-I*2,Be=me-b-E;return ya(ye,Be,Y.topSashGlazingBars,m).map(pe=>s.jsx("rect",{x:pe.x,y:pe.y,width:pe.width,height:pe.height,fill:J,stroke:"none"},pe.id))})()})]})]})})()}):s.jsxs(s.Fragment,{children:[ue.map(me=>{const re=me.thickness||$,se=me.offset-re/2,ye=me.start??0,Be=me.end??Q;return s.jsx("rect",{x:fe+se,y:K+ye,width:re,height:Be-ye,fill:T,stroke:"none"},me.id)}),ce.map(me=>{const re=me.thickness||he,se=me.offset-re/2,ye=me.start??0,Be=me.end??W;return s.jsx("rect",{x:fe+ye,y:K+se,width:Be-ye,height:re,fill:T,stroke:"none"},me.id)}),al(W,Q,[...ue,...ce],{mullion:$,transom:he}).map((me,re)=>{var Be;const se=`${Y.id}-${me.id}`,ye=(Be=t.placedSashes)==null?void 0:Be.find(Ge=>Ge.paneId===se);return s.jsx("g",{transform:`translate(${fe+me.x}, ${K+me.y})`,children:ye?s.jsxs(s.Fragment,{children:[ye.type!=="fixed-glazing"&&s.jsx("rect",{x:0,y:0,width:me.width,height:me.height,fill:P}),s.jsx("g",{transform:`translate(${ye.type!=="fixed-glazing"?I:0}, ${ye.type!=="fixed-glazing"?b:0})`,children:(()=>{const Ge=me.width-(ye.type!=="fixed-glazing"?I*2:0),pe=me.height-(ye.type!=="fixed-glazing"?b+_:0);return ya(Ge,pe,ye.glazingBars,m).map(Le=>s.jsx("rect",{x:Le.x,y:Le.y,width:Le.width,height:Le.height,fill:J,stroke:"none"},Le.id))})()}),r&&s.jsx(i5,{x:0,y:0,width:me.width,height:me.height,hingeSide:ye.hingeSide})]}):s.jsx("rect",{x:"0",y:"0",width:me.width,height:me.height,fill:J,stroke:"none"})},re)})]})]},Y.id)})})()}),n&&s.jsxs(s.Fragment,{children:[s.jsx(Zm,{x:0,y:(w-Math.min(...l.map(ie=>ie.overallHeight)))/2,length:v,label:Math.round(v),isVertical:!1,offset:20}),s.jsx(Zm,{x:0,y:0,length:w,label:Math.round(w),isVertical:!0,offset:20})]})]})},o5=({quote:t,client:e,currency:n,materials:r,productRanges:o,systemSettings:l})=>{var _;const u=_0[n],f=E=>`${u}${E.toFixed(2)}`,m=E=>{var T;return(T=r.find(P=>P.id===E))==null?void 0:T.name},p=t.items.reduce((E,T)=>E+T.price*T.quantity,0),v=.08,w=p*v,N=p+w,b=go(e),I=e.contacts.find(E=>E.isPrimary);return s.jsxs("div",{className:"bg-white text-black p-12 font-sans text-[10pt] leading-normal shadow-lg w-[210mm] min-h-[297mm] mx-auto",children:[s.jsxs("header",{className:"flex justify-between items-start pb-8 border-b",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"QUOTE"}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Quote Number:"})," ",t.quoteNumber]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",new Date(t.date).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("h2",{className:"text-2xl font-bold",children:l.companyName||"Sash Style Pro"}),s.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:l.companyAddress?po(l.companyAddress):"123 Window Lane, Design City, DC 45678"}),s.jsx("p",{className:"text-sm text-gray-600",children:[l.companyEmail,l.companyPhone].filter(Boolean).join(" | ")})]})]}),s.jsxs("section",{className:"my-8 grid grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Billed To"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-bold",children:b}),I&&s.jsx("p",{children:`${I.firstName} ${I.lastName}`}),s.jsx("p",{className:"whitespace-pre-line",children:po(e.officeAddress)})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("h3",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Installation Address"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-bold",children:t.projectReference||((_=e.installationAddress)==null?void 0:_.line1)||e.officeAddress.line1}),s.jsx("p",{className:"whitespace-pre-line",children:e.installationAddress?po(e.installationAddress):po(e.officeAddress)})]})]})]}),s.jsx("section",{className:"space-y-6",children:t.items.map(E=>{var T;return s.jsxs("div",{className:"border-t pt-4 grid grid-cols-5 gap-4",children:[s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-full h-32 bg-gray-100 rounded",children:s.jsx(Cd,{item:E,materials:r,showDimensions:!1})})}),s.jsxs("div",{className:"col-span-4",children:[s.jsxs("h4",{className:"font-bold text-lg",children:["Item #",E.itemNumber,": ",E.location]}),s.jsxs("div",{className:"text-xs grid grid-cols-2 gap-x-4 gap-y-1 mt-2 text-gray-600",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Product:"})," ",(T=o.find(P=>P.id===E.productRangeId))==null?void 0:T.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Dimensions:"})," ",E.windowInstances.map(P=>`${P.overallWidth}mm x ${P.overallHeight}mm`).join(" | ")]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Frame:"})," ",m(E.materialFrameId)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Sash:"})," ",m(E.materialSashId)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"External Finish:"})," ",m(E.externalFinishId)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Internal Finish:"})," ",m(E.internalFinishId)]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Glass:"})," ",E.paneGlassTypes.length>0?m(E.paneGlassTypes[0].glassTypeId):"N/A"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"U-Value:"})," ",E.calculatedUValue?`${E.calculatedUValue.toFixed(2)} W/mK`:"N/A"]})]}),s.jsxs("div",{className:"mt-2 text-right flex justify-end items-baseline gap-6 border-t pt-2",children:[s.jsxs("p",{children:[f(E.price)," x ",E.quantity]}),s.jsx("p",{className:"font-bold text-lg",children:f(E.price*E.quantity)})]})]})]},E.id)})}),s.jsx("section",{className:"mt-8 flex justify-end",children:s.jsxs("div",{className:"w-1/2",children:[s.jsxs("div",{className:"flex justify-between py-2 border-b",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{className:"font-medium",children:f(p)})]}),s.jsxs("div",{className:"flex justify-between py-2 border-b",children:[s.jsxs("span",{children:["Tax (",(v*100).toFixed(0),"%)"]}),s.jsx("span",{className:"font-medium",children:f(w)})]}),s.jsxs("div",{className:"flex justify-between py-2 text-xl font-bold bg-gray-100 px-2 mt-2 rounded",children:[s.jsx("span",{children:"TOTAL"}),s.jsx("span",{children:f(N)})]})]})}),s.jsxs("footer",{className:"mt-12 text-center text-xs text-gray-500 border-t pt-4",children:[s.jsx("p",{children:"Thank you for your business!"}),s.jsx("p",{children:"Terms and conditions apply. This quote is valid for 30 days."})]})]})},s5=({isOpen:t,onClose:e,quote:n,client:r,currency:o,materials:l,productRanges:u,systemSettings:f})=>{const[m,p]=Pe.useState(!1),v=N=>[N.line1,N.line2,N.townCity,N.county,N.postcode].filter(Boolean).join(`
`),w=()=>{var N;p(!0);try{const b=new Gt("p","pt","a4"),I=b.internal.pageSize.getHeight(),_=b.internal.pageSize.getWidth(),E=40;let T=E;const P=ie=>{var Y;return(Y=l.find(ve=>ve.id===ie))==null?void 0:Y.name},q=_0[o],J=ie=>`${q}${ie.toFixed(2)}`,K=(ie,Y,ve,we,le,M)=>{const{windowInstances:W,pairSpacing:Q=0,pairRebate:ue=0}=Y;if(!W||W.length===0)return;const ce=W.reduce((pe,Ze)=>pe+Ze.overallWidth,0)+(W.length>1?(W.length-1)*Q:0)-(W.length>1?(W.length-1)*ue:0),me=Math.max(...W.map(pe=>pe.overallHeight)),re=Math.min(le/ce,M/me),se=pe=>pe*re,ye=se(ce);let Ge=ve+(le-ye)/2;W.forEach(pe=>{const Ze=se(pe.overallWidth),Le=se(pe.overallHeight),te=we+(se(me)-Le)/2,gt=(_e,Fe="#cccccc")=>{var Ie;return((Ie=l.find(lt=>lt.id===_e))==null?void 0:Ie.color)||Fe},et=gt(Y.externalFinishId)||gt(Y.materialFrameId,"#D1B48C"),qe=gt(Y.externalFinishId)||gt(Y.materialSashId,"#D3B48C"),at=gt(Y.cillFinishId)||gt(Y.materialCillId,"#8C6E54"),nt="#e0f2fe";ie.setDrawColor(55,65,81),ie.setLineWidth(.5);const He=se(Y.frameInfo.outer.head),bt=se(Y.frameInfo.outer.cill),Mt=se(Y.frameInfo.outer.leftJamb);ie.setFillColor(et),ie.rect(Ge,te,Ze,He,"FD"),ie.rect(Ge,te+He,Mt,Le-He-bt,"FD"),ie.rect(Ge+Ze-Mt,te+He,Mt,Le-He-bt,"FD"),ie.setFillColor(at),ie.rect(Ge,te+Le-bt,Ze,bt,"FD");const At=Ge+Mt,It=te+He,$e=Ze-Mt*2,Te=Le-He-bt;if(Y.itemType==="Sash"){const _e=se(Y.sashInfo.head),Fe=se(Y.sashInfo.stile),Ie=se(Y.sashInfo.bottomRail),lt=se(Y.sashInfo.meetingStile),ee=pe.topSashHeight||(Te-_e-Ie)/2,Oe=se(ee),tt=Te-Oe,pt=Y.glazingBarThickness;ie.setFillColor(qe),ie.rect(At,It+Oe,$e,tt,"FD");const ht=At+Fe,qt=It+Oe+lt,Pn=$e-Fe*2,Xt=tt-lt-Ie,Cn=ya(Pn,Xt,pe.bottomSashGlazingBars,se(pt));ie.setFillColor(nt),Cn.forEach(sn=>{ie.rect(ht+sn.x,qt+sn.y,sn.width,sn.height,"F")}),ie.setFillColor(qe),ie.rect(At,It,$e,Oe,"FD");const Fn=At+Fe,wn=It+_e,mt=$e-Fe*2,zt=Oe-_e-lt,In=ya(mt,zt,pe.topSashGlazingBars,se(pt));ie.setFillColor(nt),In.forEach(sn=>{ie.rect(Fn+sn.x,wn+sn.y,sn.width,sn.height,"F")})}else{const _e=se(Y.sashInfo.head),Fe=se(Y.sashInfo.stile),Ie=se(Y.sashInfo.bottomRail),lt=(Y.mullions||[]).filter(ht=>!ht.instanceId||ht.instanceId===pe.id),ee=(Y.transoms||[]).filter(ht=>!ht.instanceId||ht.instanceId===pe.id),Oe=[...lt,...ee].map(ht=>({...ht,offset:se(ht.offset),start:ht.start!==void 0?se(ht.start):void 0,end:ht.end!==void 0?se(ht.end):void 0,thickness:ht.thickness!==void 0?se(ht.thickness):void 0})),tt={mullion:se(Y.frameInfo.outer.mullion),transom:se(Y.frameInfo.outer.transom)},pt=al($e,Te,Oe,tt);ie.setFillColor(et),Oe.forEach(ht=>{const qt=ht.thickness||(ht.type==="mullion"?tt.mullion:tt.transom),Pn=ht.offset-qt/2;if(ht.type==="mullion"){const Xt=ht.start??0,Cn=ht.end??Te;ie.rect(At+Pn,It+Xt,qt,Cn-Xt,"F")}else{const Xt=ht.start??0,Cn=ht.end??$e;ie.rect(At+Xt,It+Pn,Cn-Xt,qt,"F")}}),pt.forEach(ht=>{var Xt;const qt=`${pe.id}-${ht.id}`,Pn=(Xt=Y.placedSashes)==null?void 0:Xt.find(Cn=>Cn.paneId===qt);if(Pn){Pn.type!=="fixed-glazing"&&(ie.setFillColor(qe),ie.rect(At+ht.x,It+ht.y,ht.width,ht.height,"FD"));const Cn=At+ht.x+(Pn.type!=="fixed-glazing"?Fe:0),Fn=It+ht.y+(Pn.type!=="fixed-glazing"?_e:0),wn=ht.width-(Pn.type!=="fixed-glazing"?Fe*2:0),mt=ht.height-(Pn.type!=="fixed-glazing"?_e+Ie:0);ie.setFillColor(nt),ya(wn,mt,Pn.glazingBars,se(Y.glazingBarThickness)).forEach(In=>{ie.rect(Cn+In.x,Fn+In.y,In.width,In.height,"F")})}else ie.setFillColor(nt),ie.rect(At+ht.x,It+ht.y,ht.width,ht.height,"F")})}Ge+=se(pe.overallWidth+Q-ue)})};b.setFontSize(24),b.setFont("helvetica","bold"),b.text("QUOTE",E,T),b.setFontSize(9),b.setFont("helvetica","normal"),b.text(`Quote Number: ${n.quoteNumber}`,E,T+=20),b.text(`Date: ${new Date(n.date).toLocaleDateString()}`,E,T+=12),b.setFontSize(14),b.setFont("helvetica","bold"),b.text(f.companyName||"Sash Style Pro",_-E,E,{align:"right"}),b.setFontSize(9),b.setFont("helvetica","normal"),b.text(f.companyAddress?po(f.companyAddress):"123 Window Lane, Design City, DC 45678",_-E,E+18,{align:"right"}),b.text([f.companyEmail,f.companyPhone].filter(Boolean).join(" | "),_-E,E+30,{align:"right"}),T+=30,b.setDrawColor(229,231,235),b.line(E,T,_-E,T),T+=30;const fe=go(r),ne=r.contacts.find(ie=>ie.isPrimary);b.setFontSize(8),b.setFont("helvetica","bold"),b.text("BILLED TO",E,T),b.text("INSTALLATION ADDRESS",_-E,T,{align:"right"}),T+=12,b.setFontSize(10),b.setFont("helvetica","normal");const X=`${fe}
${ne?`${ne.firstName} ${ne.lastName}
`:""}${v(r.officeAddress)}`;b.text(X,E,T);const $=`${n.projectReference||((N=r.installationAddress)==null?void 0:N.line1)||r.officeAddress.line1}
${r.installationAddress?v(r.installationAddress):""}`;b.text($,_-E,T,{align:"right"}),T+=60,n.items.forEach(ie=>{var ye;T+180>I-E-100&&(b.addPage(),T=E),b.setDrawColor(229,231,235),b.line(E,T,_-E,T),T+=15,b.setFontSize(12),b.setFont("helvetica","bold"),b.text(`Item #${ie.itemNumber}: ${ie.location}`,E,T),T+=15;const Y=E,ve=T,we=150,le=150,M=Y+we+20;K(b,ie,Y,ve,we,le);let W=T;const Q=11,ue=_-E,ce=(Be,Ge)=>{Ge&&(b.setFontSize(8),b.setFont("helvetica","normal"),b.setTextColor(107,114,128),b.text(Be,M,W),b.setFont("helvetica","bold"),b.setTextColor(55,65,81),b.text(Ge,ue,W,{align:"right"}),W+=Q)},me=ie.windowInstances.map(Be=>`${Be.overallWidth}mm x ${Be.overallHeight}mm`).join(" | ");ce("Product Range",(ye=u.find(Be=>Be.id===ie.productRangeId))==null?void 0:ye.name),ce("Dimensions (WxH)",me),ce("Frame Material",P(ie.materialFrameId)),ce("Sash Material",P(ie.materialSashId)),ce("External Finish",P(ie.externalFinishId)),ce("Internal Finish",P(ie.internalFinishId)),ce("Glass",ie.paneGlassTypes.length>0?P(ie.paneGlassTypes[0].glassTypeId):"N/A"),ce("U-Value",ie.calculatedUValue?`${ie.calculatedUValue.toFixed(2)} W/mK`:"N/A"),W+=10,b.setDrawColor(229,231,235),b.line(M,W,_-E,W),W+=15;const re=W,se=(_-E-M)/3;b.setFontSize(8),b.setTextColor(107,114,128),b.text("Unit Price",M,re),b.text("Quantity",M+se,re,{align:"right"}),b.text("Item Total",M+se*2.5,re,{align:"right"}),W+=12,b.setFontSize(12),b.setFont("helvetica","bold"),b.setTextColor(55,65,81),b.text(J(ie.price),M,W),b.text(ie.quantity.toString(),M+se,W,{align:"right"}),b.text(J(ie.price*ie.quantity),M+se*2.5,W,{align:"right"}),T+=le+15});const he=_/2,R=n.items.reduce((ie,Y)=>ie+Y.price*Y.quantity,0),D=.08,H=R*D,O=R+H;T+=20,b.setFontSize(10),b.setFont("helvetica","normal"),b.text("Subtotal",he,T,{align:"right"}),b.text(J(R),_-E,T,{align:"right"}),T+=15,b.text(`Tax (${(D*100).toFixed(0)}%)`,he,T,{align:"right"}),b.text(J(H),_-E,T,{align:"right"}),T+=5,b.line(he-50,T,_-E,T),T+=15,b.setFillColor(243,244,246),b.rect(he-60,T-12,_-E-(he-60),20,"F"),b.setFontSize(14),b.setFont("helvetica","bold"),b.text("TOTAL",he,T,{align:"right"}),b.text(J(O),_-E,T,{align:"right"});const ge=I-E+10;b.setFontSize(8),b.setFont("helvetica","normal"),b.setTextColor(156,163,175),b.text("Thank you for your business!",_/2,ge,{align:"center"}),b.text("Terms and conditions apply. This quote is valid for 30 days.",_/2,ge+10,{align:"center"});const xe=go(r).replace(/\s+/g,"_");b.save(`Quote-${n.quoteNumber}-${xe}.pdf`)}catch(b){console.error("Error generating PDF:",b),alert("Sorry, there was an error generating the PDF.")}finally{p(!1)}};return t?s.jsxs(ba,{isOpen:t,onClose:e,title:`Preview: Quote ${n.quoteNumber}`,size:"4xl",children:[s.jsx("div",{className:"max-h-[75vh] overflow-y-auto bg-gray-200 dark:bg-gray-900 p-8",children:s.jsx("div",{children:s.jsx(o5,{quote:n,client:r,currency:o,materials:l,productRanges:u,systemSettings:f})})}),s.jsx("div",{className:"p-4 border-t dark:border-gray-700 flex justify-end",children:s.jsxs("button",{onClick:w,disabled:m,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700 disabled:bg-blue-300",children:[s.jsx(ah,{className:"w-5 h-5"}),m?"Downloading...":"Download PDF"]})})]}):null},a5=({item:t,materials:e})=>s.jsx("div",{className:"w-full h-full bg-stone-100 dark:bg-gray-700 rounded-md flex items-center justify-center p-2 overflow-hidden",children:s.jsx(Cd,{item:t,materials:e})}),l5=t=>{const e="px-4 py-2 text-sm font-semibold rounded-lg shadow-sm cursor-default whitespace-nowrap";switch(t){case xn.NEW:case xn.APPOINTMENT_BOOKED:return{text:"Draft",className:`${e} bg-yellow-500 text-white`};case xn.QUOTED:return{text:"Quoted",className:`${e} bg-blue-500 text-white`};case xn.FOLLOW_UP_1:case xn.FOLLOW_UP_2:return{text:t,className:`${e} bg-orange-500 text-white`};case xn.WON:return{text:"Won",className:`${e} bg-green-600 text-white`};case xn.LOST:return{text:"Lost",className:`${e} bg-red-600 text-white`};case xn.SURVEY:return{text:"Survey",className:`${e} bg-purple-600 text-white`};case xn.READY_FOR_PRODUCTION:return{text:"Production",className:`${e} bg-indigo-600 text-white`};default:return{text:t,className:`${e} bg-gray-500 text-white`}}},u5=({quote:t,client:e,onUpdateQuote:n,onBack:r,assignedStaffName:o,onAddItem:l,onEditItem:u,currency:f,materials:m,productRanges:p,systemSettings:v,onPublishQuote:w,onCopyQuote:N,isCopy:b})=>{var Ge;const[I,_]=Pe.useState(!1),[E,T]=Pe.useState(null),[P,q]=Pe.useState(null),[J,K]=Pe.useState(""),[fe,ne]=Pe.useState(b),X=cl.useRef(null),[$,he]=Pe.useState(null),[R,D]=Pe.useState(null),H=t.status!==xn.NEW&&t.status!==xn.APPOINTMENT_BOOKED;cl.useEffect(()=>{if(b){const pe=setTimeout(()=>{ne(!1)},5e3);return()=>clearTimeout(pe)}},[b]);const O=pe=>{if(H)return;const Ze=t.items.find(nt=>nt.id===pe),Le=t.items.findIndex(nt=>nt.id===pe);if(!Ze)return;const te=JSON.parse(JSON.stringify(Ze));te.id=`item-${Date.now()}`;const gt=t.items.map(nt=>nt.itemNumber).filter(nt=>/^\d+$/.test(nt)).map(nt=>parseInt(nt,10)),et=gt.length>0?Math.max(...gt):0;let qe=String(et+1);for(;t.items.some(nt=>nt.itemNumber===qe);)qe=String(parseInt(qe,10)+1);if(te.itemNumber=qe,te.windowInstances&&te.windowInstances.length>0){const nt=[],He=[],bt=[],Mt=[],At=[...te.windowInstances],It=At[0].id,$e=At.map(Te=>{const _e=Te.id,Fe=`inst-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;(Ze.mullions||[]).filter(lt=>(lt.instanceId||It)===_e).forEach(lt=>{nt.push({...lt,id:`m-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,instanceId:Fe})}),(Ze.transoms||[]).filter(lt=>(lt.instanceId||It)===_e).forEach(lt=>{He.push({...lt,id:`t-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,instanceId:Fe})}),(Ze.placedSashes||[]).filter(lt=>lt.paneId.startsWith(_e)).forEach(lt=>{const ee=JSON.parse(JSON.stringify(lt));ee.paneId=ee.paneId.replace(_e,Fe),ee.glazingBars&&(ee.glazingBars=ee.glazingBars.map(Oe=>({...Oe,id:`gb-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),bt.push(ee)}),(Ze.paneGlassTypes||[]).filter(lt=>lt.paneId.startsWith(_e)).forEach(lt=>{Mt.push({...lt,paneId:lt.paneId.replace(_e,Fe)})});const Ie={...Te,id:Fe};return Ie.topSashGlazingBars&&(Ie.topSashGlazingBars=Ie.topSashGlazingBars.map(lt=>({...lt,id:`gb-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),Ie.bottomSashGlazingBars&&(Ie.bottomSashGlazingBars=Ie.bottomSashGlazingBars.map(lt=>({...lt,id:`gb-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),Ie});te.windowInstances=$e,te.mullions=nt,te.transoms=He,te.placedSashes=bt,te.paneGlassTypes=Mt}const at=[...t.items];at.splice(Le+1,0,te),n({...t,items:at},!1)},ge=pe=>{if(H)return;const Ze=t.items.filter(Le=>Le.id!==pe);n({...t,items:Ze})},xe=pe=>{H||n({...t,projectReference:pe.target.value})},ie=(pe,Ze)=>{if(H)return;const Le=t.items.map(te=>te.id===pe?{...te,location:Ze}:te);n({...t,items:Le})},Y=(pe,Ze)=>{if(H)return;const Le=Ze.trim();if(Le.length===0||Le.length>6){console.error("Reference must be between 1 and 6 characters."),q(null);return}if(!/^[a-zA-Z0-9.]+$/.test(Le)){console.error("Reference can only contain letters, numbers, and periods."),q(null);return}if(t.items.some(qe=>qe.id!==pe&&qe.itemNumber.toLowerCase()===Le.toLowerCase())){console.error("This reference already exists."),q(null);return}const et=t.items.map(qe=>qe.id===pe?{...qe,itemNumber:Le}:qe);et.sort((qe,at)=>qe.itemNumber.localeCompare(at.itemNumber,void 0,{numeric:!0,sensitivity:"base"})),n({...t,items:et}),q(null)},ve=(pe,Ze)=>{if(H)return;const Le=Math.max(1,Ze),te=t.items.map(gt=>gt.id===pe?{...gt,quantity:Le}:gt);n({...t,items:te})},we=pe=>{if(pe.target.files&&pe.target.files[0]&&$){const Ze=pe.target.files[0],Le=new FileReader;Le.onloadend=()=>{const te={name:Ze.name,dataUrl:Le.result},gt=t.items.map(et=>et.id===$?{...et,photos:[...et.photos||[],te]}:et);n({...t,items:gt})},Le.readAsDataURL(Ze)}he(null),pe.target&&(pe.target.value="")},le=(pe,Ze)=>{if(H)return;const Le=t.items.map(te=>{if(te.id===pe){const gt=[...te.photos||[]];return gt.splice(Ze,1),{...te,photos:gt}}return te});n({...t,items:Le})},M=t.items.reduce((pe,Ze)=>pe+Ze.price*Ze.quantity,0),W=M*.08,Q=M+W,ue=pe=>pe.toLocaleString(void 0,{style:"currency",currency:f}),ce=({icon:pe,label:Ze,onClick:Le,primary:te=!1,disabled:gt=!1})=>s.jsxs("button",{onClick:Le,disabled:gt,className:`flex flex-col items-center justify-center text-center p-6 gap-3 rounded-lg border-2 transition-all ${te?"bg-blue-600 text-white border-blue-700 hover:bg-blue-700":"bg-white dark:bg-gray-700 text-stone-700 dark:text-stone-200 border-stone-300 dark:border-gray-600 hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-gray-600 hover:text-blue-700 dark:hover:text-blue-400"} ${gt?"opacity-50 cursor-not-allowed":""}`,children:[s.jsx(pe,{className:"w-12 h-12"}),s.jsx("span",{className:"font-semibold",children:Ze})]}),me=({icon:pe,label:Ze,onClick:Le,disabled:te=!1})=>s.jsxs("button",{onClick:Le,disabled:te,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-stone-300 dark:border-gray-600 text-stone-700 dark:text-stone-200 font-semibold rounded-md hover:bg-stone-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(pe,{className:"w-4 h-4"}),Ze]}),re=((Ge=e.installationAddress)==null?void 0:Ge.line1)||e.officeAddress.line1||"Project Reference...",se=l5(t.status),ye=pe=>{var Ze;return(Ze=m.find(Le=>Le.id===pe))==null?void 0:Ze.name},Be=({label:pe,value:Ze})=>s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-stone-500 dark:text-stone-400",children:pe}),s.jsx("p",{className:"font-semibold",children:Ze||"N/A"})]});return s.jsxs("div",{className:"flex flex-col h-full bg-stone-50 dark:bg-gray-900",children:[s.jsx("input",{type:"file",accept:"image/*",ref:X,onChange:we,style:{display:"none"},disabled:H}),s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(hl,{className:"w-6 h-6 text-stone-600 dark:text-stone-300"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:"Quote Builder"}),s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["For ",s.jsx("span",{className:"font-medium text-stone-700 dark:text-stone-200",children:go(e)}),o&&s.jsx("span",{className:"text-stone-400 dark:text-stone-500 mx-1",children:"|"}),o&&`Managed by: ${o}`]})]})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 text-stone-600 dark:text-stone-300",children:[s.jsx(yu,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:t.quoteNumber})]}),s.jsxs("div",{className:"flex items-center gap-2 text-stone-600 dark:text-stone-300",children:[s.jsx(mo,{className:"w-5 h-5 text-stone-400 dark:text-stone-500"}),s.jsx("input",{type:"text",value:t.projectReference||"",onChange:xe,disabled:H,placeholder:re,className:"font-medium bg-transparent border-b border-stone-200 dark:border-gray-600 focus:border-blue-500 focus:outline-none p-1 disabled:bg-stone-100 dark:disabled:bg-gray-800/50 disabled:cursor-not-allowed disabled:border-transparent"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-stone-600 dark:text-stone-300",children:[s.jsx(wa,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:new Date(t.date).toLocaleDateString()})]})]})]})}),s.jsx("main",{className:"flex-grow p-8 overflow-y-auto",children:s.jsxs("div",{className:"max-w-full mx-auto",children:[fe&&s.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 border-l-4 border-green-500 text-green-800 dark:text-green-200 p-4 rounded-md mb-6",role:"alert",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"py-1",children:s.jsx(_m,{className:"h-6 w-6 text-green-500 mr-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"This is a new copy of a quote."}),s.jsx("p",{className:"text-sm",children:"You can now edit the items below before publishing."})]})]})}),H&&!b&&s.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/50 border-l-4 border-blue-500 text-blue-800 dark:text-blue-200 p-4 rounded-md mb-6",role:"alert",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"py-1",children:s.jsx(_m,{className:"h-6 w-6 text-blue-500 mr-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:"This quote is published and read-only."}),s.jsx("p",{className:"text-sm",children:'To make changes, create a new version using the "Copy Quote" button.'})]})]})}),t.items.length>0?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm min-w-[1600px]",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50 text-xs uppercase",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 w-12",children:""}),s.jsx("th",{className:"p-3",children:"Ref"}),s.jsx("th",{className:"p-3",children:"Room / Location"}),s.jsx("th",{className:"p-3",children:"Type"}),s.jsx("th",{className:"p-3",children:"Range"}),s.jsx("th",{className:"p-3",children:"Timbers"}),s.jsx("th",{className:"p-3",children:"Glass"}),s.jsx("th",{className:"p-3",children:"Security"}),s.jsx("th",{className:"p-3",children:"Finishes"}),s.jsx("th",{className:"p-3",children:"Ironmongery"}),s.jsx("th",{className:"p-3 text-center",children:"Qty"}),s.jsx("th",{className:"p-3 text-right",children:"Price"}),s.jsx("th",{className:"p-3 w-32 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:t.items.map(pe=>{var gt;const Ze=((gt=p.find(et=>et.id===pe.productRangeId))==null?void 0:gt.name)||"Custom",Le=[...new Set(pe.paneGlassTypes.map(et=>ye(et.glassTypeId)))].join(", "),te=R===pe.id;return s.jsxs(cl.Fragment,{children:[s.jsxs("tr",{onClick:()=>D(et=>et===pe.id?null:pe.id),className:"hover:bg-stone-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[s.jsx("td",{className:"p-3 text-center text-stone-400",children:s.jsx(xd,{className:`w-5 h-5 transition-transform ${te?"rotate-90":""}`})}),s.jsx("td",{className:"p-3 whitespace-nowrap",onClick:et=>et.stopPropagation(),children:P===pe.id?s.jsx(kt,{type:"text",value:J,onChange:et=>K(et.target.value),onBlur:()=>Y(pe.id,J),onKeyDown:et=>{et.key==="Enter"&&et.target.blur()},maxLength:6,autoFocus:!0,className:"p-1 rounded bg-white dark:bg-gray-900 border border-blue-500 text-sm font-semibold focus:outline-none w-24"}):s.jsxs("span",{onClick:()=>{H||(q(pe.id),K(pe.itemNumber))},className:`p-1 rounded relative group ${H?"":"cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/50"}`,children:[pe.itemNumber," ",!H&&s.jsx(mo,{className:"w-3 h-3 absolute -top-1 -right-1 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),s.jsx("td",{className:"p-3 whitespace-nowrap",onClick:et=>et.stopPropagation(),children:E===pe.id?s.jsx(kt,{type:"text",value:pe.location,onChange:et=>ie(pe.id,et.target.value),onBlur:()=>T(null),onKeyDown:et=>{et.key==="Enter"&&et.target.blur()},autoFocus:!0,className:"p-1 rounded bg-white dark:bg-gray-900 border border-blue-500 text-sm font-semibold focus:outline-none"}):s.jsxs("span",{onClick:()=>!H&&E!==pe.id&&T(pe.id),className:`p-1 rounded relative group ${H?"":"cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/50"}`,children:[pe.location||"Click to add"," ",!H&&s.jsx(mo,{className:"w-3 h-3 absolute -top-1 -right-1 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:pe.itemType}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:Ze}),s.jsx("td",{className:"p-3 whitespace-nowrap text-xs",children:s.jsxs("div",{children:[ye(pe.materialFrameId)," / ",ye(pe.materialSashId)]})}),s.jsx("td",{className:"p-3 whitespace-nowrap truncate max-w-xs",children:Le||"N/A"}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:pe.ironmongery.mpls}),s.jsx("td",{className:"p-3 whitespace-nowrap text-xs",children:s.jsxs("div",{children:["Ext: ",ye(pe.externalFinishId)," / Int: ",ye(pe.internalFinishId)]})}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:pe.ironmongery.hinges}),s.jsx("td",{className:"p-3 text-center",onClick:et=>et.stopPropagation(),children:s.jsx(kt,{type:"number",value:pe.quantity,onChange:et=>ve(pe.id,parseInt(et.target.value)||1),disabled:H,className:"w-16 text-center p-1 text-sm font-semibold disabled:bg-stone-100 dark:disabled:bg-gray-800/50",min:"1"})}),s.jsx("td",{className:"p-3 text-right whitespace-nowrap font-semibold",children:ue(pe.price*pe.quantity)}),s.jsx("td",{className:"p-3 text-right",onClick:et=>et.stopPropagation(),children:s.jsxs("div",{className:"flex items-center justify-end",children:[s.jsx("button",{onClick:()=>u(pe.id),className:"p-2 text-stone-500 dark:text-stone-400 hover:text-blue-600 dark:hover:text-blue-400",title:"Edit Item",children:s.jsx(mo,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>O(pe.id),disabled:H,className:"p-2 text-stone-500 dark:text-stone-400 hover:text-green-600 dark:hover:text-green-500 disabled:opacity-50 disabled:cursor-not-allowed",title:"Copy Item",children:s.jsx(fd,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>ge(pe.id),disabled:H,className:"p-2 text-stone-500 dark:text-stone-400 hover:text-red-600 dark:hover:text-red-500 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Item",children:s.jsx(Qo,{className:"w-5 h-5"})})]})})]}),te&&s.jsx("tr",{className:"bg-stone-50 dark:bg-gray-900/50",children:s.jsx("td",{colSpan:13,className:"p-4",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsx("div",{className:"w-full h-64",children:s.jsx(a5,{item:pe,materials:m})})}),s.jsxs("div",{className:"lg:col-span-5",children:[s.jsx("h4",{className:"text-sm font-semibold text-stone-600 dark:text-stone-300 mb-2",children:"Specifications"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700",children:[s.jsx(Be,{label:"Frame Material",value:ye(pe.materialFrameId)}),s.jsx(Be,{label:"Sash Material",value:ye(pe.materialSashId)}),s.jsx(Be,{label:"Cill Material",value:ye(pe.materialCillId)}),s.jsx(Be,{label:"Glass",value:Le}),s.jsx(Be,{label:"External Finish",value:ye(pe.externalFinishId)}),s.jsx(Be,{label:"Internal Finish",value:ye(pe.internalFinishId)}),s.jsx(Be,{label:"Ironmongery",value:pe.ironmongery.mpls}),s.jsx(Be,{label:"U-Value",value:pe.calculatedUValue?`${pe.calculatedUValue.toFixed(2)} W/mK`:"N/A"})]})]}),s.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-stone-600 dark:text-stone-300 mb-2",children:"Notes"}),s.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 text-center text-sm text-stone-400 italic",children:"Placeholders for Pricing Breakdown, Salesman & Health/Safety Notes."})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-stone-600 dark:text-stone-300",children:"Photos"}),s.jsxs("button",{onClick:()=>{var et;he(pe.id),(et=X.current)==null||et.click()},disabled:H,className:"flex items-center gap-1.5 px-3 py-1 bg-white dark:bg-gray-700 border border-stone-300 dark:border-gray-600 text-stone-700 dark:text-stone-300 text-xs font-semibold rounded-md hover:bg-stone-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(M1,{className:"w-4 h-4"})," Add Photo"]})]}),s.jsx("div",{className:"mt-2 grid grid-cols-3 gap-2",children:(pe.photos||[]).map((et,qe)=>s.jsxs("div",{className:"relative group aspect-square",children:[s.jsx("img",{src:et.dataUrl,alt:`Item photo ${qe+1}`,className:"w-full h-full object-cover rounded-md"}),s.jsx("button",{onClick:()=>le(pe.id,qe),disabled:H,className:"absolute top-1 right-1 bg-black bg-opacity-50 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity disabled:hidden",children:s.jsx(Qo,{className:"w-4 h-4"})})]},qe))}),(pe.photos||[]).length===0&&s.jsx("div",{className:"aspect-square flex items-center justify-center text-xs text-stone-400 dark:text-stone-500 w-full text-center p-2 border-2 border-dashed rounded-lg mt-2",children:"No photos for this item."})]})]})]})})})]},pe.id)})})]})})}):s.jsxs("div",{className:"text-center py-16 border-2 border-dashed border-stone-300 dark:border-gray-600 rounded-lg",children:[s.jsx(yu,{className:"w-12 h-12 mx-auto text-stone-400 dark:text-stone-500"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-stone-800 dark:text-stone-100",children:"Your quote is empty"}),s.jsx("p",{className:"mt-1 text-sm text-stone-500 dark:text-stone-400",children:"Select a product type to get started."}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 max-w-2xl mx-auto",children:[s.jsx(ce,{icon:ld,label:"Sash Window",onClick:()=>l("Sash"),disabled:H}),s.jsx(ce,{icon:ud,label:"Casement Window",onClick:()=>l("Casement"),disabled:H}),s.jsx(ce,{icon:cd,label:"Door",onClick:()=>l("Door"),disabled:H}),s.jsx(ce,{icon:ic,label:"Screen",onClick:()=>l("Screen"),disabled:H})]})]})]})}),s.jsx("footer",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-t border-stone-200 dark:border-gray-700 shadow-inner z-10",children:s.jsxs("div",{className:"max-w-full mx-auto flex justify-between items-center relative",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Add new:"}),s.jsx(me,{icon:ld,label:"Sash",onClick:()=>l("Sash"),disabled:H}),s.jsx(me,{icon:ud,label:"Casement",onClick:()=>l("Casement"),disabled:H}),s.jsx(me,{icon:cd,label:"Door",onClick:()=>l("Door"),disabled:H}),s.jsx(me,{icon:ic,label:"Screen",onClick:()=>l("Screen"),disabled:H})]}),s.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:s.jsx("div",{className:se.className,children:se.text})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm text-stone-600 dark:text-stone-300",children:["Subtotal: ",ue(M)]}),s.jsxs("div",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:["Total: ",ue(Q)]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[H?s.jsx(wt,{variant:"primary",onClick:()=>N(t.id),icon:fd,children:"Copy Quote"}):s.jsx(wt,{variant:"primary",onClick:()=>w(t.id),icon:U1,disabled:t.items.length===0,children:"Publish Quote"}),s.jsx(wt,{variant:"secondary",onClick:()=>_(!0),disabled:t.items.length===0,icon:ah,children:"Preview PDF"})]})]})]})}),s.jsx(s5,{isOpen:I,onClose:()=>_(!1),quote:t,client:e,currency:f,materials:m,productRanges:p,systemSettings:v})]})},c5=(t,e)=>{var m,p,v,w;const n=t,r=(n==null?void 0:n.itemType)||e||"Casement",o=(n==null?void 0:n.applicableTo)||[r],l=(m=n==null?void 0:n.layout)!=null&&m.instances&&n.layout.instances.length>0?JSON.parse(JSON.stringify(n.layout.instances)):[{id:`inst-ct-${Date.now()}`,overallWidth:1e3,overallHeight:1200}],u={name:(n==null?void 0:n.name)||`New ${r} Component`,itemType:r,sashInfo:(n==null?void 0:n.sashInfo)||{head:80,stile:80,bottomRail:80,meetingStile:0,thickness:56},layout:(n==null?void 0:n.layout)||{}};return{item:{id:(n==null?void 0:n.id)||`transient-ct-${Date.now()}`,itemNumber:"Component",quantity:1,location:u.name,itemType:u.itemType,productRangeId:"",viewType:"External View",isNewFrame:!1,isInstallation:!1,installationLevel:1,fitToPreparedOpening:!1,materialSashId:"",materialFrameId:"",materialCillId:"",windowInstances:l,frameInfo:{thickness:70,outer:{head:70,cill:70,leftJamb:70,rightJamb:70,transom:70,mullion:70},inner:{head:70,cill:70,leftJamb:70,rightJamb:70,transom:70,mullion:70}},sashInfo:u.sashInfo,ironmongery:{hinges:"",mpls:""},masterSash:"Left",mullions:((p=u.layout)==null?void 0:p.mullions)||[],transoms:((v=u.layout)==null?void 0:v.transoms)||[],placedSashes:((w=u.layout)==null?void 0:w.placedSashes)||[],paneGlassTypes:[],glazingBarThickness:25,glazingBarType:"plant-on",sashOpening:"both",price:0,photos:[]},applicability:o}},d5=(t,e,n,r)=>{var m,p,v,w,N,b,I,_,E;const o=t,l=(o==null?void 0:o.itemType)||e||"Sash",u=(m=o==null?void 0:o.defaultLayout)!=null&&m.instances&&o.defaultLayout.instances.length>0?JSON.parse(JSON.stringify(o.defaultLayout.instances)):[{id:`inst-pp-${Date.now()}`,overallWidth:1200,overallHeight:l==="Door"?2100:1500}],f={thickness:(o==null?void 0:o.frameThickness)??70,outer:{head:(o==null?void 0:o.outerHeadHeight)??80,cill:(o==null?void 0:o.outerCillHeight)??80,leftJamb:(o==null?void 0:o.outerLeftJambWidth)??80,rightJamb:(o==null?void 0:o.outerRightJambWidth)??80,transom:(o==null?void 0:o.outerTransomHeight)??80,mullion:(o==null?void 0:o.outerMullionWidth)??80},inner:{head:(o==null?void 0:o.innerHeightHeight)??80,cill:(o==null?void 0:o.innerCillHeight)??80,leftJamb:(o==null?void 0:o.innerLeftJambWidth)??80,rightJamb:(o==null?void 0:o.innerRightJambWidth)??80,transom:(o==null?void 0:o.innerTransomHeight)??80,mullion:(o==null?void 0:o.innerMullionWidth)??80},rebateDepth:o==null?void 0:o.rebateDepth,rebateWidth:o==null?void 0:o.rebateWidth};return{id:(o==null?void 0:o.id)||`transient-pp-${Date.now()}`,itemNumber:"Profile",quantity:1,location:(o==null?void 0:o.name)||`New ${l} Profile`,itemType:l,productRangeId:(o==null?void 0:o.productRangeId)||"",viewType:"External View",isNewFrame:!0,isInstallation:!1,installationLevel:1,fitToPreparedOpening:!1,materialSashId:(o==null?void 0:o.materialSashId)||((p=n[0])==null?void 0:p.id)||"",materialFrameId:(o==null?void 0:o.materialFrameId)||((v=n[0])==null?void 0:v.id)||"",materialCillId:(o==null?void 0:o.materialCillId)||((w=r[0])==null?void 0:w.id)||"",externalFinishId:o==null?void 0:o.externalFinishId,internalFinishId:o==null?void 0:o.internalFinishId,cillFinishId:o==null?void 0:o.cillFinishId,windowInstances:u,pairSpacing:(N=o==null?void 0:o.defaultLayout)==null?void 0:N.pairSpacing,pairRebate:(b=o==null?void 0:o.defaultLayout)==null?void 0:b.pairRebate,frameInfo:f,sashInfo:{head:(o==null?void 0:o.topRailHeight)??80,stile:(o==null?void 0:o.stileWidth)??80,bottomRail:(o==null?void 0:o.bottomRailHeight)??80,meetingStile:(o==null?void 0:o.meetingRailHeight)??0,thickness:56},ironmongery:(o==null?void 0:o.ironmongery)||{hinges:"Standard",mpls:"Standard"},openingDirection:(o==null?void 0:o.openingDirection)||"outward",glazingType:(o==null?void 0:o.glazingType)||"externally",masterSash:"Left",mullions:((I=o==null?void 0:o.defaultLayout)==null?void 0:I.mullions)||[],transoms:((_=o==null?void 0:o.defaultLayout)==null?void 0:_.transoms)||[],placedSashes:((E=o==null?void 0:o.defaultLayout)==null?void 0:E.placedSashes)||[],paneGlassTypes:[],glazingBarThickness:(o==null?void 0:o.glazingBarThickness)??25,glazingBarType:"plant-on",sashOpening:"both",price:0,photos:[]}},f5=(t,e)=>{if(t){const n=JSON.parse(JSON.stringify(t));return n.openingType&&(n.openingDirection=n.openingType==="Open In"?"inward":"outward",delete n.openingType),n}if(e){const n=e.defaultLayout,r=n!=null&&n.instances&&n.instances.length>0?JSON.parse(JSON.stringify(n.instances)):[{id:`inst-${Date.now()}`,overallWidth:e.outerLeftJambWidth+e.outerRightJambWidth+600,overallHeight:e.itemType==="Door"?2100:1800}],o=new Map;r.forEach(f=>{const m=f.id,p=`inst-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;o.set(m,p),f.id=p});const l=((n==null?void 0:n.placedSashes)||[]).map(f=>{for(const[m,p]of o.entries())if(f.paneId.startsWith(m))return{...f,paneId:f.paneId.replace(m,p)};return f}),u={thickness:e.frameThickness,outer:{head:e.outerHeadHeight,cill:e.outerCillHeight,leftJamb:e.outerLeftJambWidth,rightJamb:e.outerRightJambWidth,transom:e.outerTransomHeight,mullion:e.outerMullionWidth},inner:{head:e.innerHeightHeight,cill:e.innerCillHeight,leftJamb:e.innerLeftJambWidth,rightJamb:e.innerRightJambWidth,transom:e.innerTransomHeight,mullion:e.innerMullionWidth},rebateDepth:e.rebateDepth,rebateWidth:e.rebateWidth};return{id:`item-${Date.now()}`,itemNumber:"0",quantity:1,location:"New Item",itemType:e.itemType,productRangeId:e.productRangeId,viewType:"External View",isNewFrame:!0,isInstallation:!1,installationLevel:1,fitToPreparedOpening:!1,materialSashId:e.materialSashId,materialFrameId:e.materialFrameId,materialCillId:e.materialCillId,externalFinishId:e.externalFinishId,internalFinishId:e.internalFinishId,cillFinishId:e.cillFinishId,windowInstances:r,pairSpacing:n==null?void 0:n.pairSpacing,pairRebate:n==null?void 0:n.pairRebate,frameInfo:u,sashInfo:{head:e.topRailHeight,stile:e.stileWidth,bottomRail:e.bottomRailHeight,meetingStile:e.meetingRailHeight,thickness:56},ironmongery:e.ironmongery,openingDirection:e.openingDirection||"outward",glazingType:e.glazingType||"externally",masterSash:"Left",mullions:(n==null?void 0:n.mullions)||[],transoms:(n==null?void 0:n.transoms)||[],placedSashes:l,paneGlassTypes:[],glazingBarThickness:e.glazingBarThickness,glazingBarType:"plant-on",sashOpening:"both",price:0,photos:[]}}return null},h5=t=>{const e=JSON.parse(JSON.stringify(t));if(!e.windowInstances||e.windowInstances.length===0)return e;const n=new Map,r=e.windowInstances.map(p=>{const v=p.id,w=`inst-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;n.set(v,w);const N={...p,id:w};return N.topSashGlazingBars&&(N.topSashGlazingBars=N.topSashGlazingBars.map(b=>({...b,id:`gb-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),N.bottomSashGlazingBars&&(N.bottomSashGlazingBars=N.bottomSashGlazingBars.map(b=>({...b,id:`gb-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),N}),o=t.windowInstances[0].id,l=(e.mullions||[]).map(p=>({...p,id:`m-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,instanceId:n.get(p.instanceId||o)})),u=(e.transoms||[]).map(p=>({...p,id:`t-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,instanceId:n.get(p.instanceId||o)})),f=(e.placedSashes||[]).map(p=>{var N;let v=p.paneId;for(const[b,I]of n.entries())if(p.paneId.startsWith(b)){v=p.paneId.replace(b,I);break}const w=(N=p.glazingBars)==null?void 0:N.map(b=>({...b,id:`gb-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}));return{...p,paneId:v,glazingBars:w}}),m=(e.paneGlassTypes||[]).map(p=>{let v=p.paneId;for(const[w,N]of n.entries())if(p.paneId.startsWith(w)){v=p.paneId.replace(w,N);break}return{...p,paneId:v}});return e.windowInstances=r,e.mullions=l,e.transoms=u,e.placedSashes=f,e.paneGlassTypes=m,e},m5=(t,e,n)=>{const r=t.itemType==="Casement"||t.itemType==="Door"||t.itemType==="Screen"||t.itemType==="Sash"?{instances:t.windowInstances,mullions:t.mullions||[],transoms:t.transoms||[],placedSashes:t.placedSashes||[]}:void 0;return{id:e.startsWith("transient")?`ct-${Date.now()}`:e,name:t.location,itemType:t.itemType,applicableTo:n,sashInfo:t.sashInfo,layout:r||{}}},p5=(t,e)=>{const n=(t.itemType==="Casement"||t.itemType==="Door"||t.itemType==="Screen")&&t.windowInstances.length>0?{instances:t.windowInstances,pairSpacing:t.pairSpacing,pairRebate:t.pairRebate,mullions:t.mullions||[],transoms:t.transoms||[],placedSashes:t.placedSashes||[]}:void 0;return{id:e.startsWith("transient")?`pp-${Date.now()}`:e,name:t.location,productRangeId:t.productRangeId,itemType:t.itemType,materialSashId:t.materialSashId,materialFrameId:t.materialFrameId,materialCillId:t.materialCillId,externalFinishId:t.externalFinishId,internalFinishId:t.internalFinishId,cillFinishId:t.cillFinishId,frameThickness:t.frameInfo.thickness,outerHeadHeight:t.frameInfo.outer.head,outerCillHeight:t.frameInfo.outer.cill,outerLeftJambWidth:t.frameInfo.outer.leftJamb,outerRightJambWidth:t.frameInfo.outer.rightJamb,outerTransomHeight:t.frameInfo.outer.transom,outerMullionWidth:t.frameInfo.outer.mullion,innerHeightHeight:t.frameInfo.inner.head,innerCillHeight:t.frameInfo.inner.cill,innerLeftJambWidth:t.frameInfo.inner.leftJamb,innerRightJambWidth:t.frameInfo.inner.rightJamb,innerTransomHeight:t.frameInfo.inner.transom,innerMullionWidth:t.frameInfo.inner.mullion,topRailHeight:t.sashInfo.head,bottomRailHeight:t.sashInfo.bottomRail,meetingRailHeight:t.sashInfo.meetingStile,stileWidth:t.sashInfo.stile,glazingBarThickness:t.glazingBarThickness||25,ironmongery:t.ironmongery,defaultLayout:n,rebateDepth:t.frameInfo.rebateDepth,rebateWidth:t.frameInfo.rebateWidth,openingDirection:t.openingDirection,glazingType:t.glazingType}},ar=({label:t,value:e,onChange:n,unit:r="mm",min:o,max:l,disabled:u=!1,placeholder:f})=>s.jsxs("div",{children:[s.jsx("label",{className:`block text-sm font-medium ${u?"text-stone-400 dark:text-stone-500":"text-stone-600 dark:text-stone-300"}`,children:t}),s.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s.jsx("input",{type:"number",value:e,onChange:n,min:o,max:l,disabled:u,placeholder:f,className:"w-full p-2 border border-stone-300 dark:bg-gray-700 dark:border-gray-600 dark:text-white rounded-md focus:ring-blue-500 focus:border-blue-500 disabled:bg-stone-100 dark:disabled:bg-gray-800/50 disabled:cursor-not-allowed"}),s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:s.jsx("span",{className:"text-stone-500 dark:text-stone-400 sm:text-sm",children:r})})]})]}),ho=({x:t,y:e,length:n,label:r,isVertical:o,offset:l,colorClass:u="text-stone-600 dark:text-stone-400",fontSize:f})=>{let p,v,w,N,b,I,_="";o?(p=t-l,v=e,w=t-l,N=e+n,b=p,I=e+n/2,_=`rotate(-90 ${b} ${I})`):(p=t,v=e-l,w=t+n,N=e-l,b=t+n/2,I=v);const E={fontSize:f,fontWeight:500,textAnchor:"middle",dominantBaseline:o?"auto":"text-after-edge"};return s.jsxs("g",{className:`${u} pointer-events-none`,stroke:"currentColor",children:[s.jsx("line",{x1:t,y1:e,x2:p,y2:v,strokeWidth:.5,strokeDasharray:"2 2"}),s.jsx("line",{x1:o?t:t+n,y1:o?e+n:e,x2:w,y2:N,strokeWidth:.5,strokeDasharray:"2 2"}),s.jsx("line",{x1:p,y1:v,x2:w,y2:N,strokeWidth:1}),s.jsx("line",{x1:o?p-8/2:p,y1:o?v:v-8/2,x2:o?p+8/2:p,y2:o?v:v+8/2,strokeWidth:1}),s.jsx("line",{x1:o?w-8/2:w,y1:o?N:N-8/2,x2:o?w+8/2:w,y2:o?N:N+8/2,strokeWidth:1}),s.jsx("g",{transform:_,children:s.jsx("text",{x:b,y:I-f*.25,style:E,fill:"currentColor",stroke:"white",strokeWidth:"2.1px",paintOrder:"stroke",className:"dark:stroke-gray-800/20",children:r})})]})},_f=({text:t,isToughened:e,x:n,y:r,width:o,height:l,yOffset:u=0})=>{if(!t&&!e||o<50||l<50)return null;const f=n+o/2,m=r+l/2+u,p=Math.min(o/(((t==null?void 0:t.length)||0)*.5),l/(e?4:2.5)),v=Math.max(8,Math.min(p,16)),w={fontSize:v,fontFamily:"Inter, sans-serif",fontWeight:500,textAnchor:"middle",dominantBaseline:"middle"},N={...w,fontWeight:"bold",fontSize:v*.9};return s.jsxs("g",{className:"pointer-events-none text-black/50 dark:text-white/50",children:[t&&s.jsx("text",{x:f,y:m-(e?v/2:0),style:w,children:t}),e&&s.jsx("text",{x:f,y:m+(t?v/2+2:0),style:N,children:"TGH"})]})},ep=({x:t,y:e,width:n,height:r,direction:o})=>{const l=t+n/2,u=e+r/2,f=Math.min(n,r)*.08,m=o==="up"?`M ${l-f} ${u+f/2} L ${l} ${u-f/2} L ${l+f} ${u-f/2}`:`M ${l-f} ${u-f/2} L ${l} ${u+f/2} L ${l+f} ${u-f/2}`;return s.jsx("g",{className:"pointer-events-none text-black/60 dark:text-white/70",children:s.jsx("path",{d:m,stroke:"currentColor",strokeWidth:2.5,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})},g5=({x:t,y:e,width:n,height:r,hingeSide:o})=>{if(!o)return null;const l=t+n/2,u=e+r/2;let f="";return o==="top"?f=`M ${t},${e+r} L ${l},${e} L ${t+n},${e+r}`:o==="bottom"?f=`M ${t},${e} L ${l},${e+r} L ${t+n},${e}`:o==="left"?f=`M ${t+n},${e} L ${t},${u} L ${t+n},${e+r}`:o==="right"&&(f=`M ${t},${e} L ${t+n},${u} L ${t},${e+r}`),s.jsx("g",{className:"pointer-events-none text-black/40 dark:text-stone-300/60",strokeDasharray:"6 6",children:s.jsx("path",{d:f,stroke:"currentColor",strokeWidth:2,fill:"none"})})},v5=(t,e)=>{const n=t.windowInstances[0];if(!n)return;const r=t.paneGlassTypes.map(q=>e.find(J=>J.id===q.glassTypeId&&J.type==="Glass")).filter(q=>!!q);if(r.length===0)return;const l=r.reduce((q,J)=>q+(J.uValue||0),0)/r.length;if(!l)return;const u=e.find(q=>q.id===t.materialFrameId),p=(u!=null&&u.density?15e-5*u.density+.025:.13)/.08,v=.06,w=n.overallWidth/1e3,N=n.overallHeight/1e3,b=.3,I=w*N,_=I*(1-b),E=I*b,T=t.itemType==="Sash"?2*(Math.sqrt(_/2)+Math.sqrt(_/2))*2:2*(Math.sqrt(_)+Math.sqrt(_));if(_+E===0)return;const P=(_*l+E*p+T*v)/(_+E);return parseFloat(P.toFixed(2))},x5=(t,e,n,r)=>{const o=n.filter(f=>f.paneId.startsWith(r)),l=n.filter(f=>!f.paneId.startsWith(r)),u=[];return o.forEach(f=>{const m=f.paneId.replace(`${r}-`,""),p=t.find(v=>v.id===m);if(p){const v=p.x+p.width/2,w=p.y+p.height/2,N=e.find(b=>v>=b.x&&v<b.x+b.width&&w>=b.y&&w<b.y+b.height);N&&u.push({...f,paneId:`${r}-${N.id}`})}}),[...u,...l]},y5=(t,e,n,r)=>{const o=n.mullions,l=n.transoms;let u=[...t],f=[...e];return u=u.map(m=>{const p={...m},v=o.find(w=>w.id===m.id);return v&&l.forEach(w=>{const N=f.find(T=>T.id===w.id);if(!N)return;const b=w.offset-(w.thickness??r.transom)/2,I=w.offset+(w.thickness??r.transom)/2,_=N.offset-(N.thickness??r.transom)/2,E=N.offset+(N.thickness??r.transom)/2;p.end!==void 0&&v.end!==void 0&&Math.abs(v.end-b)<1&&(p.end=_),p.start!==void 0&&v.start!==void 0&&Math.abs(v.start-I)<1&&(p.start=E)}),p}),f=f.map(m=>{const p={...m},v=l.find(w=>w.id===m.id);return v&&o.forEach(w=>{const N=u.find(T=>T.id===w.id);if(!N)return;const b=w.offset-(w.thickness??r.mullion)/2,I=w.offset+(w.thickness??r.mullion)/2,_=N.offset-(N.thickness??r.mullion)/2,E=N.offset+(N.thickness??r.mullion)/2;p.end!==void 0&&v.end!==void 0&&Math.abs(v.end-b)<1&&(p.end=_),p.start!==void 0&&v.start!==void 0&&Math.abs(v.start-I)<1&&(p.start=E)}),p}),{mullions:u,transoms:f}};function Jc({mode:t="quote",itemToEdit:e,profile:n,onSaveItem:r,quoteItems:o=[],allProfiles:l=[],allComponents:u=[],onNavigateItem:f=()=>{},currency:m,profileToEdit:p,onSaveProfile:v,componentTemplateToEdit:w,onSaveComponentTemplate:N,onCancel:b,materials:I,productRanges:_,isReadOnly:E=!1,newItemType:T,componentTemplates:P=[],addToast:q}){var vi,ts,ri,cr,Qs,Xs,jo,wo,Do,Qr,ns,Xr;const K=Pe.useMemo(()=>I.filter(oe=>oe.type==="Timber"),[I]),fe=Pe.useMemo(()=>I.filter(oe=>oe.type==="Cill"),[I]),ne=Pe.useMemo(()=>I.filter(oe=>oe.type==="Glass"),[I]),X=Pe.useMemo(()=>I.filter(oe=>oe.type==="Finish"),[I]),[$,he]=Pe.useState(null),[R,D]=Pe.useState([]),H=Pe.useRef(null),[O,ge]=Pe.useState(""),[xe,ie]=Pe.useState(null),[Y,ve]=Pe.useState(null),[we,le]=Pe.useState(null),[M,W]=Pe.useState(null),Q=Pe.useRef(null),[ue,ce]=Pe.useState(!1),[me,re]=Pe.useState(!1),[se,ye]=Pe.useState(null),[Be,Ge]=Pe.useState(!0),pe=Pe.useRef(null),[Ze,Le]=Pe.useState({frame:!0,sash:!1,glass:!1,divisions:!1}),[te,gt]=Pe.useState([]),et=Pe.useMemo(()=>t==="component"?"Component Template Designer":t==="profile"?"Product Profile Designer":$!=null&&$.itemType?`${{Sash:"Sash Window",Casement:"Casement Window",Door:"Door",Screen:"Screen"}[$.itemType]} Designer`:"Window & Door Designer",[$==null?void 0:$.itemType,t]);Pe.useEffect(()=>{H.current=$},[$]);const qe=(oe,Me=!0)=>{const rt=H.current;if(rt){Me&&D(Ct=>[...Ct,rt]);const ct=oe(rt);he(ct)}},at=()=>{if(R.length>0){const oe=R[R.length-1];he(oe),D(Me=>Me.slice(0,-1))}};Pe.useEffect(()=>{var Me,rt,ct,Ct;let oe=null;if(t==="component"){const{item:Zt,applicability:dt}=c5(w,T);oe=Zt,gt(dt),Ge(!0)}else t==="profile"?(oe=d5(p,T,K,fe),Ge(!0)):(oe=f5(e,n),e?Ge(((rt=(Me=e.windowInstances)==null?void 0:Me[0])==null?void 0:rt.topSashHeight)===void 0):n&&Ge(!0));if(oe&&(((ct=oe.mullions)==null?void 0:ct.some(dt=>!dt.instanceId))||((Ct=oe.transoms)==null?void 0:Ct.some(dt=>!dt.instanceId)))&&oe.windowInstances.length>0){const dt=oe.windowInstances[0].id;oe.mullions=(oe.mullions||[]).map(an=>({...an,instanceId:an.instanceId||dt})),oe.transoms=(oe.transoms||[]).map(an=>({...an,instanceId:an.instanceId||dt}))}he(oe),oe&&ge(oe.windowInstances[0].id),D([]),ie(null),ve(null),le(null),W(null),ye(null)},[e,n,p,t,T,w,K,fe]),Pe.useEffect(()=>{if($&&He){const{outer:oe,inner:Me}=$.frameInfo,rt=He.overallWidth-oe.leftJamb-oe.rightJamb,ct=He.overallHeight-oe.head-oe.cill;rt>0&&ct>0&&(pe.current={mullions:($.mullions||[]).map(Ct=>({...Ct})),transoms:($.transoms||[]).map(Ct=>({...Ct})),innerWidth:rt,innerHeight:ct})}},[$,O]);const nt=$==null?void 0:$.itemType,He=Pe.useMemo(()=>($==null?void 0:$.windowInstances.find(oe=>oe.id===O))||($==null?void 0:$.windowInstances[0]),[$,O]),{items:bt,currentItem:Mt,currentIndex:At}=Pe.useMemo(()=>t==="quote"?{items:o,currentItem:e,currentIndex:o.findIndex(oe=>oe.id===(e==null?void 0:e.id))}:t==="profile"?{items:l,currentItem:p,currentIndex:l.findIndex(oe=>oe.id===(p==null?void 0:p.id))}:t==="component"?{items:u,currentItem:w,currentIndex:u.findIndex(oe=>oe.id===(w==null?void 0:w.id))}:{items:[],currentItem:null,currentIndex:-1},[t,o,e,l,p,u,w]),It=At<=0,$e=At>=bt.length-1,Te=bt.length>1&&Mt;Pe.useMemo(()=>{if(!$||!He)return[];const{mullions:oe,transoms:Me,frameInfo:rt}=$,{outer:ct}=rt,Ct=Math.max(0,(He.overallWidth||0)-(ct.leftJamb+ct.rightJamb)),Zt=Math.max(0,(He.overallHeight||0)-ct.head-ct.cill),dt=(oe||[]).filter(Jt=>Jt.instanceId===He.id),an=(Me||[]).filter(Jt=>Jt.instanceId===He.id);return al(Ct,Zt,[...dt,...an],{mullion:ct.mullion,transom:ct.transom})},[$,He]);const _e=(oe,Me)=>{qe(rt=>({...rt,windowInstances:rt.windowInstances.map(ct=>ct.id===O?{...ct,[oe]:Me}:ct)}))},Fe=(oe,Me)=>{E||gt(rt=>{const ct=new Set(rt);return Me?ct.add(oe):ct.delete(oe),Array.from(ct)})},Ie=oe=>{qe(Me=>{const rt=_.find(Zt=>Zt.id===oe);if(!rt)return{...Me,productRangeId:oe};const ct={...Me.frameInfo,thickness:rt.frameThickness,outer:{head:rt.outerHeadHeight,cill:rt.outerCillHeight,leftJamb:rt.outerLeftJambWidth,rightJamb:rt.outerRightJambWidth,transom:rt.outerTransomHeight,mullion:rt.outerMullionWidth},inner:{head:Me.frameInfo.inner.head,cill:Me.frameInfo.inner.cill,leftJamb:Me.frameInfo.inner.leftJamb,rightJamb:Me.frameInfo.inner.rightJamb,transom:Me.frameInfo.inner.transom,mullion:Me.frameInfo.inner.mullion},rebateDepth:rt.rebateDepth,rebateWidth:rt.rebateWidth},Ct={...Me.sashInfo,head:rt.topRailHeight,stile:rt.stileWidth,bottomRail:rt.bottomRailHeight,meetingStile:rt.meetingRailHeight};return{...Me,productRangeId:oe,materialSashId:rt.materialSashId,materialFrameId:rt.materialFrameId,materialCillId:rt.materialCillId,frameInfo:ct,sashInfo:Ct,openingDirection:rt.openingDirection,glazingType:rt.glazingType}},!1)},lt=oe=>{qe(Me=>{const{newOverallWidth:rt,newOverallHeight:ct,newFrameInfo:Ct}=oe(Me),Zt=Ct||Me.frameInfo,{outer:dt}=Zt,an=rt-dt.leftJamb-dt.rightJamb,Jt=ct-dt.head-dt.cill;let An=Me.mullions||[],rn=Me.transoms||[];if(an>1&&Jt>1&&pe.current){const fn=JSON.parse(JSON.stringify(pe.current)),Wn=new Set([0,fn.innerWidth]);fn.mullions.forEach(Ot=>Wn.add(Ot.offset)),fn.transoms.forEach(Ot=>{Ot.start!==void 0&&Wn.add(Ot.start),Ot.end!==void 0&&Wn.add(Ot.end)});const Ht=new Set([0,fn.innerHeight]);fn.transoms.forEach(Ot=>Ht.add(Ot.offset)),fn.mullions.forEach(Ot=>{Ot.start!==void 0&&Wn.add(Ot.start),Ot.end!==void 0&&Wn.add(Ot.end)});const un=fn.innerWidth>0?an/fn.innerWidth:0,Bn=fn.innerHeight>0?Jt/fn.innerHeight:0,Et=new Map;for(const Ot of Wn)Et.set(Ot,Math.round(Ot*un));const tn=new Map;for(const Ot of Ht)tn.set(Ot,Math.round(Ot*Bn));An=fn.mullions.map(Ot=>({...Ot,offset:Et.get(Ot.offset),start:Ot.start!==void 0?tn.get(Ot.start):void 0,end:Ot.end!==void 0?tn.get(Ot.end):void 0})),rn=fn.transoms.map(Ot=>({...Ot,offset:tn.get(Ot.offset),start:Ot.start!==void 0?Et.get(Ot.start):void 0,end:Ot.end!==void 0?Et.get(Ot.end):void 0}));const kr=y5(An,rn,{mullions:fn.mullions,transoms:fn.transoms},{mullion:dt.mullion,transom:dt.transom});An=kr.mullions,rn=kr.transoms}const zn=an>1&&Jt>1,jn={...Me};return Ct&&(jn.frameInfo=Ct),{...jn,mullions:zn?An:Me.mullions,transoms:zn?rn:Me.transoms,placedSashes:Me.placedSashes,windowInstances:Me.windowInstances.map(fn=>fn.id===O?{...fn,overallWidth:rt,overallHeight:ct}:fn)}},!1)},ee=(oe,Me,rt)=>{lt(ct=>{const Ct=ct.windowInstances.find(dt=>dt.id===oe),Zt=isNaN(rt)?0:rt;return{newOverallWidth:Me==="overallWidth"?Zt:Ct.overallWidth,newOverallHeight:Me==="overallHeight"?Zt:Ct.overallHeight}})},Oe=(oe,Me,rt)=>{const ct=Number(rt);isNaN(ct)||qe(Ct=>{const Zt=JSON.parse(JSON.stringify(Ct.frameInfo));return Zt[oe][Me]=ct,{...Ct,frameInfo:Zt}})},tt=(oe,Me)=>{const rt=Me===""?void 0:parseInt(Me,10);isNaN(rt)&&rt!==void 0||qe(ct=>({...ct,frameInfo:{...ct.frameInfo,[oe]:rt}}))},pt=(oe,Me)=>{const rt=Number(Me);isNaN(rt)||qe(ct=>({...ct,sashInfo:{...ct.sashInfo,[oe]:rt}}))},ht=(oe,Me,rt)=>{const ct=rt===""?void 0:parseInt(rt,10);if(isNaN(ct)&&ct!==void 0)return;const Ct=oe==="top"?"topSashOverrides":"bottomSashOverrides";qe(Zt=>({...Zt,windowInstances:Zt.windowInstances.map(dt=>{if(dt.id===O){const an={...dt[Ct],[Me]:ct};return Object.keys(an).forEach(Jt=>an[Jt]===void 0&&delete an[Jt]),{...dt,[Ct]:an}}return dt})}))};Pe.useEffect(()=>{if(nt==="Sash"&&Be&&He&&$){const oe=Mn?$.frameInfo.outer.head:0,Me=Mn?$.frameInfo.outer.cill:0,rt=He.overallHeight-oe-Me,ct=(rt+$.sashInfo.head-$.sashInfo.bottomRail)/2;ct>0&&ct<rt&&_e("topSashHeight",Math.round(ct))}},[Be,He==null?void 0:He.overallHeight,$==null?void 0:$.frameInfo,$==null?void 0:$.sashInfo,$==null?void 0:$.isNewFrame,nt,O]);const qt=(oe,Me)=>{E||(ge(Me),le(oe),ce(!0))},Pn=(oe,Me,rt)=>{E||qe(ct=>{const Ct=typeof rt=="string"&&rt.trim()===""?void 0:Number(rt);let Zt=[...ct.mullions||[]],dt=[...ct.transoms||[]];const an=[...Zt,...dt].find(Jt=>Jt.id===oe);if(!an)return ct;{const Jt=an.thickness||(an.type==="mullion"?ct.frameInfo.outer.mullion:ct.frameInfo.outer.transom),An=Ct===void 0?an.type==="mullion"?ct.frameInfo.outer.mullion:ct.frameInfo.outer.transom:Ct;if(an.type==="mullion"?Zt=Zt.map(rn=>rn.id===oe?{...rn,thickness:Ct}:rn):dt=dt.map(rn=>rn.id===oe?{...rn,thickness:Ct}:rn),an.type==="mullion"){const rn=Zt.find(Ht=>Ht.id===oe),zn=rn.offset-An/2,jn=rn.offset+An/2,fn=rn.offset-Jt/2,Wn=rn.offset+Jt/2;dt=dt.map(Ht=>{let un={...Ht},Bn=!1;return un.end!==void 0&&Math.abs(un.end-fn)<1&&(un.end=zn,Bn=!0),un.start!==void 0&&Math.abs(un.start-Wn)<1&&(un.start=jn,Bn=!0),Bn?un:Ht})}else{const rn=dt.find(Ht=>Ht.id===oe),zn=rn.offset-An/2,jn=rn.offset+An/2,fn=rn.offset-Jt/2,Wn=rn.offset+Jt/2;Zt=Zt.map(Ht=>{let un={...Ht},Bn=!1;return un.end!==void 0&&Math.abs(un.end-fn)<1&&(un.end=zn,Bn=!0),un.start!==void 0&&Math.abs(un.start-Wn)<1&&(un.start=jn,Bn=!0),Bn?un:Ht})}}return{...ct,mullions:Zt,transoms:dt}})},Xt=(oe,Me)=>{const rt=Number(Me);if(isNaN(rt)||rt<0||!M)return;const ct=M.divisionId;qe(Ct=>{const dt=[...Ct.mullions||[],...Ct.transoms||[]].find(Ft=>Ft.id===ct);if(!dt)return Ct;const an=Ct.windowInstances.find(Ft=>Ft.id===O)||Ct.windowInstances[0],Jt=dt.type==="mullion",An=an.overallWidth-(Ct.frameInfo.outer.leftJamb+Ct.frameInfo.outer.rightJamb),rn=an.overallHeight-Ct.frameInfo.outer.head-Ct.frameInfo.outer.cill,zn=Jt?An:rn,jn=dt.thickness||(Jt?Ct.frameInfo.outer.mullion:Ct.frameInfo.outer.transom),fn=dt.start??0,Wn=dt.end??(Jt?rn:An),Ht=Ft=>{const sr=Ft.start??0,pn=Ft.end??(Jt?rn:An);return Math.max(fn,sr)<Math.min(Wn,pn)},un=Ft=>Ft.offset-(Ft.thickness||(Jt?Ct.frameInfo.outer.mullion:Ct.frameInfo.outer.transom))/2,Bn=Ft=>Ft.offset+(Ft.thickness||(Jt?Ct.frameInfo.outer.mullion:Ct.frameInfo.outer.transom))/2,Et=[...Ct.mullions||[],...Ct.transoms||[]],tn=dt.offset,kr=Et.filter(Ft=>Ft.id!==dt.id&&Ft.type===dt.type&&Ht(Ft)),Ot=kr.filter(Ft=>Ft.offset<tn),bo=kr.filter(Ft=>Ft.offset>tn),Oi=Ot.length>0?Math.max(...Ot.map(Bn)):0,No=bo.length>0?Math.min(...bo.map(un)):zn;let yt;oe==="start"?yt=Oi+rt+jn/2:yt=No-rt-jn/2;const _n={...dt,offset:Math.round(yt)};let Un=Ct.mullions||[],vn=Ct.transoms||[];return _n.type==="mullion"?Un=Un.map(Ft=>Ft.id===ct?_n:Ft):vn=vn.map(Ft=>Ft.id===ct?_n:Ft),{...Ct,mullions:Un,transoms:vn}})},Cn=()=>{if(E||!M)return;const oe=M.divisionId;qe(Me=>{var rn,zn;const rt=Me.windowInstances.find(jn=>jn.id===O)||Me.windowInstances[0],ct=rt.overallWidth-(Me.frameInfo.outer.leftJamb+Me.frameInfo.outer.rightJamb),Ct=rt.overallHeight-Me.frameInfo.outer.head-Me.frameInfo.outer.cill,Zt=al(ct,Ct,[...Me.mullions||[],...Me.transoms||[]],{mullion:Me.frameInfo.outer.mullion,transom:Me.frameInfo.outer.transom}),dt=(rn=Me.mullions)==null?void 0:rn.filter(jn=>jn.id!==oe),an=(zn=Me.transoms)==null?void 0:zn.filter(jn=>jn.id!==oe),Jt=al(ct,Ct,[...dt||[],...an||[]],{mullion:Me.frameInfo.outer.mullion,transom:Me.frameInfo.outer.transom}),An=x5(Zt,Jt,Me.placedSashes||[],rt.id);return{...Me,mullions:dt,transoms:an,placedSashes:An}}),W(null)},Fn=oe=>{$&&$.windowInstances.length<=1||E||qe(Me=>{var Ct;const rt=Me.windowInstances.findIndex(Zt=>Zt.id===oe),ct=Me.windowInstances.filter(Zt=>Zt.id!==oe);if(O===oe){const Zt=Math.max(0,rt-1);ge(((Ct=ct[Zt])==null?void 0:Ct.id)||"")}return{...Me,windowInstances:ct}})},wn=()=>{if(E||!$)return;const oe=h5($);if(t==="component"&&N){const Me=m5(oe,$.id,te);N(Me)}else if(t==="profile"&&v){const Me=p5(oe,$.id);v(Me)}else if(t==="quote"&&r){const Me=v5(oe,I),rt={...oe,calculatedUValue:Me};r(rt)}D([])};if(Pe.useEffect(()=>{const oe=Me=>{Q.current&&!Q.current.contains(Me.target)&&W(null)};return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[]),!$)return s.jsx("div",{className:"flex-1 flex items-center justify-center",children:"Loading builder..."});const{outer:mt}=$.frameInfo,{head:zt,stile:In,bottomRail:sn,meetingStile:gn}=$.sashInfo,{isNewFrame:Mn,mullions:Dt,transoms:mi,windowInstances:rr,paneGlassTypes:wr,glazingBarType:kn,placedSashes:Kn=[],glazingBarThickness:mn}=$,br=Mn?mt.head:0,xo=Mn?mt.cill:0,ir=Mn?mt.leftJamb:0,pi=rr.reduce((oe,Me)=>oe+Me.overallWidth,0)+(rr.length>1?(rr.length-1)*($.pairSpacing||0):0)-(rr.length>1?(rr.length-1)*($.pairRebate||0):0),Er=rr.length>0?Math.max(...rr.map(oe=>oe.overallHeight)):0,gi=800/(pi||800),fr=2/gi,Ti=`${6/gi} ${3/gi}`,hr=20,Xo=`-${40*1.5} -80 ${pi+120} ${Er+40*3.5}`,qi=((vi=I.find(oe=>oe.id===$.externalFinishId))==null?void 0:vi.color)||((ts=I.find(oe=>oe.id===$.materialFrameId))==null?void 0:ts.color)||"#D1B48C",Kr=((ri=I.find(oe=>oe.id===$.externalFinishId))==null?void 0:ri.color)||((cr=I.find(oe=>oe.id===$.materialSashId))==null?void 0:cr.color)||"#D3B48C",_s=((Qs=I.find(oe=>oe.id===$.cillFinishId))==null?void 0:Qs.color)||((Xs=I.find(oe=>oe.id===$.materialCillId))==null?void 0:Xs.color)||"#8C6E54",Zo="#e0f2fe",or=oe=>{if(E)return;const Me=oe.substring(0,oe.lastIndexOf("-"));ge(Me),ie(rt=>rt===oe?null:oe),ye(null),W(null)},Ca=(oe,Me)=>{if(E)return;const rt=`${Me}-${oe}`;ge(Me),ye(rt),W(null);const ct=Kn.find(Ct=>Ct.paneId===rt);ie(ct?rt:null)},yo=(oe,Me,rt)=>{var Ct;if(oe.stopPropagation(),E)return;ge(rt),ye(null),ie(null);const ct=(Ct=oe.currentTarget.closest(".designer-container"))==null?void 0:Ct.getBoundingClientRect();ct&&W({x:oe.clientX-ct.left,y:oe.clientY-ct.top,divisionId:Me.id})},Ks=Math.max(0,((He==null?void 0:He.overallWidth)||0)-(mt.leftJamb+mt.rightJamb)),Es=Math.max(0,((He==null?void 0:He.overallHeight)||0)-mt.head-mt.cill);Kn.find(oe=>oe.paneId===se);const Lr=M?[...$.mullions||[],...$.transoms||[]].find(oe=>oe.id===M.divisionId):null;we&&we.split("-").slice(0,3).join("-"),(P||[]).filter(oe=>oe.applicableTo.includes($.itemType));const ka=(t==="quote"||t==="profile")&&s.jsxs(Lo,{title:"Frame Sections",isHighlighted:se==="frame",children:[t==="quote"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"isNewFrame",checked:Mn,onChange:oe=>qe(Me=>({...Me,isNewFrame:oe.target.checked})),disabled:E,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),s.jsx("label",{htmlFor:"isNewFrame",className:"text-sm font-medium",children:"New Frame"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx(ar,{label:"Head",value:mt.head,onChange:oe=>Oe("outer","head",oe.target.value),disabled:t==="quote"&&!Mn||E}),s.jsx(ar,{label:"Jamb",value:mt.leftJamb,onChange:oe=>Oe("outer","leftJamb",oe.target.value),disabled:t==="quote"&&!Mn||E}),s.jsx(ar,{label:"Cill",value:mt.cill,onChange:oe=>Oe("outer","cill",oe.target.value),disabled:t==="quote"&&!Mn||E})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 mt-4 border-t dark:border-gray-600",children:[s.jsx(ar,{label:"Rebate Width",value:$.frameInfo.rebateWidth||"",onChange:oe=>tt("rebateWidth",oe.target.value),disabled:t==="quote"&&!Mn||E,placeholder:"12"}),s.jsx(ar,{label:"Rebate Depth",value:$.frameInfo.rebateDepth||"",onChange:oe=>tt("rebateDepth",oe.target.value),disabled:t==="quote"&&!Mn||E,placeholder:"15"})]})]}),es=(t==="quote"||t==="profile")&&(nt==="Casement"||nt==="Door"||nt==="Screen")&&s.jsxs(Lo,{title:"Opening & Glazing",children:[s.jsxs(Nn,{label:"Opening Direction",value:$.openingDirection,onChange:oe=>qe(Me=>({...Me,openingDirection:oe.target.value})),disabled:E,children:[s.jsx("option",{value:"inward",children:"Inward Opening"}),s.jsx("option",{value:"outward",children:"Outward Opening"})]}),s.jsxs(Nn,{label:"Glazing Type",value:$.glazingType,onChange:oe=>qe(Me=>({...Me,glazingType:oe.target.value})),disabled:E,children:[s.jsx("option",{value:"internally",children:"Internally Glazed"}),s.jsx("option",{value:"externally",children:"Externally Glazed"})]})]});return s.jsxs("div",{className:"flex flex-col h-full bg-stone-100 dark:bg-gray-900 text-stone-900 dark:text-stone-100",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[s.jsx("button",{onClick:b,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(hl,{className:"w-6 h-6 text-stone-600 dark:text-stone-300"})}),s.jsx("h2",{className:"text-xl font-bold",children:et})]}),s.jsx("div",{className:"flex-1 flex justify-center",children:Te&&s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(wt,{variant:"secondary",size:"md",onClick:()=>f("prev"),disabled:It,icon:lh,children:"Previous"}),s.jsxs("span",{className:"text-sm font-bold text-stone-600 dark:text-stone-300 whitespace-nowrap px-4 py-2 bg-white dark:bg-gray-700 rounded-lg shadow-sm border border-stone-300 dark:border-gray-600",children:[At+1," / ",bt.length]}),s.jsx(wt,{variant:"secondary",size:"md",onClick:()=>f("next"),disabled:$e,icon:xd,children:"Next"})]})}),s.jsx("div",{className:"flex-1 flex justify-end",children:s.jsxs("div",{className:"flex items-center gap-4",children:[t==="quote"&&s.jsx("div",{className:"text-sm font-medium",children:e?`Editing Item #${e.itemNumber}`:"Creating New Item"}),!E&&s.jsx(wt,{variant:"primary",onClick:wn,icon:Iu,children:"Save"})]})})]})}),s.jsxs("div",{className:"flex-1 grid grid-cols-[256px_1fr_256px] min-h-0 overflow-hidden",children:[s.jsx("aside",{className:"bg-white dark:bg-gray-800 p-4 flex flex-col border-r border-stone-200 dark:border-gray-700 overflow-y-auto",children:s.jsxs("div",{className:"pr-2 -mr-4",children:[t==="quote"&&s.jsxs(Lo,{title:"Product Range",children:[s.jsxs(Nn,{value:$.productRangeId,onChange:oe=>Ie(oe.target.value),disabled:E,children:[s.jsx("option",{value:"",children:"-- Select a Range --"}),_.filter(oe=>oe.itemType===$.itemType).map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),s.jsx("p",{className:"text-xs text-stone-500 mt-2",children:"Selecting a range will apply its default materials and section sizes."})]}),s.jsxs(Lo,{children:[(t==="profile"||t==="component")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Name"}),s.jsx(kt,{type:"text",value:$.location,onChange:oe=>qe(Me=>({...Me,location:oe.target.value}))})]}),t==="profile"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Product Range"}),s.jsxs(Nn,{value:$.productRangeId,onChange:oe=>Ie(oe.target.value),children:[s.jsx("option",{value:"",children:"Custom"}),_.filter(oe=>oe.itemType===$.itemType).map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),t==="component"&&s.jsxs("div",{className:"pt-2",children:[s.jsx("h4",{className:"font-semibold text-sm text-stone-500 dark:text-stone-400 border-b dark:border-gray-600 pb-1 mb-2",children:"Applicability"}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 mb-2",children:"Select in which designers this component can be used."}),s.jsx("div",{className:"space-y-2",children:["Sash","Casement","Door","Screen"].map(oe=>s.jsx(Oc,{label:oe,checked:te.includes(oe),onChange:Me=>Fe(oe,Me),disabled:E},oe))})]})]}),(t==="quote"||t==="profile"||t==="component")&&s.jsx("div",{className:"flex items-center gap-2 bg-stone-100 dark:bg-gray-900 p-1 rounded-lg",children:rr.map((oe,Me)=>s.jsxs("button",{onClick:()=>ge(oe.id),className:`relative flex-1 px-3 py-1 text-sm font-semibold rounded-md transition-colors ${O===oe.id?"bg-white dark:bg-gray-700 shadow-sm":"hover:bg-stone-200 dark:hover:bg-gray-700/50"}`,children:["W",Me+1,rr.length>1&&s.jsx("button",{onClick:rt=>{rt.stopPropagation(),Fn(oe.id)},disabled:E,className:"absolute -top-1.5 -right-1.5 p-0.5 bg-red-500 text-white rounded-full hover:bg-red-600 disabled:opacity-50",children:s.jsx(A0,{className:"w-3 h-3"})})]},oe.id))}),He&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ar,{label:"Overall Width",value:He.overallWidth,onChange:oe=>ee(He.id,"overallWidth",parseInt(oe.target.value)||0),disabled:E}),s.jsx(ar,{label:"Overall Height",value:He.overallHeight,onChange:oe=>ee(He.id,"overallHeight",parseInt(oe.target.value)||0),disabled:E})]})]}),ka,es,(t==="profile"||t==="component")&&s.jsx(Lo,{title:"Default Component Sections",children:s.jsxs("div",{className:"space-y-4",children:[t==="profile"&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-stone-500 dark:text-stone-400 border-b dark:border-gray-600 pb-1 mb-2",children:"Frame Sections"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx(ar,{label:"Head",value:$.frameInfo.outer.head,onChange:oe=>Oe("outer","head",oe.target.value)}),s.jsx(ar,{label:"Jamb",value:$.frameInfo.outer.leftJamb,onChange:oe=>Oe("outer","leftJamb",oe.target.value)}),s.jsx(ar,{label:"Cill",value:$.frameInfo.outer.cill,onChange:oe=>Oe("outer","cill",oe.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-stone-500 dark:text-stone-400 border-b dark:border-gray-600 pb-1 mb-2",children:"Sash Sections"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ar,{label:"Top Rail",value:$.sashInfo.head,onChange:oe=>pt("head",oe.target.value)}),s.jsx(ar,{label:"Stile",value:$.sashInfo.stile,onChange:oe=>pt("stile",oe.target.value)}),nt==="Sash"&&s.jsx(ar,{label:"Meeting Rail",value:$.sashInfo.meetingStile,onChange:oe=>pt("meetingStile",oe.target.value)}),s.jsx(ar,{label:"Bottom Rail",value:$.sashInfo.bottomRail,onChange:oe=>pt("bottomRail",oe.target.value)})]})]})]})}),t==="quote"&&s.jsx(s.Fragment,{children:nt==="Sash"?s.jsxs(s.Fragment,{children:[s.jsx(Lo,{title:"Top Sash",isHighlighted:xe==null?void 0:xe.endsWith("-top"),children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ar,{label:"Top Rail",value:((jo=He==null?void 0:He.topSashOverrides)==null?void 0:jo.topRail)??"",placeholder:String(zt),onChange:oe=>ht("top","topRail",oe.target.value),disabled:E}),s.jsx(ar,{label:"Stile",value:((wo=He==null?void 0:He.topSashOverrides)==null?void 0:wo.stile)??"",placeholder:String(In),onChange:oe=>ht("top","stile",oe.target.value),disabled:E}),s.jsx(ar,{label:"Meeting Rail",value:((Do=He==null?void 0:He.topSashOverrides)==null?void 0:Do.meetingRail)??"",placeholder:String(gn),onChange:oe=>ht("top","meetingRail",oe.target.value),disabled:E})]})}),s.jsx(Lo,{title:"Bottom Sash",isHighlighted:xe==null?void 0:xe.endsWith("-bottom"),children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(ar,{label:"Meeting Rail",value:((Qr=He==null?void 0:He.bottomSashOverrides)==null?void 0:Qr.meetingRail)??"",placeholder:String(gn),onChange:oe=>ht("bottom","meetingRail",oe.target.value),disabled:E}),s.jsx(ar,{label:"Stile",value:((ns=He==null?void 0:He.bottomSashOverrides)==null?void 0:ns.stile)??"",placeholder:String(In),onChange:oe=>ht("bottom","stile",oe.target.value),disabled:E}),s.jsx(ar,{label:"Bottom Rail",value:((Xr=He==null?void 0:He.bottomSashOverrides)==null?void 0:Xr.bottomRail)??"",placeholder:String(sn),onChange:oe=>ht("bottom","bottomRail",oe.target.value),disabled:E})]})})]}):s.jsx(Lo,{title:"Default Sash Sections",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx(ar,{label:"Top/Head",value:$.sashInfo.head,onChange:oe=>pt("head",oe.target.value),disabled:E}),s.jsx(ar,{label:"Stile",value:$.sashInfo.stile,onChange:oe=>pt("stile",oe.target.value),disabled:E}),s.jsx(ar,{label:"Bottom",value:$.sashInfo.bottomRail,onChange:oe=>pt("bottomRail",oe.target.value),disabled:E})]})})}),nt==="Sash"&&t!=="component"&&s.jsxs(Lo,{title:"Sash Settings",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"autoSplit",checked:Be,onChange:oe=>Ge(oe.target.checked),disabled:E,className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),s.jsx("label",{htmlFor:"autoSplit",className:"text-sm font-medium",children:"Auto-split Sash Height"})]}),He&&s.jsx(ar,{label:"Top Sash Height",value:He.topSashHeight??"",onChange:oe=>_e("topSashHeight",oe.target.value===""?void 0:Number(oe.target.value)),disabled:Be||E,placeholder:Be?"Auto":""}),s.jsxs(Nn,{value:$.sashOpening,onChange:oe=>qe(Me=>({...Me,sashOpening:oe.target.value})),disabled:E,children:[s.jsx("option",{value:"both",children:"Both Sashes Slide"}),s.jsx("option",{value:"top-fixed",children:"Top Sash Fixed"}),s.jsx("option",{value:"bottom-fixed",children:"Bottom Sash Fixed"}),s.jsx("option",{value:"both-fixed",children:"Both Sashes Fixed"})]})]}),t!=="component"&&s.jsxs(s.Fragment,{children:[s.jsxs(Lo,{title:"Glass",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Glazing Bar Type"}),s.jsxs("div",{className:"flex gap-2 rounded-lg bg-stone-100 dark:bg-gray-700 p-1",children:[s.jsx("button",{onClick:()=>qe(oe=>({...oe,glazingBarType:"plant-on"})),className:`flex-1 p-1 rounded-md text-sm font-semibold ${kn==="plant-on"?"bg-white dark:bg-gray-800 shadow-sm":""}`,children:"Plant On"}),s.jsx("button",{onClick:()=>qe(oe=>({...oe,glazingBarType:"true-bars"})),className:`flex-1 p-1 rounded-md text-sm font-semibold ${kn==="true-bars"?"bg-white dark:bg-gray-800 shadow-sm":""}`,children:"True Bars"})]}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:kn==="plant-on"?"Decorative bars on a single glass unit. One glass spec per sash.":"Structural bars creating individual panes. Each pane can have a different glass spec."})]}),s.jsx(ar,{label:"Glazing Bar Thickness",value:mn,onChange:oe=>qe(Me=>({...Me,glazingBarThickness:Number(oe.target.value)})),disabled:E})]}),s.jsxs(Lo,{title:"Finishes & Materials",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Frame Material"}),s.jsx(Nn,{value:$.materialFrameId,onChange:oe=>qe(Me=>({...Me,materialFrameId:oe.target.value})),className:"mt-1",disabled:E,children:K.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Sash Material"}),s.jsx(Nn,{value:$.materialSashId,onChange:oe=>qe(Me=>({...Me,materialSashId:oe.target.value})),className:"mt-1",disabled:E,children:K.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Cill Material"}),s.jsx(Nn,{value:$.materialCillId,onChange:oe=>qe(Me=>({...Me,materialCillId:oe.target.value})),className:"mt-1",disabled:E,children:fe.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"External Finish"}),s.jsxs(Nn,{value:$.externalFinishId,onChange:oe=>qe(Me=>({...Me,externalFinishId:oe.target.value})),className:"mt-1",disabled:E,children:[s.jsx("option",{value:"",children:"-- No Finish --"}),X.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Internal Finish"}),s.jsxs(Nn,{value:$.internalFinishId,onChange:oe=>qe(Me=>({...Me,internalFinishId:oe.target.value})),className:"mt-1",disabled:E,children:[s.jsx("option",{value:"",children:"-- No Finish --"}),X.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Cill Finish"}),s.jsxs(Nn,{value:$.cillFinishId,onChange:oe=>qe(Me=>({...Me,cillFinishId:oe.target.value})),className:"mt-1",disabled:E,children:[s.jsx("option",{value:"",children:"-- No Finish --"}),X.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})]}),s.jsxs(Lo,{title:"Ironmongery",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Hinges"}),s.jsx(kt,{type:"text",value:$.ironmongery.hinges,onChange:oe=>qe(Me=>({...Me,ironmongery:{...Me.ironmongery,hinges:oe.target.value}})),disabled:E})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300",children:"Locking System (MPL)"}),s.jsx(kt,{type:"text",value:$.ironmongery.mpls,onChange:oe=>qe(Me=>({...Me,ironmongery:{...Me.ironmongery,mpls:oe.target.value}})),disabled:E})]})]})]})]})}),s.jsx("main",{className:"relative bg-stone-100 dark:bg-gray-800/20 min-w-0",onClick:()=>{ye(null),W(null)},children:s.jsx("div",{className:"absolute inset-0 p-6",children:s.jsxs("div",{className:"designer-container relative w-full h-full bg-white dark:bg-gray-800 rounded-lg shadow-inner flex items-center justify-center",children:[pi>0&&Er>0&&s.jsxs("svg",{viewBox:Xo,className:"max-w-full max-h-full",preserveAspectRatio:"xMidYMid meet",children:[s.jsx("defs",{children:s.jsx("style",{children:".dimension-text-outline { stroke: white; } .dark .dimension-text-outline { stroke: #2d3748; }"})}),s.jsx("g",{children:(()=>{let oe=0;return rr.map(Me=>{var tn,kr,Ot,bo,Oi,No;const{overallWidth:rt,overallHeight:ct}=Me,Ct=oe;oe+=rt+(rr.length>1?($.pairSpacing||0)-($.pairRebate||0):0);const Zt=Me.id===O,dt=Math.max(0,ct-br-xo),an=Math.max(0,rt-ir*2),Jt=rt-ir*2,An=((tn=He==null?void 0:He.topSashOverrides)==null?void 0:tn.topRail)??zt,rn=((kr=He==null?void 0:He.topSashOverrides)==null?void 0:kr.stile)??In,zn=((Ot=He==null?void 0:He.topSashOverrides)==null?void 0:Ot.meetingRail)??gn,jn=((bo=He==null?void 0:He.bottomSashOverrides)==null?void 0:bo.bottomRail)??sn,fn=((Oi=He==null?void 0:He.bottomSashOverrides)==null?void 0:Oi.stile)??In,Wn=((No=He==null?void 0:He.bottomSashOverrides)==null?void 0:No.meetingRail)??gn,Ht=Me.topSashHeight||(dt+An-jn)/2,un=dt-Ht,Bn=(Dt||[]).filter(yt=>yt.instanceId===Me.id),Et=(mi||[]).filter(yt=>yt.instanceId===Me.id);return s.jsxs("g",{transform:`translate(${Ct}, 0)`,onClick:yt=>{yt.stopPropagation(),ge(Me.id);const _n=al(an,dt,[...Bn,...Et],{mullion:mt.mullion,transom:mt.transom});_n.length===1&&Ca(_n[0].id,Me.id)},children:[s.jsx("g",{onClick:yt=>{yt.stopPropagation(),ge(Me.id),ye("frame")},className:"cursor-pointer",children:Mn&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:0,y:0,width:rt,height:mt.head,style:{fill:qi},stroke:"none"}),s.jsx("rect",{x:0,y:mt.head,width:mt.leftJamb,height:dt,style:{fill:qi},stroke:"none"}),s.jsx("rect",{x:rt-mt.rightJamb,y:mt.head,width:mt.rightJamb,height:dt,style:{fill:qi},stroke:"none"}),s.jsx("rect",{x:0,y:ct-mt.cill,width:rt,height:mt.cill,style:{fill:_s},stroke:"none"})]})}),nt==="Sash"?s.jsxs(s.Fragment,{children:[s.jsxs("g",{transform:`translate(${ir}, ${br+Ht})`,onClick:yt=>{yt.stopPropagation(),or(`${Me.id}-bottom`)},className:"cursor-pointer",children:[s.jsx("rect",{x:0,y:0,width:Jt,height:un,style:{fill:Kr},stroke:"black",strokeWidth:fr*.5}),s.jsx("g",{transform:`translate(${fn}, ${Wn})`,children:(()=>{var ii;const yt=Jt-fn*2,_n=un-Wn-jn,Un=`${Me.id}-bottom`,vn=Me.bottomSashGlazingBars,Ft=ya(yt,_n,vn,mn),sr=kn==="plant-on"?(ii=wr.find(Yt=>Yt.paneId.startsWith(Un)))==null?void 0:ii.glassTypeId:void 0,pn=(vn==null?void 0:vn.filter(Yt=>Yt.type==="vertical"))||[],$r=(vn==null?void 0:vn.filter(Yt=>Yt.type==="horizontal"))||[],Ii=(yt-pn.length*mn)/(pn.length+1),So=(_n-$r.length*mn)/($r.length+1);return s.jsxs(s.Fragment,{children:[Ft.map(Yt=>{var Tr,zi;const hn=`${Un}-${Yt.id}`,Co=kn==="true-bars"?(Tr=wr.find(cn=>cn.paneId===hn))==null?void 0:Tr.glassTypeId:sr,Tn=ne.find(cn=>cn.id===Co),Br=(zi=Tn==null?void 0:Tn.spec)==null?void 0:zi.toLowerCase().includes("t");return s.jsxs("g",{children:[s.jsx("rect",{x:Yt.x,y:Yt.y,width:Yt.width,height:Yt.height,style:{fill:(Tn==null?void 0:Tn.color)||Zo},stroke:"none",className:`cursor-pointer ${Y===hn||we===hn?"opacity-80":"opacity-100"}`,onMouseEnter:()=>!E&&ve(hn),onMouseLeave:()=>ve(null),onClick:cn=>{cn.stopPropagation(),qt(hn,Me.id)}}),s.jsx(_f,{text:Tn==null?void 0:Tn.name.split(" ")[0],isToughened:Br,x:Yt.x,y:Yt.y,width:Yt.width,height:Yt.height})]},hn)}),pn.map((Yt,hn)=>s.jsx("rect",{x:(hn+1)*Ii+hn*mn,y:0,width:mn,height:_n,style:{fill:Kr},stroke:"none"},`v-bar-${hn}`)),$r.map((Yt,hn)=>s.jsx("rect",{x:0,y:(hn+1)*So+hn*mn,width:yt,height:mn,style:{fill:Kr},stroke:"none"},`h-bar-${hn}`))]})})()}),$.sashOpening!=="bottom-fixed"&&$.sashOpening!=="both-fixed"&&s.jsx(ep,{x:0,y:0,width:Jt,height:un,direction:"up"})]}),s.jsxs("g",{transform:`translate(${ir}, ${br})`,onClick:yt=>{yt.stopPropagation(),or(`${Me.id}-top`)},className:"cursor-pointer",children:[s.jsx("rect",{x:"0",y:"0",width:Jt,height:Ht,style:{fill:Kr},stroke:"black",strokeWidth:fr*.5}),s.jsx("g",{transform:`translate(${rn}, ${An})`,children:(()=>{var ii;const yt=Jt-rn*2,_n=Ht-An-zn,Un=`${Me.id}-top`,vn=Me.topSashGlazingBars,Ft=ya(yt,_n,vn,mn),sr=kn==="plant-on"?(ii=wr.find(Yt=>Yt.paneId.startsWith(Un)))==null?void 0:ii.glassTypeId:void 0,pn=(vn==null?void 0:vn.filter(Yt=>Yt.type==="vertical"))||[],$r=(vn==null?void 0:vn.filter(Yt=>Yt.type==="horizontal"))||[],Ii=(yt-pn.length*mn)/(pn.length+1),So=(_n-$r.length*mn)/($r.length+1);return s.jsxs(s.Fragment,{children:[Ft.map(Yt=>{var Tr,zi;const hn=`${Un}-${Yt.id}`,Co=kn==="true-bars"?(Tr=wr.find(cn=>cn.paneId===hn))==null?void 0:Tr.glassTypeId:sr,Tn=ne.find(cn=>cn.id===Co),Br=(zi=Tn==null?void 0:Tn.spec)==null?void 0:zi.toLowerCase().includes("t");return s.jsxs("g",{children:[s.jsx("rect",{x:Yt.x,y:Yt.y,width:Yt.width,height:Yt.height,style:{fill:(Tn==null?void 0:Tn.color)||Zo},stroke:"none",className:`cursor-pointer ${Y===hn||we===hn?"opacity-80":"opacity-100"}`,onMouseEnter:()=>!E&&ve(hn),onMouseLeave:()=>ve(null),onClick:cn=>{cn.stopPropagation(),qt(hn,Me.id)}}),s.jsx(_f,{text:Tn==null?void 0:Tn.name.split(" ")[0],isToughened:Br,x:Yt.x,y:Yt.y,width:Yt.width,height:Yt.height})]},hn)}),pn.map((Yt,hn)=>s.jsx("rect",{x:(hn+1)*Ii+hn*mn,y:0,width:mn,height:_n,style:{fill:Kr},stroke:"none"},`v-bar-${hn}`)),$r.map((Yt,hn)=>s.jsx("rect",{x:0,y:(hn+1)*So+hn*mn,width:yt,height:mn,style:{fill:Kr},stroke:"none"},`h-bar-${hn}`))]})})()}),$.sashOpening!=="top-fixed"&&$.sashOpening!=="both-fixed"&&s.jsx(ep,{x:0,y:0,width:Jt,height:Ht,direction:"down"})]}),(xe===`${Me.id}-top`||xe===`${Me.id}-pair`)&&s.jsx("rect",{x:ir,y:br,width:Jt,height:Ht,fill:"none",stroke:"blue",strokeWidth:fr*1.5,strokeDasharray:Ti,className:"pointer-events-none"}),(xe===`${Me.id}-bottom`||xe===`${Me.id}-pair`)&&s.jsx("rect",{x:ir,y:br+Ht,width:Jt,height:un,fill:"none",stroke:"blue",strokeWidth:fr*1.5,strokeDasharray:Ti,className:"pointer-events-none"})]}):s.jsxs("g",{transform:`translate(${ir}, ${br})`,children:[[...Bn,...Et].map(yt=>{const _n=yt.thickness||(yt.type==="mullion"?mt.mullion:mt.transom),Un=yt.offset-_n/2,vn=(M==null?void 0:M.divisionId)===yt.id;if(yt.type==="mullion"){const Ft=yt.start??0,sr=yt.end??innerHeight;return s.jsx("rect",{x:Un,y:Ft,width:_n,height:sr-Ft,fill:qi,stroke:vn?"blue":"none",strokeWidth:vn?fr*1.5:0,className:"cursor-pointer",onClick:pn=>yo(pn,yt,Me.id)},yt.id)}else{const Ft=yt.start??0,sr=yt.end??innerWidth;return s.jsx("rect",{x:Ft,y:Un,width:sr-Ft,height:_n,fill:qi,stroke:vn?"blue":"none",strokeWidth:vn?fr*1.5:0,className:"cursor-pointer",onClick:pn=>yo(pn,yt,Me.id)},yt.id)}}),al(an,dt,[...Bn,...Et],{mullion:mt.mullion,transom:mt.transom}).map(yt=>{var sr;const _n=`${Me.id}-${yt.id}`,Un=Kn.find(pn=>pn.paneId===_n),vn=(sr=wr.find(pn=>pn.paneId===_n))==null?void 0:sr.glassTypeId,Ft=ne.find(pn=>pn.id===vn);return s.jsxs("g",{transform:`translate(${yt.x}, ${yt.y})`,onClick:pn=>{pn.stopPropagation(),Ca(yt.id,Me.id)},children:[Un?s.jsxs(s.Fragment,{children:[Un.type!=="fixed-glazing"&&s.jsx("rect",{x:"0",y:"0",width:yt.width,height:yt.height,style:{fill:Kr},stroke:"black",strokeWidth:fr*.5}),s.jsx("g",{transform:`translate(${Un.type!=="fixed-glazing"?In:0}, ${Un.type!=="fixed-glazing"?zt:0})`,children:(()=>{var Br,Tr,zi;const pn=yt.width-(Un.type!=="fixed-glazing"?In*2:0),$r=yt.height-(Un.type!=="fixed-glazing"?zt+sn:0),Ii=_n,So=ya(pn,$r,Un.glazingBars,mn),ii=kn==="plant-on"?(Br=wr.find(cn=>cn.paneId===Ii))==null?void 0:Br.glassTypeId:void 0,Yt=((Tr=Un.glazingBars)==null?void 0:Tr.filter(cn=>cn.type==="vertical"))||[],hn=((zi=Un.glazingBars)==null?void 0:zi.filter(cn=>cn.type==="horizontal"))||[],Co=(pn-Yt.length*mn)/(Yt.length+1),Tn=($r-hn.length*mn)/(hn.length+1);return s.jsxs(s.Fragment,{children:[So.map(cn=>{var Fo,Ps;const $n=`${Ii}-${cn.id}`,Ls=kn==="true-bars"?(Fo=wr.find(Wi=>Wi.paneId===$n))==null?void 0:Fo.glassTypeId:void 0,Ir=ii||Ls,Gr=ne.find(Wi=>Wi.id===Ir),Ro=(Ps=Gr==null?void 0:Gr.spec)==null?void 0:Ps.toLowerCase().includes("t");return s.jsxs("g",{children:[s.jsx("rect",{x:cn.x,y:cn.y,width:cn.width,height:cn.height,style:{fill:(Gr==null?void 0:Gr.color)||Zo},stroke:"none",className:`cursor-pointer ${Y===$n||we===$n?"opacity-80":"opacity-100"}`,onMouseEnter:()=>!E&&ve($n),onMouseLeave:()=>ve(null),onClick:Wi=>{Wi.stopPropagation(),qt($n,Me.id)}}),s.jsx(_f,{text:Gr==null?void 0:Gr.name.split(" ")[0],isToughened:Ro,x:cn.x,y:cn.y,width:cn.width,height:cn.height})]},$n)}),Yt.map((cn,$n)=>s.jsx("rect",{x:($n+1)*Co+$n*mn,y:0,width:mn,height:$r,fill:Kr,stroke:"none"},`v-${$n}`)),hn.map((cn,$n)=>s.jsx("rect",{x:0,y:($n+1)*Tn+$n*mn,width:pn,height:mn,fill:Kr,stroke:"none"},`h-${$n}`))]})})()}),s.jsx(g5,{x:0,y:0,width:yt.width,height:yt.height,hingeSide:Un.hingeSide})]}):s.jsx("rect",{x:"0",y:"0",width:yt.width,height:yt.height,style:{fill:(Ft==null?void 0:Ft.color)||Zo},stroke:"none"}),se===_n&&s.jsx("rect",{x:"0",y:"0",width:yt.width,height:yt.height,fill:"blue",fillOpacity:"0.2",stroke:"blue",strokeWidth:fr*1.5,className:"pointer-events-none"})]},yt.id)})]}),Zt&&s.jsx("rect",{x:-2,y:-2,width:rt+4,height:ct+4,fill:"none",stroke:"blue",strokeWidth:fr*2,strokeDasharray:Ti,className:"pointer-events-none"}),s.jsxs(s.Fragment,{children:[Ze.frame&&s.jsxs(s.Fragment,{children:[s.jsx(ho,{x:0,y:0,length:rt,label:rt,isVertical:!1,offset:40*.75,colorClass:"text-blue-600 dark:text-blue-400",fontSize:hr}),s.jsx(ho,{x:0,y:0,length:ct,label:ct,isVertical:!0,offset:40*.75,colorClass:"text-blue-600 dark:text-blue-400",fontSize:hr})]}),nt==="Sash"?s.jsxs(s.Fragment,{children:[Ze.sash&&s.jsxs(s.Fragment,{children:[s.jsx(ho,{x:ir,y:br,length:Jt,label:Math.round(Jt),isVertical:!1,offset:40*.66,colorClass:"text-green-600 dark:text-green-400",fontSize:hr}),s.jsx(ho,{x:ir,y:br,length:Ht,label:Math.round(Ht),isVertical:!0,offset:40*.66,colorClass:"text-green-600 dark:text-green-400",fontSize:hr}),s.jsx(ho,{x:ir,y:br+Ht,length:un,label:Math.round(un),isVertical:!0,offset:40*.66,colorClass:"text-green-600 dark:text-green-400",fontSize:hr})]}),Ze.glass&&s.jsxs(s.Fragment,{children:[s.jsx(ho,{x:ir+rn,y:br+An,length:Jt-rn*2,label:Math.round(Jt-rn*2),isVertical:!1,offset:40*.33,colorClass:"text-red-600 dark:text-red-400",fontSize:hr}),s.jsx(ho,{x:ir+rn,y:br+An,length:Ht-An-zn,label:Math.round(Ht-An-zn),isVertical:!0,offset:40*.33,colorClass:"text-red-600 dark:text-red-400",fontSize:hr}),s.jsx(ho,{x:ir+fn,y:br+Ht+Wn,length:un-Wn-jn,label:Math.round(un-Wn-jn),isVertical:!0,offset:40*.33,colorClass:"text-red-600 dark:text-red-400",fontSize:hr})]})]}):al(an,dt,[...Bn,...Et],{mullion:mt.mullion,transom:mt.transom}).map(yt=>{const _n=`${Me.id}-${yt.id}`,Un=Kn.find(sr=>sr.paneId===_n),vn=ir+yt.x,Ft=br+yt.y;return s.jsx(cl.Fragment,{children:Un?s.jsxs(s.Fragment,{children:[Ze.sash&&s.jsxs(s.Fragment,{children:[s.jsx(ho,{x:vn,y:Ft,length:yt.width,label:Math.round(yt.width),isVertical:!1,offset:40*.66,colorClass:"text-green-600 dark:text-green-400",fontSize:hr}),s.jsx(ho,{x:vn,y:Ft,length:yt.height,label:Math.round(yt.height),isVertical:!0,offset:40*.66,colorClass:"text-green-600 dark:text-green-400",fontSize:hr})]}),Ze.glass&&s.jsxs(s.Fragment,{children:[s.jsx(ho,{x:vn+In,y:Ft+zt,length:yt.width-In*2,label:Math.round(yt.width-In*2),isVertical:!1,offset:40*.33,colorClass:"text-red-600 dark:text-red-400",fontSize:hr}),s.jsx(ho,{x:vn+In,y:Ft+zt,length:yt.height-zt-sn,label:Math.round(yt.height-zt-sn),isVertical:!0,offset:40*.33,colorClass:"text-red-600 dark:text-red-400",fontSize:hr})]})]}):s.jsx(s.Fragment,{children:Ze.glass&&s.jsxs(s.Fragment,{children:[s.jsx(ho,{x:vn,y:Ft,length:yt.width,label:Math.round(yt.width),isVertical:!1,offset:40*.5,colorClass:"text-red-600 dark:text-red-400",fontSize:hr}),s.jsx(ho,{x:vn,y:Ft,length:yt.height,label:Math.round(yt.height),isVertical:!0,offset:40*.5,colorClass:"text-red-600 dark:text-red-400",fontSize:hr})]})})},`dim-${yt.id}`)})]})]},Me.id)})})()})]}),M&&Lr&&(()=>{const Me=Lr.type==="mullion",rt=Ks,ct=Es,Ct=Me?rt:ct;Lr.thickness||(Me?mt.mullion:mt.transom);const Zt=Lr.start??0,dt=Lr.end??(Me?ct:rt),an=tn=>{const kr=tn.start??0,Ot=tn.end??(Me?ct:rt);return Math.max(Zt,kr)<Math.min(dt,Ot)},Jt=tn=>tn.offset-(tn.thickness||(Me?$.frameInfo.outer.mullion:$.frameInfo.outer.transom))/2,An=tn=>tn.offset+(tn.thickness||(Me?$.frameInfo.outer.mullion:$.frameInfo.outer.transom))/2,rn=[...$.mullions||[],...$.transoms||[]],zn=Lr.offset,jn=rn.filter(tn=>tn.id!==Lr.id&&tn.type===Lr.type&&an(tn)),fn=jn.filter(tn=>tn.offset<zn),Wn=jn.filter(tn=>tn.offset>zn),Ht=fn.length>0?Math.max(...fn.map(An)):0,un=Wn.length>0?Math.min(...Wn.map(Jt)):Ct,Bn=Jt(Lr)-Ht,Et=un-An(Lr);return s.jsxs("div",{ref:Q,className:"absolute bg-white dark:bg-gray-800 shadow-lg rounded-lg border dark:border-gray-700 p-4 w-64 space-y-3",style:{left:`${M.x+10}px`,top:`${M.y+10}px`},onClick:tn=>tn.stopPropagation(),children:[s.jsxs("h4",{className:"font-bold capitalize",children:[Lr.type," Editor"]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium",children:"Offset from Neighbors"}),s.jsxs("div",{className:"space-y-2 mt-1",children:[s.jsx(ar,{label:`From ${Me?"Left":"Top"}`,value:Math.round(Bn),onChange:tn=>Xt("start",tn.target.value)}),s.jsx(ar,{label:`From ${Me?"Right":"Bottom"}`,value:Math.round(Et),onChange:tn=>Xt("end",tn.target.value)})]})]}),s.jsx(ar,{label:"Thickness",value:Lr.thickness||"",onChange:tn=>Pn(Lr.id,"thickness",tn.target.value===""?void 0:Number(tn.target.value)),placeholder:String(Lr.type==="mullion"?mt.mullion:mt.transom)}),s.jsx(wt,{variant:"danger",size:"sm",onClick:Cn,className:"w-full justify-center",icon:Qo,children:"Delete"})]})})()]})})}),s.jsxs("aside",{className:"bg-white dark:bg-gray-800 p-4 flex flex-col border-l border-stone-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-stone-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold",children:"Design Tools"}),s.jsx(wt,{variant:"secondary",size:"sm",onClick:at,icon:H1,disabled:R.length===0||E,title:"Undo last change"})]})}),s.jsx("div",{className:"mt-4 pr-2 -mr-4 flex-grow overflow-y-auto",children:s.jsx(Lo,{title:"Dimension Visibility",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[t!=="component"&&s.jsx(Oc,{label:"Frame",checked:Ze.frame,onChange:oe=>Le(Me=>({...Me,frame:oe}))}),s.jsx(Oc,{label:"Sash / Leaf",checked:Ze.sash,onChange:oe=>Le(Me=>({...Me,sash:oe}))}),s.jsx(Oc,{label:"Mullion / Transom",checked:Ze.divisions,onChange:oe=>Le(Me=>({...Me,divisions:oe}))})]})})})]})]})]})}const Po=({icon:t,label:e,isActive:n,onClick:r,disabled:o})=>s.jsxs("button",{onClick:r,disabled:o,className:`flex items-center gap-3 w-full px-3 py-2.5 text-left text-sm font-medium rounded-md transition-colors ${n?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":"text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-gray-700"} ${o?"opacity-50 cursor-not-allowed":""}`,children:[s.jsx(t,{className:"w-5 h-5"}),s.jsx("span",{children:e})]}),Na=({title:t,subtitle:e,onAdd:n,addLabel:r,addDisabled:o=!1})=>s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:t}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mt-1",children:e})]}),n&&r&&s.jsx(wt,{onClick:n,disabled:o,icon:Ts,children:r})]}),w5=({isOpen:t,onClose:e,onSave:n,staffMember:r,teams:o,roles:l})=>{const[u,f]=Pe.useState(""),[m,p]=Pe.useState(""),[v,w]=Pe.useState(""),[N,b]=Pe.useState(""),[I,_]=Pe.useState("");Pe.useEffect(()=>{t&&(f((r==null?void 0:r.name)||""),p((r==null?void 0:r.email)||""),w((r==null?void 0:r.mobile)||""),b((r==null?void 0:r.teamId)||(o.length>0?o[0].id:"")),_((r==null?void 0:r.roleId)||(l.length>0?l[0].id:"")))},[t,r,o,l]);const E=T=>{if(T.preventDefault(),!u||!N||!I||!m){alert("Please provide a name, email, select a team, and select a role.");return}const P=u.split(" ").map(q=>q[0]).join("").toUpperCase();n({id:(r==null?void 0:r.id)||`staff-${Date.now()}`,name:u,initials:P,teamId:N,roleId:I,email:m,mobile:v}),e()};return s.jsx(ba,{isOpen:t,onClose:e,title:r?"Edit Staff Member":"Add New Staff Member",size:"xl",children:s.jsxs("form",{onSubmit:E,className:"space-y-6 max-h-[75vh] overflow-y-auto p-1",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"staff-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),s.jsx(kt,{id:"staff-name",type:"text",value:u,onChange:T=>f(T.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"staff-email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email Address"}),s.jsx(kt,{id:"staff-email",type:"email",value:m,onChange:T=>p(T.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"staff-mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Mobile Phone"}),s.jsx(kt,{id:"staff-mobile",type:"tel",value:v,onChange:T=>w(T.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"staff-team",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Team"}),s.jsx(Nn,{id:"staff-team",value:N,onChange:T=>b(T.target.value),children:o.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"staff-role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role"}),s.jsx(Nn,{id:"staff-role",value:I,onChange:T=>_(T.target.value),children:l.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t dark:border-gray-700",children:[s.jsx(wt,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),s.jsx(wt,{type:"submit",children:"Save Staff Member"})]})]})})},b5=({isOpen:t,onClose:e,onSave:n,role:r})=>{const[o,l]=Pe.useState(""),[u,f]=Pe.useState([]);Pe.useEffect(()=>{t&&(l((r==null?void 0:r.name)||""),f((r==null?void 0:r.permissions)||[]))},[t,r]);const m=v=>{f(w=>w.includes(v)?w.filter(N=>N!==v):[...w,v])},p=v=>{if(v.preventDefault(),!o){alert("Please provide a name for the role.");return}n({id:(r==null?void 0:r.id)||`role-${Date.now()}`,name:o,permissions:u}),e()};return s.jsx(ba,{isOpen:t,onClose:e,title:r?"Edit Role":"Add New Role",size:"3xl",children:s.jsxs("form",{onSubmit:p,className:"space-y-6 max-h-[75vh] overflow-y-auto p-1",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role-name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Role Name"}),s.jsx(kt,{id:"role-name",type:"text",value:o,onChange:v=>l(v.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Permissions"}),s.jsx("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-6",children:E0.map(v=>s.jsxs("div",{className:"relative flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:`permission-${v.id}`,type:"checkbox",checked:u.includes(v.id),onChange:()=>m(v.id),className:"focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded"})}),s.jsxs("div",{className:"ml-3 text-sm",children:[s.jsx("label",{htmlFor:`permission-${v.id}`,className:"font-medium text-gray-700 dark:text-gray-300 capitalize",children:v.id.replace(/([A-Z])/g," $1").replace(/^./,w=>w.toUpperCase())}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:v.description})]})]},v.id))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t dark:border-gray-700",children:[s.jsx(wt,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),s.jsx(wt,{type:"submit",children:"Save Role"})]})]})})},N5=({staff:t,setStaff:e,teams:n,roles:r,setRoles:o,hasPermission:l})=>{const[u,f]=Pe.useState(!1),[m,p]=Pe.useState(null),[v,w]=Pe.useState(!1),[N,b]=Pe.useState(null),I=P=>{const q=!t.some(J=>J.id===P.id);e(J=>q?[...J,P]:J.map(K=>K.id===P.id?P:K))},_=P=>{t.find(J=>J.id===P)&&window.confirm("Are you sure you want to delete this staff member?")&&e(J=>J.filter(K=>K.id!==P))},E=P=>{const q=!r.some(J=>J.id===P.id);o(J=>q?[...J,P]:J.map(K=>K.id===P.id?P:K))},T=P=>{r.find(J=>J.id===P)&&window.confirm("Are you sure you want to delete this role? Staff assigned to this role will lose their permissions.")&&o(J=>J.filter(K=>K.id!==P))};return s.jsxs("div",{children:[s.jsx(Na,{title:"Staff & Teams",subtitle:"Manage your team members, roles, and their permissions."}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-bold text-stone-600 dark:text-stone-400 uppercase tracking-wider",children:"Staff Members"}),s.jsx(wt,{onClick:()=>{p(null),f(!0)},size:"sm",disabled:!l("manageStaff"),children:"Add Staff"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Name"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Email"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Mobile"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Team"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Role"}),s.jsx("th",{className:"p-4"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:t.map(P=>{var q,J;return s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 font-medium whitespace-nowrap",children:P.name}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300 whitespace-nowrap",children:P.email}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300 whitespace-nowrap",children:P.mobile||"N/A"}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300 whitespace-nowrap",children:(q=n.find(K=>K.id===P.teamId))==null?void 0:q.name}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300 text-sm font-semibold whitespace-nowrap",children:((J=r.find(K=>K.id===P.roleId))==null?void 0:J.name)||"No Role"}),s.jsxs("td",{className:"p-4 text-right whitespace-nowrap",children:[s.jsx("button",{onClick:()=>{p(P),f(!0)},disabled:!l("manageStaff"),className:"p-2 text-stone-500 hover:text-blue-600 disabled:opacity-50",children:s.jsx(mo,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>_(P.id),disabled:!l("manageStaff"),className:"p-2 text-stone-500 hover:text-red-600 disabled:opacity-50",children:s.jsx(Qo,{className:"w-5 h-5"})})]})]},P.id)})})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-bold text-stone-600 dark:text-stone-400 uppercase tracking-wider",children:"Roles & Permissions"}),s.jsx(wt,{onClick:()=>{b(null),w(!0)},size:"sm",disabled:!l("manageStaff"),children:"Add Role"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Role Name"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Permissions Assigned"}),s.jsx("th",{className:"p-4"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:r.map(P=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-4 font-medium whitespace-nowrap",children:P.name}),s.jsxs("td",{className:"p-4 text-stone-600 dark:text-stone-300 text-sm",children:[P.permissions.length," of ",E0.length]}),s.jsxs("td",{className:"p-4 text-right whitespace-nowrap",children:[s.jsx("button",{onClick:()=>{b(P),w(!0)},disabled:!l("manageStaff"),className:"p-2 text-stone-500 hover:text-blue-600 disabled:opacity-50",children:s.jsx(mo,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>T(P.id),disabled:!l("manageStaff"),className:"p-2 text-stone-500 hover:text-red-600 disabled:opacity-50",children:s.jsx(Qo,{className:"w-5 h-5"})})]})]},P.id))})]})})]})]}),u&&s.jsx(w5,{isOpen:u,onClose:()=>f(!1),onSave:I,staffMember:m,teams:n,roles:r}),v&&s.jsx(b5,{isOpen:v,onClose:()=>w(!1),onSave:E,role:N})]})},S5=({profile:t,materials:e,productRanges:n})=>{const{defaultLayout:r}=t,o=r!=null&&r.instances&&r.instances.length>0?r.instances:[{id:"legacy-instance",overallWidth:1200,overallHeight:1500}],l={id:"preview-item",itemNumber:"0",quantity:1,location:t.name,itemType:t.itemType,productRangeId:t.productRangeId,viewType:"External View",isNewFrame:!0,isInstallation:!1,installationLevel:1,fitToPreparedOpening:!1,materialSashId:t.materialSashId,materialFrameId:t.materialFrameId,materialCillId:t.materialCillId,externalFinishId:t.externalFinishId,internalFinishId:t.internalFinishId,cillFinishId:t.cillFinishId,windowInstances:o,frameInfo:{thickness:t.frameThickness,outer:{head:t.outerHeadHeight,cill:t.outerCillHeight,leftJamb:t.outerLeftJambWidth,rightJamb:t.outerRightJambWidth,transom:t.outerTransomHeight,mullion:t.outerMullionWidth},inner:{head:t.innerHeightHeight,cill:t.innerCillHeight,leftJamb:t.innerLeftJambWidth,rightJamb:t.innerRightJambWidth,transom:t.innerTransomHeight,mullion:t.innerMullionWidth}},sashInfo:{head:t.topRailHeight,stile:t.stileWidth,bottomRail:t.bottomRailHeight,meetingStile:t.meetingRailHeight,thickness:56},ironmongery:t.ironmongery,openingDirection:t.openingDirection,masterSash:"Left",mullions:r==null?void 0:r.mullions,transoms:r==null?void 0:r.transoms,placedSashes:r==null?void 0:r.placedSashes,paneGlassTypes:[],glazingBarThickness:t.glazingBarThickness,glazingBarType:"plant-on",sashOpening:"both",price:0,photos:[]};return s.jsx("div",{className:"w-full h-full bg-stone-100 dark:bg-gray-700/50 rounded-md flex items-center justify-center p-2",children:s.jsx(Cd,{item:l,materials:e,showDimensions:!1,showHinges:!0})})},Yc={Sash:"Sash Window",Casement:"Casement Window",Door:"Door",Screen:"Screen"},C5=({productProfiles:t,materials:e,productRanges:n,onSaveProfile:r,onDeleteProfile:o,hasPermission:l,navigateTo:u,addToast:f,productType:m})=>{const p=l("manageProductConfigurations"),v=t.filter(_=>_.itemType===m),w=_=>{u({view:"profileEditor",profileId:_.id})},N=()=>{u({view:"profileEditor",newItemType:m})},b=_=>{const E=t.find(T=>T.id===_);E&&window.confirm(`Are you sure you want to delete the profile "${E.name}"?`)&&o(_)},I=_=>{if(!p)return;const E=JSON.parse(JSON.stringify(_));if(E.id=`pp-${Date.now()}`,E.name=`${_.name} (Copy)`,E.defaultLayout){const T=E.defaultLayout;if(T.instances){const P=new Map;T.instances=T.instances.map(q=>{const J=q.id,K=`inst-ppc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return P.set(J,K),{...q,id:K}}),T.placedSashes&&(T.placedSashes=T.placedSashes.map(q=>{var fe;let J=q.paneId;for(const[ne,X]of P.entries())if(q.paneId.startsWith(ne)){J=q.paneId.replace(ne,X);break}const K=(fe=q.glazingBars)==null?void 0:fe.map(ne=>({...ne,id:`gb-pp-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}));return{...q,paneId:J,glazingBars:K}}))}T.mullions&&(T.mullions=T.mullions.map(P=>({...P,id:`m-ppc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),T.transoms&&(T.transoms=T.transoms.map(P=>({...P,id:`t-ppc-${Date.now()}-${Math.random().toString(36).substring(2,9)}`})))}r(E),f(`Profile copied. Now editing "${E.name}".`,"success"),u({view:"profileEditor",profileId:E.id})};return s.jsxs("div",{children:[s.jsx(Na,{title:`${Yc[m]} Profiles`,subtitle:`Manage default profiles for ${Yc[m].toLowerCase()} products.`}),s.jsx("div",{className:"flex justify-end items-end mb-8",children:s.jsx("div",{className:"flex gap-2",children:s.jsxs(wt,{onClick:N,disabled:!p,icon:Ts,children:["Add ",Yc[m]," Profile"]})})}),v.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-6",children:v.map(_=>{var T;const E=((T=n.find(P=>P.id===_.productRangeId))==null?void 0:T.name)||"Custom";return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 flex flex-col",children:[s.jsx("div",{className:"h-48",children:s.jsx(S5,{profile:_,materials:e,productRanges:n})}),s.jsxs("div",{className:"p-3 border-t dark:border-gray-700 flex-grow",children:[s.jsx("p",{className:"font-semibold truncate",title:_.name,children:_.name}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 truncate",title:E,children:E})]}),s.jsxs("div",{className:"p-2 border-t dark:border-gray-700 mt-auto bg-stone-50 dark:bg-gray-800/50 flex justify-end gap-1",children:[s.jsx("button",{onClick:()=>I(_),disabled:!p,className:"p-2 text-stone-500 hover:text-green-600 disabled:opacity-50",title:"Copy",children:s.jsx(fd,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>w(_),disabled:!p,className:"p-2 text-stone-500 hover:text-blue-600 disabled:opacity-50",title:"Edit",children:s.jsx(mo,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>b(_.id),disabled:!p,className:"p-2 text-stone-500 hover:text-red-600 disabled:opacity-50",title:"Delete",children:s.jsx(Qo,{className:"w-5 h-5"})})]})]},_.id)})}):s.jsx("div",{className:"text-center py-12 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-dashed border-stone-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["No product profiles found for ",Yc[m],"."]})})]})},On=({label:t,value:e})=>s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 py-3 border-b border-stone-200 dark:border-gray-700/50 last:border-b-0",children:[s.jsx("dt",{className:"text-sm text-stone-600 dark:text-stone-400 sm:col-span-1",children:t}),s.jsx("dd",{className:"text-sm font-medium text-stone-800 dark:text-stone-200 sm:col-span-2",children:e||"Not Set"})]}),Kc=({title:t,children:e,editLabel:n,onEdit:r,footerContent:o,headerActions:l})=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex justify-between items-center",children:[s.jsx("h3",{className:"text-sm font-bold text-stone-600 dark:text-stone-400 uppercase tracking-wider",children:t}),s.jsxs("div",{className:"flex items-center gap-2",children:[l,s.jsx(wt,{variant:"secondary",onClick:r,children:n})]})]}),s.jsx("div",{className:"p-6",children:s.jsx("dl",{children:e})}),o&&s.jsx("div",{className:"px-6 py-4 border-t dark:border-gray-700 bg-stone-50 dark:bg-gray-800/50 rounded-b-lg",children:o})]}),k5=({systemSettings:t,onEdit:e,onNavigate:n})=>{const r=t.workingWeek.join(" to "),o={MDY:"Month Day, Year",DMY:"Day Month, Year",YMD:"Year, Month Day"},l={"12h":"12 hour clock","24h":"24 hour clock"};return s.jsxs("div",{children:[s.jsx(Na,{title:"System Settings",subtitle:"An overview of your company's global settings."}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs(Kc,{title:"General Settings",editLabel:"Edit General Settings",onEdit:e,children:[s.jsx(On,{label:"Company Name",value:t.companyName}),s.jsx(On,{label:"Address",value:t.companyAddress?po(t.companyAddress):"Not set"}),s.jsx(On,{label:"Phone",value:t.companyPhone}),s.jsx(On,{label:"Email",value:t.companyEmail}),s.jsx(On,{label:"Website",value:t.companyWebsite}),s.jsx(On,{label:"Default Language",value:"English"}),s.jsx(On,{label:"Time Zone",value:t.timezone}),s.jsx(On,{label:"Date Format",value:o[t.dateFormat]}),s.jsx(On,{label:"Time Format",value:l[t.timeFormat]}),s.jsx(On,{label:"First Day of the Week",value:t.firstDayOfWeek}),s.jsx(On,{label:"Workdays",value:r})]}),s.jsxs(Kc,{title:"Project",editLabel:"Edit Project Settings",onEdit:()=>n("project"),children:[s.jsx(On,{label:"Lead Number Prefix",value:t.leadNumberPrefix}),s.jsx(On,{label:"Next Lead Number",value:t.leadNextNumber}),s.jsx(On,{label:"Project Number Prefix",value:t.projectNumberPrefix}),s.jsx(On,{label:"Next Project Number",value:t.projectNextNumber}),s.jsx(On,{label:"Lead Statuses",value:t.labels.leads.map(u=>u.name).join(", ")}),s.jsx(On,{label:"Sales Statuses",value:t.labels.sales.map(u=>u.name).join(", ")}),s.jsx(On,{label:"Survey Statuses",value:t.labels.survey.map(u=>u.name).join(", ")}),s.jsx(On,{label:"Production Statuses",value:t.labels.production.map(u=>u.name).join(", ")})]}),s.jsxs(Kc,{title:"Quotes & Invoicing",editLabel:"Edit Quotes & Invoicing Settings",onEdit:()=>n("invoicing"),headerActions:s.jsx(wt,{variant:"secondary",onClick:()=>{},children:"Invoice Designer"}),children:[s.jsx(On,{label:"Default Currency",value:t.currency}),s.jsx(On,{label:"Tax Rates",value:"VAT (17.5%)"}),s.jsx(On,{label:"Second Tax",value:"Disabled"}),s.jsx(On,{label:"Grouping",value:"Keep invoice items separate"}),s.jsx(On,{label:"Item Templates",value:"None"}),s.jsx(On,{label:"Note Templates",value:"None"}),s.jsx(On,{label:"Issued Invoice Due",value:"After 15 days (NET15)"}),s.jsx(On,{label:"Overdue Reminders",value:"None"})]}),s.jsxs(Kc,{title:"Email Integration (SMTP)",editLabel:"Edit SMTP Settings",onEdit:()=>n("email_smtp"),children:[s.jsx(On,{label:"SMTP Server",value:t.smtpServer}),s.jsx(On,{label:"Port",value:t.smtpPort}),s.jsx(On,{label:"Encryption",value:t.smtpEncryption}),s.jsx(On,{label:"Username",value:t.smtpUser}),s.jsx(On,{label:"From Address",value:t.smtpFromAddress})]})]})]})},X0=["Timber","Cill","Finish","Glass","Ironmongery","Other"],T5=({isOpen:t,onClose:e,onSave:n,material:r})=>{const[o,l]=Pe.useState({});Pe.useEffect(()=>{t&&l(r||{name:"",type:"Timber",color:"#D3B48C"})},[t,r]);const u=(p,v)=>{l(w=>({...w,[p]:v}))},f=(p,v)=>{const w=parseFloat(v);u(p,isNaN(w)?void 0:w)},m=p=>{if(p.preventDefault(),!o.name||!o.type){alert("Please provide a name and type.");return}n({id:(r==null?void 0:r.id)||`mat-${Date.now()}`,...o}),e()};return s.jsx(ba,{isOpen:t,onClose:e,title:r?"Edit Material":"Add New Material",children:s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsx(kt,{type:"text",placeholder:"Material Name",value:o.name||"",onChange:p=>u("name",p.target.value),required:!0}),s.jsx(Nn,{value:o.type||"",onChange:p=>u("type",p.target.value),children:X0.map(p=>s.jsx("option",{value:p,children:p},p))}),(o.type==="Timber"||o.type==="Finish"||o.type==="Cill"||o.type==="Glass")&&s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("label",{className:"text-sm font-medium",children:"Display Color"}),s.jsx(kt,{type:"text",value:o.color||"",onChange:p=>u("color",p.target.value),placeholder:"#RRGGBB"})]}),s.jsx(kt,{type:"color",value:o.color||"#ffffff",onChange:p=>u("color",p.target.value),className:"p-1 h-10 w-10 mt-5"})]}),o.type==="Timber"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Density (kg/m)"}),s.jsx(kt,{type:"number",placeholder:"e.g. 510",value:o.density??"",onChange:p=>f("density",p.target.value)})]}),o.type==="Glass"&&s.jsxs("div",{className:"space-y-4 pt-2 border-t dark:border-gray-600",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Specification (e.g., 4-16-4T)"}),s.jsx(kt,{type:"text",value:o.spec||"",onChange:p=>u("spec",p.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Thickness (mm)"}),s.jsx(kt,{type:"number",value:o.thickness??"",onChange:p=>f("thickness",p.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"U-Value (W/mK)"}),s.jsx(kt,{type:"number",step:"0.01",value:o.uValue??"",onChange:p=>f("uValue",p.target.value)})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t dark:border-gray-700",children:[s.jsx(wt,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),s.jsx(wt,{type:"submit",children:"Save Material"})]})]})})},hu=({title:t,materials:e,onEdit:n,onDelete:r,canEdit:o})=>e.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 overflow-hidden",children:[s.jsx("h3",{className:"font-semibold text-lg p-4 bg-stone-50 dark:bg-gray-700/50 border-b dark:border-gray-700",children:t}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"border-b dark:border-gray-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400",children:"Name"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400",children:"Color"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400",children:"Spec"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400 text-right",children:"U-Value"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400 text-right",children:"Thickness"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400 text-right",children:"Density"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-xs text-stone-500 dark:text-stone-400"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:e.map(l=>{var u;return s.jsxs("tr",{children:[s.jsx("td",{className:"p-3 font-medium whitespace-nowrap",children:l.name}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:l.color?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-5 h-5 rounded border dark:border-gray-600",style:{backgroundColor:l.color}}),s.jsx("span",{className:"font-mono",children:l.color})]}):s.jsx("span",{className:"text-gray-400",children:"N/A"})}),s.jsx("td",{className:"p-3 whitespace-nowrap",children:l.spec||s.jsx("span",{className:"text-gray-400",children:"N/A"})}),s.jsx("td",{className:"p-3 text-right whitespace-nowrap",children:((u=l.uValue)==null?void 0:u.toFixed(2))||s.jsx("span",{className:"text-gray-400",children:"N/A"})}),s.jsx("td",{className:"p-3 text-right whitespace-nowrap",children:l.thickness||s.jsx("span",{className:"text-gray-400",children:"N/A"})}),s.jsx("td",{className:"p-3 text-right whitespace-nowrap",children:l.density||s.jsx("span",{className:"text-gray-400",children:"N/A"})}),s.jsxs("td",{className:"p-3 text-right whitespace-nowrap",children:[s.jsx("button",{onClick:()=>n(l),disabled:!o,className:"p-1 text-stone-500 hover:text-blue-600 disabled:opacity-50",children:s.jsx(mo,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(l.id),disabled:!o,className:"p-1 text-stone-500 hover:text-red-600 disabled:opacity-50",children:s.jsx(Qo,{className:"w-4 h-4"})})]})]},l.id)})})]})})]}),I5=({materials:t,setMaterials:e,onImportMaterials:n,hasPermission:r})=>{const[o,l]=Pe.useState(!1),[u,f]=Pe.useState(null),m=Pe.useRef(null),p=r("manageSettings"),v=Pe.useMemo(()=>t.reduce((T,P)=>(T[P.type]||(T[P.type]=[]),T[P.type].push(P),T),{}),[t]),w=T=>{f(T),l(!0)},N=()=>{f(null),l(!0)},b=T=>{const P=!t.some(q=>q.id===T.id);e(q=>P?[...q,T]:q.map(J=>J.id===T.id?T:J)),l(!1)},I=T=>{t.find(q=>q.id===T)&&window.confirm("Are you sure you want to delete this material? This may affect existing product profiles.")&&e(q=>q.filter(J=>J.id!==T))},_=()=>{const q="data:text/csv;charset=utf-8,"+[["type","name","color","spec","uValue","thickness","density"].join(","),"Timber,Sample Oak,#B89F7E,,,,,720","Finish,Sample Blue,#3B82F6,,,,,","Glass,Sample Safety Glass,#e0f2fe,4T-16-4T,1.2,24,","Ironmongery,Sample Handles,,,,,"].join(`
`),J=encodeURI(q),K=document.createElement("a");K.setAttribute("href",J),K.setAttribute("download","materials_template.csv"),document.body.appendChild(K),K.click(),document.body.removeChild(K)},E=T=>{var J;const P=(J=T.target.files)==null?void 0:J[0];if(!P)return;const q=new FileReader;q.onload=K=>{var $;const fe=($=K.target)==null?void 0:$.result,ne=[];fe.split(`
`).slice(1).forEach(he=>{const[R,D,H,O,ge,xe,ie]=he.split(",").map(Y=>Y.trim());R&&D&&X0.includes(R)&&ne.push({id:`mat-${Date.now()}-${Math.random()}`,type:R,name:D,color:H||void 0,spec:O||void 0,uValue:ge?parseFloat(ge):void 0,thickness:xe?parseFloat(xe):void 0,density:ie?parseInt(ie):void 0})}),ne.length>0?n(ne):alert("No valid materials found in the file.")},q.readAsText(P),T.target.value=""};return s.jsxs("div",{children:[s.jsx("input",{type:"file",accept:".csv",ref:m,onChange:E,className:"hidden"}),s.jsx(Na,{title:"Materials Library",subtitle:"Manage all materials available for use in products and quotes."}),s.jsxs("div",{className:"flex gap-2 mb-6",children:[s.jsx(wt,{onClick:N,disabled:!p,icon:Ts,children:"Add Manually"}),s.jsx(wt,{variant:"secondary",onClick:()=>{var T;return(T=m.current)==null?void 0:T.click()},disabled:!p,icon:Mf,children:"Import from CSV"}),s.jsx(wt,{variant:"secondary",onClick:_,icon:ah,children:"Download Template"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(hu,{title:"Timber",materials:v.Timber||[],onEdit:w,onDelete:I,canEdit:p}),s.jsx(hu,{title:"Cills",materials:v.Cill||[],onEdit:w,onDelete:I,canEdit:p}),s.jsx(hu,{title:"Finishes",materials:v.Finish||[],onEdit:w,onDelete:I,canEdit:p}),s.jsx(hu,{title:"Glass",materials:v.Glass||[],onEdit:w,onDelete:I,canEdit:p}),s.jsx(hu,{title:"Ironmongery",materials:v.Ironmongery||[],onEdit:w,onDelete:I,canEdit:p}),s.jsx(hu,{title:"Other",materials:v.Other||[],onEdit:w,onDelete:I,canEdit:p})]}),s.jsx(T5,{isOpen:o,onClose:()=>l(!1),material:u,onSave:b})]})},A5=({systemSettings:t,setSystemSettings:e,hasPermission:n,onBack:r})=>{const o=n("manageSettings"),l=(f,m)=>{e(p=>({...p,[f]:m}))},u=()=>{r()};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Email Integration (SMTP)"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mt-1",children:"Configure your own email server to send emails directly from the app."})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(wt,{variant:"secondary",onClick:r,icon:hl,children:"Back to Settings"})})]}),s.jsx("div",{className:"max-w-2xl",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"SMTP Server"}),s.jsx(kt,{type:"text",placeholder:"smtp.example.com",value:t.smtpServer||"",onChange:f=>l("smtpServer",f.target.value),disabled:!o,className:"mt-1"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Port"}),s.jsx(kt,{type:"number",placeholder:"587",value:t.smtpPort||"",onChange:f=>l("smtpPort",Number(f.target.value)),disabled:!o,className:"mt-1"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Encryption"}),s.jsxs(Nn,{value:t.smtpEncryption||"starttls",onChange:f=>l("smtpEncryption",f.target.value),disabled:!o,className:"mt-1",children:[s.jsx("option",{value:"none",children:"None"}),s.jsx("option",{value:"ssl",children:"SSL/TLS"}),s.jsx("option",{value:"starttls",children:"STARTTLS"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),s.jsx(kt,{type:"text",placeholder:"your-email@example.com",value:t.smtpUser||"",onChange:f=>l("smtpUser",f.target.value),disabled:!o,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),s.jsx(kt,{type:"password",placeholder:"",value:t.smtpPass||"",onChange:f=>l("smtpPass",f.target.value),disabled:!o,className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:'"From" Address'}),s.jsx(kt,{type:"email",placeholder:"sales@example.com",value:t.smtpFromAddress||"",onChange:f=>l("smtpFromAddress",f.target.value),disabled:!o,className:"mt-1"})]}),s.jsxs("div",{className:"pt-4 border-t dark:border-gray-600 flex justify-end gap-3",children:[s.jsx(wt,{variant:"secondary",disabled:!o,onClick:()=>alert("Test connection not implemented."),children:"Test Connection"}),s.jsx(wt,{disabled:!o,onClick:u,children:"Save SMTP Settings"})]})]})})})]})},_5=({label:t,checked:e,onChange:n,disabled:r})=>s.jsxs("label",{htmlFor:t,className:`flex items-center cursor-pointer ${r?"opacity-50 cursor-not-allowed":""}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"checkbox",id:t,className:"sr-only",checked:e,onChange:o=>n(o.target.checked),disabled:r}),s.jsx("div",{className:`block w-14 h-8 rounded-full ${r?"bg-gray-400":"bg-gray-600"}`}),s.jsx("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"})]}),s.jsx("div",{className:"ml-3 text-gray-700 dark:text-gray-300 font-medium",children:t}),s.jsx("style",{children:`
            input:checked ~ .dot {
                transform: translateX(100%);
            }
            input:checked ~ .block {
                background-color: #2563eb;
            }
        `})]}),E5=({systemSettings:t,setSystemSettings:e})=>{const n=(r,o)=>{e(l=>{const u=new Set(l.enabledModules);return o?u.add(r):u.delete(r),{...l,enabledModules:Array.from(u)}})};return s.jsxs("div",{children:[s.jsx(Na,{title:"Developer Settings",subtitle:"Enable or disable application modules for all users."}),s.jsx("div",{className:"max-w-md",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Module Management"}),s.jsx("div",{className:"space-y-4",children:q1.map(r=>s.jsx(_5,{label:r.name,checked:t.enabledModules.includes(r.id),onChange:o=>n(r.id,o),disabled:r.disabled},r.id))})]})})]})},Z0=(t,e)=>t.filter(n=>n.type===e).map(n=>s.jsx("option",{value:n.id,children:n.name},n.id)),L5=({onBulkUpdate:t,materials:e,selectedCount:n,itemType:r})=>{const[o,l]=Pe.useState(""),[u,f]=Pe.useState(""),m=()=>{o&&u!==""&&t(o,u)},v=[{value:"frameThickness",label:"Frame Thickness",type:"number"},{value:"rebateWidth",label:"Rebate Width",type:"number"},{value:"rebateDepth",label:"Rebate Depth",type:"number"},{value:"outerHeadHeight",label:"Outer Head",type:"number"},{value:"outerCillHeight",label:"Outer Cill",type:"number"},{value:"outerLeftJambWidth",label:"Outer Left Jamb",type:"number"},{value:"outerRightJambWidth",label:"Outer Right Jamb",type:"number"},{value:"outerMullionWidth",label:"Outer Mullion",type:"number"},{value:"outerTransomHeight",label:"Outer Transom",type:"number"},{value:"innerHeightHeight",label:"Inner Head",type:"number"},{value:"innerCillHeight",label:"Inner Cill",type:"number"},{value:"innerLeftJambWidth",label:"Inner Left Jamb",type:"number"},{value:"innerRightJambWidth",label:"Inner Right Jamb",type:"number"},{value:"innerMullionWidth",label:"Inner Mullion",type:"number"},{value:"innerTransomHeight",label:"Inner Transom",type:"number"},{value:"topRailHeight",label:"Top Rail",type:"number"},{value:"stileWidth",label:"Stile",type:"number"},{value:"bottomRailHeight",label:"Bottom Rail",type:"number"},{value:"meetingRailHeight",label:"Meeting Rail",type:"number",itemTypes:["Sash"]},{value:"openingDirection",label:"Opening Direction",type:"select_custom",options:["inward","outward"],itemTypes:["Casement","Door","Screen"]},{value:"glazingType",label:"Glazing Type",type:"select_custom",options:["internally","externally"],itemTypes:["Casement","Door","Screen"]},{value:"materialFrameId",label:"Frame Material",type:"select",options:"Timber"},{value:"materialSashId",label:"Sash Material",type:"select",options:"Timber"},{value:"materialCillId",label:"Cill Material",type:"select",options:"Cill"},{value:"defaultGlassTypeId",label:"Default Glass",type:"select",options:"Glass"}].filter(N=>!N.itemTypes||r&&N.itemTypes.includes(r)),w=v.find(N=>N.value===o);return s.jsxs("div",{className:"p-4 border border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 rounded-lg mb-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:`Bulk Edit (${n} selected)`}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsxs(Nn,{label:"Field to Update",value:o,onChange:N=>{l(N.target.value),f("")},children:[s.jsx("option",{value:"",children:"-- Select Field --"}),v.map(N=>s.jsx("option",{value:N.value,children:N.label},N.value))]}),(w==null?void 0:w.type)==="number"&&s.jsx(kt,{label:"New Value",type:"number",value:u,onChange:N=>f(Number(N.target.value))}),(w==null?void 0:w.type)==="select"&&s.jsxs(Nn,{label:"New Value",value:u,onChange:N=>f(N.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),Z0(e,w.options)]}),(w==null?void 0:w.type)==="select_custom"&&s.jsxs(Nn,{label:"New Value",value:u,onChange:N=>f(N.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),w.options.map(N=>s.jsx("option",{value:N,children:N},N))]}),s.jsx(wt,{onClick:m,disabled:!o,children:"Apply to Selected"})]})]})},P5=({onAdd:t,disabled:e})=>{const[n,r]=Pe.useState(!1),o=Pe.useRef(null);Pe.useEffect(()=>{const u=f=>{o.current&&!o.current.contains(f.target)&&r(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const l=["Sash","Casement","Door","Screen"];return s.jsxs("div",{className:"relative",ref:o,children:[s.jsx(wt,{onClick:()=>r(!n),disabled:e,children:"Add Range"}),n&&s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg border dark:border-gray-700 z-10",children:s.jsx("ul",{className:"py-1",children:l.map(u=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>{t(u),r(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:["New ",u," Range"]})},u))})})]})},M5=({productRanges:t,setProductRanges:e,materials:n,canEdit:r})=>{const[o,l]=Pe.useState([]),[u,f]=Pe.useState(new Set);Pe.useEffect(()=>{l(JSON.parse(JSON.stringify(t)))},[t]);const m=JSON.stringify(t)!==JSON.stringify(o),p=J=>{var fe,ne,X,$;const K={id:`range-${Date.now()}`,name:`New ${J} Range`,itemType:J,frameThickness:70,rebateWidth:12,rebateDepth:15,openingDirection:J!=="Sash"?"outward":void 0,glazingType:J!=="Sash"?"externally":void 0,outerHeadHeight:80,outerCillHeight:80,outerLeftJambWidth:80,outerRightJambWidth:80,outerTransomHeight:80,outerMullionWidth:80,innerHeightHeight:80,innerCillHeight:80,innerLeftJambWidth:80,innerRightJambWidth:80,innerTransomHeight:80,innerMullionWidth:80,topRailHeight:80,bottomRailHeight:80,meetingRailHeight:J==="Sash"?30:0,stileWidth:80,materialSashId:((fe=n.find(he=>he.type==="Timber"))==null?void 0:fe.id)||"",materialFrameId:((ne=n.find(he=>he.type==="Timber"))==null?void 0:ne.id)||"",materialCillId:((X=n.find(he=>he.type==="Cill"))==null?void 0:X.id)||"",defaultGlassTypeId:(($=n.find(he=>he.type==="Glass"))==null?void 0:$.id)||""};l(he=>[...he,K])},v=(J,K,fe)=>{l(ne=>ne.map(X=>X.id===J?{...X,[K]:fe}:X))},w=(J,K)=>{f(fe=>{const ne=new Set(fe);return K?ne.add(J):ne.delete(J),ne})},N=J=>{J.target.checked?f(new Set(o.map(K=>K.id))):f(new Set)},b=()=>{window.confirm(`Are you sure you want to delete ${u.size} range(s)?`)&&(l(J=>J.filter(K=>!u.has(K.id))),f(new Set))},I=(J,K)=>{l(fe=>fe.map(ne=>u.has(ne.id)?{...ne,[J]:K}:ne))},_=()=>{e(o)},E=()=>{window.confirm("Are you sure you want to discard all changes?")&&l(JSON.parse(JSON.stringify(t)))},T=Pe.useMemo(()=>{if(u.size===0)return null;const J=o.filter(ne=>u.has(ne.id));if(J.length===0)return null;const K=J[0].itemType;return J.every(ne=>ne.itemType===K)?K:null},[u,o]),P=Pe.useMemo(()=>[...o].sort((J,K)=>J.itemType.localeCompare(K.itemType)||J.name.localeCompare(K.name)),[o]),q=[{key:"frameThickness",label:"Thk",type:"number"},{key:"rebateWidth",label:"Rb. W",type:"number"},{key:"rebateDepth",label:"Rb. D",type:"number"},{key:"outerHeadHeight",label:"Head",type:"number"},{key:"outerCillHeight",label:"Cill",type:"number"},{key:"outerLeftJambWidth",label:"L Jamb",type:"number"},{key:"outerRightJambWidth",label:"R Jamb",type:"number"},{key:"outerMullionWidth",label:"Mullion",type:"number"},{key:"outerTransomHeight",label:"Transom",type:"number"},{key:"innerHeightHeight",label:"Head",type:"number"},{key:"innerCillHeight",label:"Cill",type:"number"},{key:"innerLeftJambWidth",label:"L Jamb",type:"number"},{key:"innerRightJambWidth",label:"R Jamb",type:"number"},{key:"innerMullionWidth",label:"Mullion",type:"number"},{key:"innerTransomHeight",label:"Transom",type:"number"},{key:"topRailHeight",label:"Top Rail",type:"number"},{key:"stileWidth",label:"Stile",type:"number"},{key:"bottomRailHeight",label:"Bottom",type:"number"},{key:"meetingRailHeight",label:"Meeting",type:"number",itemTypes:["Sash"]},{key:"openingDirection",label:"Direction",type:"select_custom",options:["inward","outward"],itemTypes:["Casement","Door","Screen"]},{key:"glazingType",label:"Type",type:"select_custom",options:["internally","externally"],itemTypes:["Casement","Door","Screen"]},{key:"materialFrameId",label:"Frame",type:"select",options:"Timber"},{key:"materialSashId",label:"Sash",type:"select",options:"Timber"},{key:"materialCillId",label:"Cill",type:"select",options:"Cill"},{key:"defaultGlassTypeId",label:"Glass",type:"select",options:"Glass",optional:!0}];return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx(Na,{title:"Product Ranges",subtitle:"Manage reusable sets of specifications for your products in a grid."}),s.jsx(P5,{onAdd:p,disabled:!r})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-4 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(wt,{variant:"danger",onClick:b,disabled:!r||u.size===0,children:["Delete (",u.size,")"]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wt,{variant:"secondary",onClick:E,disabled:!m||!r,children:"Discard Changes"}),s.jsx(wt,{onClick:_,disabled:!m||!r,children:"Save Changes"})]})]}),u.size>0&&(T?s.jsx(L5,{materials:n,onBulkUpdate:I,selectedCount:u.size,itemType:T}):s.jsx("div",{className:"p-4 border border-yellow-200 dark:border-yellow-800 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:s.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200",children:"Mixed item types selected. Bulk editing is disabled."})}))]}),s.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-4",children:[s.jsx("div",{className:"overflow-x-auto border dark:border-gray-700 rounded-lg",children:s.jsxs("table",{className:"w-full text-left text-sm whitespace-nowrap",children:[s.jsxs("thead",{className:"bg-stone-50 dark:bg-gray-700/50 text-xs uppercase tracking-wider",children:[s.jsxs("tr",{children:[s.jsx("th",{rowSpan:2,className:"p-2 bg-stone-50 dark:bg-gray-700/50",children:s.jsx("input",{type:"checkbox",onChange:N,checked:u.size===o.length&&o.length>0,disabled:o.length===0})}),s.jsx("th",{rowSpan:2,className:"p-2 font-semibold bg-stone-50 dark:bg-gray-700/50 min-w-[120px]",children:"Range Name"}),s.jsx("th",{rowSpan:2,className:"p-2 font-semibold bg-stone-50 dark:bg-gray-700/50 min-w-[100px]",children:"Item Type"}),s.jsx("th",{colSpan:3,className:"p-2 font-semibold text-center border-b border-l border-stone-200 dark:border-gray-600",children:"Frame"}),s.jsx("th",{colSpan:6,className:"p-2 font-semibold text-center border-b border-l border-stone-200 dark:border-gray-600",children:"Outer Frame"}),s.jsx("th",{colSpan:6,className:"p-2 font-semibold text-center border-b border-l border-stone-200 dark:border-gray-600",children:"Inner Frame"}),s.jsx("th",{colSpan:4,className:"p-2 font-semibold text-center border-b border-l border-stone-200 dark:border-gray-600",children:"Sash"}),s.jsx("th",{colSpan:2,className:"p-2 font-semibold text-center border-b border-l border-stone-200 dark:border-gray-600",children:"Opening & Glazing"}),s.jsx("th",{colSpan:4,className:"p-2 font-semibold text-center border-b border-l border-stone-200 dark:border-gray-600",children:"Materials & Glass"})]}),s.jsx("tr",{children:q.map(J=>s.jsx("th",{className:"p-2 font-semibold border-l border-stone-200 dark:border-gray-600",children:J.label},J.key))})]}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:P.map(J=>s.jsxs("tr",{className:`${u.has(J.id)?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"checkbox",checked:u.has(J.id),onChange:K=>w(J.id,K.target.checked)})}),s.jsx("td",{className:"p-1 min-w-[120px]",children:s.jsx(kt,{type:"text",value:J.name||"",onChange:K=>v(J.id,"name",K.target.value),disabled:!r,className:"text-sm p-1"})}),s.jsx("td",{className:"p-2 min-w-[100px] text-stone-600 dark:text-stone-300",children:J.itemType}),q.map(K=>{const fe=J[K.key],ne=!r||K.itemTypes&&!K.itemTypes.includes(J.itemType);return s.jsx("td",{className:"p-1 text-center border-l border-stone-100 dark:border-gray-700",children:K.type==="number"?s.jsx(kt,{type:"number",value:fe??"",onChange:X=>v(J.id,K.key,X.target.value===""?void 0:Number(X.target.value)),disabled:ne,className:"text-sm p-1 w-16 text-center"}):K.type==="select"?s.jsxs(Nn,{value:fe||"",onChange:X=>v(J.id,K.key,X.target.value),disabled:ne,className:"text-sm p-1 w-32",children:[K.optional&&s.jsx("option",{value:"",children:"-- None --"}),Z0(n,K.options)]}):s.jsx(Nn,{value:fe||"",onChange:X=>v(J.id,K.key,X.target.value),disabled:ne,className:"text-sm p-1 w-28 capitalize",children:K.options.map(X=>s.jsx("option",{value:X,children:X},X))})},`${J.id}-${K.key}`)})]},J.id))})]})}),o.length===0&&s.jsx("p",{className:"text-center text-stone-500 py-8",children:"No product ranges configured."})]})]})},j5=({template:t})=>{var r;const e=(r=t.layout)!=null&&r.instances&&t.layout.instances.length>0?t.layout.instances:[{id:"preview-instance",overallWidth:1200,overallHeight:1500}],n={id:"preview-component",itemNumber:"0",quantity:1,location:t.name,itemType:t.itemType,productRangeId:"",viewType:"External View",isNewFrame:!1,isInstallation:!1,installationLevel:1,fitToPreparedOpening:!1,materialSashId:"",materialFrameId:"",materialCillId:"",windowInstances:e,frameInfo:{thickness:70,outer:{head:70,cill:70,leftJamb:70,rightJamb:70,transom:70,mullion:70},inner:{head:70,cill:70,leftJamb:70,rightJamb:70,transom:70,mullion:70}},sashInfo:t.sashInfo,ironmongery:{hinges:"",mpls:""},openingDirection:"outward",masterSash:"Left",mullions:t.layout.mullions,transoms:t.layout.transoms,placedSashes:t.layout.placedSashes,paneGlassTypes:[],glazingBarThickness:25,glazingBarType:"plant-on",sashOpening:"both",price:0};return s.jsx("div",{className:"w-full h-full bg-stone-100 dark:bg-gray-700/50 rounded-t-lg flex items-center justify-center p-2",children:s.jsx(Cd,{item:n,materials:[],showDimensions:!1,showHinges:!0})})},D5=t=>{if(!t||t.length===0)return"Component";if(t.length===1)return`${t[0]} Component`;const e=t[t.length-1];return`${t.slice(0,-1).join(", ")} and ${e} Component`},R5=({componentTemplates:t,setComponentTemplates:e,hasPermission:n,navigateTo:r,addToast:o})=>{const l=n("manageProductConfigurations"),u=()=>{r({view:"componentEditor"})},f=v=>{r({view:"componentEditor",templateId:v.id})},m=v=>{window.confirm(`Are you sure you want to delete the component "${v.name}"?`)&&(e(w=>w.filter(N=>N.id!==v.id)),o("Component template deleted.","info"))},p=v=>{if(!l)return;const w=JSON.parse(JSON.stringify(v));if(w.id=`ct-${Date.now()}`,w.name=`${v.name} (Copy)`,w.layout){const N=w.layout;if(N.instances){const b=new Map;N.instances=N.instances.map(I=>{const _=I.id,E=`inst-ct-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return b.set(_,E),{...I,id:E}}),N.placedSashes&&(N.placedSashes=N.placedSashes.map(I=>{var T;let _=I.paneId;for(const[P,q]of b.entries())if(I.paneId.startsWith(P)){_=I.paneId.replace(P,q);break}const E=(T=I.glazingBars)==null?void 0:T.map(P=>({...P,id:`gb-ct-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}));return{...I,paneId:_,glazingBars:E}}))}N.mullions&&(N.mullions=N.mullions.map(b=>({...b,id:`m-ct-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),N.transoms&&(N.transoms=N.transoms.map(b=>({...b,id:`t-ct-${Date.now()}-${Math.random().toString(36).substring(2,9)}`})))}e(N=>[...N,w]),o(`Component copied. Now editing "${w.name}".`,"success"),r({view:"componentEditor",templateId:w.id})};return s.jsxs("div",{children:[s.jsx(Na,{title:"Component Templates",subtitle:"Manage reusable window and door components like sashes, leafs, or fixed lights.",onAdd:u,addLabel:"Add Component",addDisabled:!l}),t.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-6",children:t.map(v=>{const w=D5(v.applicableTo);return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 flex flex-col",children:[s.jsx("div",{className:"h-48",children:s.jsx(j5,{template:v})}),s.jsxs("div",{className:"p-3 border-t dark:border-gray-700 flex-grow",children:[s.jsx("p",{className:"font-semibold truncate",title:v.name,children:v.name}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 truncate",title:w,children:w})]}),s.jsxs("div",{className:"p-2 border-t dark:border-gray-700 mt-auto bg-stone-50 dark:bg-gray-800/50 flex justify-end gap-1",children:[s.jsx("button",{onClick:()=>p(v),disabled:!l,className:"p-2 text-stone-500 hover:text-green-600 disabled:opacity-50",title:"Copy",children:s.jsx(fd,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>f(v),disabled:!l,className:"p-2 text-stone-500 hover:text-blue-600 disabled:opacity-50",title:"Edit",children:s.jsx(mo,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>m(v),disabled:!l,className:"p-2 text-stone-500 hover:text-red-600 disabled:opacity-50",title:"Delete",children:s.jsx(Qo,{className:"w-5 h-5"})})]})]},v.id)})}):s.jsx("div",{className:"text-center py-12 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border-2 border-dashed border-stone-200 dark:border-gray-700",children:s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:"No component templates found."})})]})},tp=({title:t,children:e})=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:s.jsx("h3",{className:"text-lg font-semibold text-stone-800 dark:text-stone-100",children:t})}),s.jsx("div",{className:"p-6 space-y-4",children:e})]}),F5=({selectedDays:t,onChange:e,disabled:n})=>{const r=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],o=l=>{const u=new Set(t);u.has(l)?u.delete(l):u.add(l),e(Array.from(u))};return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Workdays"}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:r.map(l=>s.jsx("button",{type:"button",onClick:()=>!n&&o(l),disabled:n,className:`px-3 py-1.5 text-sm font-medium rounded-full border transition-colors ${t.includes(l)?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-700 border-stone-300 dark:border-gray-600 hover:bg-stone-100 dark:hover:bg-gray-600"}`,children:l.substring(0,3)},l))})]})},B5=({systemSettings:t,setSystemSettings:e,hasPermission:n,onBack:r})=>{var v,w,N,b;const[o,l]=Pe.useState(t),u=n("manageSettings");Pe.useEffect(()=>{l(t)},[t]);const f=(I,_)=>{l(E=>({...E,[I]:_}))},m=(I,_)=>{l(E=>({...E,companyAddress:{...E.companyAddress,[I]:_}}))},p=()=>{e(o),r()};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Edit General Settings"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mt-1",children:"Update your company's general and profile settings."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(wt,{variant:"secondary",onClick:r,icon:hl,children:"Back to Overview"}),s.jsx(wt,{onClick:p,disabled:!u,icon:Iu,children:"Save Changes"})]})]}),s.jsx("div",{className:"max-w-[600px] mx-auto",children:s.jsxs("div",{className:"space-y-8",children:[s.jsxs(tp,{title:"Company Profile",children:[s.jsx(kt,{label:"Company Name",value:o.companyName||"",onChange:I=>f("companyName",I.target.value),disabled:!u}),s.jsx(kt,{label:"Address Line 1",value:((v=o.companyAddress)==null?void 0:v.line1)||"",onChange:I=>m("line1",I.target.value),disabled:!u}),s.jsx(kt,{label:"Town/City",value:((w=o.companyAddress)==null?void 0:w.townCity)||"",onChange:I=>m("townCity",I.target.value),disabled:!u}),s.jsx(kt,{label:"County",value:((N=o.companyAddress)==null?void 0:N.county)||"",onChange:I=>m("county",I.target.value),disabled:!u}),s.jsx(kt,{label:"Postcode",value:((b=o.companyAddress)==null?void 0:b.postcode)||"",onChange:I=>m("postcode",I.target.value),disabled:!u}),s.jsx(kt,{label:"Phone",value:o.companyPhone||"",onChange:I=>f("companyPhone",I.target.value),disabled:!u}),s.jsx(kt,{label:"Email",value:o.companyEmail||"",onChange:I=>f("companyEmail",I.target.value),disabled:!u}),s.jsx(kt,{label:"Website",value:o.companyWebsite||"",onChange:I=>f("companyWebsite",I.target.value),disabled:!u})]}),s.jsxs(tp,{title:"Regional & Calendar Settings",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsx(kt,{label:"Time Zone",value:o.timezone,onChange:I=>f("timezone",I.target.value),disabled:!u}),s.jsx(kt,{label:"Working Hours Start",type:"number",value:o.workingHoursStart,onChange:I=>f("workingHoursStart",parseInt(I.target.value)),disabled:!u}),s.jsx(kt,{label:"Working Hours End",type:"number",value:o.workingHoursEnd,onChange:I=>f("workingHoursEnd",parseInt(I.target.value)),disabled:!u})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[s.jsxs(Nn,{label:"Date Format",value:o.dateFormat||"MDY",onChange:I=>f("dateFormat",I.target.value),disabled:!u,children:[s.jsx("option",{value:"MDY",children:"Month Day, Year"}),s.jsx("option",{value:"DMY",children:"Day Month, Year"}),s.jsx("option",{value:"YMD",children:"Year, Month Day"})]}),s.jsxs(Nn,{label:"Time Format",value:o.timeFormat||"24h",onChange:I=>f("timeFormat",I.target.value),disabled:!u,children:[s.jsx("option",{value:"24h",children:"24 hour clock"}),s.jsx("option",{value:"12h",children:"12 hour clock (am/pm)"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs(Nn,{label:"First Day of the Week",value:o.firstDayOfWeek||"Monday",onChange:I=>f("firstDayOfWeek",I.target.value),disabled:!u,children:[s.jsx("option",{value:"Monday",children:"Monday"}),s.jsx("option",{value:"Sunday",children:"Sunday"})]})}),s.jsx("div",{className:"mt-4",children:s.jsx(F5,{selectedDays:o.workingWeek,onChange:I=>f("workingWeek",I),disabled:!u})})]})]})})]})},U5=({systemSettings:t,setSystemSettings:e,hasPermission:n})=>{const[r,o]=Pe.useState(t),l=n("manageSettings");Pe.useEffect(()=>{o(t)},[t]);const u=(m,p)=>{o(v=>({...v,[m]:p}))},f=()=>{e(r)};return s.jsxs("div",{children:[s.jsx(Na,{title:"Quotes & Invoicing Settings",subtitle:"Configure tax rates, payment terms, and currency."}),s.jsx("div",{className:"max-w-2xl",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-6 space-y-4",children:[s.jsxs(Nn,{label:"Default Currency",value:r.currency,onChange:m=>u("currency",m.target.value),disabled:!l,children:[s.jsx("option",{value:"GBP",children:"GBP ()"}),s.jsx("option",{value:"USD",children:"USD ($)"}),s.jsx("option",{value:"EUR",children:"EUR ()"})]}),s.jsx("div",{className:"pt-4 border-t dark:border-gray-600 flex justify-end",children:s.jsx(wt,{onClick:f,disabled:!l,children:"Save Invoicing Settings"})})]})})]})},np=({title:t,children:e})=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:s.jsx("h3",{className:"text-lg font-semibold text-stone-800 dark:text-stone-100",children:t})}),s.jsx("div",{className:"p-6 space-y-4",children:e})]}),Qc=({title:t,labels:e,onUpdate:n,canEdit:r})=>{const[o,l]=Pe.useState(""),[u,f]=Pe.useState("#E5E7EB"),m=()=>{if(o.trim()&&!e.some(w=>w.name.toLowerCase()===o.trim().toLowerCase())){const w={id:`status-${Date.now()}`,name:o.trim(),color:u};n([...e,w]),l(""),f("#E5E7EB")}},p=(w,N,b)=>{n(e.map(I=>I.id===w?{...I,[N]:b}:I))},v=w=>{window.confirm("Are you sure you want to delete this status? This could affect existing records.")&&n(e.filter(N=>N.id!==w))};return s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200 mb-3",children:t}),s.jsx("div",{className:"space-y-2",children:e.map(w=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kt,{type:"text",value:w.name,onChange:N=>p(w.id,"name",N.target.value),disabled:!r||w.isProtected,className:"flex-grow"}),s.jsx(kt,{type:"color",value:w.color,onChange:N=>p(w.id,"color",N.target.value),disabled:!r||w.isProtected,className:"p-1 h-10 w-10"}),w.isProtected?s.jsx("span",{title:"This status is protected and cannot be deleted.",className:"p-2 text-stone-400",children:s.jsx(I1,{className:"w-5 h-5 text-amber-500"})}):s.jsx(wt,{variant:"secondary",size:"sm",onClick:()=>v(w.id),disabled:!r,icon:Qo})]},w.id))}),r&&s.jsxs("div",{className:"flex items-center gap-2 pt-2 mt-2 border-t dark:border-gray-700",children:[s.jsx(kt,{type:"text",placeholder:"Add new status...",value:o,onChange:w=>l(w.target.value),onKeyDown:w=>w.key==="Enter"&&m(),className:"flex-grow"}),s.jsx(kt,{type:"color",value:u,onChange:w=>f(w.target.value),className:"p-1 h-10 w-10"}),s.jsx(wt,{onClick:m,icon:Ts})]})]})},H5=({systemSettings:t,setSystemSettings:e,hasPermission:n,onBack:r})=>{const[o,l]=Pe.useState(t),u=n("manageSettings");Pe.useEffect(()=>{l(t)},[t]);const f=(v,w)=>{l(N=>({...N,[v]:w}))},m=(v,w)=>{l(N=>({...N,labels:{...N.labels,[v]:w}}))},p=()=>{e(o),r()};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx(Na,{title:"Edit Project Settings",subtitle:"Manage numbering, prefixes, and pipeline statuses for projects."}),s.jsx("div",{className:"flex gap-2",children:s.jsx(wt,{onClick:p,disabled:!u,icon:Iu,children:"Save Changes"})})]}),s.jsx("div",{className:"max-w-[600px] mx-auto",children:s.jsxs("div",{className:"space-y-8",children:[s.jsx(np,{title:"Numbering & Prefixes",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx(kt,{label:"Lead Number Prefix",value:o.leadNumberPrefix,onChange:v=>f("leadNumberPrefix",v.target.value),disabled:!u}),s.jsx(kt,{label:"Next Lead Number",type:"number",value:o.leadNextNumber,onChange:v=>f("leadNextNumber",parseInt(v.target.value)),disabled:!u}),s.jsx(kt,{label:"Project Number Prefix",value:o.projectNumberPrefix,onChange:v=>f("projectNumberPrefix",v.target.value),disabled:!u}),s.jsx(kt,{label:"Next Project Number",type:"number",value:o.projectNextNumber,onChange:v=>f("projectNextNumber",parseInt(v.target.value)),disabled:!u})]})}),s.jsx(np,{title:"Pipeline Statuses",children:s.jsxs("div",{className:"space-y-8",children:[s.jsx(Qc,{title:"Leads Pipeline",labels:o.labels.leads,onUpdate:v=>m("leads",v),canEdit:u}),s.jsx(Qc,{title:"Sales Pipeline",labels:o.labels.sales,onUpdate:v=>m("sales",v),canEdit:u}),s.jsx(Qc,{title:"Survey Pipeline",labels:o.labels.survey,onUpdate:v=>m("survey",v),canEdit:u}),s.jsx(Qc,{title:"Production Pipeline",labels:o.labels.production,onUpdate:v=>m("production",v),canEdit:u})]})})]})})]})},V5=t=>{const e=t.hasPermission("manageStaff"),n=t.hasPermission("manageProductConfigurations"),r=t.hasPermission("manageSettings"),o=()=>r?"settings":e?"staff":n?"profiles-sash":"settings",[l,u]=Pe.useState(t.initialTab||o()),[f,m]=Pe.useState(!1);Pe.useEffect(()=>{const v={staff:e,materials:n,ranges:n,components:n,settings:r,project:r,invoicing:r,email_smtp:r,email_templates:r,developer:r&&t.systemSettings.developerModeEnabled};l.startsWith("profiles-")?n||u(o()):v[l]===!1&&u(o())},[e,n,r,l,t.systemSettings.developerModeEnabled]),Pe.useEffect(()=>{l!=="settings"&&m(!1)},[l]);const p=()=>{switch(l){case"staff":return s.jsx(N5,{...t});case"profiles-sash":case"profiles-casement":case"profiles-door":case"profiles-screen":const v=l.split("-")[1],w=v.charAt(0).toUpperCase()+v.slice(1);return s.jsx(C5,{...t,productType:w});case"components":return s.jsx(R5,{...t});case"materials":return s.jsx(I5,{...t});case"ranges":return s.jsx(M5,{productRanges:t.productRanges,setProductRanges:t.setProductRanges,materials:t.materials,canEdit:n});case"settings":return f?s.jsx(B5,{systemSettings:t.systemSettings,setSystemSettings:t.setSystemSettings,hasPermission:t.hasPermission,onBack:()=>m(!1)}):s.jsx(k5,{...t,onEdit:()=>m(!0),onNavigate:u});case"project":return s.jsx(H5,{systemSettings:t.systemSettings,setSystemSettings:t.setSystemSettings,hasPermission:t.hasPermission,onBack:()=>u("settings")});case"invoicing":return s.jsx(U5,{systemSettings:t.systemSettings,setSystemSettings:t.setSystemSettings,hasPermission:t.hasPermission});case"email_smtp":return s.jsx(A5,{systemSettings:t.systemSettings,setSystemSettings:t.setSystemSettings,hasPermission:t.hasPermission,onBack:()=>u("settings")});case"developer":return s.jsx(E5,{systemSettings:t.systemSettings,setSystemSettings:t.setSystemSettings});default:return null}};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(Po,{icon:sc,active:l==="staff",onClick:()=>u("staff"),children:"Staff"}),s.jsx(Po,{icon:ld,active:l==="profiles-sash",onClick:()=>u("profiles-sash"),children:"Profiles (Sash)"}),s.jsx(Po,{icon:ud,active:l==="profiles-casement",onClick:()=>u("profiles-casement"),children:"Profiles (Casement)"}),s.jsx(Po,{icon:cd,active:l==="profiles-door",onClick:()=>u("profiles-door"),children:"Profiles (Door)"}),s.jsx(Po,{icon:ic,active:l==="profiles-screen",onClick:()=>u("profiles-screen"),children:"Profiles (Screen)"}),s.jsx(Po,{icon:T1,active:l==="components",onClick:()=>u("components"),children:"Components"}),s.jsx(Po,{icon:P1,active:l==="materials",onClick:()=>u("materials"),children:"Materials"}),s.jsx(Po,{icon:I0,active:l==="ranges",onClick:()=>u("ranges"),children:"Ranges"}),s.jsx(Po,{icon:yd,active:l==="settings",onClick:()=>u("settings"),children:"Settings"}),s.jsx(Po,{icon:w1,active:l==="project",onClick:()=>u("project"),children:"Project"}),s.jsx(Po,{icon:dd,active:l==="invoicing",onClick:()=>u("invoicing"),children:"Invoicing"}),s.jsx(Po,{icon:Df,active:l==="email_smtp",onClick:()=>u("email_smtp"),children:"Email"}),s.jsx(Po,{icon:B1,active:l==="developer",onClick:()=>u("developer"),children:"Developer"})]}),s.jsx("div",{children:p()})]})},q5=({isOpen:t,onClose:e,profiles:n,onSelect:r,itemType:o,navigateToSystem:l,productRanges:u})=>{const f={Sash:"Sash Window",Casement:"Casement Window",Door:"Door",Screen:"Screen"},m={Sash:ld,Casement:ud,Door:cd,Screen:ic};return s.jsx(ba,{isOpen:t,onClose:e,title:`Select a ${f[o]} Configuration`,size:"2xl",children:s.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto p-1",children:n.length>0?n.map(p=>{var w;const v=((w=u.find(N=>N.id===p.productRangeId))==null?void 0:w.name)||"Custom";return s.jsxs("button",{onClick:()=>r(p),className:"w-full flex items-center gap-4 p-4 text-left border dark:border-gray-700 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-700 hover:border-blue-500 transition-all",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-md",children:cl.createElement(m[o],{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100",children:p.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:v})]})]},p.id)}):s.jsxs("div",{className:"text-center py-10",children:[s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No product profiles found for this item type."}),s.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:"You can create new configurations in the System Hub."}),s.jsxs("button",{onClick:l,className:"mt-4 flex items-center gap-2 mx-auto px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700",children:[s.jsx(Ts,{className:"w-5 h-5"}),"Create New Configuration"]})]})})})},O5=({data:t,size:e=200})=>{const n=t.reduce((l,u)=>l+u.value,0);if(n===0)return s.jsx("div",{className:"flex items-center justify-center text-center text-stone-500 dark:text-stone-400",style:{width:e,height:e},children:"No data to display."});let r=0;const o=t.map(l=>{const u=r/n*360,f=(r+l.value)/n*360;r+=l.value;const m=f-u>180?1:0,p=50+45*Math.cos(Math.PI*(u-90)/180),v=50+45*Math.sin(Math.PI*(u-90)/180),w=50+45*Math.cos(Math.PI*(f-90)/180),N=50+45*Math.sin(Math.PI*(f-90)/180);return s.jsx("path",{d:`M 50,50 L ${p},${v} A 45,45 0 ${m},1 ${w},${N} Z`,fill:l.color},l.name)});return s.jsxs("div",{className:"flex items-center gap-8",children:[s.jsx("svg",{viewBox:"0 0 100 100",width:e,height:e,children:o}),s.jsx("ul",{className:"space-y-2",children:t.map(l=>s.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:l.color}}),s.jsxs("span",{className:"font-medium text-stone-700 dark:text-stone-300",children:[l.name,":"]}),s.jsx("span",{className:"text-stone-500 dark:text-stone-400",children:l.value})]},l.name))})]})},ec=({title:t,value:e,subtext:n})=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[s.jsx("h4",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:t}),s.jsx("p",{className:"text-3xl font-bold text-stone-800 dark:text-stone-100 mt-2",children:e}),n&&s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mt-1",children:n})]}),z5=({quotes:t,clients:e,staff:n,systemSettings:r})=>{const[o,l]=Pe.useState("all"),u=I=>I.toLocaleString(void 0,{style:"currency",currency:r.currency}),{filteredQuotes:f,filteredClients:m}=Pe.useMemo(()=>{if(o==="all")return{filteredQuotes:t,filteredClients:e};const I=new Date,_=o==="7d"?7:30,E=new Date(new Date().setDate(I.getDate()-_)),T=e.filter(q=>new Date(q.createdAt)>=E);return{filteredQuotes:t.filter(q=>new Date(q.date)>=E),filteredClients:T}},[t,e,o]),p=Pe.useMemo(()=>{const I=m.length,_=f.length,E=f.reduce((K,fe)=>K+fe.items.reduce((ne,X)=>ne+X.price*X.quantity,0),0),T=f.filter(K=>K.status==="Won"),P=T.reduce((K,fe)=>K+fe.items.reduce((ne,X)=>ne+X.price*X.quantity,0),0),q=f.filter(K=>["Won","Lost"].includes(K.status)),J=q.length>0?T.length/q.length*100:0;return{totalLeads:I,totalQuotes:_,totalQuotedValue:E,totalInvoicedValue:P,conversionRate:J}},[m,f]),v=Pe.useMemo(()=>{const I=f.reduce((E,T)=>(E[T.status]=(E[T.status]||0)+1,E),{}),_={New:"#d1d5db","Appointment Booked":"#22d3ee",Quoted:"#60a5fa","Follow Up 1":"#fb923c","Follow Up 2":"#facc15",Won:"#4ade80",Lost:"#f87171"};return Object.entries(I).map(([E,T])=>({name:E,value:T,color:_[E]||"#a8a29e"})).filter(E=>E.value>0)},[f]),w=Pe.useMemo(()=>n.map(I=>{const _=f.filter(fe=>{const ne=e.find(X=>X.id===fe.clientId);return(ne==null?void 0:ne.assignedTo)===I.id}),E=_.length,T=_.reduce((fe,ne)=>fe+ne.items.reduce((X,$)=>X+$.price*$.quantity,0),0),P=_.filter(fe=>fe.status==="Won"),q=P.length,J=P.reduce((fe,ne)=>fe+ne.items.reduce((X,$)=>X+$.price*$.quantity,0),0),K=E>0?q/E*100:0;return{...I,quotedCount:E,quotedValue:T,orderCount:q,orderValue:J,conversionRate:K}}).sort((I,_)=>_.orderValue-I.orderValue),[n,f,e]),N=Pe.useMemo(()=>{const I={};return f.forEach(_=>{_.items.forEach(E=>{I[E.itemType]||(I[E.itemType]={quoted:0,sold:0,value:0}),I[E.itemType].quoted+=E.quantity,_.status==="Won"&&(I[E.itemType].sold+=E.quantity,I[E.itemType].value+=E.price*E.quantity)})}),Object.entries(I).map(([_,E])=>({type:_,...E})).sort((_,E)=>E.value-_.value)},[f]),b=({label:I,range:_})=>s.jsx("button",{onClick:()=>l(_),className:`px-3 py-1.5 text-sm font-medium rounded-md ${o===_?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-gray-600"}`,children:I});return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 min-h-full overflow-y-auto p-8",children:[s.jsxs("header",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(T0,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-3xl font-bold text-stone-800 dark:text-stone-100",children:"Reports Dashboard"})]}),s.jsxs("div",{className:"flex items-center p-1 bg-stone-100 dark:bg-gray-900 rounded-lg",children:[s.jsx(b,{label:"Last 7 Days",range:"7d"}),s.jsx(b,{label:"Last 30 Days",range:"30d"}),s.jsx(b,{label:"All Time",range:"all"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[s.jsx(ec,{title:"New Leads",value:p.totalLeads.toString()}),s.jsx(ec,{title:"Total Quotes",value:p.totalQuotes.toString()}),s.jsx(ec,{title:"Quoted Value",value:u(p.totalQuotedValue)}),s.jsx(ec,{title:"Invoiced Value",value:u(p.totalInvoicedValue),subtext:"From won quotes"}),s.jsx(ec,{title:"Conversion Rate",value:`${p.conversionRate.toFixed(1)}%`,subtext:"Won vs Lost"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[s.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(b1,{className:"w-6 h-6"})," Staff Performance"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50 text-stone-600 dark:text-stone-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 font-semibold",children:"Salesperson"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"Quotes"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"Orders"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"Order Value"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"Conv. Rate"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:w.map(I=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-3 font-medium text-stone-800 dark:text-stone-100",children:I.name}),s.jsx("td",{className:"p-3 text-right",children:I.quotedCount}),s.jsx("td",{className:"p-3 text-right",children:I.orderCount}),s.jsx("td",{className:"p-3 text-right",children:u(I.orderValue)}),s.jsxs("td",{className:"p-3 text-right font-medium",children:[I.conversionRate.toFixed(1),"%"]})]},I.id))})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[s.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(k1,{className:"w-6 h-6"})," Product Performance"]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50 text-stone-600 dark:text-stone-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 font-semibold",children:"Product Type"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"# Quoted"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"# Sold"}),s.jsx("th",{className:"p-3 font-semibold text-right",children:"Total Value Sold"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:N.map(I=>s.jsxs("tr",{children:[s.jsx("td",{className:"p-3 font-medium text-stone-800 dark:text-stone-100",children:I.type}),s.jsx("td",{className:"p-3 text-right",children:I.quoted}),s.jsx("td",{className:"p-3 text-right",children:I.sold}),s.jsx("td",{className:"p-3 text-right",children:u(I.value)})]},I.type))})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Quote Status"}),s.jsx(O5,{data:v})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Lead Locations"}),s.jsx("div",{className:"h-64 bg-stone-100 dark:bg-gray-700 rounded-md flex items-center justify-center text-center text-stone-500 dark:text-stone-400 p-4",children:"Map visualization will be added in a future update."})]})]})]})]})},Xc=({title:t,value:e,icon:n,color:r})=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700 flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${r}`,children:s.jsx(n,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-medium text-stone-500 dark:text-stone-400 uppercase tracking-wider",children:t}),s.jsx("p",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:e})]})]}),W5=({client:t,quotes:e,appointments:n,navigateTo:r})=>{const o=e.filter(m=>m.clientId===t.id).sort((m,p)=>new Date(p.date).getTime()-new Date(m.date).getTime()).slice(0,3),l=n.filter(m=>m.clientId===t.id&&new Date(m.start)>new Date).sort((m,p)=>new Date(m.start).getTime()-new Date(p.start).getTime()).slice(0,3),u=[...t.activity||[]].sort((m,p)=>new Date(p.timestamp).getTime()-new Date(m.timestamp).getTime()).find(m=>m.type==="note"),f=m=>r({view:"leadEditor",clientId:m});return s.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Contacts"}),t.contacts.map(m=>s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"font-medium",children:[m.firstName," ",m.lastName," ",m.isPrimary&&s.jsx("span",{className:"text-xs font-bold text-green-600",children:"(Primary)"})]}),s.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:m.email})]},m.id)),s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200 mt-4",children:"Addresses"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Billing:"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.officeAddressFormatted})]}),t.installationAddress&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Installation:"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.installationAddressFormatted})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Recent Activity"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[o.length>0&&o.map(m=>s.jsxs("p",{children:["Quote ",m.quoteNumber," - ",m.status]},m.id)),l.length>0&&l.map(m=>s.jsxs("p",{children:["Upcoming: ",m.title," on ",new Date(m.start).toLocaleDateString()]},m.id)),o.length===0&&l.length===0&&s.jsx("p",{className:"text-stone-500",children:"No recent quotes or appointments."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Latest Note"}),s.jsx("p",{className:"text-sm text-stone-500 bg-stone-100 dark:bg-gray-700/50 p-2 rounded italic",children:(u==null?void 0:u.content)||"No notes yet."}),s.jsx(wt,{variant:"secondary",onClick:()=>f(t.id),children:"View Full Details"})]})]})},$5=({currentUser:t,clients:e,quotes:n,staff:r,systemSettings:o,appointments:l,navigateTo:u,onCreateQuote:f,onBookAppointment:m,onAddNewLead:p})=>{const[v,w]=Pe.useState("all"),[N,b]=Pe.useState(null),[I,_]=Pe.useState({key:"displayName",direction:"asc"}),E=he=>he.toLocaleString(void 0,{style:"currency",currency:o.currency}),T=Pe.useMemo(()=>e.filter(he=>he.assignedTo===t.id),[e,t.id]),P=Pe.useMemo(()=>n.filter(he=>T.some(R=>R.id===he.clientId)),[n,T]),q=he=>{if(v==="all")return!0;const R=new Date(he),D=new Date,H=v==="7d"?7:30,O=new Date(new Date().setDate(D.getDate()-H));return R>=O},J=Pe.useMemo(()=>T.map(he=>{const R=r.find(O=>O.id===he.assignedTo),D=n.filter(O=>O.clientId===he.id),H=he.contacts.find(O=>O.isPrimary);return{...he,displayName:go(he),primaryContactName:H?`${H.firstName} ${H.lastName}`:"No primary contact",quoteCount:D.length,assignedStaffName:(R==null?void 0:R.name)||"Unassigned",assignedStaffInitials:(R==null?void 0:R.initials)||"?",officeAddressFormatted:po(he.officeAddress),installationAddressFormatted:po(he.installationAddress)}}),[T,n,r]),K=he=>{let R="asc";I&&I.key===he&&I.direction==="asc"&&(R="desc"),_({key:he,direction:R})},fe=Pe.useMemo(()=>{let he=[...J].filter(R=>q(R.createdAt));return I!==null&&he.sort((R,D)=>{const H=R[I.key],O=D[I.key];return H<O?I.direction==="asc"?-1:1:H>O?I.direction==="asc"?1:-1:0}),he},[J,v,I]),ne=Pe.useMemo(()=>{const he=T.filter(ie=>q(ie.createdAt)).length,R=P.filter(ie=>q(ie.date)),D=R.filter(ie=>["Quoted","Follow Up 1","Follow Up 2","Won","Lost"].includes(ie.status)).length,H=R.filter(ie=>ie.status==="Won"),O=H.reduce((ie,Y)=>ie+Y.items.reduce((ve,we)=>ve+we.price*we.quantity,0),0),ge=R.filter(ie=>["Won","Lost"].includes(ie.status)),xe=ge.length>0?H.length/ge.length*100:0;return{myLeadsCount:he,myQuotesSent:D,myValueWon:O,conversionRate:xe}},[T,P,v]),X=({label:he,range:R})=>s.jsx("button",{onClick:()=>w(R),className:`px-3 py-1.5 text-sm font-medium rounded-md ${v===R?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-gray-600"}`,children:he}),$=({sortKey:he,children:R,className:D})=>{const O=(I==null?void 0:I.key)===he?(I==null?void 0:I.direction)==="asc"?"":"":"";return s.jsx("th",{className:`p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 cursor-pointer ${D||""}`,onClick:()=>K(he),children:s.jsxs("div",{className:"flex items-center gap-2",children:[R,s.jsx("span",{className:"text-xs",children:O})]})})};return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 min-h-full overflow-y-auto p-8",children:[s.jsxs("header",{className:"mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[s.jsxs("div",{className:"flex-shrink-0",children:[s.jsxs("h1",{className:"text-3xl font-bold text-stone-800 dark:text-stone-100",children:["Welcome back, ",t.name.split(" ")[0],"!"]}),s.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:"Here's a look at your sales activity."})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center p-1 bg-stone-100 dark:bg-gray-900 rounded-lg",children:[s.jsx(X,{label:"Last 7 Days",range:"7d"}),s.jsx(X,{label:"Last 30 Days",range:"30d"}),s.jsx(X,{label:"All Time",range:"all"})]}),s.jsx(wt,{onClick:p,icon:Ts,children:"Add New Lead"})]})]}),s.jsxs("div",{className:"w-full grid grid-cols-1 lg:grid-cols-4 gap-4 flex-shrink-0 mb-8",children:[s.jsx(Xc,{title:"New Leads",value:ne.myLeadsCount.toString(),icon:sc,color:"bg-cyan-500"}),s.jsx(Xc,{title:"Quotes Sent",value:ne.myQuotesSent.toString(),icon:ad,color:"bg-blue-500"}),s.jsx(Xc,{title:"Value Won",value:E(ne.myValueWon),icon:L1,color:"bg-green-500"}),s.jsx(Xc,{title:"Conversion Rate",value:`${ne.conversionRate.toFixed(1)}%`,icon:I0,color:"bg-orange-500"})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700 mb-8",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:"My Leads"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left text-sm min-w-[1024px]",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 w-24",children:"Lead #"}),s.jsx($,{sortKey:"displayName",children:"Name / Company"}),s.jsx($,{sortKey:"primaryContactName",children:"Primary Contact"}),s.jsx($,{sortKey:"officeAddressFormatted",children:"Office Address"}),s.jsx($,{sortKey:"installationAddressFormatted",children:"Installation Address"}),s.jsx($,{sortKey:"label",children:"Status"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:fe.map(he=>s.jsxs(cl.Fragment,{children:[s.jsxs("tr",{onClick:()=>b(N===he.id?null:he.id),className:"hover:bg-stone-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[s.jsx("td",{className:"p-3 font-mono text-xs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:he.leadNumber}),s.jsx(wt,{variant:"secondary",size:"sm",onClick:R=>{R.stopPropagation(),u({view:"leadEditor",clientId:he.id})},className:"p-1.5",title:"Edit Lead",children:s.jsx(mo,{className:"w-3.5 h-3.5"})})]})}),s.jsx("td",{className:"p-3 font-bold text-stone-800 dark:text-stone-100",children:he.displayName}),s.jsx("td",{className:"p-3 font-medium text-stone-700 dark:text-stone-200",children:he.primaryContactName}),s.jsx("td",{className:"p-3 text-xs",children:he.officeAddressFormatted}),s.jsx("td",{className:"p-3 text-xs",children:he.installationAddressFormatted}),s.jsx("td",{className:"p-3",children:s.jsx(wd,{status:he.label})}),s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[s.jsx(wt,{variant:"secondary",size:"sm",onClick:R=>{R.stopPropagation(),m(he.id)},icon:wa,title:"Book Appointment"}),s.jsx(wt,{variant:"secondary",className:"px-3 py-2 text-xs font-semibold",onClick:R=>{R.stopPropagation(),f(he.id)},children:"New Quote"}),s.jsx(wt,{variant:"secondary",className:"px-3 py-2 text-xs font-semibold",onClick:R=>{R.stopPropagation(),u({view:"quoteList",clientId:he.id})},children:"Quotes"})]})})]}),N===he.id&&s.jsx("tr",{className:"bg-stone-100 dark:bg-gray-800/50",children:s.jsx("td",{colSpan:7,className:"p-0",children:s.jsx(W5,{client:he,quotes:n,appointments:l,navigateTo:u})})})]},he.id))})]})}),fe.length===0&&s.jsx("p",{className:"text-center text-sm text-stone-500 dark:text-stone-400 py-8",children:"No leads found for the selected period."})]})]})},G5=({quotes:t,clients:e,staff:n,navigateTo:r})=>s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsx("div",{className:"flex justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(dd,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Surveys in Progress"})]})})}),s.jsx("main",{className:"flex-grow p-8 overflow-y-auto",children:t.length>0?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"border-b-2 border-stone-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Quote #"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Client"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Project Ref."}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Surveyor"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Survey Status"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400 text-center",children:"Items"}),s.jsx("th",{className:"p-4"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:t.map(o=>{const l=e.find(f=>f.id===o.clientId),u=n.find(f=>f.id===o.surveyorId);return s.jsxs("tr",{className:"hover:bg-stone-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"p-4 font-medium text-stone-800 dark:text-stone-100",children:o.quoteNumber}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300",children:l&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"font-medium",children:go(l)}),s.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400",children:po(l.installationAddress||l.officeAddress)})]})}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300",children:o.projectReference||s.jsx("span",{className:"text-stone-400 dark:text-stone-500",children:"Unassigned"})}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300",children:(u==null?void 0:u.name)||s.jsx("span",{className:"text-stone-400 dark:text-stone-500",children:"Unassigned"})}),s.jsx("td",{className:"p-4",children:s.jsx(wd,{status:o.surveyStatus})}),s.jsx("td",{className:"p-4 text-center text-stone-600 dark:text-stone-300",children:o.items.length}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(wt,{variant:"secondary",size:"sm",onClick:()=>r({view:"surveyBooking",quoteId:o.id}),icon:wa,title:"Book Survey Appointment"}),s.jsx(wt,{onClick:()=>r({view:"surveyEditor",quoteId:o.id}),children:"Open Survey"})]})})]},o.id)})})]})}):s.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700",children:[s.jsx(dd,{className:"w-12 h-12 mx-auto text-stone-400 dark:text-stone-500"}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-stone-800 dark:text-stone-100",children:"All Surveys Complete"}),s.jsx("p",{className:"mt-1 text-sm text-stone-500 dark:text-stone-400",children:"There are no quotes currently awaiting survey."})]})})]}),J5=({complete:t})=>{const e="px-2.5 py-0.5 text-xs font-semibold rounded-full inline-flex items-center gap-1.5";return t?s.jsxs("span",{className:`${e} bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300`,children:[s.jsx(k0,{className:"w-3 h-3"})," Complete"]}):s.jsx("span",{className:`${e} bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300`,children:"Pending"})},Y5=({quote:t,client:e,materials:n,staff:r,roles:o,onEditSurveyItem:l,onCompleteSurvey:u,onAssignSurveyor:f,onBack:m,systemSettings:p,onUpdateQuote:v})=>{var T;const w=t.items.every(P=>P.surveyComplete),N=((T=p.labels.survey.find(P=>P.name.toLowerCase().includes("ready for production")))==null?void 0:T.name)||"Ready for Production",b=()=>{if(!t.surveyorId){alert("Please assign a surveyor before completing the survey.");return}window.confirm("Are you sure you want to mark this survey as complete and send it to production?")&&(u({...t,status:"Ready for Production",surveyStatus:N}),m())},I=P=>{var q;return((q=n.find(J=>J.id===P))==null?void 0:q.name)||"N/A"},_=Pe.useMemo(()=>{const P=o.find(q=>q.permissions.includes("conductSurveys"));return P?r.filter(q=>q.roleId===P.id):[]},[r,o]),E=P=>{v({...t,surveyStatus:P})};return s.jsxs("div",{className:"flex flex-col h-full bg-stone-50 dark:bg-gray-900",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:m,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(hl,{className:"w-6 h-6 text-stone-600 dark:text-stone-300"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:["Survey: ",t.quoteNumber]}),s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["For ",s.jsx("span",{className:"font-medium text-stone-700 dark:text-stone-200",children:go(e)})]})]})]}),s.jsxs("button",{onClick:b,disabled:!w,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white font-semibold rounded-lg shadow hover:bg-green-700 disabled:bg-green-300 disabled:cursor-not-allowed",children:[s.jsx(k0,{className:"w-5 h-5"}),"Mark Survey as Complete"]})]})}),s.jsx("main",{className:"flex-grow p-8 overflow-y-auto",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border dark:border-gray-700 mb-6",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2 text-stone-800 dark:text-stone-100",children:"Survey Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300 mb-1",children:"Assigned Surveyor"}),s.jsxs(Nn,{value:t.surveyorId||"",onChange:P=>f(t.id,P.target.value),children:[s.jsx("option",{value:"",children:"-- Unassigned --"}),_.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300 mb-1",children:"Project Number"}),s.jsx(kt,{type:"text",value:t.projectReference||(t.surveyorId?"Generating...":"Assign surveyor to generate"),disabled:!0,className:"bg-stone-100 dark:bg-gray-700/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-stone-600 dark:text-stone-300 mb-1",children:"Survey Status"}),s.jsxs(Nn,{value:t.surveyStatus||"",onChange:P=>E(P.target.value),children:[s.jsx("option",{value:"",children:"-- No Status --"}),p.labels.survey.map(P=>s.jsx("option",{value:P.name,children:P.name},P.id))]})]})]})]}),s.jsx("ul",{className:"space-y-4",children:t.items.map(P=>{var fe;const q=P.windowInstances[0],K=[...new Set(((fe=P.paneGlassTypes)==null?void 0:fe.map(ne=>ne.glassTypeId))||[])].map(ne=>I(ne)).filter(Boolean).join(", ");return s.jsxs("li",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700 flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("h3",{className:"font-bold text-lg text-stone-800 dark:text-stone-100",children:["Item #",P.itemNumber,": ",P.location]}),s.jsx(J5,{complete:P.surveyComplete})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-2 text-sm text-stone-600 dark:text-stone-300",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Type:"})," ",P.itemType," (",P.windowInstances.length,")"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Width:"})," ",q.overallWidth,"mm"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Height:"})," ",q.overallHeight,"mm"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Frame:"})," ",I(P.materialFrameId)]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Sash:"})," ",I(P.materialSashId)]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Cill:"})," ",I(P.materialCillId)]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("strong",{children:"Glass:"})," ",K||"N/A"]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("strong",{children:"Hinges:"})," ",P.ironmongery.hinges]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("strong",{children:"Locking:"})," ",P.ironmongery.mpls]}),P.trims&&s.jsxs("div",{className:"col-span-3",children:[s.jsx("strong",{children:"Trims:"})," ",P.trims]}),P.surveyorNotes&&s.jsxs("div",{className:"col-span-3 mt-2 pt-2 border-t dark:border-gray-700",children:[s.jsx("strong",{children:"Notes:"})," ",s.jsx("span",{className:"italic",children:P.surveyorNotes})]})]})]}),s.jsxs("button",{onClick:()=>l(t.id,P.id),className:"flex-shrink-0 flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-700 border border-stone-300 dark:border-gray-600 text-stone-700 dark:text-stone-200 font-semibold rounded-md hover:bg-stone-50 dark:hover:bg-gray-600",children:[s.jsx(mo,{className:"w-4 h-4"}),P.surveyComplete?"Re-Survey":"Open Survey Editor"]})]},P.id)})})]})})]})},K5=({client:t,quotes:e,appointments:n,onEditLead:r})=>{const o=e.filter(f=>f.clientId===t.id).sort((f,m)=>new Date(m.date).getTime()-new Date(f.date).getTime()).slice(0,3),l=n.filter(f=>f.clientId===t.id&&new Date(f.start)>new Date).sort((f,m)=>new Date(f.start).getTime()-new Date(m.start).getTime()).slice(0,3),u=[...t.activity||[]].sort((f,m)=>new Date(m.timestamp).getTime()-new Date(f.timestamp).getTime()).find(f=>f.type==="note");return s.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Contacts"}),t.contacts.map(f=>s.jsxs("div",{className:"text-sm",children:[s.jsxs("p",{className:"font-medium",children:[f.firstName," ",f.lastName," ",f.isPrimary&&s.jsx("span",{className:"text-xs font-bold text-green-600",children:"(Primary)"})]}),s.jsx("p",{className:"text-stone-500 dark:text-stone-400",children:f.email})]},f.id)),s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200 mt-4",children:"Addresses"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Billing:"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.officeAddressFormatted})]}),t.installationAddress&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:"Installation:"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.installationAddressFormatted})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Recent Activity"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[o.length>0&&o.map(f=>s.jsxs("p",{children:["Quote ",f.quoteNumber," - ",f.status]},f.id)),l.length>0&&l.map(f=>s.jsxs("p",{children:["Upcoming: ",f.title," on ",new Date(f.start).toLocaleDateString()]},f.id)),o.length===0&&l.length===0&&s.jsx("p",{className:"text-stone-500",children:"No recent quotes or appointments."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-stone-700 dark:text-stone-200",children:"Latest Note"}),s.jsx("p",{className:"text-sm text-stone-500 bg-stone-100 dark:bg-gray-700/50 p-2 rounded italic",children:(u==null?void 0:u.content)||"No notes yet."}),s.jsx(wt,{variant:"secondary",onClick:()=>r(t.id),children:"View Full Details"})]})]})},Q5=({clients:t,quotes:e,staff:n,teams:r,onViewQuotes:o,onEditLead:l,onCreateQuote:u,hasPermission:f,systemSettings:m,onBookAppointment:p,onAddNewLead:v,appointments:w})=>{const[N,b]=Pe.useState(""),[I,_]=Pe.useState(""),[E,T]=Pe.useState(""),[P,q]=Pe.useState({key:"displayName",direction:"asc"}),[J,K]=Pe.useState(null),fe=Pe.useMemo(()=>t.map(D=>{const H=n.find(xe=>xe.id===D.assignedTo),O=e.filter(xe=>xe.clientId===D.id),ge=D.contacts.find(xe=>xe.isPrimary);return{...D,displayName:D.companyName||(ge?`${ge.firstName} ${ge.lastName}`:""),primaryContactName:ge?`${ge.firstName} ${ge.lastName}`:"No primary contact",quoteCount:O.length,assignedStaffName:(H==null?void 0:H.name)||"Unassigned",assignedStaffInitials:(H==null?void 0:H.initials)||"?",officeAddressFormatted:po(D.officeAddress),installationAddressFormatted:po(D.installationAddress)}}),[t,e,n]),ne=D=>{let H="asc";P&&P.key===D&&P.direction==="asc"&&(H="desc"),q({key:D,direction:H})},X=Pe.useMemo(()=>{let D=[...fe].filter(H=>{const O=N.toLowerCase().trim();return!(O&&!(H.displayName.toLowerCase().includes(O)||H.contacts[0]&&H.contacts[0].email.toLowerCase().includes(O)||H.officeAddressFormatted.toLowerCase().includes(O)||H.installationAddressFormatted.toLowerCase().includes(O)||H.leadNumber.toLowerCase().includes(O))||I&&H.customerType!==I||E&&H.assignedTo!==E)});return P!==null&&D.sort((H,O)=>{const ge=H[P.key],xe=O[P.key];return ge<xe?P.direction==="asc"?-1:1:ge>xe?P.direction==="asc"?1:-1:0}),D},[fe,N,I,E,P]),$=()=>{b(""),_(""),T("")},he=N||I||E,R=({sortKey:D,children:H,className:O})=>{const xe=(P==null?void 0:P.key)===D?(P==null?void 0:P.direction)==="asc"?"":"":"";return s.jsx("th",{className:`p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 cursor-pointer ${O||""}`,onClick:()=>ne(D),children:s.jsxs("div",{className:"flex items-center gap-2",children:[H,s.jsx("span",{className:"text-xs",children:xe})]})})};return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sc,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Leads"})]}),s.jsx("div",{className:"flex-1 max-w-lg",children:s.jsxs("div",{className:"relative",children:[s.jsx(jf,{className:"w-5 h-5 text-stone-400 absolute left-3.5 top-1/2 -translate-y-1/2 pointer-events-none"}),s.jsx("input",{type:"text",placeholder:"Search by name, email, address...",value:N,onChange:D=>b(D.target.value),className:"w-full p-2 pl-10 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg"})]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx(wt,{onClick:v,disabled:!f("manageClients"),icon:Ts,children:"Add New Lead"})})]})}),s.jsxs("main",{className:"flex-grow p-8 overflow-y-auto",children:[s.jsx("div",{className:"mb-6 p-4 bg-white dark:bg-gray-800 rounded-lg border border-stone-200 dark:border-gray-700 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{children:s.jsxs("select",{value:I,onChange:D=>_(D.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white",children:[s.jsx("option",{value:"",children:"All Customer Types"}),ch.map(D=>s.jsx("option",{value:D,children:D},D))]})}),s.jsx("div",{children:s.jsxs("select",{value:E,onChange:D=>T(D.target.value),className:"w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 rounded-lg bg-white",children:[s.jsx("option",{value:"",children:"All Staff"}),n.map(D=>s.jsx("option",{value:D.id,children:D.name},D.id))]})}),he&&s.jsx("div",{className:"flex items-center justify-end md:col-start-3",children:s.jsx("button",{onClick:$,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:"Clear Filters"})})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 overflow-hidden",children:[s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-stone-50 dark:bg-gray-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 w-24",children:"Lead #"}),s.jsx(R,{sortKey:"displayName",children:"Name / Company"}),s.jsx(R,{sortKey:"primaryContactName",children:"Primary Contact"}),s.jsx(R,{sortKey:"officeAddressFormatted",children:"Office Address"}),s.jsx(R,{sortKey:"installationAddressFormatted",children:"Installation Address"}),s.jsx(R,{sortKey:"label",children:"Status"}),s.jsx(R,{sortKey:"assignedStaffName",children:"Assigned"}),s.jsx("th",{className:"p-3 font-semibold uppercase text-stone-500 dark:text-stone-400 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:X.map(D=>s.jsxs(cl.Fragment,{children:[s.jsxs("tr",{onClick:()=>K(J===D.id?null:D.id),className:"hover:bg-stone-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[s.jsx("td",{className:"p-3 font-mono text-xs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:D.leadNumber}),s.jsx(wt,{variant:"secondary",size:"sm",onClick:H=>{H.stopPropagation(),l(D.id)},disabled:!f("manageClients"),className:"p-1.5",title:"Edit Lead",children:s.jsx(mo,{className:"w-3.5 h-3.5"})})]})}),s.jsx("td",{className:"p-3 font-bold text-stone-800 dark:text-stone-100",children:D.displayName}),s.jsx("td",{className:"p-3 font-medium text-stone-700 dark:text-stone-200",children:D.primaryContactName}),s.jsx("td",{className:"p-3 text-xs",children:D.officeAddressFormatted}),s.jsx("td",{className:"p-3 text-xs",children:D.installationAddressFormatted}),s.jsx("td",{className:"p-3",children:s.jsx(wd,{status:D.label})}),s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-200 text-purple-800 dark:bg-purple-900 dark:text-purple-200 text-xs font-bold flex items-center justify-center",children:D.assignedStaffInitials}),s.jsx("span",{children:D.assignedStaffName})]})}),s.jsx("td",{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[s.jsx(wt,{variant:"secondary",size:"sm",onClick:H=>{H.stopPropagation(),p(D.id)},icon:wa,title:"Book Appointment"}),s.jsx(wt,{variant:"secondary",className:"px-3 py-2 text-xs font-semibold",onClick:H=>{H.stopPropagation(),u(D.id)},disabled:!f("manageQuotes"),children:"New Quote"}),s.jsx(wt,{variant:"secondary",className:"px-3 py-2 text-xs font-semibold",onClick:H=>{H.stopPropagation(),o(D.id)},children:"Quotes"})]})})]}),J===D.id&&s.jsx("tr",{className:"bg-stone-100 dark:bg-gray-800/50",children:s.jsx("td",{colSpan:8,className:"p-0",children:s.jsx(K5,{client:D,quotes:e,appointments:w,onEditLead:l})})})]},D.id))})]}),X.length===0&&s.jsxs("div",{className:"text-center py-16 px-6",children:[s.jsx(jf,{className:"w-12 h-12 mx-auto text-stone-400"}),s.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No Leads Found"}),s.jsx("p",{className:"mt-1 text-sm text-stone-500",children:he?"Your filters did not match any leads.":"There are no leads to display."})]})]})]})]})},rp=()=>({id:`client-${Date.now()}`,leadNumber:"",contacts:[{id:`contact-${Date.now()}-1`,firstName:"",lastName:"",email:"",phone:"",isPrimary:!0,role:"Client"},{id:`contact-${Date.now()}-2`,firstName:"",lastName:"",email:"",phone:"",isPrimary:!1,role:"Client"}],officeAddress:{line1:"",townCity:"",county:"",postcode:""},createdAt:new Date().toISOString(),lastContacted:new Date().toISOString(),activity:[],assignedTo:"",customerType:"Homeowner",label:"",emails:[],files:[]}),X5=({client:t,staff:e,teams:n,appointments:r,onSaveClient:o,onBack:l,quotes:u,emailTemplates:f,currentUser:m,systemSettings:p})=>{var He,bt,Mt,At,It,$e,Te,_e,Fe,Ie,lt;const[v,w]=Pe.useState(!t),[N,b]=Pe.useState(t?JSON.parse(JSON.stringify(t)):rp()),[I,_]=Pe.useState("details"),[E,T]=Pe.useState(!1),[P,q]=Pe.useState({subject:"",body:""}),[J,K]=Pe.useState(""),fe=Pe.useRef(null),[ne,X]=Pe.useState(new Date),[$,he]=Pe.useState("note"),[R,D]=Pe.useState(""),[H,O]=Pe.useState({direction:"outgoing",summary:""}),[ge,xe]=Pe.useState({subject:"",notes:""});Pe.useEffect(()=>{w(!t);let ee=t?JSON.parse(JSON.stringify(t)):rp();if(ee.contacts.length<2){const Oe=2-ee.contacts.length;for(let tt=0;tt<Oe;tt++)ee.contacts.push({id:`contact-${Date.now()}-${tt}`,firstName:"",lastName:"",email:"",phone:"",isPrimary:!1,role:"Client"})}b(ee),_("details")},[t]);const ie=(ee,Oe)=>{b(tt=>({...tt,[ee]:Oe}))},Y=(ee,Oe,tt)=>{b(pt=>{const ht=pt[ee]||{line1:"",townCity:"",county:"",postcode:""};return{...pt,[ee]:{...ht,[Oe]:tt}}})},ve=(ee,Oe,tt)=>{b(pt=>({...pt,contacts:pt.contacts.map(ht=>ht.id===ee?{...ht,[Oe]:tt}:ht)}))},we=ee=>{b(Oe=>({...Oe,contacts:Oe.contacts.map(tt=>({...tt,isPrimary:tt.id===ee}))}))},le=()=>{const ee={id:`contact-${Date.now()}`,firstName:"",lastName:"",email:"",phone:"",isPrimary:N.contacts.length===0,role:"Client"};b(Oe=>({...Oe,contacts:[...Oe.contacts,ee]}))},M=ee=>{const Oe=N.contacts.find(tt=>tt.id===ee);if(Oe!=null&&Oe.isPrimary&&N.contacts.length>1){alert("You cannot delete the primary contact. Please set another contact as primary first.");return}if(N.contacts.length<=2){alert("The first two contacts cannot be removed.");return}b(tt=>({...tt,contacts:tt.contacts.filter(pt=>pt.id!==ee)}))},W=ee=>{ee.preventDefault(),o(N),v&&l()},Q=({label:ee,isActive:Oe,onClick:tt})=>s.jsx("button",{type:"button",onClick:tt,className:`flex-1 px-4 py-3 text-sm font-bold text-center transition-colors rounded-t-lg ${Oe?"bg-white dark:bg-gray-800 text-blue-600":"bg-stone-100 dark:bg-gray-800/50 text-stone-500 hover:bg-stone-200 dark:hover:bg-gray-700"}`,children:ee}),ue=t?r.filter(ee=>ee.clientId===t.id).sort((ee,Oe)=>new Date(Oe.start).getTime()-new Date(ee.start).getTime()):[],ce=N.emails||[],me=ee=>{K(ee);const Oe=f.find(Fn=>Fn.id===ee);if(!Oe)return;const tt=N.contacts.find(Fn=>Fn.isPrimary),pt=tt?tt.firstName:go(N),ht=u.length>0?u[0]:null,qt=ue.length>0?ue[0]:null;let Pn=Oe.subject,Xt=Oe.body;const Cn={"\\[Client Name\\]":pt,"\\[User Name\\]":m.name,"\\[Quote Number\\]":ht==null?void 0:ht.quoteNumber,"\\[Quote Date\\]":ht?new Date(ht.date).toLocaleDateString():void 0,"\\[Appointment Date\\]":qt?new Date(qt.start).toLocaleDateString():void 0,"\\[Appointment Time\\]":qt?new Date(qt.start).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):void 0};for(const[Fn,wn]of Object.entries(Cn))wn&&(Pn=Pn.replace(new RegExp(Fn,"g"),wn),Xt=Xt.replace(new RegExp(Fn,"g"),wn));q({subject:Pn,body:Xt})},re=()=>{const ee=N.contacts.find(tt=>tt.isPrimary);if(!(ee!=null&&ee.email)){alert("Primary contact does not have an email address.");return}const Oe={id:`email-${Date.now()}`,direction:"outgoing",subject:P.subject,body:P.body,timestamp:new Date().toISOString()};ie("emails",[...N.emails||[],Oe]),alert("Email added to history. Save changes to persist."),T(!1),q({subject:"",body:""}),K("")},se=ee=>{ee.target.files&&Array.from(ee.target.files).forEach(Oe=>{const tt=new FileReader;tt.onloadend=()=>{const pt={name:Oe.name,dataUrl:tt.result};b(ht=>({...ht,files:[...ht.files||[],pt]}))},tt.readAsDataURL(Oe)})},ye=ee=>{b(Oe=>{const tt=[...Oe.files||[]];return tt.splice(ee,1),{...Oe,files:tt}})},Be=ee=>{let Oe="",tt=!1;if(ee==="note"){if(!R.trim())return;Oe=R.trim()}else if(ee==="call_log"){if(!H.summary.trim())return;Oe=JSON.stringify(H),tt=!0}else if(ee==="meeting_log"){if(!ge.subject.trim()&&!ge.notes.trim())return;Oe=JSON.stringify(ge),tt=!0}const pt={id:`act-${Date.now()}`,type:ee,timestamp:new Date().toISOString(),staffId:m.id,content:Oe};b(ht=>({...ht,activity:[pt,...ht.activity||[]],lastContacted:tt?new Date().toISOString():ht.lastContacted})),D(""),O({direction:"outgoing",summary:""}),xe({subject:"",notes:""})},Ge=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],pe=new Date(ne.getFullYear(),ne.getMonth(),1);new Date(ne.getFullYear(),ne.getMonth()+1,0);const Ze=new Date(pe),Le=Ze.getDay(),te=Ze.getDate()-Le+(Le===0?-6:1);Ze.setDate(te);const gt=[],et=new Date(Ze);for(;gt.length<42;)gt.push(new Date(et)),et.setDate(et.getDate()+1);const qe=ue.reduce((ee,Oe)=>{const tt=new Date(Oe.start).toDateString();return ee[tt]||(ee[tt]=[]),ee[tt].push(Oe),ee},{}),at=Pe.useMemo(()=>[...N.activity||[]].sort((ee,Oe)=>new Date(Oe.timestamp).getTime()-new Date(ee.timestamp).getTime()),[N.activity]),nt={note:yu,label_change:mo,email_sent:Df,appointment_created:wa,quote_created:yu,file_uploaded:Mf,call_log:S1,meeting_log:C1};return s.jsxs("div",{className:"flex flex-col h-full bg-stone-50 dark:bg-gray-900",children:[s.jsx("input",{type:"file",ref:fe,onChange:se,className:"hidden",multiple:!0}),s.jsxs("form",{onSubmit:W,className:"flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{type:"button",onClick:l,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(hl,{className:"w-6 h-6 text-stone-600 dark:text-stone-300"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:v?"Add New Lead":"Lead Details"}),!v&&t&&s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:[go(t),s.jsx("span",{className:"text-stone-400 dark:text-stone-500 mx-1",children:"|"}),t.leadNumber]})]})]}),s.jsx(wt,{type:"submit",icon:Iu,children:v?"Save New Lead":"Save Changes"})]})}),s.jsx("main",{className:"flex-grow pt-6 px-8 pb-8 overflow-y-auto",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsx("div",{className:"border-b border-stone-200 dark:border-gray-700 bg-stone-100 dark:bg-gray-800/50 rounded-t-lg",children:s.jsxs("nav",{className:"flex","aria-label":"Tabs",children:[s.jsx(Q,{label:"Details",isActive:I==="details",onClick:()=>_("details")}),!v&&s.jsx(Q,{label:"Appointments",isActive:I==="appointments",onClick:()=>_("appointments")}),!v&&s.jsx(Q,{label:"Emails",isActive:I==="emails",onClick:()=>_("emails")}),!v&&s.jsx(Q,{label:"Files",isActive:I==="files",onClick:()=>_("files")}),s.jsx(Q,{label:"Activity",isActive:I==="activity",onClick:()=>_("activity")})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-b-lg border border-t-0 dark:border-gray-700",children:[I==="details"&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-2",children:s.jsx("h4",{className:"font-semibold text-lg text-stone-700 dark:text-stone-200",children:"Contacts"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:N.contacts.map((ee,Oe)=>s.jsxs("div",{className:"p-3 bg-stone-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-700 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uh,{className:"w-5 h-5 text-stone-400"}),s.jsx("span",{className:"font-semibold",children:Oe===0?"Primary Contact":Oe===1?"Secondary Contact":`Contact ${Oe+1}`})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>we(ee.id),disabled:ee.isPrimary,className:"text-xs font-semibold disabled:text-green-600 disabled:cursor-default text-stone-500 hover:text-green-600",children:ee.isPrimary?"Primary":"Set as Primary"}),Oe>1&&s.jsx("button",{type:"button",onClick:()=>M(ee.id),className:"p-1 text-stone-400 hover:text-red-600",children:s.jsx(Qo,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(kt,{placeholder:"First Name",value:ee.firstName,onChange:tt=>ve(ee.id,"firstName",tt.target.value),required:ee.isPrimary}),s.jsx(kt,{placeholder:"Last Name",value:ee.lastName,onChange:tt=>ve(ee.id,"lastName",tt.target.value),required:ee.isPrimary}),s.jsx(kt,{type:"email",placeholder:"Email",value:ee.email,onChange:tt=>ve(ee.id,"email",tt.target.value),required:ee.isPrimary}),s.jsx(kt,{type:"tel",placeholder:"Phone",value:ee.phone,onChange:tt=>ve(ee.id,"phone",tt.target.value)}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contact Type"}),s.jsx(Nn,{value:ee.role||"Client",onChange:tt=>ve(ee.id,"role",tt.target.value),children:z1.map(tt=>s.jsx("option",{value:tt,children:tt},tt))})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notes"}),s.jsx(mu,{placeholder:"Contact-specific notes...",value:ee.notes||"",onChange:tt=>ve(ee.id,"notes",tt.target.value),rows:2})]})]})]},ee.id))}),s.jsx("div",{className:"mt-4",children:s.jsx(wt,{type:"button",variant:"secondary",size:"sm",onClick:le,icon:Ts,children:"Add Another Contact"})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg text-stone-800 dark:text-stone-100 mb-4",children:"Lead Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-stone-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Company Name"}),s.jsx(kt,{type:"text",placeholder:"Company (optional)",value:N.companyName||"",onChange:ee=>ie("companyName",ee.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Customer Type"}),s.jsx(Nn,{value:N.customerType||"Homeowner",onChange:ee=>ie("customerType",ee.target.value),children:ch.map(ee=>s.jsx("option",{value:ee,children:ee},ee))})]}),!v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Lead Status"}),s.jsx(Nn,{value:N.label||"",onChange:ee=>ie("label",ee.target.value),children:p.labels.leads.map(ee=>s.jsx("option",{value:ee.name,children:ee.name},ee.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Assigned To"}),s.jsxs(Nn,{value:N.assignedTo||"",onChange:ee=>ie("assignedTo",ee.target.value),children:[s.jsx("option",{value:"",children:"Unassigned"}),n.map(ee=>s.jsx("optgroup",{label:ee.name,children:e.filter(Oe=>Oe.teamId===ee.id).map(Oe=>s.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))},ee.id))]})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg text-stone-800 dark:text-stone-100 mb-4",children:"Addresses"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-md text-stone-700 dark:text-stone-200 mb-2",children:"Billing Address"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(kt,{placeholder:"Address Line 1",value:((He=N.officeAddress)==null?void 0:He.line1)||"",onChange:ee=>Y("officeAddress","line1",ee.target.value)}),s.jsx(kt,{placeholder:"Address Line 2",value:((bt=N.officeAddress)==null?void 0:bt.line2)||"",onChange:ee=>Y("officeAddress","line2",ee.target.value)}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(kt,{placeholder:"Town/City",value:((Mt=N.officeAddress)==null?void 0:Mt.townCity)||"",onChange:ee=>Y("officeAddress","townCity",ee.target.value)}),s.jsx(kt,{placeholder:"County",value:((At=N.officeAddress)==null?void 0:At.county)||"",onChange:ee=>Y("officeAddress","county",ee.target.value)})]}),s.jsx(kt,{placeholder:"Postcode",value:((It=N.officeAddress)==null?void 0:It.postcode)||"",onChange:ee=>Y("officeAddress","postcode",ee.target.value)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-md text-stone-700 dark:text-stone-200 mb-2",children:"Installation Address"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(kt,{placeholder:"Address Line 1",value:(($e=N.installationAddress)==null?void 0:$e.line1)||"",onChange:ee=>Y("installationAddress","line1",ee.target.value)}),s.jsx(kt,{placeholder:"Address Line 2",value:((Te=N.installationAddress)==null?void 0:Te.line2)||"",onChange:ee=>Y("installationAddress","line2",ee.target.value)}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(kt,{placeholder:"Town/City",value:((_e=N.installationAddress)==null?void 0:_e.townCity)||"",onChange:ee=>Y("installationAddress","townCity",ee.target.value)}),s.jsx(kt,{placeholder:"County",value:((Fe=N.installationAddress)==null?void 0:Fe.county)||"",onChange:ee=>Y("installationAddress","county",ee.target.value)})]}),s.jsx(kt,{placeholder:"Postcode",value:((Ie=N.installationAddress)==null?void 0:Ie.postcode)||"",onChange:ee=>Y("installationAddress","postcode",ee.target.value)})]})]})]})]})]}),I==="appointments"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-800/50 p-4 rounded-lg border dark:border-gray-700",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx(wt,{type:"button",variant:"secondary",size:"sm",onClick:()=>X(ee=>new Date(ee.getFullYear(),ee.getMonth()-1,1)),icon:lh}),s.jsx("h4",{className:"font-bold text-lg",children:ne.toLocaleString("default",{month:"long",year:"numeric"})}),s.jsx(wt,{type:"button",variant:"secondary",size:"sm",onClick:()=>X(ee=>new Date(ee.getFullYear(),ee.getMonth()+1,1)),icon:xd})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs font-bold text-stone-500",children:Ge.map(ee=>s.jsx("div",{className:"py-2",children:ee},ee))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:gt.map(ee=>{const Oe=ee.toDateString()===new Date().toDateString(),tt=ee.getMonth()===ne.getMonth(),pt=qe[ee.toDateString()];return s.jsxs("div",{className:`h-24 border dark:border-gray-700 rounded p-1 text-sm overflow-hidden ${tt?"bg-white dark:bg-gray-800":"bg-stone-100 dark:bg-gray-700/50 text-stone-400"}`,children:[s.jsx("div",{className:`w-6 h-6 flex items-center justify-center rounded-full ${Oe?"bg-blue-600 text-white":""}`,children:ee.getDate()}),pt&&s.jsxs("div",{className:"mt-1 -mx-1 text-xs text-white bg-blue-500 rounded px-1 truncate",title:pt.map(ht=>ht.title).join(", "),children:[pt.length," event",pt.length>1?"s":""]})]},ee.toISOString())})})]}),s.jsx("h4",{className:"font-semibold mt-6 mb-2",children:"Appointment List"}),s.jsxs("div",{className:"space-y-3",children:[ue.map(ee=>{var Oe;return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-700/50 p-3 rounded-lg border dark:border-gray-700",children:[s.jsx("p",{className:"font-semibold",children:ee.title}),s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:[new Date(ee.start).toLocaleString()," with ",((Oe=e.find(tt=>tt.id===ee.staffId))==null?void 0:Oe.name)||"Unknown"]})]},ee.id)}),ue.length===0&&!v&&s.jsx("p",{className:"text-center text-sm text-stone-500 dark:text-stone-400 py-8",children:"No appointments found."})]})]}),I==="emails"&&s.jsx("div",{children:E?s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-700/50 rounded-lg border dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"p-4 border-b dark:border-gray-600",children:[s.jsx("h3",{className:"font-semibold",children:"Compose Email"}),s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["To: ",(lt=N.contacts.find(ee=>ee.isPrimary))==null?void 0:lt.email]})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Use Template"}),s.jsxs(Nn,{value:J,onChange:ee=>me(ee.target.value),children:[s.jsx("option",{value:"",children:"-- Select a template --"}),f.map(ee=>s.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Subject"}),s.jsx(kt,{type:"text",value:P.subject,onChange:ee=>q(Oe=>({...Oe,subject:ee.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Body"}),s.jsx(mu,{value:P.body,onChange:ee=>q(Oe=>({...Oe,body:ee.target.value})),rows:12})]})]}),s.jsxs("div",{className:"p-4 flex justify-end gap-3 bg-stone-100 dark:bg-gray-800/50 rounded-b-lg",children:[s.jsx(wt,{type:"button",variant:"secondary",onClick:()=>T(!1),children:"Cancel"}),s.jsx(wt,{type:"button",onClick:re,icon:Df,children:"Send Email"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsx(wt,{type:"button",onClick:()=>T(!0),icon:Ts,children:"Compose Email"})}),s.jsxs("div",{className:"space-y-3",children:[ce.slice().reverse().map(ee=>s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-700/50 p-4 rounded-lg border dark:border-gray-700 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center text-xs text-stone-400 dark:text-stone-500 mb-2",children:[s.jsx("span",{children:ee.direction==="outgoing"?`From: ${m.name}`:`From: ${go(N)}`}),s.jsx("span",{children:new Date(ee.timestamp).toLocaleString()})]}),s.jsx("p",{className:"font-semibold text-stone-800 dark:text-stone-100",children:ee.subject}),s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-300 mt-2 whitespace-pre-wrap",children:ee.body})]},ee.id)),ce.length===0&&!v&&s.jsx("p",{className:"text-center text-sm text-stone-500 dark:text-stone-400 py-8",children:"No email history found for this lead."})]})]})}),I==="files"&&s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-end mb-4",children:s.jsx(wt,{type:"button",onClick:()=>{var ee;return(ee=fe.current)==null?void 0:ee.click()},icon:Mf,children:"Upload File"})}),s.jsxs("div",{className:"space-y-3",children:[(N.files||[]).map((ee,Oe)=>s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-700/50 p-3 rounded-lg border dark:border-gray-700 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(yu,{className:"w-5 h-5 text-stone-500"}),s.jsx("p",{className:"font-medium",children:ee.name})]}),s.jsx(wt,{type:"button",variant:"danger",size:"sm",onClick:()=>ye(Oe),icon:Qo})]},Oe)),(N.files||[]).length===0&&s.jsx("p",{className:"text-center text-sm text-stone-500 dark:text-stone-400 py-8",children:"No files uploaded for this lead."})]})]}),I==="activity"&&s.jsxs("div",{children:[s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-800/50 rounded-lg border dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"flex border-b dark:border-gray-700",children:["note","call","meeting"].map(ee=>s.jsx("button",{type:"button",onClick:()=>he(ee),className:`flex-1 px-4 py-2 text-sm font-semibold text-center transition-colors ${$===ee?"bg-white dark:bg-gray-800 text-blue-600":"text-stone-500 hover:bg-stone-200 dark:hover:bg-gray-700"}`,children:ee.charAt(0).toUpperCase()+ee.slice(1)},ee))}),s.jsxs("div",{className:"p-4",children:[$==="note"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(mu,{value:R,onChange:ee=>D(ee.target.value),rows:3,placeholder:"Add a note..."}),s.jsx("div",{className:"flex justify-end",children:s.jsx(wt,{type:"button",onClick:()=>Be("note"),children:"Post Note"})})]}),$==="call"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs(Nn,{value:H.direction,onChange:ee=>O(Oe=>({...Oe,direction:ee.target.value})),children:[s.jsx("option",{value:"outgoing",children:"Outgoing Call"}),s.jsx("option",{value:"incoming",children:"Incoming Call"})]}),s.jsx(mu,{value:H.summary,onChange:ee=>O(Oe=>({...Oe,summary:ee.target.value})),rows:3,placeholder:"Call summary..."}),s.jsx("div",{className:"flex justify-end",children:s.jsx(wt,{type:"button",onClick:()=>Be("call_log"),children:"Log Call"})})]}),$==="meeting"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx(kt,{type:"text",value:ge.subject,onChange:ee=>xe(Oe=>({...Oe,subject:ee.target.value})),placeholder:"Meeting Subject"}),s.jsx(mu,{value:ge.notes,onChange:ee=>xe(Oe=>({...Oe,notes:ee.target.value})),rows:3,placeholder:"Meeting notes..."}),s.jsx("div",{className:"flex justify-end",children:s.jsx(wt,{type:"button",onClick:()=>Be("meeting_log"),children:"Log Meeting"})})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[at.map(ee=>{const Oe=e.find(ht=>ht.id===ee.staffId),tt=nt[ee.type]||N1;let pt=null;if(ee.type==="call_log"||ee.type==="meeting_log")try{pt=JSON.parse(ee.content)}catch{}return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-stone-200 dark:bg-gray-700 text-stone-600 dark:text-stone-300 text-xs font-bold flex items-center justify-center flex-shrink-0 mt-1",title:Oe==null?void 0:Oe.name,children:Oe==null?void 0:Oe.initials}),s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"text-xs text-stone-500 dark:text-stone-400 flex items-center gap-2",children:[s.jsx(tt,{className:"w-4 h-4"}),s.jsx("span",{className:"font-semibold",children:(Oe==null?void 0:Oe.name)||"System"}),s.jsx("span",{children:""}),s.jsx("span",{children:V1(ee.timestamp)})]}),s.jsx("div",{className:"bg-stone-100 dark:bg-gray-700/50 p-3 rounded-lg mt-1 text-sm",children:pt&&ee.type==="call_log"?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"font-semibold text-sm capitalize",children:[pt.direction," Call"]}),s.jsx("p",{className:"whitespace-pre-wrap",children:pt.summary})]}):pt&&ee.type==="meeting_log"?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"font-semibold text-sm",children:["Meeting: ",pt.subject]}),s.jsx("p",{className:"whitespace-pre-wrap",children:pt.notes})]}):s.jsx("p",{className:"whitespace-pre-wrap",children:ee.content})})]})]},ee.id)}),at.length===0&&!v&&s.jsx("p",{className:"text-center text-sm text-stone-500 dark:text-stone-400 py-8",children:"No activity yet for this lead."})]})]})]})]})})]})]})},Z5=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ev=({appointments:t,staff:e,clients:n,quotes:r,currentUser:o,onOpenAppointmentModal:l,navigateTo:u,systemSettings:f})=>{const[m,p]=Pe.useState(new Date),[v,w]=Pe.useState("week"),[N,b]=Pe.useState(o.id),{workingWeek:I,workingHoursStart:_,workingHoursEnd:E}=f,T=Pe.useMemo(()=>{if(v==="week"){const H=new Date(m),O=H.getDay(),ge=H.getDate()-O+(O===0?-6:1);return H.setDate(ge),Array.from({length:7}).map((ie,Y)=>{const ve=new Date(H);return ve.setDate(ve.getDate()+Y),ve}).filter(ie=>I.includes(Z5[ie.getDay()]))}else{const H=new Date(m.getFullYear(),m.getMonth(),1);new Date(m.getFullYear(),m.getMonth()+1,0);const O=new Date(H),ge=O.getDay(),xe=O.getDate()-ge+(ge===0?-6:1);O.setDate(xe);const ie=[],Y=new Date(O);for(;ie.length<42;)ie.push(new Date(Y)),Y.setDate(Y.getDate()+1);return ie}},[m,v,I]),P=Pe.useMemo(()=>N==="all"?t:t.filter(H=>H.staffId===N),[t,N]),q=()=>{p(H=>{const O=new Date(H);return v==="week"?O.setDate(H.getDate()-7):O.setMonth(H.getMonth()-1,1),O})},J=()=>{p(H=>{const O=new Date(H);return v==="week"?O.setDate(H.getDate()+7):O.setMonth(H.getMonth()+1,1),O})},K=60,fe=Array.from({length:Math.max(0,E-_)},(H,O)=>O+_),ne=H=>{const O=new Date(H.start),ge=new Date(H.end),xe=(O.getHours()-_)*60+O.getMinutes(),ie=(ge.getTime()-O.getTime())/(1e3*60),Y=xe/60*K,ve=ie/60*K;return{top:`${Y}px`,height:`${ve}px`}},X=H=>{if(H.companyName)return H.companyName;const O=H.contacts.find(ge=>ge.isPrimary);return O?`${O.firstName} ${O.lastName}`:"Unnamed Client"},$=["bg-blue-200 border-blue-500 text-blue-900","bg-green-200 border-green-500 text-green-900","bg-purple-200 border-purple-500 text-purple-900","bg-yellow-200 border-yellow-500 text-yellow-900","bg-pink-200 border-pink-500 text-pink-900","bg-orange-200 border-orange-500 text-orange-900"],he=H=>{const O=e.findIndex(ge=>ge.id===H);return $[O%$.length]},R=({active:H,onClick:O,children:ge})=>s.jsx("button",{onClick:O,className:`px-3 py-1.5 text-sm font-medium rounded-md ${H?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-stone-600 dark:text-stone-300 hover:bg-stone-100 dark:hover:bg-gray-600"}`,children:ge}),D=H=>{H.reason==="Survey"&&H.quoteId?u({view:"surveyEditor",quoteId:H.quoteId}):H.clientId?u({view:"leadEditor",clientId:H.clientId}):l(H,void 0)};return s.jsxs("div",{className:"flex flex-col h-full bg-stone-50 dark:bg-gray-900",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-stone-200 dark:border-gray-700 z-20",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(wa,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:"Calendar"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:v==="week"&&T.length>0?`${T[0].toLocaleDateString(void 0,{month:"long",day:"numeric"})} - ${T[T.length-1].toLocaleDateString(void 0,{month:"long",day:"numeric",year:"numeric"})}`:m.toLocaleDateString(void 0,{month:"long",year:"numeric"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:q,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(lh,{className:"w-5 h-5"})}),s.jsx("button",{onClick:J,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(xd,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex items-center p-1 bg-stone-100 dark:bg-gray-900 rounded-lg",children:[s.jsx(R,{active:v==="month",onClick:()=>w("month"),children:"Month"}),s.jsx(R,{active:v==="week",onClick:()=>w("week"),children:"Week"})]}),s.jsxs("select",{value:N,onChange:H=>b(H.target.value),className:"bg-stone-100 dark:bg-gray-700 border border-stone-200 dark:border-gray-600 rounded-md p-2 text-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:o.id,children:"My Calendar"}),s.jsx("option",{value:"all",children:"All Users"}),s.jsx("optgroup",{label:"Team Members",children:e.filter(H=>H.id!==o.id).map(H=>s.jsx("option",{value:H.id,children:H.name},H.id))})]}),s.jsxs("button",{onClick:()=>l(null,void 0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow hover:bg-blue-700",children:[s.jsx(Ts,{className:"w-5 h-5"})," New Appointment"]})]})]})}),v==="week"?s.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex-shrink-0 flex border-b border-stone-200 dark:border-gray-700",children:[s.jsx("div",{className:"w-16 flex-shrink-0"})," ",s.jsx("div",{className:"flex-grow grid",style:{gridTemplateColumns:`repeat(${T.length}, minmax(0, 1fr))`},children:T.map(H=>s.jsxs("div",{className:"text-center py-2 border-l border-stone-200 dark:border-gray-700",children:[s.jsx("p",{className:"text-sm font-medium text-stone-500 dark:text-stone-400",children:H.toLocaleDateString(void 0,{weekday:"short"})}),s.jsx("p",{className:"text-lg font-bold text-stone-800 dark:text-stone-100",children:H.getDate()})]},H.toISOString()))})]}),s.jsxs("div",{className:"flex-grow flex overflow-auto",children:[s.jsx("div",{className:"w-16 flex-shrink-0 text-xs text-right text-stone-500 dark:text-stone-400",children:s.jsx("div",{className:"relative",children:fe.map(H=>s.jsx("div",{style:{height:`${K}px`},className:"-mt-2.5 pr-2 pt-[14px]",children:H>0&&s.jsxs("span",{children:[H>12?H-12:H,H>=12?"pm":"am"]})},H))})}),s.jsx("div",{className:"flex-grow grid",style:{gridTemplateColumns:`repeat(${T.length}, minmax(0, 1fr))`},children:T.map(H=>s.jsxs("div",{className:"border-l border-stone-200 dark:border-gray-700 relative",children:[fe.map(O=>s.jsx("div",{style:{height:`${K}px`},className:"border-b border-stone-200 dark:border-gray-700"},O)),s.jsx("div",{className:"absolute inset-0",children:P.filter(O=>new Date(O.start).toDateString()===H.toDateString()).map(O=>{const{top:ge,height:xe}=ne(O),ie=n.find(ve=>ve.id===O.clientId),Y=e.find(ve=>ve.id===O.staffId);return s.jsxs("div",{onClick:()=>D(O),className:`absolute w-full px-2 py-1 rounded shadow-sm border-l-4 cursor-pointer overflow-hidden ${he(O.staffId)}`,style:{top:ge,height:xe,minHeight:"2rem"},children:[s.jsx("p",{className:"font-bold text-xs truncate",children:O.title}),ie&&s.jsx("p",{className:"text-xs truncate",children:X(ie)}),N==="all"&&Y&&s.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 rounded-full bg-black/20 text-white text-xs font-bold flex items-center justify-center",title:Y.name,children:Y.initials})]},O.id)})})]},H.toISOString()))})]})]}):s.jsx("main",{className:"flex-grow grid grid-cols-7 grid-rows-6 overflow-hidden border-t border-stone-200 dark:border-gray-700",children:T.map(H=>{const O=H.toDateString()===new Date().toDateString(),ge=H.getMonth()===m.getMonth(),xe=P.filter(ie=>new Date(ie.start).toDateString()===H.toDateString());return s.jsxs("div",{className:`border-r border-b border-stone-200 dark:border-gray-700 p-2 flex flex-col ${ge?"bg-white dark:bg-gray-800/50":"bg-stone-50 dark:bg-gray-800/20"}`,children:[s.jsx("p",{className:`text-sm font-bold ${ge?"text-stone-700 dark:text-stone-200":"text-stone-400 dark:text-stone-500"} ${O?"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center":""}`,children:H.getDate()}),s.jsx("div",{className:"mt-1 space-y-1 overflow-y-auto",children:xe.map(ie=>s.jsx("div",{onClick:()=>D(ie),className:`p-1 rounded-sm text-xs cursor-pointer truncate ${he(ie.staffId)}`,title:ie.title,children:ie.title},ie.id))})]},H.toISOString())})})]})},tv=({isOpen:t,onClose:e,isLoading:n,error:r,emailData:o,onSend:l})=>{const[u,f]=Pe.useState(""),[m,p]=Pe.useState(""),[v,w]=Pe.useState(!1);Pe.useEffect(()=>{o&&(f(o.subject),p(o.body)),t&&w(!1)},[o,t]);const N=()=>{o&&(w(!0),setTimeout(()=>{l(u),w(!1),e()},1500))};let b;return n?b=s.jsxs("div",{className:"flex flex-col items-center justify-center p-20 text-center min-h-[40vh]",children:[s.jsx(yd,{className:"w-12 h-12 text-blue-500 animate-spin"}),s.jsx("p",{className:"mt-4 font-semibold text-lg",children:"Generating email..."}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:"Our AI is drafting a message. Please wait a moment."})]}):r?b=s.jsxs("div",{className:"p-10 text-center min-h-[40vh] flex flex-col justify-center items-center",children:[s.jsx("p",{className:"font-semibold text-lg text-red-600",children:"Error Generating Email"}),s.jsx("p",{className:"text-sm text-stone-600 dark:text-stone-300 mt-2",children:r})]}):v?b=s.jsxs("div",{className:"flex flex-col items-center justify-center p-20 text-center",style:{height:"75vh"},children:[s.jsx(ad,{className:"w-12 h-12 text-blue-500 animate-pulse"}),s.jsx("p",{className:"mt-4 font-semibold text-lg",children:"Sending Email..."}),s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["Sending to ",o==null?void 0:o.clientEmail,"."]})]}):o&&(b=s.jsxs("div",{className:"flex flex-col",style:{height:"75vh"},children:[s.jsxs("div",{className:"p-4 border-b dark:border-gray-700 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium text-stone-500 dark:text-stone-400 w-16 text-right",children:"To:"}),s.jsx(kt,{type:"text",value:o.clientEmail,readOnly:!0,className:"bg-stone-100 dark:bg-gray-800 border-none focus:ring-0"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{htmlFor:"subject",className:"text-sm font-medium text-stone-500 dark:text-stone-400 w-16 text-right",children:"Subject:"}),s.jsx(kt,{id:"subject",type:"text",value:u,onChange:I=>f(I.target.value)})]})]}),s.jsx("div",{className:"flex-grow p-4",children:s.jsx(mu,{id:"body",value:m,onChange:I=>p(I.target.value),className:"w-full h-full border-none focus:ring-0 p-0 text-base",placeholder:"Email body..."})}),s.jsx("div",{className:"flex justify-end p-4 border-t dark:border-gray-700",children:s.jsx(wt,{onClick:N,icon:ad,disabled:v,children:v?"Sending...":"Send Email"})})]})),s.jsx(ba,{isOpen:t,onClose:e,title:"Compose Follow-Up Email",size:"4xl",children:b})},nv=({isOpen:t,onClose:e,file:n})=>!t||!n?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-50 flex justify-center items-center p-4",onClick:e,role:"dialog","aria-modal":"true",children:s.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",onClick:r=>r.stopPropagation(),children:[s.jsx("img",{src:n.dataUrl,alt:n.name,className:"max-w-full max-h-[90vh] object-contain rounded-lg"}),s.jsx("div",{className:"absolute -bottom-8 left-0 right-0 text-center text-white p-2 bg-black bg-opacity-50 rounded-b-lg",children:n.name}),s.jsx("button",{onClick:e,className:"absolute -top-4 -right-4 bg-white text-gray-800 rounded-full p-2 shadow-lg hover:bg-gray-200","aria-label":"Close viewer",children:s.jsx(A0,{className:"w-6 h-6"})})]})}),rv=({isOpen:t,onClose:e,fileToAssign:n,client:r,quotes:o,onAssign:l})=>{const[u,f]=Pe.useState(""),[m,p]=Pe.useState(""),v=Pe.useMemo(()=>r?o.filter(_=>_.clientId===r.id):[],[r,o]),w=Pe.useMemo(()=>{const _=v.find(E=>E.id===u);return(_==null?void 0:_.items)||[]},[u,v]),N=()=>{n&&u&&m&&(l(n,u,m),e())};if(Pe.useState(()=>{t&&(f(""),p(""))}),!t||!n||!r)return null;const b=r.contacts.find(_=>_.isPrimary),I=r.companyName||(b?`${b.firstName} ${b.lastName}`:"this client");return s.jsx(ba,{isOpen:t,onClose:e,title:`Assign File: ${n.name}`,children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{children:["Assign this file to a specific item in one of ",I,"'s quotes."]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"1. Select Quote"}),s.jsxs("select",{value:u,onChange:_=>{f(_.target.value),p("")},className:"mt-1 w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md bg-white",children:[s.jsx("option",{value:"",children:"-- Select a Quote --"}),v.map(_=>s.jsxs("option",{value:_.id,children:[_.quoteNumber," - ",_.projectReference||"No Reference"]},_.id))]})]}),u&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"2. Select Item"}),s.jsxs("select",{value:m,onChange:_=>p(_.target.value),disabled:w.length===0,className:"mt-1 w-full p-2 border border-stone-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md bg-white",children:[s.jsx("option",{value:"",children:"-- Select an Item --"}),w.map(_=>s.jsxs("option",{value:_.id,children:["Item #",_.itemNumber," - ",_.location]},_.id))]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-md",children:"Cancel"}),s.jsx("button",{type:"button",onClick:N,disabled:!u||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md disabled:bg-blue-300",children:"Assign File"})]})]})})},ip=t=>{if(t.companyName)return t.companyName;const e=t.contacts.find(n=>n.isPrimary);return e?`${e.firstName} ${e.lastName}`:"Unnamed Client"},iv=({isOpen:t,onClose:e,appointment:n,onSave:r,onDelete:o,staff:l,clients:u,quotes:f,currentUser:m,prefilledClientId:p})=>{const[v,w]=Pe.useState({});Pe.useEffect(()=>{if(t){let T={title:"",staffId:m.id,start:new Date().toISOString().slice(0,16),end:new Date(new Date().getTime()+36e5).toISOString().slice(0,16),reason:"Sales Visit"};if(p&&!n){T.clientId=p;const P=u.find(q=>q.id===p);P&&(T.title=`Consultation - ${ip(P)}`)}w(n||T)}},[t,n,m,u,p]);const N=(T,P)=>{w(q=>({...q,[T]:P}))},b=T=>{w(P=>({...P,clientId:T,quoteId:""}))},I=T=>{if(T.preventDefault(),!v.title||!v.start||!v.end){alert("Please fill in all required fields.");return}r({id:(n==null?void 0:n.id)||`appt-${Date.now()}`,...v})},_=()=>{n&&(o(n.id),e())},E=v.clientId?f.filter(T=>T.clientId===v.clientId):[];return s.jsx(ba,{isOpen:t,onClose:e,title:n?"Edit Appointment":"New Appointment",children:s.jsxs("form",{onSubmit:I,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Title"}),s.jsx(kt,{type:"text",value:v.title||"",onChange:T=>N("title",T.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Reason"}),s.jsxs(Nn,{value:v.reason||"",onChange:T=>N("reason",T.target.value),children:[s.jsx("option",{value:"Sales Visit",children:"Sales Visit"}),s.jsx("option",{value:"Survey",children:"Survey"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Start Time"}),s.jsx(kt,{type:"datetime-local",value:v.start?new Date(new Date(v.start).getTime()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,16):"",onChange:T=>N("start",new Date(T.target.value).toISOString()),className:"dark:[color-scheme:dark]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"End Time"}),s.jsx(kt,{type:"datetime-local",value:v.end?new Date(new Date(v.end).getTime()-new Date().getTimezoneOffset()*6e4).toISOString().slice(0,16):"",onChange:T=>N("end",new Date(T.target.value).toISOString()),className:"dark:[color-scheme:dark]"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Assigned To"}),s.jsx(Nn,{value:v.staffId||"",onChange:T=>N("staffId",T.target.value),children:l.map(T=>s.jsx("option",{value:T.id,children:T.name},T.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Client"}),s.jsxs(Nn,{value:v.clientId||"",onChange:T=>b(T.target.value),children:[s.jsx("option",{value:"",children:"No Client"}),u.map(T=>s.jsx("option",{value:T.id,children:ip(T)},T.id))]})]}),v.clientId&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Related Quote"}),s.jsxs(Nn,{value:v.quoteId||"",onChange:T=>N("quoteId",T.target.value),children:[s.jsx("option",{value:"",children:"No specific quote"}),E.map(T=>s.jsxs("option",{value:T.id,children:[T.quoteNumber," - ",T.projectReference||"No Ref"]},T.id))]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsx("div",{children:n&&s.jsx(wt,{type:"button",variant:"danger",onClick:_,icon:Qo,children:"Delete"})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(wt,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),s.jsx(wt,{type:"submit",icon:Iu,children:"Save Appointment"})]})]})]})})},eg=({title:t,description:e,icon:n=yd})=>s.jsx("div",{className:"bg-stone-50 dark:bg-gray-900 h-full flex items-center justify-center text-center p-4",children:s.jsxs("div",{children:[s.jsx(n,{className:"w-16 h-16 mx-auto text-stone-400 dark:text-stone-500"}),s.jsx("h2",{className:"mt-6 text-2xl font-bold text-stone-800 dark:text-stone-100",children:t}),s.jsx("p",{className:"mt-2 text-lg text-stone-500 dark:text-stone-400",children:"This feature is coming soon."}),s.jsx("p",{className:"mt-1 text-sm text-stone-400 dark:text-stone-500 max-w-md mx-auto",children:e})]})}),ov=()=>s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsx("div",{className:"flex justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Lf,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Production Schedule"})]})})}),s.jsx("main",{className:"flex-grow overflow-y-auto",children:s.jsx(eg,{title:"Production Planning",description:"Manage your manufacturing workflow, track job progress, and generate cutting lists.",icon:Lf})})]}),sv=()=>s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsx("div",{className:"flex justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pf,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"Installation Schedule"})]})})}),s.jsx("main",{className:"flex-grow overflow-y-auto",children:s.jsx(eg,{title:"Installation Schedule",description:"Manage installation teams, view job details on-site, and track project completion.",icon:Pf})})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let av,lv;function uv(){return{geminiUrl:av,vertexUrl:lv}}function cv(t,e,n,r){var o,l;if(!(t!=null&&t.baseUrl)){const u=uv();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:n:(l=u.geminiUrl)!==null&&l!==void 0?l:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vl{}function Bt(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const l=e[o];return l!=null?String(l):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(t,e,n){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in t))if(Array.isArray(n))t[f]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[f])){const m=t[f];if(Array.isArray(n))for(let p=0;p<m.length;p++){const v=m[p];d(v,e.slice(l+1),n[p])}else for(const p of m)d(p,e.slice(l+1),n)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in t||(t[f]=[{}]);const m=t[f];d(m[0],e.slice(l+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function c(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in t){const l=t[o];return Array.isArray(l)?l.map(u=>c(u,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var op;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(op||(op={}));var sp;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(sp||(sp={}));var ul;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ul||(ul={}));var ap;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ap||(ap={}));var lp;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(lp||(lp={}));var up;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(up||(up={}));var cp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(cp||(cp={}));var dp;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(dp||(dp={}));var fp;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(fp||(fp={}));var hp;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hp||(hp={}));var mp;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(mp||(mp={}));var pp;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(pp||(pp={}));var gp;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gp||(gp={}));var vp;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(vp||(vp={}));var xp;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xp||(xp={}));var pd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(pd||(pd={}));var yp;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(yp||(yp={}));var Yf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Yf||(Yf={}));var wp;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(wp||(wp={}));var bp;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(bp||(bp={}));var Np;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Np||(Np={}));var Sp;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Sp||(Sp={}));var Cp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Cp||(Cp={}));var kp;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kp||(kp={}));var Tp;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Tp||(Tp={}));var Ip;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ip||(Ip={}));var Ap;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ap||(Ap={}));var _p;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(_p||(_p={}));var Ep;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ep||(Ep={}));var Lp;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Lp||(Lp={}));var Pp;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Pp||(Pp={}));var Mp;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Mp||(Mp={}));var jp;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(jp||(jp={}));var Dp;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Dp||(Dp={}));var Rp;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Rp||(Rp={}));var Fp;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Fp||(Fp={}));var Bp;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Bp||(Bp={}));var Up;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Up||(Up={}));var Hp;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Hp||(Hp={}));var Vp;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Vp||(Vp={}));var qp;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(qp||(qp={}));var Op;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Op||(Op={}));var zp;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(zp||(zp={}));var xu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(xu||(xu={}));class Kf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class tc{get text(){var e,n,r,o,l,u,f,m;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const w=[];for(const N of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[b,I]of Object.entries(N))b!=="text"&&b!=="thought"&&(I!==null||I!==void 0)&&w.push(b);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;v=!0,p+=N.text}}return w.length>0&&console.warn(`there are non-text parts ${w} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,r,o,l,u,f,m;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const w of(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[N,b]of Object.entries(w))N!=="inlineData"&&(b!==null||b!==void 0)&&v.push(N);w.inlineData&&typeof w.inlineData.data=="string"&&(p+=atob(w.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,r,o,l,u,f,m;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,r,o,l,u,f,m,p;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(w=>w.executableCode).map(w=>w.executableCode).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,r,o,l,u,f,m,p;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(w=>w.codeExecutionResult).map(w=>w.codeExecutionResult).filter(w=>w!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Wp{}class $p{}class dv{}class fv{}class hv{}class Gp{}class Jp{}class Yp{}class mv{}class Kp{}class Qp{}class Xp{}class Zp{}class pv{}class gv{}class vv{}class e0{}class xv{get text(){var e,n,r;let o="",l=!1;const u=[];for(const f of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[m,p]of Object.entries(f))m!=="text"&&m!=="thought"&&p!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?o:void 0}get data(){var e,n,r;let o="";const l=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class gd{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new gd;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const o=e.response;if(o){const l=new Kp,u=o.videos;l.generatedVideos=u==null?void 0:u.map(f=>({video:{uri:f.gcsUri,videoBytes:f.bytesBase64Encoded?Jf(f.bytesBase64Encoded):void 0,mimeType:f.mimeType}})),l.raiMediaFilteredCount=o.raiMediaFilteredCount,l.raiMediaFilteredReasons=o.raiMediaFilteredReasons,r.response=l}}else{const o=e.response;if(o){const l=new Kp,u=o.generateVideoResponse,f=u==null?void 0:u.generatedSamples;l.generatedVideos=f==null?void 0:f.map(m=>{const p=m.video;return{video:{uri:p==null?void 0:p.uri,videoBytes:p!=null&&p.encodedVideo?Jf(p==null?void 0:p.encodedVideo):void 0,mimeType:m.encoding}}}),l.raiMediaFilteredCount=u==null?void 0:u.raiMediaFilteredCount,l.raiMediaFilteredReasons=u==null?void 0:u.raiMediaFilteredReasons,r.response=l}}return r}}class yv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zn(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tg(t,e){const n=Zn(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ng(t){return Array.isArray(t)?t.map(e=>vd(e)):[vd(t)]}function vd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function rg(t){const e=vd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ig(t){const e=vd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function t0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function og(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>t0(e)):[t0(t)]}function Qf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function n0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function r0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Vi(t){if(t==null)throw new Error("ContentUnion is required");return Qf(t)?t:{role:"user",parts:og(t)}}function sg(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Vi(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Vi(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Vi(n)):[Vi(e)]}function Ko(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(n0(t)||r0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Vi(t)]}const e=[],n=[],r=Qf(t[0]);for(const o of t){const l=Qf(o);if(l!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(o);else{if(n0(o)||r0(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:og(n)}),e}function wv(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ul).includes(n[0].toUpperCase())?n[0].toUpperCase():ul.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ul).includes(r.toUpperCase())?r.toUpperCase():ul.TYPE_UNSPECIFIED})}}function Cu(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&wv(t.type,e);for(const[u,f]of Object.entries(t))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(ul).includes(f.toUpperCase())?f.toUpperCase():ul.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=Cu(f);else if(r.includes(u)){const m=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}m.push(Cu(p))}e[u]=m}else if(o.includes(u)){const m={};for(const[p,v]of Object.entries(f))m[p]=Cu(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function mh(t){return Cu(t)}function ph(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function gh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Au(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Cu(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Cu(e.response));return t}function _u(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function bv(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Sa(t,e){if(typeof e!="string")throw new Error("name must be a string");return bv(t,e,"cachedContents")}function ag(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ql(t){return Jf(t)}function Nv(t){return t!=null&&typeof t=="object"&&"name"in t}function Sv(t){return t!=null&&typeof t=="object"&&"video"in t}function Cv(t){return t!=null&&typeof t=="object"&&"uri"in t}function lg(t){var e;let n;if(Nv(t)&&(n=t.name),!(Cv(t)&&(n=t.uri,n===void 0))&&!(Sv(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function ug(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function cg(t){for(const e of["models","tunedModels","publisherModels"])if(kv(t,e))return t[e];return[]}function kv(t,e){return t!==null&&typeof t=="object"&&e in t}function Tv(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Iv(t,e={}){const n=[],r=new Set;for(const o of t){const l=o.name;if(r.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);r.add(l);const u=Tv(o,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function dg(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Av(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Eu(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function fg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _v(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function Ev(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Lv(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Pv(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],_v(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],Ev(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],Lv(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function hg(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Pv(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function Mv(t){const e={},n=c(t,["anyOf"]);n!=null&&d(e,["anyOf"],n);const r=c(t,["default"]);r!=null&&d(e,["default"],r);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const l=c(t,["enum"]);l!=null&&d(e,["enum"],l);const u=c(t,["example"]);u!=null&&d(e,["example"],u);const f=c(t,["format"]);f!=null&&d(e,["format"],f);const m=c(t,["items"]);m!=null&&d(e,["items"],m);const p=c(t,["maxItems"]);p!=null&&d(e,["maxItems"],p);const v=c(t,["maxLength"]);v!=null&&d(e,["maxLength"],v);const w=c(t,["maxProperties"]);w!=null&&d(e,["maxProperties"],w);const N=c(t,["maximum"]);N!=null&&d(e,["maximum"],N);const b=c(t,["minItems"]);b!=null&&d(e,["minItems"],b);const I=c(t,["minLength"]);I!=null&&d(e,["minLength"],I);const _=c(t,["minProperties"]);_!=null&&d(e,["minProperties"],_);const E=c(t,["minimum"]);E!=null&&d(e,["minimum"],E);const T=c(t,["nullable"]);T!=null&&d(e,["nullable"],T);const P=c(t,["pattern"]);P!=null&&d(e,["pattern"],P);const q=c(t,["properties"]);q!=null&&d(e,["properties"],q);const J=c(t,["propertyOrdering"]);J!=null&&d(e,["propertyOrdering"],J);const K=c(t,["required"]);K!=null&&d(e,["required"],K);const fe=c(t,["title"]);fe!=null&&d(e,["title"],fe);const ne=c(t,["type"]);return ne!=null&&d(e,["type"],ne),e}function jv(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&d(e,["category"],n);const r=c(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function Dv(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const r=c(t,["description"]);r!=null&&d(e,["description"],r);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const l=c(t,["parameters"]);l!=null&&d(e,["parameters"],l);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const m=c(t,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function Rv(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function Fv(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],Rv(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Bv(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function Uv(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],Bv(n)),e}function Hv(){return{}}function Vv(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function qv(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Dv(p))),d(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],Fv(r));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],Uv(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],Hv());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],Vv(u));const f=c(t,["codeExecution"]);return f!=null&&d(e,["codeExecution"],f),e}function Ov(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(e,["allowedFunctionNames"],r),e}function zv(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const r=c(t,["longitude"]);return r!=null&&d(e,["longitude"],r),e}function Wv(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],zv(n));const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function $v(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],Ov(n));const r=c(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],Wv(r)),e}function Gv(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function mg(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],Gv(n)),e}function Jv(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const r=c(t,["voiceConfig"]);return r!=null&&d(e,["voiceConfig"],mg(r)),e}function Yv(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Jv(o))),d(e,["speakerVoiceConfigs"],r)}return e}function Kv(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],mg(n));const r=c(t,["multiSpeakerVoiceConfig"]);r!=null&&d(e,["multiSpeakerVoiceConfig"],Yv(r));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function Qv(t){const e={},n=c(t,["includeThoughts"]);n!=null&&d(e,["includeThoughts"],n);const r=c(t,["thinkingBudget"]);return r!=null&&d(e,["thinkingBudget"],r),e}function Xv(t,e,n){const r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],hg(Vi(o)));const l=c(e,["temperature"]);l!=null&&d(r,["temperature"],l);const u=c(e,["topP"]);u!=null&&d(r,["topP"],u);const f=c(e,["topK"]);f!=null&&d(r,["topK"],f);const m=c(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const p=c(e,["maxOutputTokens"]);p!=null&&d(r,["maxOutputTokens"],p);const v=c(e,["stopSequences"]);v!=null&&d(r,["stopSequences"],v);const w=c(e,["responseLogprobs"]);w!=null&&d(r,["responseLogprobs"],w);const N=c(e,["logprobs"]);N!=null&&d(r,["logprobs"],N);const b=c(e,["presencePenalty"]);b!=null&&d(r,["presencePenalty"],b);const I=c(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const _=c(e,["seed"]);_!=null&&d(r,["seed"],_);const E=c(e,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);const T=c(e,["responseSchema"]);T!=null&&d(r,["responseSchema"],Mv(mh(T)));const P=c(e,["responseJsonSchema"]);if(P!=null&&d(r,["responseJsonSchema"],P),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=c(e,["safetySettings"]);if(n!==void 0&&q!=null){let R=q;Array.isArray(R)&&(R=R.map(D=>jv(D))),d(n,["safetySettings"],R)}const J=c(e,["tools"]);if(n!==void 0&&J!=null){let R=_u(J);Array.isArray(R)&&(R=R.map(D=>qv(Au(D)))),d(n,["tools"],R)}const K=c(e,["toolConfig"]);if(n!==void 0&&K!=null&&d(n,["toolConfig"],$v(K)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=c(e,["cachedContent"]);n!==void 0&&fe!=null&&d(n,["cachedContent"],Sa(t,fe));const ne=c(e,["responseModalities"]);ne!=null&&d(r,["responseModalities"],ne);const X=c(e,["mediaResolution"]);X!=null&&d(r,["mediaResolution"],X);const $=c(e,["speechConfig"]);if($!=null&&d(r,["speechConfig"],Kv(ph($))),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=c(e,["thinkingConfig"]);return he!=null&&d(r,["thinkingConfig"],Qv(he)),r}function Zv(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["request","model"],Zn(t,r));const o=c(e,["contents"]);if(o!=null){let u=Ko(o);Array.isArray(u)&&(u=u.map(f=>hg(f))),d(n,["request","contents"],u)}const l=c(e,["config"]);return l!=null&&d(n,["request","generationConfig"],Xv(t,l,n)),n}function ex(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&d(n,["fileName"],r);const o=c(e,["inlinedRequests"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Zv(t,u))),d(n,["requests","requests"],l)}return n}function tx(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function nx(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["src"]);o!=null&&d(n,["batch","inputConfig"],ex(t,dg(t,o)));const l=c(e,["config"]);return l!=null&&d(n,["config"],tx(l,n)),n}function rx(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Eu(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function ix(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Eu(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function ox(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);if(e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function sx(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],ox(n,e)),e}function ax(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Eu(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function lx(t){const e={},n=c(t,["format"]);n!=null&&d(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);const o=c(t,["bigqueryUri"]);if(o!=null&&d(e,["bigquerySource","inputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ux(t){const e={},n=c(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);const o=c(t,["bigqueryUri"]);if(o!=null&&d(e,["bigqueryDestination","outputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function cx(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const o=c(t,["dest"]);return e!==void 0&&o!=null&&d(e,["outputConfig"],ux(Av(o))),n}function dx(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["model"],Zn(t,r));const o=c(e,["src"]);o!=null&&d(n,["inputConfig"],lx(dg(t,o)));const l=c(e,["config"]);return l!=null&&d(n,["config"],cx(l,n)),n}function fx(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Eu(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function hx(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Eu(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function mx(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const l=c(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),n}function px(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],mx(n,e)),e}function gx(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Eu(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function vx(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function xx(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function yx(t){const e={},n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function wx(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],vx(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],xx(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],yx(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function bx(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>wx(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function Nx(t){const e={},n=c(t,["citationSources"]);return n!=null&&d(e,["citations"],n),e}function Sx(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const r=c(t,["urlRetrievalStatus"]);return r!=null&&d(e,["urlRetrievalStatus"],r),e}function Cx(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Sx(o))),d(e,["urlMetadata"],r)}return e}function kx(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],bx(n));const r=c(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],Nx(r));const o=c(t,["tokenCount"]);o!=null&&d(e,["tokenCount"],o);const l=c(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const u=c(t,["urlContextMetadata"]);u!=null&&d(e,["urlContextMetadata"],Cx(u));const f=c(t,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const m=c(t,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const p=c(t,["index"]);p!=null&&d(e,["index"],p);const v=c(t,["logprobsResult"]);v!=null&&d(e,["logprobsResult"],v);const w=c(t,["safetyRatings"]);return w!=null&&d(e,["safetyRatings"],w),e}function Tx(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>kx(p))),d(e,["candidates"],m)}const o=c(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const l=c(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const u=c(t,["responseId"]);u!=null&&d(e,["responseId"],u);const f=c(t,["usageMetadata"]);return f!=null&&d(e,["usageMetadata"],f),e}function pg(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const r=c(t,["code"]);r!=null&&d(e,["code"],r);const o=c(t,["message"]);return o!=null&&d(e,["message"],o),e}function Ix(t){const e={},n=c(t,["response"]);n!=null&&d(e,["response"],Tx(n));const r=c(t,["error"]);return r!=null&&d(e,["error"],pg(r)),e}function Ax(t){const e={},n=c(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Ix(l))),d(e,["inlinedResponses"],o)}return e}function Xf(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["metadata","state"]);o!=null&&d(e,["state"],fg(o));const l=c(t,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const u=c(t,["metadata","endTime"]);u!=null&&d(e,["endTime"],u);const f=c(t,["metadata","updateTime"]);f!=null&&d(e,["updateTime"],f);const m=c(t,["metadata","model"]);m!=null&&d(e,["model"],m);const p=c(t,["metadata","output"]);return p!=null&&d(e,["dest"],Ax(p)),e}function _x(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["operations"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Xf(u))),d(e,["batchJobs"],l)}return e}function Ex(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const l=c(t,["error"]);return l!=null&&d(e,["error"],pg(l)),e}function gg(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const r=c(t,["code"]);r!=null&&d(e,["code"],r);const o=c(t,["message"]);return o!=null&&d(e,["message"],o),e}function Lx(t){const e={},n=c(t,["instancesFormat"]);n!=null&&d(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);const o=c(t,["bigquerySource","inputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function Px(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);const o=c(t,["bigqueryDestination","outputUri"]);return o!=null&&d(e,["bigqueryUri"],o),e}function Zf(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["state"]);o!=null&&d(e,["state"],fg(o));const l=c(t,["error"]);l!=null&&d(e,["error"],gg(l));const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const f=c(t,["startTime"]);f!=null&&d(e,["startTime"],f);const m=c(t,["endTime"]);m!=null&&d(e,["endTime"],m);const p=c(t,["updateTime"]);p!=null&&d(e,["updateTime"],p);const v=c(t,["model"]);v!=null&&d(e,["model"],v);const w=c(t,["inputConfig"]);w!=null&&d(e,["src"],Lx(w));const N=c(t,["outputConfig"]);return N!=null&&d(e,["dest"],Px(N)),e}function Mx(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["batchPredictionJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Zf(u))),d(e,["batchJobs"],l)}return e}function jx(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const l=c(t,["error"]);return l!=null&&d(e,["error"],gg(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ul;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ul||(Ul={}));class ac{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,l;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!r||Object.keys(r).length===0?u={config:{}}:typeof r=="object"?u=Object.assign({},r):u=r,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dx extends Vl{constructor(e){super(),this.apiClient=e,this.create=async n=>{if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${o}`;else throw new Error("Unsupported source:"+n.src)}return await this.createInternal(n)},this.list=async(n={})=>new ac(Ul.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=dx(this.apiClient,e);return f=Bt("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Zf(v))}else{const p=nx(this.apiClient,e);return f=Bt("{model}:batchGenerateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Xf(v))}}async get(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=fx(this.apiClient,e);return f=Bt("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Zf(v))}else{const p=rx(this.apiClient,e);return f=Bt("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>Xf(v))}}async cancel(e){var n,r,o,l;let u="",f={};if(this.apiClient.isVertexAI()){const m=hx(this.apiClient,e);u=Bt("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const m=ix(this.apiClient,e);u=Bt("batches/{name}:cancel",m._url),f=m._query,delete m.config,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=px(e);return f=Bt("batchPredictionJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=Mx(v),N=new e0;return Object.assign(N,w),N})}else{const p=sx(e);return f=Bt("batches",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=_x(v),N=new e0;return Object.assign(N,w),N})}}async delete(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=gx(this.apiClient,e);return f=Bt("batchPredictionJobs/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>jx(v))}else{const p=ax(this.apiClient,e);return f=Bt("batches/{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>Ex(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rx(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function Fx(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Bx(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Ux(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],Rx(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],Fx(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],Bx(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function i0(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Ux(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function Hx(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const r=c(t,["description"]);r!=null&&d(e,["description"],r);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const l=c(t,["parameters"]);l!=null&&d(e,["parameters"],l);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const m=c(t,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function Vx(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function qx(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],Vx(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ox(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function zx(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],Ox(n)),e}function Wx(){return{}}function $x(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function Gx(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Hx(p))),d(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],qx(r));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],zx(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],Wx());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],$x(u));const f=c(t,["codeExecution"]);return f!=null&&d(e,["codeExecution"],f),e}function Jx(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(e,["allowedFunctionNames"],r),e}function Yx(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const r=c(t,["longitude"]);return r!=null&&d(e,["longitude"],r),e}function Kx(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],Yx(n));const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function Qx(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],Jx(n));const r=c(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],Kx(r)),e}function Xx(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const o=c(t,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);const l=c(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const u=c(t,["contents"]);if(e!==void 0&&u!=null){let v=Ko(u);Array.isArray(v)&&(v=v.map(w=>i0(w))),d(e,["contents"],v)}const f=c(t,["systemInstruction"]);e!==void 0&&f!=null&&d(e,["systemInstruction"],i0(Vi(f)));const m=c(t,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(w=>Gx(w))),d(e,["tools"],v)}const p=c(t,["toolConfig"]);if(e!==void 0&&p!=null&&d(e,["toolConfig"],Qx(p)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Zx(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["model"],tg(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],Xx(o,n)),n}function ey(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Sa(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function ty(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Sa(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function ny(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const o=c(t,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),n}function ry(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Sa(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],ny(o,n)),n}function iy(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function oy(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],iy(n,e)),e}function sy(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function ay(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["data"]);r!=null&&d(e,["data"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function ly(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["fileUri"]);r!=null&&d(e,["fileUri"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function uy(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],sy(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],ay(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],ly(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function o0(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>uy(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function cy(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);const l=c(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const u=c(t,["response"]);u!=null&&d(e,["response"],u);const f=c(t,["responseJsonSchema"]);return f!=null&&d(e,["responseJsonSchema"],f),e}function dy(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function fy(t){const e={},n=c(t,["timeRangeFilter"]);n!=null&&d(e,["timeRangeFilter"],dy(n));const r=c(t,["excludeDomains"]);return r!=null&&d(e,["excludeDomains"],r),e}function hy(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function my(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],hy(n)),e}function py(t){const e={},n=c(t,["excludeDomains"]);return n!=null&&d(e,["excludeDomains"],n),e}function gy(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&d(e,["apiKeyString"],n),e}function vy(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&d(e,["apiKeyConfig"],gy(n));const r=c(t,["authType"]);r!=null&&d(e,["authType"],r);const o=c(t,["googleServiceAccountConfig"]);o!=null&&d(e,["googleServiceAccountConfig"],o);const l=c(t,["httpBasicAuthConfig"]);l!=null&&d(e,["httpBasicAuthConfig"],l);const u=c(t,["oauthConfig"]);u!=null&&d(e,["oauthConfig"],u);const f=c(t,["oidcConfig"]);return f!=null&&d(e,["oidcConfig"],f),e}function xy(t){const e={},n=c(t,["authConfig"]);return n!=null&&d(e,["authConfig"],vy(n)),e}function yy(){return{}}function wy(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function by(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(N=>cy(N))),d(e,["functionDeclarations"],w)}const r=c(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const o=c(t,["googleSearch"]);o!=null&&d(e,["googleSearch"],fy(o));const l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],my(l));const u=c(t,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],py(u));const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],xy(f)),c(t,["urlContext"])!=null&&d(e,["urlContext"],yy());const p=c(t,["computerUse"]);p!=null&&d(e,["computerUse"],wy(p));const v=c(t,["codeExecution"]);return v!=null&&d(e,["codeExecution"],v),e}function Ny(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(e,["allowedFunctionNames"],r),e}function Sy(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const r=c(t,["longitude"]);return r!=null&&d(e,["longitude"],r),e}function Cy(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],Sy(n));const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function ky(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],Ny(n));const r=c(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],Cy(r)),e}function Ty(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const o=c(t,["expireTime"]);e!==void 0&&o!=null&&d(e,["expireTime"],o);const l=c(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const u=c(t,["contents"]);if(e!==void 0&&u!=null){let w=Ko(u);Array.isArray(w)&&(w=w.map(N=>o0(N))),d(e,["contents"],w)}const f=c(t,["systemInstruction"]);e!==void 0&&f!=null&&d(e,["systemInstruction"],o0(Vi(f)));const m=c(t,["tools"]);if(e!==void 0&&m!=null){let w=m;Array.isArray(w)&&(w=w.map(N=>by(N))),d(e,["tools"],w)}const p=c(t,["toolConfig"]);e!==void 0&&p!=null&&d(e,["toolConfig"],ky(p));const v=c(t,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),n}function Iy(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["model"],tg(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],Ty(o,n)),n}function Ay(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Sa(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function _y(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Sa(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function Ey(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);const o=c(t,["expireTime"]);return e!==void 0&&o!=null&&d(e,["expireTime"],o),n}function Ly(t,e){const n={},r=c(e,["name"]);r!=null&&d(n,["_url","name"],Sa(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],Ey(o,n)),n}function Py(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function My(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],Py(n,e)),e}function od(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["model"]);o!=null&&d(e,["model"],o);const l=c(t,["createTime"]);l!=null&&d(e,["createTime"],l);const u=c(t,["updateTime"]);u!=null&&d(e,["updateTime"],u);const f=c(t,["expireTime"]);f!=null&&d(e,["expireTime"],f);const m=c(t,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function jy(){return{}}function Dy(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>od(u))),d(e,["cachedContents"],l)}return e}function sd(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["model"]);o!=null&&d(e,["model"],o);const l=c(t,["createTime"]);l!=null&&d(e,["createTime"],l);const u=c(t,["updateTime"]);u!=null&&d(e,["updateTime"],u);const f=c(t,["expireTime"]);f!=null&&d(e,["expireTime"],f);const m=c(t,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function Ry(){return{}}function Fy(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["cachedContents"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>sd(u))),d(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class By extends Vl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ac(Ul.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Iy(this.apiClient,e);return f=Bt("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>sd(v))}else{const p=Zx(this.apiClient,e);return f=Bt("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>od(v))}}async get(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Ay(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>sd(v))}else{const p=ey(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>od(v))}}async delete(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=_y(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(()=>{const v=Ry(),w=new Xp;return Object.assign(w,v),w})}else{const p=ty(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(()=>{const v=jy(),w=new Xp;return Object.assign(w,v),w})}}async update(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=Ly(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>sd(v))}else{const p=ry(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>od(v))}}async listInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=My(e);return f=Bt("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=Fy(v),N=new Zp;return Object.assign(N,w),N})}else{const p=oy(e);return f=Bt("cachedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=Dy(v),N=new Zp;return Object.assign(N,w),N})}}}function s0(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(t){return this instanceof xr?(this.v=t,this):new xr(t)}function ku(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(I){return Promise.resolve(I).then(b,w)}}function f(b,I){r[b]&&(o[b]=function(_){return new Promise(function(E,T){l.push([b,_,E,T])>1||m(b,_)})},I&&(o[b]=I(o[b])))}function m(b,I){try{p(r[b](I))}catch(_){N(l[0][3],_)}}function p(b){b.value instanceof xr?Promise.resolve(b.value.v).then(v,w):N(l[0][2],b)}function v(b){m("next",b)}function w(b){m("throw",b)}function N(b,I){b(I),l.shift(),l.length&&m(l[0][0],l[0][1])}}function rc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof s0=="function"?s0(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(l){n[l]=t[l]&&function(u){return new Promise(function(f,m){u=t[l](u),o(f,m,u.done,u.value)})}}function o(l,u,f,m){Promise.resolve(m).then(function(p){l({value:p,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uy(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vg(n)}function vg(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Hy(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function a0(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let l=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),l&&!vg(t[r])&&(l=!1),r++;l?e.push(...o):e.pop()}return e}class Vy{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new qy(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qy{constructor(e,n,r,o={},l=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=l,this.sendPromise=Promise.resolve(),Hy(l)}async sendMessage(e){var n;await this.sendPromise;const r=Vi(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var l,u,f;const m=await o,p=(u=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,w=this.getHistory(!0).length;let N=[];v!=null&&(N=(f=v.slice(w))!==null&&f!==void 0?f:[]);const b=p?[p]:[];this.recordHistory(r,b,N)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=Vi(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const l=await o;return this.processStreamResponse(l,r)}getHistory(e=!1){const n=e?a0(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,o;return ku(this,arguments,function*(){var u,f,m,p;const v=[];try{for(var w=!0,N=rc(e),b;b=yield xr(N.next()),u=b.done,!u;w=!0){p=b.value,w=!1;const I=p;if(Uy(I)){const _=(o=(r=I.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;_!==void 0&&v.push(_)}yield yield xr(I)}}catch(I){f={error:I}}finally{try{!w&&!u&&(m=N.return)&&(yield xr(m.call(N)))}finally{if(f)throw f.error}}this.recordHistory(n,v)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(l=>l.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...a0(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,kd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oy(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&d(e,["_query","pageToken"],o),n}function zy(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],Oy(n,e)),e}function Wy(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const r=c(t,["message"]);r!=null&&d(e,["message"],r);const o=c(t,["code"]);return o!=null&&d(e,["code"],o),e}function $y(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["mimeType"]);o!=null&&d(e,["mimeType"],o);const l=c(t,["sizeBytes"]);l!=null&&d(e,["sizeBytes"],l);const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const f=c(t,["expirationTime"]);f!=null&&d(e,["expirationTime"],f);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const p=c(t,["sha256Hash"]);p!=null&&d(e,["sha256Hash"],p);const v=c(t,["uri"]);v!=null&&d(e,["uri"],v);const w=c(t,["downloadUri"]);w!=null&&d(e,["downloadUri"],w);const N=c(t,["state"]);N!=null&&d(e,["state"],N);const b=c(t,["source"]);b!=null&&d(e,["source"],b);const I=c(t,["videoMetadata"]);I!=null&&d(e,["videoMetadata"],I);const _=c(t,["error"]);return _!=null&&d(e,["error"],Wy(_)),e}function Gy(t){const e={},n=c(t,["file"]);n!=null&&d(e,["file"],$y(n));const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function Jy(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","file"],lg(n));const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function Yy(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","file"],lg(n));const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function Ky(t){const e={},n=c(t,["details"]);n!=null&&d(e,["details"],n);const r=c(t,["message"]);r!=null&&d(e,["message"],r);const o=c(t,["code"]);return o!=null&&d(e,["code"],o),e}function eh(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["mimeType"]);o!=null&&d(e,["mimeType"],o);const l=c(t,["sizeBytes"]);l!=null&&d(e,["sizeBytes"],l);const u=c(t,["createTime"]);u!=null&&d(e,["createTime"],u);const f=c(t,["expirationTime"]);f!=null&&d(e,["expirationTime"],f);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const p=c(t,["sha256Hash"]);p!=null&&d(e,["sha256Hash"],p);const v=c(t,["uri"]);v!=null&&d(e,["uri"],v);const w=c(t,["downloadUri"]);w!=null&&d(e,["downloadUri"],w);const N=c(t,["state"]);N!=null&&d(e,["state"],N);const b=c(t,["source"]);b!=null&&d(e,["source"],b);const I=c(t,["videoMetadata"]);I!=null&&d(e,["videoMetadata"],I);const _=c(t,["error"]);return _!=null&&d(e,["error"],Ky(_)),e}function Qy(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["files"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>eh(u))),d(e,["files"],l)}return e}function Xy(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function Zy(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ew extends Vl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ac(Ul.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>eh(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zy(e);return l=Bt("files",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=Qy(m),v=new pv;return Object.assign(v,p),v})}}async createInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Gy(e);return l=Bt("upload/v1beta/files",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const p=Xy(m),v=new gv;return Object.assign(v,p),v})}}async get(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Jy(e);return l=Bt("files/{file}",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>eh(m))}}async delete(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Yy(e);return l=Bt("files/{file}",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(()=>{const m=Zy(),p=new vv;return Object.assign(p,m),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tw(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function xg(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],tw(n)),e}function nw(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const r=c(t,["voiceConfig"]);return r!=null&&d(e,["voiceConfig"],xg(r)),e}function rw(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>nw(o))),d(e,["speakerVoiceConfigs"],r)}return e}function iw(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],xg(n));const r=c(t,["multiSpeakerVoiceConfig"]);r!=null&&d(e,["multiSpeakerVoiceConfig"],rw(r));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function ow(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function sw(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function aw(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function lw(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],ow(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],sw(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],aw(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function uw(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>lw(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function cw(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const r=c(t,["description"]);r!=null&&d(e,["description"],r);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const l=c(t,["parameters"]);l!=null&&d(e,["parameters"],l);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const m=c(t,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function dw(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function fw(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],dw(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function hw(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function mw(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],hw(n)),e}function pw(){return{}}function gw(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function vw(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>cw(p))),d(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],fw(r));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],mw(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],pw());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],gw(u));const f=c(t,["codeExecution"]);return f!=null&&d(e,["codeExecution"],f),e}function xw(t){const e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function l0(){return{}}function yw(t){const e={},n=c(t,["disabled"]);n!=null&&d(e,["disabled"],n);const r=c(t,["startOfSpeechSensitivity"]);r!=null&&d(e,["startOfSpeechSensitivity"],r);const o=c(t,["endOfSpeechSensitivity"]);o!=null&&d(e,["endOfSpeechSensitivity"],o);const l=c(t,["prefixPaddingMs"]);l!=null&&d(e,["prefixPaddingMs"],l);const u=c(t,["silenceDurationMs"]);return u!=null&&d(e,["silenceDurationMs"],u),e}function ww(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&d(e,["automaticActivityDetection"],yw(n));const r=c(t,["activityHandling"]);r!=null&&d(e,["activityHandling"],r);const o=c(t,["turnCoverage"]);return o!=null&&d(e,["turnCoverage"],o),e}function bw(t){const e={},n=c(t,["targetTokens"]);return n!=null&&d(e,["targetTokens"],n),e}function Nw(t){const e={},n=c(t,["triggerTokens"]);n!=null&&d(e,["triggerTokens"],n);const r=c(t,["slidingWindow"]);return r!=null&&d(e,["slidingWindow"],bw(r)),e}function Sw(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&d(e,["proactiveAudio"],n),e}function Cw(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);const l=c(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const u=c(t,["topP"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","topP"],u);const f=c(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const m=c(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const p=c(t,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const w=c(t,["speechConfig"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","speechConfig"],iw(gh(w)));const N=c(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],N);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],uw(Vi(b)));const I=c(t,["tools"]);if(e!==void 0&&I!=null){let K=_u(I);Array.isArray(K)&&(K=K.map(fe=>vw(Au(fe)))),d(e,["setup","tools"],K)}const _=c(t,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],xw(_));const E=c(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","inputAudioTranscription"],l0());const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","outputAudioTranscription"],l0());const P=c(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&d(e,["setup","realtimeInputConfig"],ww(P));const q=c(t,["contextWindowCompression"]);e!==void 0&&q!=null&&d(e,["setup","contextWindowCompression"],Nw(q));const J=c(t,["proactivity"]);return e!==void 0&&J!=null&&d(e,["setup","proactivity"],Sw(J)),n}function kw(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["setup","model"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],Cw(o,n)),n}function Tw(){return{}}function Iw(){return{}}function Aw(t){const e={},n=c(t,["media"]);n!=null&&d(e,["mediaChunks"],ng(n));const r=c(t,["audio"]);r!=null&&d(e,["audio"],ig(r));const o=c(t,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);const l=c(t,["video"]);l!=null&&d(e,["video"],rg(l));const u=c(t,["text"]);return u!=null&&d(e,["text"],u),c(t,["activityStart"])!=null&&d(e,["activityStart"],Tw()),c(t,["activityEnd"])!=null&&d(e,["activityEnd"],Iw()),e}function yg(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const r=c(t,["weight"]);return r!=null&&d(e,["weight"],r),e}function _w(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>yg(o))),d(e,["weightedPrompts"],r)}return e}function wg(t){const e={},n=c(t,["temperature"]);n!=null&&d(e,["temperature"],n);const r=c(t,["topK"]);r!=null&&d(e,["topK"],r);const o=c(t,["seed"]);o!=null&&d(e,["seed"],o);const l=c(t,["guidance"]);l!=null&&d(e,["guidance"],l);const u=c(t,["bpm"]);u!=null&&d(e,["bpm"],u);const f=c(t,["density"]);f!=null&&d(e,["density"],f);const m=c(t,["brightness"]);m!=null&&d(e,["brightness"],m);const p=c(t,["scale"]);p!=null&&d(e,["scale"],p);const v=c(t,["muteBass"]);v!=null&&d(e,["muteBass"],v);const w=c(t,["muteDrums"]);w!=null&&d(e,["muteDrums"],w);const N=c(t,["onlyBassAndDrums"]);N!=null&&d(e,["onlyBassAndDrums"],N);const b=c(t,["musicGenerationMode"]);return b!=null&&d(e,["musicGenerationMode"],b),e}function Ew(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],wg(n)),e}function bg(t){const e={},n=c(t,["model"]);return n!=null&&d(e,["model"],n),e}function Ng(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>yg(o))),d(e,["weightedPrompts"],r)}return e}function th(t){const e={},n=c(t,["setup"]);n!=null&&d(e,["setup"],bg(n));const r=c(t,["clientContent"]);r!=null&&d(e,["clientContent"],Ng(r));const o=c(t,["musicGenerationConfig"]);o!=null&&d(e,["musicGenerationConfig"],wg(o));const l=c(t,["playbackControl"]);return l!=null&&d(e,["playbackControl"],l),e}function Lw(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function Pw(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],Lw(n)),e}function Mw(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&d(e,["voiceConfig"],Pw(n)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function jw(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function Dw(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["data"]);r!=null&&d(e,["data"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Rw(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["fileUri"]);r!=null&&d(e,["fileUri"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Fw(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],jw(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],Dw(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],Rw(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function Bw(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Fw(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function Uw(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);const l=c(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const u=c(t,["response"]);u!=null&&d(e,["response"],u);const f=c(t,["responseJsonSchema"]);return f!=null&&d(e,["responseJsonSchema"],f),e}function Hw(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function Vw(t){const e={},n=c(t,["timeRangeFilter"]);n!=null&&d(e,["timeRangeFilter"],Hw(n));const r=c(t,["excludeDomains"]);return r!=null&&d(e,["excludeDomains"],r),e}function qw(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function Ow(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],qw(n)),e}function zw(t){const e={},n=c(t,["excludeDomains"]);return n!=null&&d(e,["excludeDomains"],n),e}function Ww(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&d(e,["apiKeyString"],n),e}function $w(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&d(e,["apiKeyConfig"],Ww(n));const r=c(t,["authType"]);r!=null&&d(e,["authType"],r);const o=c(t,["googleServiceAccountConfig"]);o!=null&&d(e,["googleServiceAccountConfig"],o);const l=c(t,["httpBasicAuthConfig"]);l!=null&&d(e,["httpBasicAuthConfig"],l);const u=c(t,["oauthConfig"]);u!=null&&d(e,["oauthConfig"],u);const f=c(t,["oidcConfig"]);return f!=null&&d(e,["oidcConfig"],f),e}function Gw(t){const e={},n=c(t,["authConfig"]);return n!=null&&d(e,["authConfig"],$w(n)),e}function Jw(){return{}}function Yw(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function Kw(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(N=>Uw(N))),d(e,["functionDeclarations"],w)}const r=c(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const o=c(t,["googleSearch"]);o!=null&&d(e,["googleSearch"],Vw(o));const l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],Ow(l));const u=c(t,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],zw(u));const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],Gw(f)),c(t,["urlContext"])!=null&&d(e,["urlContext"],Jw());const p=c(t,["computerUse"]);p!=null&&d(e,["computerUse"],Yw(p));const v=c(t,["codeExecution"]);return v!=null&&d(e,["codeExecution"],v),e}function Qw(t){const e={},n=c(t,["handle"]);n!=null&&d(e,["handle"],n);const r=c(t,["transparent"]);return r!=null&&d(e,["transparent"],r),e}function u0(){return{}}function Xw(t){const e={},n=c(t,["disabled"]);n!=null&&d(e,["disabled"],n);const r=c(t,["startOfSpeechSensitivity"]);r!=null&&d(e,["startOfSpeechSensitivity"],r);const o=c(t,["endOfSpeechSensitivity"]);o!=null&&d(e,["endOfSpeechSensitivity"],o);const l=c(t,["prefixPaddingMs"]);l!=null&&d(e,["prefixPaddingMs"],l);const u=c(t,["silenceDurationMs"]);return u!=null&&d(e,["silenceDurationMs"],u),e}function Zw(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&d(e,["automaticActivityDetection"],Xw(n));const r=c(t,["activityHandling"]);r!=null&&d(e,["activityHandling"],r);const o=c(t,["turnCoverage"]);return o!=null&&d(e,["turnCoverage"],o),e}function eb(t){const e={},n=c(t,["targetTokens"]);return n!=null&&d(e,["targetTokens"],n),e}function tb(t){const e={},n=c(t,["triggerTokens"]);n!=null&&d(e,["triggerTokens"],n);const r=c(t,["slidingWindow"]);return r!=null&&d(e,["slidingWindow"],eb(r)),e}function nb(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&d(e,["proactiveAudio"],n),e}function rb(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);const l=c(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const u=c(t,["topP"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","topP"],u);const f=c(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const m=c(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const p=c(t,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const w=c(t,["speechConfig"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","speechConfig"],Mw(gh(w)));const N=c(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],N);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],Bw(Vi(b)));const I=c(t,["tools"]);if(e!==void 0&&I!=null){let K=_u(I);Array.isArray(K)&&(K=K.map(fe=>Kw(Au(fe)))),d(e,["setup","tools"],K)}const _=c(t,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],Qw(_));const E=c(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","inputAudioTranscription"],u0());const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","outputAudioTranscription"],u0());const P=c(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&d(e,["setup","realtimeInputConfig"],Zw(P));const q=c(t,["contextWindowCompression"]);e!==void 0&&q!=null&&d(e,["setup","contextWindowCompression"],tb(q));const J=c(t,["proactivity"]);return e!==void 0&&J!=null&&d(e,["setup","proactivity"],nb(J)),n}function ib(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["setup","model"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],rb(o,n)),n}function ob(){return{}}function sb(){return{}}function ab(t){const e={},n=c(t,["media"]);n!=null&&d(e,["mediaChunks"],ng(n));const r=c(t,["audio"]);r!=null&&d(e,["audio"],ig(r));const o=c(t,["audioStreamEnd"]);o!=null&&d(e,["audioStreamEnd"],o);const l=c(t,["video"]);l!=null&&d(e,["video"],rg(l));const u=c(t,["text"]);return u!=null&&d(e,["text"],u),c(t,["activityStart"])!=null&&d(e,["activityStart"],ob()),c(t,["activityEnd"])!=null&&d(e,["activityEnd"],sb()),e}function lb(){return{}}function ub(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function cb(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function db(t){const e={},n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function fb(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],ub(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],cb(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],db(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function hb(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>fb(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function c0(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const r=c(t,["finished"]);return r!=null&&d(e,["finished"],r),e}function mb(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const r=c(t,["urlRetrievalStatus"]);return r!=null&&d(e,["urlRetrievalStatus"],r),e}function pb(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>mb(o))),d(e,["urlMetadata"],r)}return e}function gb(t){const e={},n=c(t,["modelTurn"]);n!=null&&d(e,["modelTurn"],hb(n));const r=c(t,["turnComplete"]);r!=null&&d(e,["turnComplete"],r);const o=c(t,["interrupted"]);o!=null&&d(e,["interrupted"],o);const l=c(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=c(t,["generationComplete"]);u!=null&&d(e,["generationComplete"],u);const f=c(t,["inputTranscription"]);f!=null&&d(e,["inputTranscription"],c0(f));const m=c(t,["outputTranscription"]);m!=null&&d(e,["outputTranscription"],c0(m));const p=c(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],pb(p)),e}function vb(t){const e={},n=c(t,["id"]);n!=null&&d(e,["id"],n);const r=c(t,["args"]);r!=null&&d(e,["args"],r);const o=c(t,["name"]);return o!=null&&d(e,["name"],o),e}function xb(t){const e={},n=c(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>vb(o))),d(e,["functionCalls"],r)}return e}function yb(t){const e={},n=c(t,["ids"]);return n!=null&&d(e,["ids"],n),e}function Zc(t){const e={},n=c(t,["modality"]);n!=null&&d(e,["modality"],n);const r=c(t,["tokenCount"]);return r!=null&&d(e,["tokenCount"],r),e}function wb(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const o=c(t,["responseTokenCount"]);o!=null&&d(e,["responseTokenCount"],o);const l=c(t,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const u=c(t,["thoughtsTokenCount"]);u!=null&&d(e,["thoughtsTokenCount"],u);const f=c(t,["totalTokenCount"]);f!=null&&d(e,["totalTokenCount"],f);const m=c(t,["promptTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(b=>Zc(b))),d(e,["promptTokensDetails"],N)}const p=c(t,["cacheTokensDetails"]);if(p!=null){let N=p;Array.isArray(N)&&(N=N.map(b=>Zc(b))),d(e,["cacheTokensDetails"],N)}const v=c(t,["responseTokensDetails"]);if(v!=null){let N=v;Array.isArray(N)&&(N=N.map(b=>Zc(b))),d(e,["responseTokensDetails"],N)}const w=c(t,["toolUsePromptTokensDetails"]);if(w!=null){let N=w;Array.isArray(N)&&(N=N.map(b=>Zc(b))),d(e,["toolUsePromptTokensDetails"],N)}return e}function bb(t){const e={},n=c(t,["timeLeft"]);return n!=null&&d(e,["timeLeft"],n),e}function Nb(t){const e={},n=c(t,["newHandle"]);n!=null&&d(e,["newHandle"],n);const r=c(t,["resumable"]);r!=null&&d(e,["resumable"],r);const o=c(t,["lastConsumedClientMessageIndex"]);return o!=null&&d(e,["lastConsumedClientMessageIndex"],o),e}function Sb(t){const e={};c(t,["setupComplete"])!=null&&d(e,["setupComplete"],lb());const r=c(t,["serverContent"]);r!=null&&d(e,["serverContent"],gb(r));const o=c(t,["toolCall"]);o!=null&&d(e,["toolCall"],xb(o));const l=c(t,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],yb(l));const u=c(t,["usageMetadata"]);u!=null&&d(e,["usageMetadata"],wb(u));const f=c(t,["goAway"]);f!=null&&d(e,["goAway"],bb(f));const m=c(t,["sessionResumptionUpdate"]);return m!=null&&d(e,["sessionResumptionUpdate"],Nb(m)),e}function Cb(){return{}}function kb(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const r=c(t,["weight"]);return r!=null&&d(e,["weight"],r),e}function Tb(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>kb(o))),d(e,["weightedPrompts"],r)}return e}function Ib(t){const e={},n=c(t,["temperature"]);n!=null&&d(e,["temperature"],n);const r=c(t,["topK"]);r!=null&&d(e,["topK"],r);const o=c(t,["seed"]);o!=null&&d(e,["seed"],o);const l=c(t,["guidance"]);l!=null&&d(e,["guidance"],l);const u=c(t,["bpm"]);u!=null&&d(e,["bpm"],u);const f=c(t,["density"]);f!=null&&d(e,["density"],f);const m=c(t,["brightness"]);m!=null&&d(e,["brightness"],m);const p=c(t,["scale"]);p!=null&&d(e,["scale"],p);const v=c(t,["muteBass"]);v!=null&&d(e,["muteBass"],v);const w=c(t,["muteDrums"]);w!=null&&d(e,["muteDrums"],w);const N=c(t,["onlyBassAndDrums"]);N!=null&&d(e,["onlyBassAndDrums"],N);const b=c(t,["musicGenerationMode"]);return b!=null&&d(e,["musicGenerationMode"],b),e}function Ab(t){const e={},n=c(t,["clientContent"]);n!=null&&d(e,["clientContent"],Tb(n));const r=c(t,["musicGenerationConfig"]);return r!=null&&d(e,["musicGenerationConfig"],Ib(r)),e}function _b(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);r!=null&&d(e,["mimeType"],r);const o=c(t,["sourceMetadata"]);return o!=null&&d(e,["sourceMetadata"],Ab(o)),e}function Eb(t){const e={},n=c(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>_b(o))),d(e,["audioChunks"],r)}return e}function Lb(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const r=c(t,["filteredReason"]);return r!=null&&d(e,["filteredReason"],r),e}function Pb(t){const e={};c(t,["setupComplete"])!=null&&d(e,["setupComplete"],Cb());const r=c(t,["serverContent"]);r!=null&&d(e,["serverContent"],Eb(r));const o=c(t,["filteredPrompt"]);return o!=null&&d(e,["filteredPrompt"],Lb(o)),e}function Mb(t){const e={},n=c(t,["sessionId"]);return n!=null&&d(e,["sessionId"],n),e}function jb(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function Db(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["data"]);r!=null&&d(e,["data"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Rb(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["fileUri"]);r!=null&&d(e,["fileUri"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Fb(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],jb(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],Db(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],Rb(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function Bb(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Fb(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function d0(t){const e={},n=c(t,["text"]);n!=null&&d(e,["text"],n);const r=c(t,["finished"]);return r!=null&&d(e,["finished"],r),e}function Ub(t){const e={},n=c(t,["modelTurn"]);n!=null&&d(e,["modelTurn"],Bb(n));const r=c(t,["turnComplete"]);r!=null&&d(e,["turnComplete"],r);const o=c(t,["interrupted"]);o!=null&&d(e,["interrupted"],o);const l=c(t,["groundingMetadata"]);l!=null&&d(e,["groundingMetadata"],l);const u=c(t,["generationComplete"]);u!=null&&d(e,["generationComplete"],u);const f=c(t,["inputTranscription"]);f!=null&&d(e,["inputTranscription"],d0(f));const m=c(t,["outputTranscription"]);return m!=null&&d(e,["outputTranscription"],d0(m)),e}function Hb(t){const e={},n=c(t,["args"]);n!=null&&d(e,["args"],n);const r=c(t,["name"]);return r!=null&&d(e,["name"],r),e}function Vb(t){const e={},n=c(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Hb(o))),d(e,["functionCalls"],r)}return e}function qb(t){const e={},n=c(t,["ids"]);return n!=null&&d(e,["ids"],n),e}function ed(t){const e={},n=c(t,["modality"]);n!=null&&d(e,["modality"],n);const r=c(t,["tokenCount"]);return r!=null&&d(e,["tokenCount"],r),e}function Ob(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);const o=c(t,["candidatesTokenCount"]);o!=null&&d(e,["responseTokenCount"],o);const l=c(t,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const u=c(t,["thoughtsTokenCount"]);u!=null&&d(e,["thoughtsTokenCount"],u);const f=c(t,["totalTokenCount"]);f!=null&&d(e,["totalTokenCount"],f);const m=c(t,["promptTokensDetails"]);if(m!=null){let b=m;Array.isArray(b)&&(b=b.map(I=>ed(I))),d(e,["promptTokensDetails"],b)}const p=c(t,["cacheTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(I=>ed(I))),d(e,["cacheTokensDetails"],b)}const v=c(t,["candidatesTokensDetails"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(I=>ed(I))),d(e,["responseTokensDetails"],b)}const w=c(t,["toolUsePromptTokensDetails"]);if(w!=null){let b=w;Array.isArray(b)&&(b=b.map(I=>ed(I))),d(e,["toolUsePromptTokensDetails"],b)}const N=c(t,["trafficType"]);return N!=null&&d(e,["trafficType"],N),e}function zb(t){const e={},n=c(t,["timeLeft"]);return n!=null&&d(e,["timeLeft"],n),e}function Wb(t){const e={},n=c(t,["newHandle"]);n!=null&&d(e,["newHandle"],n);const r=c(t,["resumable"]);r!=null&&d(e,["resumable"],r);const o=c(t,["lastConsumedClientMessageIndex"]);return o!=null&&d(e,["lastConsumedClientMessageIndex"],o),e}function $b(t){const e={},n=c(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],Mb(n));const r=c(t,["serverContent"]);r!=null&&d(e,["serverContent"],Ub(r));const o=c(t,["toolCall"]);o!=null&&d(e,["toolCall"],Vb(o));const l=c(t,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],qb(l));const u=c(t,["usageMetadata"]);u!=null&&d(e,["usageMetadata"],Ob(u));const f=c(t,["goAway"]);f!=null&&d(e,["goAway"],zb(f));const m=c(t,["sessionResumptionUpdate"]);return m!=null&&d(e,["sessionResumptionUpdate"],Wb(m)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gb(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function Jb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Yb(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Kb(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],Gb(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],Jb(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],Yb(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function Td(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>Kb(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function Qb(t){const e={},n=c(t,["anyOf"]);n!=null&&d(e,["anyOf"],n);const r=c(t,["default"]);r!=null&&d(e,["default"],r);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const l=c(t,["enum"]);l!=null&&d(e,["enum"],l);const u=c(t,["example"]);u!=null&&d(e,["example"],u);const f=c(t,["format"]);f!=null&&d(e,["format"],f);const m=c(t,["items"]);m!=null&&d(e,["items"],m);const p=c(t,["maxItems"]);p!=null&&d(e,["maxItems"],p);const v=c(t,["maxLength"]);v!=null&&d(e,["maxLength"],v);const w=c(t,["maxProperties"]);w!=null&&d(e,["maxProperties"],w);const N=c(t,["maximum"]);N!=null&&d(e,["maximum"],N);const b=c(t,["minItems"]);b!=null&&d(e,["minItems"],b);const I=c(t,["minLength"]);I!=null&&d(e,["minLength"],I);const _=c(t,["minProperties"]);_!=null&&d(e,["minProperties"],_);const E=c(t,["minimum"]);E!=null&&d(e,["minimum"],E);const T=c(t,["nullable"]);T!=null&&d(e,["nullable"],T);const P=c(t,["pattern"]);P!=null&&d(e,["pattern"],P);const q=c(t,["properties"]);q!=null&&d(e,["properties"],q);const J=c(t,["propertyOrdering"]);J!=null&&d(e,["propertyOrdering"],J);const K=c(t,["required"]);K!=null&&d(e,["required"],K);const fe=c(t,["title"]);fe!=null&&d(e,["title"],fe);const ne=c(t,["type"]);return ne!=null&&d(e,["type"],ne),e}function Xb(t){const e={};if(c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=c(t,["category"]);n!=null&&d(e,["category"],n);const r=c(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function Zb(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const r=c(t,["description"]);r!=null&&d(e,["description"],r);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const l=c(t,["parameters"]);l!=null&&d(e,["parameters"],l);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const m=c(t,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function eN(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function tN(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],eN(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function nN(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function rN(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],nN(n)),e}function iN(){return{}}function oN(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function sN(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>Zb(p))),d(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],tN(r));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],rN(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],iN());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],oN(u));const f=c(t,["codeExecution"]);return f!=null&&d(e,["codeExecution"],f),e}function aN(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(e,["allowedFunctionNames"],r),e}function lN(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const r=c(t,["longitude"]);return r!=null&&d(e,["longitude"],r),e}function uN(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],lN(n));const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function cN(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],aN(n));const r=c(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],uN(r)),e}function dN(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function Sg(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],dN(n)),e}function fN(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const r=c(t,["voiceConfig"]);return r!=null&&d(e,["voiceConfig"],Sg(r)),e}function hN(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>fN(o))),d(e,["speakerVoiceConfigs"],r)}return e}function mN(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],Sg(n));const r=c(t,["multiSpeakerVoiceConfig"]);r!=null&&d(e,["multiSpeakerVoiceConfig"],hN(r));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function pN(t){const e={},n=c(t,["includeThoughts"]);n!=null&&d(e,["includeThoughts"],n);const r=c(t,["thinkingBudget"]);return r!=null&&d(e,["thinkingBudget"],r),e}function gN(t,e,n){const r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Td(Vi(o)));const l=c(e,["temperature"]);l!=null&&d(r,["temperature"],l);const u=c(e,["topP"]);u!=null&&d(r,["topP"],u);const f=c(e,["topK"]);f!=null&&d(r,["topK"],f);const m=c(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const p=c(e,["maxOutputTokens"]);p!=null&&d(r,["maxOutputTokens"],p);const v=c(e,["stopSequences"]);v!=null&&d(r,["stopSequences"],v);const w=c(e,["responseLogprobs"]);w!=null&&d(r,["responseLogprobs"],w);const N=c(e,["logprobs"]);N!=null&&d(r,["logprobs"],N);const b=c(e,["presencePenalty"]);b!=null&&d(r,["presencePenalty"],b);const I=c(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const _=c(e,["seed"]);_!=null&&d(r,["seed"],_);const E=c(e,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);const T=c(e,["responseSchema"]);T!=null&&d(r,["responseSchema"],Qb(mh(T)));const P=c(e,["responseJsonSchema"]);if(P!=null&&d(r,["responseJsonSchema"],P),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=c(e,["safetySettings"]);if(n!==void 0&&q!=null){let R=q;Array.isArray(R)&&(R=R.map(D=>Xb(D))),d(n,["safetySettings"],R)}const J=c(e,["tools"]);if(n!==void 0&&J!=null){let R=_u(J);Array.isArray(R)&&(R=R.map(D=>sN(Au(D)))),d(n,["tools"],R)}const K=c(e,["toolConfig"]);if(n!==void 0&&K!=null&&d(n,["toolConfig"],cN(K)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=c(e,["cachedContent"]);n!==void 0&&fe!=null&&d(n,["cachedContent"],Sa(t,fe));const ne=c(e,["responseModalities"]);ne!=null&&d(r,["responseModalities"],ne);const X=c(e,["mediaResolution"]);X!=null&&d(r,["mediaResolution"],X);const $=c(e,["speechConfig"]);if($!=null&&d(r,["speechConfig"],mN(ph($))),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const he=c(e,["thinkingConfig"]);return he!=null&&d(r,["thinkingConfig"],pN(he)),r}function f0(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);if(o!=null){let u=Ko(o);Array.isArray(u)&&(u=u.map(f=>Td(f))),d(n,["contents"],u)}const l=c(e,["config"]);return l!=null&&d(n,["generationConfig"],gN(t,l,n)),n}function vN(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const o=c(t,["title"]);e!==void 0&&o!=null&&d(e,["requests[]","title"],o);const l=c(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);o!=null&&d(n,["requests[]","content"],sg(t,o));const l=c(e,["config"]);l!=null&&d(n,["config"],vN(l,n));const u=c(e,["model"]);return u!==void 0&&d(n,["requests[]","model"],Zn(t,u)),n}function yN(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);const l=c(t,["guidanceScale"]);if(e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&d(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const m=c(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&d(e,["parameters","includeSafetyAttributes"],m);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const v=c(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const w=c(t,["outputMimeType"]);e!==void 0&&w!=null&&d(e,["parameters","outputOptions","mimeType"],w);const N=c(t,["outputCompressionQuality"]);if(e!==void 0&&N!=null&&d(e,["parameters","outputOptions","compressionQuality"],N),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const b=c(t,["imageSize"]);if(e!==void 0&&b!=null&&d(e,["parameters","sampleImageSize"],b),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function wN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const l=c(e,["config"]);return l!=null&&d(n,["config"],yN(l,n)),n}function bN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","name"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function NN(t,e,n){const r={},o=c(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const l=c(e,["pageToken"]);n!==void 0&&l!=null&&d(n,["_query","pageToken"],l);const u=c(e,["filter"]);n!==void 0&&u!=null&&d(n,["_query","filter"],u);const f=c(e,["queryBase"]);return n!==void 0&&f!=null&&d(n,["_url","models_url"],ug(t,f)),r}function SN(t,e){const n={},r=c(e,["config"]);return r!=null&&d(n,["config"],NN(t,r,n)),n}function CN(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const o=c(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const l=c(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),n}function kN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","name"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],CN(o,n)),n}function TN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","name"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function IN(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function AN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);if(o!=null){let u=Ko(o);Array.isArray(u)&&(u=u.map(f=>Td(f))),d(n,["contents"],u)}const l=c(e,["config"]);return l!=null&&d(n,["config"],IN(l)),n}function _N(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],ql(n));const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function EN(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=c(t,["durationSeconds"]);if(e!==void 0&&o!=null&&d(e,["parameters","durationSeconds"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=c(t,["aspectRatio"]);if(e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l),c(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const u=c(t,["personGeneration"]);if(e!==void 0&&u!=null&&d(e,["parameters","personGeneration"],u),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=c(t,["negativePrompt"]);e!==void 0&&f!=null&&d(e,["parameters","negativePrompt"],f);const m=c(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(c(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function LN(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const l=c(e,["image"]);if(l!=null&&d(n,["instances[0]","image"],_N(l)),c(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const u=c(e,["config"]);return u!=null&&d(n,["config"],EN(u,n)),n}function PN(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function MN(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["data"]);r!=null&&d(e,["data"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function jN(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["fileUri"]);r!=null&&d(e,["fileUri"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function DN(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],PN(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],MN(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],jN(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function Lu(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>DN(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function RN(t){const e={},n=c(t,["anyOf"]);n!=null&&d(e,["anyOf"],n);const r=c(t,["default"]);r!=null&&d(e,["default"],r);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const l=c(t,["enum"]);l!=null&&d(e,["enum"],l);const u=c(t,["example"]);u!=null&&d(e,["example"],u);const f=c(t,["format"]);f!=null&&d(e,["format"],f);const m=c(t,["items"]);m!=null&&d(e,["items"],m);const p=c(t,["maxItems"]);p!=null&&d(e,["maxItems"],p);const v=c(t,["maxLength"]);v!=null&&d(e,["maxLength"],v);const w=c(t,["maxProperties"]);w!=null&&d(e,["maxProperties"],w);const N=c(t,["maximum"]);N!=null&&d(e,["maximum"],N);const b=c(t,["minItems"]);b!=null&&d(e,["minItems"],b);const I=c(t,["minLength"]);I!=null&&d(e,["minLength"],I);const _=c(t,["minProperties"]);_!=null&&d(e,["minProperties"],_);const E=c(t,["minimum"]);E!=null&&d(e,["minimum"],E);const T=c(t,["nullable"]);T!=null&&d(e,["nullable"],T);const P=c(t,["pattern"]);P!=null&&d(e,["pattern"],P);const q=c(t,["properties"]);q!=null&&d(e,["properties"],q);const J=c(t,["propertyOrdering"]);J!=null&&d(e,["propertyOrdering"],J);const K=c(t,["required"]);K!=null&&d(e,["required"],K);const fe=c(t,["title"]);fe!=null&&d(e,["title"],fe);const ne=c(t,["type"]);return ne!=null&&d(e,["type"],ne),e}function FN(t){const e={},n=c(t,["featureSelectionPreference"]);return n!=null&&d(e,["featureSelectionPreference"],n),e}function BN(t){const e={},n=c(t,["method"]);n!=null&&d(e,["method"],n);const r=c(t,["category"]);r!=null&&d(e,["category"],r);const o=c(t,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function UN(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&d(e,["description"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["parameters"]);o!=null&&d(e,["parameters"],o);const l=c(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const u=c(t,["response"]);u!=null&&d(e,["response"],u);const f=c(t,["responseJsonSchema"]);return f!=null&&d(e,["responseJsonSchema"],f),e}function HN(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function VN(t){const e={},n=c(t,["timeRangeFilter"]);n!=null&&d(e,["timeRangeFilter"],HN(n));const r=c(t,["excludeDomains"]);return r!=null&&d(e,["excludeDomains"],r),e}function qN(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function ON(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],qN(n)),e}function zN(t){const e={},n=c(t,["excludeDomains"]);return n!=null&&d(e,["excludeDomains"],n),e}function WN(t){const e={},n=c(t,["apiKeyString"]);return n!=null&&d(e,["apiKeyString"],n),e}function $N(t){const e={},n=c(t,["apiKeyConfig"]);n!=null&&d(e,["apiKeyConfig"],WN(n));const r=c(t,["authType"]);r!=null&&d(e,["authType"],r);const o=c(t,["googleServiceAccountConfig"]);o!=null&&d(e,["googleServiceAccountConfig"],o);const l=c(t,["httpBasicAuthConfig"]);l!=null&&d(e,["httpBasicAuthConfig"],l);const u=c(t,["oauthConfig"]);u!=null&&d(e,["oauthConfig"],u);const f=c(t,["oidcConfig"]);return f!=null&&d(e,["oidcConfig"],f),e}function GN(t){const e={},n=c(t,["authConfig"]);return n!=null&&d(e,["authConfig"],$N(n)),e}function JN(){return{}}function YN(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function Cg(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let w=n;Array.isArray(w)&&(w=w.map(N=>UN(N))),d(e,["functionDeclarations"],w)}const r=c(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);const o=c(t,["googleSearch"]);o!=null&&d(e,["googleSearch"],VN(o));const l=c(t,["googleSearchRetrieval"]);l!=null&&d(e,["googleSearchRetrieval"],ON(l));const u=c(t,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],zN(u));const f=c(t,["googleMaps"]);f!=null&&d(e,["googleMaps"],GN(f)),c(t,["urlContext"])!=null&&d(e,["urlContext"],JN());const p=c(t,["computerUse"]);p!=null&&d(e,["computerUse"],YN(p));const v=c(t,["codeExecution"]);return v!=null&&d(e,["codeExecution"],v),e}function KN(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);return r!=null&&d(e,["allowedFunctionNames"],r),e}function QN(t){const e={},n=c(t,["latitude"]);n!=null&&d(e,["latitude"],n);const r=c(t,["longitude"]);return r!=null&&d(e,["longitude"],r),e}function XN(t){const e={},n=c(t,["latLng"]);n!=null&&d(e,["latLng"],QN(n));const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function ZN(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],KN(n));const r=c(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],XN(r)),e}function eS(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function tS(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],eS(n)),e}function nS(t){const e={},n=c(t,["voiceConfig"]);if(n!=null&&d(e,["voiceConfig"],tS(n)),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=c(t,["languageCode"]);return r!=null&&d(e,["languageCode"],r),e}function rS(t){const e={},n=c(t,["includeThoughts"]);n!=null&&d(e,["includeThoughts"],n);const r=c(t,["thinkingBudget"]);return r!=null&&d(e,["thinkingBudget"],r),e}function iS(t,e,n){const r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],Lu(Vi(o)));const l=c(e,["temperature"]);l!=null&&d(r,["temperature"],l);const u=c(e,["topP"]);u!=null&&d(r,["topP"],u);const f=c(e,["topK"]);f!=null&&d(r,["topK"],f);const m=c(e,["candidateCount"]);m!=null&&d(r,["candidateCount"],m);const p=c(e,["maxOutputTokens"]);p!=null&&d(r,["maxOutputTokens"],p);const v=c(e,["stopSequences"]);v!=null&&d(r,["stopSequences"],v);const w=c(e,["responseLogprobs"]);w!=null&&d(r,["responseLogprobs"],w);const N=c(e,["logprobs"]);N!=null&&d(r,["logprobs"],N);const b=c(e,["presencePenalty"]);b!=null&&d(r,["presencePenalty"],b);const I=c(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);const _=c(e,["seed"]);_!=null&&d(r,["seed"],_);const E=c(e,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);const T=c(e,["responseSchema"]);T!=null&&d(r,["responseSchema"],RN(mh(T)));const P=c(e,["responseJsonSchema"]);P!=null&&d(r,["responseJsonSchema"],P);const q=c(e,["routingConfig"]);q!=null&&d(r,["routingConfig"],q);const J=c(e,["modelSelectionConfig"]);J!=null&&d(r,["modelConfig"],FN(J));const K=c(e,["safetySettings"]);if(n!==void 0&&K!=null){let ge=K;Array.isArray(ge)&&(ge=ge.map(xe=>BN(xe))),d(n,["safetySettings"],ge)}const fe=c(e,["tools"]);if(n!==void 0&&fe!=null){let ge=_u(fe);Array.isArray(ge)&&(ge=ge.map(xe=>Cg(Au(xe)))),d(n,["tools"],ge)}const ne=c(e,["toolConfig"]);n!==void 0&&ne!=null&&d(n,["toolConfig"],ZN(ne));const X=c(e,["labels"]);n!==void 0&&X!=null&&d(n,["labels"],X);const $=c(e,["cachedContent"]);n!==void 0&&$!=null&&d(n,["cachedContent"],Sa(t,$));const he=c(e,["responseModalities"]);he!=null&&d(r,["responseModalities"],he);const R=c(e,["mediaResolution"]);R!=null&&d(r,["mediaResolution"],R);const D=c(e,["speechConfig"]);D!=null&&d(r,["speechConfig"],nS(ph(D)));const H=c(e,["audioTimestamp"]);H!=null&&d(r,["audioTimestamp"],H);const O=c(e,["thinkingConfig"]);return O!=null&&d(r,["thinkingConfig"],rS(O)),r}function h0(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);if(o!=null){let u=Ko(o);Array.isArray(u)&&(u=u.map(f=>Lu(f))),d(n,["contents"],u)}const l=c(e,["config"]);return l!=null&&d(n,["generationConfig"],iS(t,l,n)),n}function oS(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const o=c(t,["title"]);e!==void 0&&o!=null&&d(e,["instances[]","title"],o);const l=c(t,["outputDimensionality"]);e!==void 0&&l!=null&&d(e,["parameters","outputDimensionality"],l);const u=c(t,["mimeType"]);e!==void 0&&u!=null&&d(e,["instances[]","mimeType"],u);const f=c(t,["autoTruncate"]);return e!==void 0&&f!=null&&d(e,["parameters","autoTruncate"],f),n}function sS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);o!=null&&d(n,["instances[]","content"],sg(t,o));const l=c(e,["config"]);return l!=null&&d(n,["config"],oS(l,n)),n}function aS(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const o=c(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const l=c(t,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const f=c(t,["guidanceScale"]);e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const p=c(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const v=c(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const w=c(t,["includeSafetyAttributes"]);e!==void 0&&w!=null&&d(e,["parameters","includeSafetyAttributes"],w);const N=c(t,["includeRaiReason"]);e!==void 0&&N!=null&&d(e,["parameters","includeRaiReason"],N);const b=c(t,["language"]);e!==void 0&&b!=null&&d(e,["parameters","language"],b);const I=c(t,["outputMimeType"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","mimeType"],I);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);const E=c(t,["addWatermark"]);e!==void 0&&E!=null&&d(e,["parameters","addWatermark"],E);const T=c(t,["imageSize"]);e!==void 0&&T!=null&&d(e,["parameters","sampleImageSize"],T);const P=c(t,["enhancePrompt"]);return e!==void 0&&P!=null&&d(e,["parameters","enhancePrompt"],P),n}function lS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const l=c(e,["config"]);return l!=null&&d(n,["config"],aS(l,n)),n}function Pu(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&d(e,["bytesBase64Encoded"],ql(r));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function uS(t){const e={},n=c(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&d(e,["maskClasses"],r);const o=c(t,["maskDilation"]);return o!=null&&d(e,["dilation"],o),e}function cS(t){const e={},n=c(t,["controlType"]);n!=null&&d(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&d(e,["computeControl"],r),e}function dS(t){const e={},n=c(t,["styleDescription"]);return n!=null&&d(e,["styleDescription"],n),e}function fS(t){const e={},n=c(t,["subjectType"]);n!=null&&d(e,["subjectType"],n);const r=c(t,["subjectDescription"]);return r!=null&&d(e,["subjectDescription"],r),e}function hS(t){const e={},n=c(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],Pu(n));const r=c(t,["referenceId"]);r!=null&&d(e,["referenceId"],r);const o=c(t,["referenceType"]);o!=null&&d(e,["referenceType"],o);const l=c(t,["maskImageConfig"]);l!=null&&d(e,["maskImageConfig"],uS(l));const u=c(t,["controlImageConfig"]);u!=null&&d(e,["controlImageConfig"],cS(u));const f=c(t,["styleImageConfig"]);f!=null&&d(e,["styleImageConfig"],dS(f));const m=c(t,["subjectImageConfig"]);return m!=null&&d(e,["subjectImageConfig"],fS(m)),e}function mS(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const o=c(t,["negativePrompt"]);e!==void 0&&o!=null&&d(e,["parameters","negativePrompt"],o);const l=c(t,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const u=c(t,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const f=c(t,["guidanceScale"]);e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f);const m=c(t,["seed"]);e!==void 0&&m!=null&&d(e,["parameters","seed"],m);const p=c(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const v=c(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const w=c(t,["includeSafetyAttributes"]);e!==void 0&&w!=null&&d(e,["parameters","includeSafetyAttributes"],w);const N=c(t,["includeRaiReason"]);e!==void 0&&N!=null&&d(e,["parameters","includeRaiReason"],N);const b=c(t,["language"]);e!==void 0&&b!=null&&d(e,["parameters","language"],b);const I=c(t,["outputMimeType"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","mimeType"],I);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);const E=c(t,["addWatermark"]);e!==void 0&&E!=null&&d(e,["parameters","addWatermark"],E);const T=c(t,["editMode"]);e!==void 0&&T!=null&&d(e,["parameters","editMode"],T);const P=c(t,["baseSteps"]);return e!==void 0&&P!=null&&d(e,["parameters","editConfig","baseSteps"],P),n}function pS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const l=c(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>hS(m))),d(n,["instances[0]","referenceImages"],f)}const u=c(e,["config"]);return u!=null&&d(n,["config"],mS(u,n)),n}function gS(t,e){const n={},r=c(t,["includeRaiReason"]);e!==void 0&&r!=null&&d(e,["parameters","includeRaiReason"],r);const o=c(t,["outputMimeType"]);e!==void 0&&o!=null&&d(e,["parameters","outputOptions","mimeType"],o);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=c(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const m=c(t,["numberOfImages"]);e!==void 0&&m!=null&&d(e,["parameters","sampleCount"],m);const p=c(t,["mode"]);return e!==void 0&&p!=null&&d(e,["parameters","mode"],p),n}function vS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["image"]);o!=null&&d(n,["instances[0]","image"],Pu(o));const l=c(e,["upscaleFactor"]);l!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],l);const u=c(e,["config"]);return u!=null&&d(n,["config"],gS(u,n)),n}function xS(t){const e={},n=c(t,["productImage"]);return n!=null&&d(e,["image"],Pu(n)),e}function yS(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const o=c(t,["personImage"]);e!==void 0&&o!=null&&d(e,["instances[0]","personImage","image"],Pu(o));const l=c(t,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>xS(f))),d(e,["instances[0]","productImages"],u)}return n}function wS(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const o=c(t,["baseSteps"]);e!==void 0&&o!=null&&d(e,["parameters","editConfig","baseSteps"],o);const l=c(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const u=c(t,["seed"]);e!==void 0&&u!=null&&d(e,["parameters","seed"],u);const f=c(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&d(e,["parameters","safetySetting"],f);const m=c(t,["personGeneration"]);e!==void 0&&m!=null&&d(e,["parameters","personGeneration"],m);const p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);const v=c(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","compressionQuality"],v);const w=c(t,["enhancePrompt"]);return e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w),n}function bS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["source"]);o!=null&&d(n,["config"],yS(o,n));const l=c(e,["config"]);return l!=null&&d(n,["config"],wS(l,n)),n}function NS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","name"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function SS(t,e,n){const r={},o=c(e,["pageSize"]);n!==void 0&&o!=null&&d(n,["_query","pageSize"],o);const l=c(e,["pageToken"]);n!==void 0&&l!=null&&d(n,["_query","pageToken"],l);const u=c(e,["filter"]);n!==void 0&&u!=null&&d(n,["_query","filter"],u);const f=c(e,["queryBase"]);return n!==void 0&&f!=null&&d(n,["_url","models_url"],ug(t,f)),r}function CS(t,e){const n={},r=c(e,["config"]);return r!=null&&d(n,["config"],SS(t,r,n)),n}function kS(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const o=c(t,["description"]);e!==void 0&&o!=null&&d(e,["description"],o);const l=c(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),n}function TS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],kS(o,n)),n}function IS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","name"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],o),n}function AS(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],Lu(Vi(r)));const o=c(t,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>Cg(f))),d(e,["tools"],u)}const l=c(t,["generationConfig"]);return e!==void 0&&l!=null&&d(e,["generationConfig"],l),n}function _S(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);if(o!=null){let u=Ko(o);Array.isArray(u)&&(u=u.map(f=>Lu(f))),d(n,["contents"],u)}const l=c(e,["config"]);return l!=null&&d(n,["config"],AS(l,n)),n}function ES(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["contents"]);if(o!=null){let u=Ko(o);Array.isArray(u)&&(u=u.map(f=>Lu(f))),d(n,["contents"],u)}const l=c(e,["config"]);return l!=null&&d(n,["config"],l),n}function LS(t){const e={},n=c(t,["uri"]);n!=null&&d(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&d(e,["bytesBase64Encoded"],ql(r));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function PS(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const l=c(t,["fps"]);e!==void 0&&l!=null&&d(e,["parameters","fps"],l);const u=c(t,["durationSeconds"]);e!==void 0&&u!=null&&d(e,["parameters","durationSeconds"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&d(e,["parameters","seed"],f);const m=c(t,["aspectRatio"]);e!==void 0&&m!=null&&d(e,["parameters","aspectRatio"],m);const p=c(t,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const v=c(t,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const w=c(t,["pubsubTopic"]);e!==void 0&&w!=null&&d(e,["parameters","pubsubTopic"],w);const N=c(t,["negativePrompt"]);e!==void 0&&N!=null&&d(e,["parameters","negativePrompt"],N);const b=c(t,["enhancePrompt"]);e!==void 0&&b!=null&&d(e,["parameters","enhancePrompt"],b);const I=c(t,["generateAudio"]);e!==void 0&&I!=null&&d(e,["parameters","generateAudio"],I);const _=c(t,["lastFrame"]);e!==void 0&&_!=null&&d(e,["instances[0]","lastFrame"],Pu(_));const E=c(t,["compressionQuality"]);return e!==void 0&&E!=null&&d(e,["parameters","compressionQuality"],E),n}function MS(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["_url","model"],Zn(t,r));const o=c(e,["prompt"]);o!=null&&d(n,["instances[0]","prompt"],o);const l=c(e,["image"]);l!=null&&d(n,["instances[0]","image"],Pu(l));const u=c(e,["video"]);u!=null&&d(n,["instances[0]","video"],LS(u));const f=c(e,["config"]);return f!=null&&d(n,["config"],PS(f,n)),n}function jS(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function DS(t){const e={},n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function RS(t){const e={},n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function FS(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],jS(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],DS(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],RS(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function BS(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>FS(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function US(t){const e={},n=c(t,["citationSources"]);return n!=null&&d(e,["citations"],n),e}function HS(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const r=c(t,["urlRetrievalStatus"]);return r!=null&&d(e,["urlRetrievalStatus"],r),e}function VS(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>HS(o))),d(e,["urlMetadata"],r)}return e}function qS(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],BS(n));const r=c(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],US(r));const o=c(t,["tokenCount"]);o!=null&&d(e,["tokenCount"],o);const l=c(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const u=c(t,["urlContextMetadata"]);u!=null&&d(e,["urlContextMetadata"],VS(u));const f=c(t,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const m=c(t,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const p=c(t,["index"]);p!=null&&d(e,["index"],p);const v=c(t,["logprobsResult"]);v!=null&&d(e,["logprobsResult"],v);const w=c(t,["safetyRatings"]);return w!=null&&d(e,["safetyRatings"],w),e}function m0(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(p=>qS(p))),d(e,["candidates"],m)}const o=c(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);const l=c(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const u=c(t,["responseId"]);u!=null&&d(e,["responseId"],u);const f=c(t,["usageMetadata"]);return f!=null&&d(e,["usageMetadata"],f),e}function OS(t){const e={},n=c(t,["values"]);return n!=null&&d(e,["values"],n),e}function zS(){return{}}function WS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>OS(u))),d(e,["embeddings"],l)}return c(t,["metadata"])!=null&&d(e,["metadata"],zS()),e}function $S(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],ql(n));const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function kg(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const o=c(t,["contentType"]);return o!=null&&d(e,["contentType"],o),e}function GS(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["image"],$S(n));const r=c(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const o=c(t,["_self"]);return o!=null&&d(e,["safetyAttributes"],kg(o)),e}function JS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>GS(u))),d(e,["generatedImages"],l)}const o=c(t,["positivePromptSafetyAttributes"]);return o!=null&&d(e,["positivePromptSafetyAttributes"],kg(o)),e}function YS(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&d(e,["createTime"],r);const o=c(t,["updateTime"]);return o!=null&&d(e,["updateTime"],o),e}function nh(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const l=c(t,["version"]);l!=null&&d(e,["version"],l);const u=c(t,["_self"]);u!=null&&d(e,["tunedModelInfo"],YS(u));const f=c(t,["inputTokenLimit"]);f!=null&&d(e,["inputTokenLimit"],f);const m=c(t,["outputTokenLimit"]);m!=null&&d(e,["outputTokenLimit"],m);const p=c(t,["supportedGenerationMethods"]);return p!=null&&d(e,["supportedActions"],p),e}function KS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["_self"]);if(o!=null){let l=cg(o);Array.isArray(l)&&(l=l.map(u=>nh(u))),d(e,["models"],l)}return e}function QS(){return{}}function XS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&d(e,["totalTokens"],r);const o=c(t,["cachedContentTokenCount"]);return o!=null&&d(e,["cachedContentTokenCount"],o),e}function ZS(t){const e={},n=c(t,["video","uri"]);n!=null&&d(e,["uri"],n);const r=c(t,["video","encodedVideo"]);r!=null&&d(e,["videoBytes"],ql(r));const o=c(t,["encoding"]);return o!=null&&d(e,["mimeType"],o),e}function eC(t){const e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],ZS(n)),e}function tC(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>eC(u))),d(e,["generatedVideos"],l)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function nC(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const u=c(t,["response","generateVideoResponse"]);return u!=null&&d(e,["response"],tC(u)),e}function rC(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function iC(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["data"]);r!=null&&d(e,["data"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function oC(t){const e={},n=c(t,["displayName"]);n!=null&&d(e,["displayName"],n);const r=c(t,["fileUri"]);r!=null&&d(e,["fileUri"],r);const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function sC(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],rC(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],iC(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],oC(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function aC(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>sC(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function lC(t){const e={},n=c(t,["citations"]);return n!=null&&d(e,["citations"],n),e}function uC(t){const e={},n=c(t,["retrievedUrl"]);n!=null&&d(e,["retrievedUrl"],n);const r=c(t,["urlRetrievalStatus"]);return r!=null&&d(e,["urlRetrievalStatus"],r),e}function cC(t){const e={},n=c(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>uC(o))),d(e,["urlMetadata"],r)}return e}function dC(t){const e={},n=c(t,["content"]);n!=null&&d(e,["content"],aC(n));const r=c(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],lC(r));const o=c(t,["finishMessage"]);o!=null&&d(e,["finishMessage"],o);const l=c(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const u=c(t,["urlContextMetadata"]);u!=null&&d(e,["urlContextMetadata"],cC(u));const f=c(t,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const m=c(t,["groundingMetadata"]);m!=null&&d(e,["groundingMetadata"],m);const p=c(t,["index"]);p!=null&&d(e,["index"],p);const v=c(t,["logprobsResult"]);v!=null&&d(e,["logprobsResult"],v);const w=c(t,["safetyRatings"]);return w!=null&&d(e,["safetyRatings"],w),e}function p0(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(v=>dC(v))),d(e,["candidates"],p)}const o=c(t,["createTime"]);o!=null&&d(e,["createTime"],o);const l=c(t,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const u=c(t,["promptFeedback"]);u!=null&&d(e,["promptFeedback"],u);const f=c(t,["responseId"]);f!=null&&d(e,["responseId"],f);const m=c(t,["usageMetadata"]);return m!=null&&d(e,["usageMetadata"],m),e}function fC(t){const e={},n=c(t,["truncated"]);n!=null&&d(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&d(e,["tokenCount"],r),e}function hC(t){const e={},n=c(t,["values"]);n!=null&&d(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&d(e,["statistics"],fC(r)),e}function mC(t){const e={},n=c(t,["billableCharacterCount"]);return n!=null&&d(e,["billableCharacterCount"],n),e}function pC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>hC(u))),d(e,["embeddings"],l)}const o=c(t,["metadata"]);return o!=null&&d(e,["metadata"],mC(o)),e}function gC(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&d(e,["imageBytes"],ql(r));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Tg(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);const o=c(t,["contentType"]);return o!=null&&d(e,["contentType"],o),e}function Id(t){const e={},n=c(t,["_self"]);n!=null&&d(e,["image"],gC(n));const r=c(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);const o=c(t,["_self"]);o!=null&&d(e,["safetyAttributes"],Tg(o));const l=c(t,["prompt"]);return l!=null&&d(e,["enhancedPrompt"],l),e}function vC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Id(u))),d(e,["generatedImages"],l)}const o=c(t,["positivePromptSafetyAttributes"]);return o!=null&&d(e,["positivePromptSafetyAttributes"],Tg(o)),e}function xC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Id(l))),d(e,["generatedImages"],o)}return e}function yC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(l=>Id(l))),d(e,["generatedImages"],o)}return e}function wC(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>Id(o))),d(e,["generatedImages"],r)}return e}function bC(t){const e={},n=c(t,["endpoint"]);n!=null&&d(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&d(e,["deployedModelId"],r),e}function NC(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&d(e,["createTime"],r);const o=c(t,["updateTime"]);return o!=null&&d(e,["updateTime"],o),e}function SC(t){const e={},n=c(t,["checkpointId"]);n!=null&&d(e,["checkpointId"],n);const r=c(t,["epoch"]);r!=null&&d(e,["epoch"],r);const o=c(t,["step"]);return o!=null&&d(e,["step"],o),e}function rh(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["displayName"]);r!=null&&d(e,["displayName"],r);const o=c(t,["description"]);o!=null&&d(e,["description"],o);const l=c(t,["versionId"]);l!=null&&d(e,["version"],l);const u=c(t,["deployedModels"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(N=>bC(N))),d(e,["endpoints"],w)}const f=c(t,["labels"]);f!=null&&d(e,["labels"],f);const m=c(t,["_self"]);m!=null&&d(e,["tunedModelInfo"],NC(m));const p=c(t,["defaultCheckpointId"]);p!=null&&d(e,["defaultCheckpointId"],p);const v=c(t,["checkpoints"]);if(v!=null){let w=v;Array.isArray(w)&&(w=w.map(N=>SC(N))),d(e,["checkpoints"],w)}return e}function CC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["_self"]);if(o!=null){let l=cg(o);Array.isArray(l)&&(l=l.map(u=>rh(u))),d(e,["models"],l)}return e}function kC(){return{}}function TC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&d(e,["totalTokens"],r),e}function IC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);return r!=null&&d(e,["tokensInfo"],r),e}function AC(t){const e={},n=c(t,["gcsUri"]);n!=null&&d(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],ql(r));const o=c(t,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function _C(t){const e={},n=c(t,["_self"]);return n!=null&&d(e,["video"],AC(n)),e}function EC(t){const e={},n=c(t,["videos"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(u=>_C(u))),d(e,["generatedVideos"],l)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&d(e,["raiMediaFilteredReasons"],o),e}function LC(t){const e={},n=c(t,["name"]);n!=null&&d(e,["name"],n);const r=c(t,["metadata"]);r!=null&&d(e,["metadata"],r);const o=c(t,["done"]);o!=null&&d(e,["done"],o);const l=c(t,["error"]);l!=null&&d(e,["error"],l);const u=c(t,["response"]);return u!=null&&d(e,["response"],EC(u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PC="Content-Type",MC="X-Server-Timeout",jC="User-Agent",ih="x-goog-api-client",DC="1.14.0",RC=`google-genai-sdk/${DC}`,FC="v1beta1",BC="v1beta",g0=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class UC{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:FC,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:BC,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.unaryApiCall(o,l,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,l]of Object.entries(n))typeof l=="object"?r[o]=Object.assign(Object.assign({},r[o]),l):l!==void 0&&(r[o]=l);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,n,e.abortSignal),this.streamApiCall(o,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const o=new AbortController,l=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=l}return n&&n.extraBody!==null&&HC(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await v0(o),new Kf(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await v0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return ku(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";for(;;){const{done:f,value:m}=yield xr(o.read());if(f){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=l.decode(m,{stream:!0});try{const w=JSON.parse(p);if("error"in w){const N=JSON.parse(JSON.stringify(w.error)),b=N.status,I=N.code,_=`got status: ${b}. ${JSON.stringify(w)}`;if(I>=400&&I<600)throw new kd({message:_,status:I})}}catch(w){if(w.name==="ApiError")throw w}u+=p;let v=u.match(g0);for(;v;){const w=v[1];try{const N=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xr(new Kf(N)),u=u.slice(v[0].length),v=u.match(g0)}catch(N){throw new Error(`exception parsing stream chunk ${w}. ${N}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=RC+" "+this.clientOptions.userAgentExtra;return e[jC]=n,e[ih]=n,e[PC]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))n.append(r,o);e.timeout&&e.timeout>0&&n.append(MC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);o.sizeBytes=String(u.size);const f=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m=await this.fetchUploadUrl(o,n);return l.upload(e,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let o={};n!=null&&n.httpOptions?o=n.httpOptions:o={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},u=await this.request({path:Bt("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:o});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function v0(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new kd({message:o,status:n}):new Error(o)}}function HC(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))n=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(l,u){const f=Object.assign({},l);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const p=u[m],v=f[m];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=r(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),f[m]=p)}return f}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VC="mcp_used/unknown";let qC=!1;function Ig(t){for(const e of t)if(OC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return qC}function Ag(t){var e;const n=(e=t[ih])!==null&&e!==void 0?e:"";t[ih]=(n+` ${VC}`).trimStart()}function OC(t){return t!==null&&typeof t=="object"&&t instanceof vh}function zC(t,e=100){return ku(this,arguments,function*(){let r,o=0;for(;o<e;){const l=yield xr(t.listTools({cursor:r}));for(const u of l.tools)yield yield xr(u),o++;if(!l.nextCursor)break;r=l.nextCursor}})}class vh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new vh(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const l={},u=[];for(const v of this.mcpClients)try{for(var f=!0,m=(n=void 0,rc(zC(v))),p;p=await m.next(),e=p.done,!e;f=!0){o=p.value,f=!1;const w=o;u.push(w);const N=w.name;if(l[N])throw new Error(`Duplicate function name ${N} found in MCP tools. Please ensure function names are unique.`);l[N]=v}}catch(w){n={error:w}}finally{try{!f&&!e&&(r=m.return)&&await r.call(m)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Iv(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await o.callTool({name:r.name,arguments:r.args},void 0,l);n.push({functionResponse:{name:r.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WC(t,e,n){const r=new yv;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data);const l=Pb(o);Object.assign(r,l),e(r)}class $C{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=YC(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const v=new Promise(q=>{p=q}),w=e.callbacks,N=function(){p({})},b=this.apiClient,I={onopen:N,onmessage:q=>{WC(b,w.onmessage,q)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(q){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(q){}},_=this.webSocketFactory.create(m,JC(u),I);_.connect(),await v;const E=Zn(this.apiClient,e.model),T=bg({model:E}),P=th({setup:T});return _.send(JSON.stringify(P)),new GC(_,this.apiClient)}}class GC{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=_w(e),r=Ng(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Ew(e),r=th(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=th({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(xu.PLAY)}pause(){this.sendPlaybackControl(xu.PAUSE)}stop(){this.sendPlaybackControl(xu.STOP)}resetContext(){this.sendPlaybackControl(xu.RESET_CONTEXT)}close(){this.conn.close()}}function JC(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function YC(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function QC(t,e,n){const r=new xv;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const l=JSON.parse(o);if(t.isVertexAI()){const u=$b(l);Object.assign(r,u)}else{const u=Sb(l);Object.assign(r,u)}e(r)}class XC{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new $C(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const w=this.apiClient.getHeaders();e.config&&e.config.tools&&Ig(e.config.tools)&&Ag(w);const N=n3(w);if(this.apiClient.isVertexAI())v=`${m}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(N);else{const $=this.apiClient.getApiKey();let he="BidiGenerateContent",R="key";$!=null&&$.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),he="BidiGenerateContentConstrained",R="access_token"),v=`${m}/ws/google.ai.generativelanguage.${p}.GenerativeService.${he}?${R}=${$}`}let b=()=>{};const I=new Promise($=>{b=$}),_=e.callbacks,E=function(){var $;($=_==null?void 0:_.onopen)===null||$===void 0||$.call(_),b({})},T=this.apiClient,P={onopen:E,onmessage:$=>{QC(T,_.onmessage,$)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function($){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function($){}},q=this.webSocketFactory.create(v,t3(N),P);q.connect(),await I;let J=Zn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const $=this.apiClient.getProject(),he=this.apiClient.getLocation();J=`projects/${$}/locations/${he}/`+J}let K={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[pd.AUDIO]}:e.config.responseModalities=[pd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],ne=[];for(const $ of fe)if(this.isCallableTool($)){const he=$;ne.push(await he.tool())}else ne.push($);ne.length>0&&(e.config.tools=ne);const X={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?K=ib(this.apiClient,X):K=kw(this.apiClient,X),delete K.config,q.send(JSON.stringify(K)),new e3(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const ZC={turnComplete:!0};class e3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ko(n.turns),e.isVertexAI()?r=r.map(o=>Lu(o)):r=r.map(o=>Td(o))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(KC)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},ZC),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ab(e)}:n={realtimeInput:Aw(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function t3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function n3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const x0=10;function y0(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Tu(u)){o=!0;break}if(!o)return!0;const l=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Tu(t){return"callTool"in t&&typeof t.callTool=="function"}function r3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>Tu(o)))!==null&&r!==void 0?r:!1}function i3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>!Tu(o)))!==null&&r!==void 0?r:!1}function w0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o3 extends Vl{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,l,u,f;const m=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!r3(n)||y0(n.config))return await this.generateContentInternal(m);if(i3(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let p,v;const w=Ko(m.contents),N=(l=(o=(r=m.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:x0;let b=0;for(;b<N&&(p=await this.generateContentInternal(m),!(!p.functionCalls||p.functionCalls.length===0));){const I=p.candidates[0].content,_=[];for(const E of(f=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Tu(E)){const P=await E.callTool(p.functionCalls);_.push(...P)}b++,v={role:"user",parts:_},m.contents=Ko(m.contents),m.contents.push(I),m.contents.push(v),w0(m.config)&&(w.push(I),w.push(v))}return w0(m.config)&&(p.automaticFunctionCallingHistory=w),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),y0(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let l;const u=[];if(r!=null&&r.generatedImages)for(const m of r.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?l=m==null?void 0:m.safetyAttributes:u.push(m);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:r.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:r.sdkHttpResponse},f}),this.list=async n=>{var r;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((r=u.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ac(Ul.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>await this.generateVideosInternal(n)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const l=(n=e.config)===null||n===void 0?void 0:n.tools;if(!l)return e;const u=await Promise.all(l.map(async m=>Tu(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&Ig(e.config.tools)){const m=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let p=Object.assign({},m);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Ag(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var n,r,o;const l=new Map;for(const u of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Tu(u)){const f=u,m=await f.tool();for(const p of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,f)}}return l}async processAfcStream(e){var n,r,o;const l=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:x0;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(p,v,w){var N,b;return ku(this,arguments,function*(){for(var I,_,E,T;f<l;){u&&(f++,u=!1);const K=yield xr(p.processParamsMaybeAddMcpUsage(w)),fe=yield xr(p.generateContentStreamInternal(K)),ne=[],X=[];try{for(var P=!0,q=(_=void 0,rc(fe)),J;J=yield xr(q.next()),I=J.done,!I;P=!0){T=J.value,P=!1;const $=T;if(yield yield xr($),$.candidates&&(!((N=$.candidates[0])===null||N===void 0)&&N.content)){X.push($.candidates[0].content);for(const he of(b=$.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(f<l&&he.functionCall){if(!he.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(he.functionCall.name)){const R=yield xr(v.get(he.functionCall.name).callTool([he.functionCall]));ne.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${he.functionCall.name}`)}}}}catch($){_={error:$}}finally{try{!P&&!I&&(E=q.return)&&(yield xr(E.call(q)))}finally{if(_)throw _.error}}if(ne.length>0){u=!0;const $=new tc;$.candidates=[{content:{role:"user",parts:ne}}],yield yield xr($);const he=[];he.push(...X),he.push({role:"user",parts:ne});const R=Ko(w.contents).concat(he);w.contents=R}else break}})})(this,m,e)}async generateContentInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=h0(this.apiClient,e);return f=Bt("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=p0(v),N=new tc;return Object.assign(N,w),N})}else{const p=f0(this.apiClient,e);return f=Bt("{model}:generateContent",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=m0(v),N=new tc;return Object.assign(N,w),N})}}async generateContentStreamInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=h0(this.apiClient,e);return f=Bt("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(w){return ku(this,arguments,function*(){var N,b,I,_;try{for(var E=!0,T=rc(w),P;P=yield xr(T.next()),N=P.done,!N;E=!0){_=P.value,E=!1;const q=_,J=p0(yield xr(q.json()));J.sdkHttpResponse={headers:q.headers};const K=new tc;Object.assign(K,J),yield yield xr(K)}}catch(q){b={error:q}}finally{try{!E&&!N&&(I=T.return)&&(yield xr(I.call(T)))}finally{if(b)throw b.error}}})})}else{const p=f0(this.apiClient,e);return f=Bt("{model}:streamGenerateContent?alt=sse",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(w){return ku(this,arguments,function*(){var N,b,I,_;try{for(var E=!0,T=rc(w),P;P=yield xr(T.next()),N=P.done,!N;E=!0){_=P.value,E=!1;const q=_,J=m0(yield xr(q.json()));J.sdkHttpResponse={headers:q.headers};const K=new tc;Object.assign(K,J),yield yield xr(K)}}catch(q){b={error:q}}finally{try{!E&&!N&&(I=T.return)&&(yield xr(I.call(T)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=sS(this.apiClient,e);return f=Bt("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=pC(v),N=new Wp;return Object.assign(N,w),N})}else{const p=xN(this.apiClient,e);return f=Bt("{model}:batchEmbedContents",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=WS(v),N=new Wp;return Object.assign(N,w),N})}}async generateImagesInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=lS(this.apiClient,e);return f=Bt("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=vC(v),N=new $p;return Object.assign(N,w),N})}else{const p=wN(this.apiClient,e);return f=Bt("{model}:predict",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=JS(v),N=new $p;return Object.assign(N,w),N})}}async editImageInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=pS(this.apiClient,e);return l=Bt("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=xC(m),v=new dv;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=vS(this.apiClient,e);return l=Bt("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=yC(m),v=new fv;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=bS(this.apiClient,e);return l=Bt("{model}:predict",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o.then(m=>{const p=wC(m),v=new hv;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=NS(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>rh(v))}else{const p=bN(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>nh(v))}}async listInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=CS(this.apiClient,e);return f=Bt("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=CC(v),N=new Gp;return Object.assign(N,w),N})}else{const p=SN(this.apiClient,e);return f=Bt("{models_url}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=KS(v),N=new Gp;return Object.assign(N,w),N})}}async update(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=TS(this.apiClient,e);return f=Bt("{model}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>rh(v))}else{const p=kN(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>nh(v))}}async delete(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=IS(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(()=>{const v=kC(),w=new Jp;return Object.assign(w,v),w})}else{const p=TN(this.apiClient,e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(()=>{const v=QS(),w=new Jp;return Object.assign(w,v),w})}}async countTokens(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=_S(this.apiClient,e);return f=Bt("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=TC(v),N=new Yp;return Object.assign(N,w),N})}else{const p=AN(this.apiClient,e);return f=Bt("{model}:countTokens",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=XS(v),N=new Yp;return Object.assign(N,w),N})}}async computeTokens(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=ES(this.apiClient,e);return l=Bt("{model}:computeTokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const p=IC(m),v=new mv;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=MS(this.apiClient,e);return f=Bt("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>{const w=LC(v),N=new gd;return Object.assign(N,w),N})}else{const p=LN(this.apiClient,e);return f=Bt("{model}:predictLongRunning",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u.then(v=>{const w=nC(v),N=new gd;return Object.assign(N,w),N})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s3(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["_url","operationName"],n);const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function a3(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["_url","operationName"],n);const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function l3(t){const e={},n=c(t,["operationName"]);n!=null&&d(e,["operationName"],n);const r=c(t,["resourceName"]);r!=null&&d(e,["_url","resourceName"],r);const o=c(t,["config"]);return o!=null&&d(e,["config"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u3 extends Vl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let l;r&&"httpOptions"in r&&(l=r.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:l}});return n._fromAPIResponse({apiResponse:u,isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=a3(e);return f=Bt("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u}else{const p=s3(e);return f=Bt("{operationName}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=l3(e);return l=Bt("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c3(t){const e={},n=c(t,["voiceName"]);return n!=null&&d(e,["voiceName"],n),e}function _g(t){const e={},n=c(t,["prebuiltVoiceConfig"]);return n!=null&&d(e,["prebuiltVoiceConfig"],c3(n)),e}function d3(t){const e={},n=c(t,["speaker"]);n!=null&&d(e,["speaker"],n);const r=c(t,["voiceConfig"]);return r!=null&&d(e,["voiceConfig"],_g(r)),e}function f3(t){const e={},n=c(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>d3(o))),d(e,["speakerVoiceConfigs"],r)}return e}function h3(t){const e={},n=c(t,["voiceConfig"]);n!=null&&d(e,["voiceConfig"],_g(n));const r=c(t,["multiSpeakerVoiceConfig"]);r!=null&&d(e,["multiSpeakerVoiceConfig"],f3(r));const o=c(t,["languageCode"]);return o!=null&&d(e,["languageCode"],o),e}function m3(t){const e={},n=c(t,["fps"]);n!=null&&d(e,["fps"],n);const r=c(t,["endOffset"]);r!=null&&d(e,["endOffset"],r);const o=c(t,["startOffset"]);return o!=null&&d(e,["startOffset"],o),e}function p3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["data"]);n!=null&&d(e,["data"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function g3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function v3(t){const e={},n=c(t,["videoMetadata"]);n!=null&&d(e,["videoMetadata"],m3(n));const r=c(t,["thought"]);r!=null&&d(e,["thought"],r);const o=c(t,["inlineData"]);o!=null&&d(e,["inlineData"],p3(o));const l=c(t,["fileData"]);l!=null&&d(e,["fileData"],g3(l));const u=c(t,["thoughtSignature"]);u!=null&&d(e,["thoughtSignature"],u);const f=c(t,["codeExecutionResult"]);f!=null&&d(e,["codeExecutionResult"],f);const m=c(t,["executableCode"]);m!=null&&d(e,["executableCode"],m);const p=c(t,["functionCall"]);p!=null&&d(e,["functionCall"],p);const v=c(t,["functionResponse"]);v!=null&&d(e,["functionResponse"],v);const w=c(t,["text"]);return w!=null&&d(e,["text"],w),e}function x3(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>v3(l))),d(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&d(e,["role"],r),e}function y3(t){const e={},n=c(t,["behavior"]);n!=null&&d(e,["behavior"],n);const r=c(t,["description"]);r!=null&&d(e,["description"],r);const o=c(t,["name"]);o!=null&&d(e,["name"],o);const l=c(t,["parameters"]);l!=null&&d(e,["parameters"],l);const u=c(t,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(t,["response"]);f!=null&&d(e,["response"],f);const m=c(t,["responseJsonSchema"]);return m!=null&&d(e,["responseJsonSchema"],m),e}function w3(t){const e={},n=c(t,["startTime"]);n!=null&&d(e,["startTime"],n);const r=c(t,["endTime"]);return r!=null&&d(e,["endTime"],r),e}function b3(t){const e={},n=c(t,["timeRangeFilter"]);if(n!=null&&d(e,["timeRangeFilter"],w3(n)),c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function N3(t){const e={},n=c(t,["mode"]);n!=null&&d(e,["mode"],n);const r=c(t,["dynamicThreshold"]);return r!=null&&d(e,["dynamicThreshold"],r),e}function S3(t){const e={},n=c(t,["dynamicRetrievalConfig"]);return n!=null&&d(e,["dynamicRetrievalConfig"],N3(n)),e}function C3(){return{}}function k3(t){const e={},n=c(t,["environment"]);return n!=null&&d(e,["environment"],n),e}function T3(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(p=>y3(p))),d(e,["functionDeclarations"],m)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearch"]);r!=null&&d(e,["googleSearch"],b3(r));const o=c(t,["googleSearchRetrieval"]);if(o!=null&&d(e,["googleSearchRetrieval"],S3(o)),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(t,["urlContext"])!=null&&d(e,["urlContext"],C3());const u=c(t,["computerUse"]);u!=null&&d(e,["computerUse"],k3(u));const f=c(t,["codeExecution"]);return f!=null&&d(e,["codeExecution"],f),e}function I3(t){const e={},n=c(t,["handle"]);if(n!=null&&d(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function b0(){return{}}function A3(t){const e={},n=c(t,["disabled"]);n!=null&&d(e,["disabled"],n);const r=c(t,["startOfSpeechSensitivity"]);r!=null&&d(e,["startOfSpeechSensitivity"],r);const o=c(t,["endOfSpeechSensitivity"]);o!=null&&d(e,["endOfSpeechSensitivity"],o);const l=c(t,["prefixPaddingMs"]);l!=null&&d(e,["prefixPaddingMs"],l);const u=c(t,["silenceDurationMs"]);return u!=null&&d(e,["silenceDurationMs"],u),e}function _3(t){const e={},n=c(t,["automaticActivityDetection"]);n!=null&&d(e,["automaticActivityDetection"],A3(n));const r=c(t,["activityHandling"]);r!=null&&d(e,["activityHandling"],r);const o=c(t,["turnCoverage"]);return o!=null&&d(e,["turnCoverage"],o),e}function E3(t){const e={},n=c(t,["targetTokens"]);return n!=null&&d(e,["targetTokens"],n),e}function L3(t){const e={},n=c(t,["triggerTokens"]);n!=null&&d(e,["triggerTokens"],n);const r=c(t,["slidingWindow"]);return r!=null&&d(e,["slidingWindow"],E3(r)),e}function P3(t){const e={},n=c(t,["proactiveAudio"]);return n!=null&&d(e,["proactiveAudio"],n),e}function M3(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","responseModalities"],o);const l=c(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const u=c(t,["topP"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","topP"],u);const f=c(t,["topK"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topK"],f);const m=c(t,["maxOutputTokens"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","maxOutputTokens"],m);const p=c(t,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=c(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const w=c(t,["speechConfig"]);e!==void 0&&w!=null&&d(e,["setup","generationConfig","speechConfig"],h3(gh(w)));const N=c(t,["enableAffectiveDialog"]);e!==void 0&&N!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],N);const b=c(t,["systemInstruction"]);e!==void 0&&b!=null&&d(e,["setup","systemInstruction"],x3(Vi(b)));const I=c(t,["tools"]);if(e!==void 0&&I!=null){let K=_u(I);Array.isArray(K)&&(K=K.map(fe=>T3(Au(fe)))),d(e,["setup","tools"],K)}const _=c(t,["sessionResumption"]);e!==void 0&&_!=null&&d(e,["setup","sessionResumption"],I3(_));const E=c(t,["inputAudioTranscription"]);e!==void 0&&E!=null&&d(e,["setup","inputAudioTranscription"],b0());const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&d(e,["setup","outputAudioTranscription"],b0());const P=c(t,["realtimeInputConfig"]);e!==void 0&&P!=null&&d(e,["setup","realtimeInputConfig"],_3(P));const q=c(t,["contextWindowCompression"]);e!==void 0&&q!=null&&d(e,["setup","contextWindowCompression"],L3(q));const J=c(t,["proactivity"]);return e!==void 0&&J!=null&&d(e,["setup","proactivity"],P3(J)),n}function j3(t,e){const n={},r=c(e,["model"]);r!=null&&d(n,["setup","model"],Zn(t,r));const o=c(e,["config"]);return o!=null&&d(n,["config"],M3(o,n)),n}function D3(t,e,n){const r={},o=c(e,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);const l=c(e,["newSessionExpireTime"]);n!==void 0&&l!=null&&d(n,["newSessionExpireTime"],l);const u=c(e,["uses"]);n!==void 0&&u!=null&&d(n,["uses"],u);const f=c(e,["liveConnectConstraints"]);n!==void 0&&f!=null&&d(n,["bidiGenerateContentSetup"],j3(t,f));const m=c(e,["lockAdditionalFields"]);return n!==void 0&&m!=null&&d(n,["fieldMask"],m),r}function R3(t,e){const n={},r=c(e,["config"]);return r!=null&&d(n,["config"],D3(t,r,n)),n}function F3(t){const e={},n=c(t,["name"]);return n!=null&&d(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(l=>`${n}.${l}`);e.push(...o)}else e.push(n)}return e.join(",")}function U3(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const l=r.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,n=l):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const l=B3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(p=>u.includes(p)?`generationConfig.${p}`:p));const m=[];l&&m.push(l),f.length>0&&m.push(...f),m.length>0?t.fieldMask=m.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class H3 extends Vl{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=R3(this.apiClient,e);l=Bt("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=U3(f,e.config);return o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),o.then(p=>F3(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V3(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function q3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const l=c(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),n}function O3(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],q3(n,e)),e}function z3(t){const e={},n=c(t,["textInput"]);n!=null&&d(e,["textInput"],n);const r=c(t,["output"]);return r!=null&&d(e,["output"],r),e}function W3(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=c(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>z3(o))),d(e,["examples","examples"],r)}return e}function $3(t,e){const n={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);const l=c(t,["learningRateMultiplier"]);if(l!=null&&d(n,["tuningTask","hyperparameters","learningRateMultiplier"],l),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=c(t,["batchSize"]);e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","batchSize"],u);const f=c(t,["learningRate"]);return e!==void 0&&f!=null&&d(e,["tuningTask","hyperparameters","learningRate"],f),n}function G3(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=c(t,["preTunedModel"]);r!=null&&d(e,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&d(e,["tuningTask","trainingData"],W3(o));const l=c(t,["config"]);return l!=null&&d(e,["config"],$3(l,e)),e}function J3(t){const e={},n=c(t,["name"]);n!=null&&d(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&d(e,["config"],r),e}function Y3(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);const l=c(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),n}function K3(t){const e={},n=c(t,["config"]);return n!=null&&d(e,["config"],Y3(n,e)),e}function Q3(t,e){const n={},r=c(t,["gcsUri"]);e!==void 0&&r!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],r);const o=c(t,["vertexDatasetResource"]);if(e!==void 0&&o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],o),c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function X3(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);const o=c(t,["vertexDatasetResource"]);return e!==void 0&&o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],o),n}function Z3(t,e){const n={},r=c(t,["validationDataset"]);e!==void 0&&r!=null&&d(e,["supervisedTuningSpec"],X3(r,n));const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);const l=c(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const u=c(t,["epochCount"]);e!==void 0&&u!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],u);const f=c(t,["learningRateMultiplier"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const m=c(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m);const p=c(t,["preTunedModelCheckpointId"]);p!=null&&d(n,["preTunedModel","checkpointId"],p);const v=c(t,["adapterSize"]);if(e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v),c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function e4(t){const e={},n=c(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);const r=c(t,["preTunedModel"]);r!=null&&d(e,["preTunedModel"],r);const o=c(t,["trainingDataset"]);o!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],Q3(o,e));const l=c(t,["config"]);return l!=null&&d(e,["config"],Z3(l,e)),e}function t4(t){const e={},n=c(t,["name"]);n!=null&&d(e,["model"],n);const r=c(t,["name"]);return r!=null&&d(e,["endpoint"],r),e}function Eg(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["state"]);o!=null&&d(e,["state"],ag(o));const l=c(t,["createTime"]);l!=null&&d(e,["createTime"],l);const u=c(t,["tuningTask","startTime"]);u!=null&&d(e,["startTime"],u);const f=c(t,["tuningTask","completeTime"]);f!=null&&d(e,["endTime"],f);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const p=c(t,["description"]);p!=null&&d(e,["description"],p);const v=c(t,["baseModel"]);v!=null&&d(e,["baseModel"],v);const w=c(t,["_self"]);w!=null&&d(e,["tunedModel"],t4(w));const N=c(t,["customBaseModel"]);N!=null&&d(e,["customBaseModel"],N);const b=c(t,["experiment"]);b!=null&&d(e,["experiment"],b);const I=c(t,["labels"]);I!=null&&d(e,["labels"],I);const _=c(t,["outputUri"]);_!=null&&d(e,["outputUri"],_);const E=c(t,["pipelineJob"]);E!=null&&d(e,["pipelineJob"],E);const T=c(t,["serviceAccount"]);T!=null&&d(e,["serviceAccount"],T);const P=c(t,["tunedModelDisplayName"]);return P!=null&&d(e,["tunedModelDisplayName"],P),e}function n4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["tunedModels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>Eg(u))),d(e,["tuningJobs"],l)}return e}function r4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["metadata"]);o!=null&&d(e,["metadata"],o);const l=c(t,["done"]);l!=null&&d(e,["done"],l);const u=c(t,["error"]);return u!=null&&d(e,["error"],u),e}function i4(t){const e={},n=c(t,["checkpointId"]);n!=null&&d(e,["checkpointId"],n);const r=c(t,["epoch"]);r!=null&&d(e,["epoch"],r);const o=c(t,["step"]);o!=null&&d(e,["step"],o);const l=c(t,["endpoint"]);return l!=null&&d(e,["endpoint"],l),e}function o4(t){const e={},n=c(t,["model"]);n!=null&&d(e,["model"],n);const r=c(t,["endpoint"]);r!=null&&d(e,["endpoint"],r);const o=c(t,["checkpoints"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>i4(u))),d(e,["checkpoints"],l)}return e}function oh(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&d(e,["name"],r);const o=c(t,["state"]);o!=null&&d(e,["state"],ag(o));const l=c(t,["createTime"]);l!=null&&d(e,["createTime"],l);const u=c(t,["startTime"]);u!=null&&d(e,["startTime"],u);const f=c(t,["endTime"]);f!=null&&d(e,["endTime"],f);const m=c(t,["updateTime"]);m!=null&&d(e,["updateTime"],m);const p=c(t,["error"]);p!=null&&d(e,["error"],p);const v=c(t,["description"]);v!=null&&d(e,["description"],v);const w=c(t,["baseModel"]);w!=null&&d(e,["baseModel"],w);const N=c(t,["tunedModel"]);N!=null&&d(e,["tunedModel"],o4(N));const b=c(t,["preTunedModel"]);b!=null&&d(e,["preTunedModel"],b);const I=c(t,["supervisedTuningSpec"]);I!=null&&d(e,["supervisedTuningSpec"],I);const _=c(t,["tuningDataStats"]);_!=null&&d(e,["tuningDataStats"],_);const E=c(t,["encryptionSpec"]);E!=null&&d(e,["encryptionSpec"],E);const T=c(t,["partnerModelTuningSpec"]);T!=null&&d(e,["partnerModelTuningSpec"],T);const P=c(t,["customBaseModel"]);P!=null&&d(e,["customBaseModel"],P);const q=c(t,["experiment"]);q!=null&&d(e,["experiment"],q);const J=c(t,["labels"]);J!=null&&d(e,["labels"],J);const K=c(t,["outputUri"]);K!=null&&d(e,["outputUri"],K);const fe=c(t,["pipelineJob"]);fe!=null&&d(e,["pipelineJob"],fe);const ne=c(t,["serviceAccount"]);ne!=null&&d(e,["serviceAccount"],ne);const X=c(t,["tunedModelDisplayName"]);return X!=null&&d(e,["tunedModelDisplayName"],X),e}function s4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);const o=c(t,["tuningJobs"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>oh(u))),d(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a4 extends Vl{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ac(Ul.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let l="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?l=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(l=o.name.split("/operations/")[0]),{name:l,state:Yf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=J3(e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>oh(v))}else{const p=V3(e);return f=Bt("{name}",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>Eg(v))}}async listInternal(e){var n,r,o,l;let u,f="",m={};if(this.apiClient.isVertexAI()){const p=K3(e);return f=Bt("tuningJobs",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=s4(v),N=new Qp;return Object.assign(N,w),N})}else{const p=O3(e);return f=Bt("tunedModels",p._url),m=p._query,delete p.config,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(w=>{const N=w;return N.sdkHttpResponse={headers:v.headers},N})),u.then(v=>{const w=n4(v),N=new Qp;return Object.assign(N,w),N})}}async tuneInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI()){const f=e4(e);return l=Bt("tuningJobs",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>oh(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=G3(e);return l=Bt("tunedModels",f._url),u=f._query,delete f.config,delete f._url,delete f._query,o=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>r4(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l4{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const u4=1024*1024*8,c4=3,d4=1e3,f4=2,Ef="x-goog-upload-status";async function h4(t,e,n){var r,o,l;let u=0,f=0,m=new Kf(new Response),p="upload";for(u=t.size;f<u;){const w=Math.min(u4,u-f),N=t.slice(f,f+w);f+w>=u&&(p+=", finalize");let b=0,I=d4;for(;b<c4&&(m=await n.request({path:"",body:N,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(f),"Content-Length":String(w)}}}),!(!((r=m==null?void 0:m.headers)===null||r===void 0)&&r[Ef]));)b++,await p4(I),I=I*f4;if(f+=w,((o=m==null?void 0:m.headers)===null||o===void 0?void 0:o[Ef])!=="active")break;if(u<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(m==null?void 0:m.json());if(((l=m==null?void 0:m.headers)===null||l===void 0?void 0:l[Ef])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function m4(t){return{size:t.size,type:t.type}}function p4(t){return new Promise(e=>setTimeout(e,t))}class g4{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await h4(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await m4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class v4{create(e,n,r){return new x4(e,n,r)}}class x4{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N0="x-goog-api-key";class y4{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(N0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(N0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w4="gl-node/";class b4{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=cv(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new y4(this.apiKey);this.apiClient=new UC({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:w4+"web",uploader:new g4,downloader:new l4}),this.models=new o3(this.apiClient),this.live=new XC(this.apiClient,o,new v4),this.batches=new Dx(this.apiClient),this.chats=new Vy(this.models,this.apiClient),this.caches=new By(this.apiClient),this.files=new ew(this.apiClient),this.operations=new u3(this.apiClient),this.authTokens=new H3(this.apiClient),this.tunings=new a4(this.apiClient)}}console.warn("API_KEY environment variable not set. Gemini API calls will fail.");new b4({apiKey:void 0});const N4=async(t,e,n,r,o)=>Promise.reject("API key is not configured."),S4=async(t,e,n,r)=>Promise.reject("API key is not configured."),C4=async(t,e,n,r)=>Promise.reject("API key is not configured."),k4=t=>t?[t.line1,t.line2,t.townCity,t.county,t.postcode].filter(Boolean).join(", "):"N/A",T4=({contact:t})=>s.jsxs("div",{className:"p-3 bg-stone-100 dark:bg-gray-700/50 rounded-lg",children:[s.jsxs("p",{className:"font-semibold",children:[t.firstName," ",t.lastName," ",t.isPrimary&&s.jsx("span",{className:"text-xs font-bold text-green-600",children:"(Primary)"})]}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.email}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.phone})]}),I4=({quote:t,client:e,surveyor:n,appointments:r,systemSettings:o,onBack:l,onOpenAppointmentModal:u})=>{const[f,m]=Pe.useState([]),[p,v]=Pe.useState(!1),[w,N]=Pe.useState(null),b=async()=>{if(!n){N("A surveyor must be assigned to the project first.");return}v(!0),N(null);try{const _=await C4(n,r,e,o);m(_)}catch(_){N(_ instanceof Error?_.message:"An unknown error occurred.")}finally{v(!1)}},I=_=>{if(!n)return;const E={id:"",title:`Survey - ${t.projectReference||t.quoteNumber}`,start:_.start,end:_.end,staffId:n.id,clientId:e.id,quoteId:t.id,reason:"Survey"};u(E,void 0)};return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 min-h-full overflow-y-auto",children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-stone-200 dark:border-gray-700 z-10 sticky top-0",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(hl,{className:"w-6 h-6 text-stone-600 dark:text-stone-300"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:"Book Survey Appointment"}),s.jsxs("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:["For Project: ",t.projectReference||t.quoteNumber]})]})]})})}),s.jsx("main",{className:"p-8 max-w-5xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[s.jsx(j1,{className:"w-5 h-5"})," Site & Surveyor"]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-stone-500 dark:text-stone-400",children:"Address:"})," ",k4(e.installationAddress||e.officeAddress)]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-stone-500 dark:text-stone-400",children:"Surveyor:"})," ",(n==null?void 0:n.name)||s.jsx("span",{className:"text-orange-500",children:"Unassigned"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[s.jsx(uh,{className:"w-5 h-5"})," Project Contacts"]}),s.jsx("div",{className:"space-y-2",children:e.contacts.map(_=>s.jsx(T4,{contact:_},_.id))})]})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border dark:border-gray-700",children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Schedule Appointment"}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400 mb-4",children:"Get AI-powered suggestions based on the surveyor's availability and proximity to other jobs."}),s.jsx(wt,{size:"lg",onClick:b,disabled:!n||p,icon:R1,children:p?"Thinking...":"Get AI Suggestions"}),w&&s.jsx("p",{className:"text-red-500 mt-4",children:w}),s.jsxs("div",{className:"mt-6 space-y-3",children:[f.map((_,E)=>s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold",children:new Date(_.start).toLocaleString([],{dateStyle:"full",timeStyle:"short"})}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 italic",children:['"',_.justification,'"']})]}),s.jsx(wt,{size:"md",onClick:()=>I(_),icon:wa,children:"Book this slot"})]},E)),!p&&f.length>0&&s.jsx("p",{className:"text-center text-sm text-stone-500 dark:text-stone-400 pt-4",children:"...or book a different time manually in the main calendar."})]})]})})]})})]})},A4=({alerts:t,onNavigate:e,onMarkAsRead:n})=>{const[r,o]=Pe.useState(!1),l=Pe.useRef(null),u=t.filter(p=>!p.isRead);Pe.useEffect(()=>{const p=v=>{l.current&&!l.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const f=p=>{e(p.clientId),n(p.id),o(!1)},m=p=>{p.stopPropagation(),n("all")};return s.jsxs("div",{className:"relative",ref:l,children:[s.jsxs("button",{onClick:()=>o(!r),className:"relative flex flex-col items-center justify-center w-full p-2 rounded-lg text-gray-300 hover:bg-gray-700 hover:text-white","aria-label":"Toggle notifications",children:[s.jsx(F1,{className:"w-6 h-6 mb-1"}),s.jsx("span",{className:"text-xs font-medium",children:"Alerts"}),u.length>0&&s.jsx("span",{className:"absolute top-1 right-1 block h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center ring-2 ring-gray-800",children:u.length})]}),r&&s.jsx("div",{className:"origin-bottom-left absolute left-full bottom-0 ml-2 w-80 rounded-md shadow-lg bg-white dark:bg-gray-800 ring-1 ring-black ring-opacity-5 focus:outline-none animate-fade-in",role:"menu","aria-orientation":"vertical",children:s.jsxs("div",{className:"py-1",role:"none",children:[s.jsxs("div",{className:"px-4 py-2 flex justify-between items-center border-b dark:border-gray-700",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Notifications"}),u.length>0&&s.jsx("button",{onClick:m,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Mark all as read"})]}),s.jsx("ul",{className:"max-h-96 overflow-y-auto",children:t.length>0?t.map(p=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>f(p),className:`w-full text-left block px-4 py-3 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 ${p.isRead?"":"bg-blue-50 dark:bg-blue-900/30"}`,role:"menuitem",children:[s.jsx("p",{className:"font-semibold",children:p.type==="stale_lead"&&"Stale Lead Warning"}),s.jsx("p",{children:p.message}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(p.createdAt).toLocaleString()})]})},p.id)):s.jsx("li",{className:"px-4 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"You're all caught up!"})})]})})]})},_4=({status:t})=>{const e={[xn.NEW]:"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300",[xn.APPOINTMENT_BOOKED]:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/50 dark:text-cyan-300",[xn.QUOTED]:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300",[xn.FOLLOW_UP_1]:"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300",[xn.FOLLOW_UP_2]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300",[xn.WON]:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300",[xn.LOST]:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300",[xn.SURVEY]:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300",[xn.READY_FOR_PRODUCTION]:"bg-indigo-500 text-white dark:bg-indigo-700 dark:text-gray-200"};return s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e[t]||"bg-gray-100 text-gray-800"}`,children:t})},E4=({client:t,quotes:e,onBack:n,onEditQuote:r,onCreateQuote:o,systemSettings:l})=>{const u=m=>m.toLocaleString(void 0,{style:"currency",currency:l.currency}),f=[...e].sort((m,p)=>new Date(p.date).getTime()-new Date(m.date).getTime());return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 min-h-full overflow-y-auto",children:[s.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm p-4 border-b border-stone-200 dark:border-gray-700 z-10 sticky top-0",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-stone-100 dark:hover:bg-gray-700",children:s.jsx(hl,{className:"w-6 h-6 text-stone-600 dark:text-stone-300"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl font-bold text-stone-800 dark:text-stone-100",children:["Quotes for ",go(t)]}),s.jsx("p",{className:"text-sm text-stone-500 dark:text-stone-400",children:t.leadNumber})]})]}),s.jsx(wt,{onClick:()=>o(t.id),icon:Ts,children:"Create New Quote"})]})}),s.jsx("main",{className:"p-8",children:s.jsx("div",{className:"max-w-5xl mx-auto",children:f.length>0?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{className:"border-b-2 border-stone-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Quote #"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Date"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Project Ref."}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400",children:"Status"}),s.jsx("th",{className:"p-4 text-sm font-semibold uppercase text-stone-500 dark:text-stone-400 text-right",children:"Value"}),s.jsx("th",{className:"p-4"})]})}),s.jsx("tbody",{className:"divide-y divide-stone-200 dark:divide-gray-700",children:f.map(m=>{const p=m.items.reduce((v,w)=>v+w.price*w.quantity,0);return s.jsxs("tr",{className:"hover:bg-stone-50 dark:hover:bg-gray-700/50",children:[s.jsx("td",{className:"p-4 font-medium text-stone-800 dark:text-stone-100",children:m.quoteNumber}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300",children:new Date(m.date).toLocaleDateString()}),s.jsx("td",{className:"p-4 text-stone-600 dark:text-stone-300",children:m.projectReference||s.jsx("span",{className:"text-stone-400 dark:text-stone-500",children:"N/A"})}),s.jsx("td",{className:"p-4",children:s.jsx(_4,{status:m.status})}),s.jsx("td",{className:"p-4 text-right font-semibold",children:u(p)}),s.jsx("td",{className:"p-4 text-right",children:s.jsx(wt,{onClick:()=>r(m.id),children:"Open"})})]},m.id)})})]})}):s.jsxs("div",{className:"text-center py-20 px-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-stone-200 dark:border-gray-700",children:[s.jsx(yu,{className:"w-12 h-12 mx-auto text-stone-400 dark:text-stone-500"}),s.jsx("h3",{className:"mt-4 text-lg font-medium text-stone-800 dark:text-stone-100",children:"No Quotes Found"}),s.jsx("p",{className:"mt-1 text-sm text-stone-500 dark:text-stone-400",children:"This client doesn't have any quotes yet."})]})})})]})};function L4(){return{addToast:()=>{}}}const P4=({currentUser:t,allStaff:e,roles:n,onUpdateUser:r,setCurrentUser:o,theme:l,toggleTheme:u})=>{const[f,m]=Pe.useState(t.name),[p,v]=Pe.useState(t.email),[w,N]=Pe.useState(t.mobile||"");Pe.useEffect(()=>{m(t.name),v(t.email),N(t.mobile||"")},[t]);const b=n.find(E=>E.id===t.roleId),I=()=>{r({...t,name:f,email:p,mobile:w,initials:f.split(" ").map(E=>E[0]).join("").toUpperCase()})},_=E=>{const T=e.find(P=>P.id===E);T&&o(T)};return s.jsxs("div",{className:"bg-stone-50 dark:bg-gray-900 flex flex-col h-full",children:[s.jsx("header",{className:"flex-shrink-0 bg-white dark:bg-gray-800 p-4 border-b border-stone-200 dark:border-gray-700 z-10",children:s.jsx("div",{className:"flex justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(uh,{className:"w-8 h-8 text-stone-600 dark:text-stone-300"}),s.jsx("h1",{className:"text-2xl font-bold text-stone-800 dark:text-stone-100",children:"User Settings"})]})})}),s.jsx("main",{className:"flex-grow p-8 overflow-y-auto",children:s.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"My Profile"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Full Name"}),s.jsx(kt,{value:f,onChange:E=>m(E.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Email Address"}),s.jsx(kt,{type:"email",value:p,onChange:E=>v(E.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Mobile"}),s.jsx(kt,{type:"tel",value:w,onChange:E=>N(E.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Role"}),s.jsx(kt,{value:(b==null?void 0:b.name)||"N/A",disabled:!0,className:"bg-stone-100 dark:bg-gray-700/50"})]})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx(wt,{onClick:I,icon:Iu,children:"Save Profile"})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Appearance"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-sm",children:"Switch between light and dark themes."}),s.jsx("button",{onClick:u,className:"p-2 rounded-full text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600",children:l==="light"?s.jsx(_1,{className:"w-6 h-6"}):s.jsx(A1,{className:"w-6 h-6"})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Quick User Switch (Demo Feature)"}),s.jsx("p",{className:"text-sm text-stone-500 mb-3",children:"Easily switch between users to test different roles and permissions throughout the application."}),s.jsx(Nn,{value:t.id,onChange:E=>_(E.target.value),children:e.map(E=>{var T;return s.jsxs("option",{value:E.id,children:[E.name," (",(T=n.find(P=>P.id===E.roleId))==null?void 0:T.name,")"]},E.id)})})]})]})})]})};function M4(){const[t,e]=Pe.useState(J1),[n,r]=Pe.useState(Y1),[o,l]=Pe.useState(Em),[u,f]=Pe.useState($1),[m,p]=Pe.useState(G1),[v,w]=Pe.useState(e2),[N,b]=Pe.useState(X1),[I,_]=Pe.useState(Z1),[E,T]=Pe.useState(Q1),[P,q]=Pe.useState(O1),[J,K]=Pe.useState(K1),[fe,ne]=Pe.useState(W1),[X,$]=Pe.useState([]),[he,R]=Pe.useState(t2),[D,H]=Pe.useState(Em[0]),[O,ge]=Pe.useState({view:"dashboard"}),[xe,ie]=Pe.useState({isOpen:!1,isLoading:!1,error:null,data:null,clientId:null}),[Y,ve]=Pe.useState({isOpen:!1,file:null}),[we,le]=Pe.useState({isOpen:!1,file:null,client:null}),[M,W]=Pe.useState({isOpen:!1,appointment:null,prefilledClientId:void 0}),[Q,ue]=Pe.useState({isOpen:!1,appointment:null,client:null}),{addToast:ce}=L4(),[me,re]=Pe.useState(()=>{if(typeof window<"u"&&window.localStorage){const $e=window.localStorage.getItem("theme");if($e)return $e}return typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"});Pe.useEffect(()=>{me==="dark"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[me]),Pe.useEffect(()=>{const $e=new Date,Te=[];t.forEach(_e=>{if(_e.assignedTo){const Fe=new Date(_e.createdAt);if(($e.getTime()-Fe.getTime())/(1e3*60*60)>24&&_e.createdAt===_e.lastContacted&&!X.find(ee=>ee.clientId===_e.id&&ee.type==="stale_lead")){const ee=go(_e);Te.push({id:`alert-${_e.id}-stale`,type:"stale_lead",message:`Lead "${ee}" has not been actioned in over 24 hours.`,clientId:_e.id,isRead:!1,createdAt:$e.toISOString()})}}}),Te.length>0&&$(_e=>[..._e,...Te])},[t]);const se=()=>{re($e=>$e==="light"?"dark":"light")},ye=$e=>{ge($e)},Be=$e=>{const Te=u.find(_e=>_e.id===D.roleId);return(Te==null?void 0:Te.permissions.includes($e))??!1},Ge=($e,Te)=>{const _e={...Te,id:`act-${Date.now()}`,timestamp:new Date().toISOString()};e(Fe=>Fe.map(Ie=>Ie.id===$e?{...Ie,activity:[_e,...Ie.activity||[]]}:Ie))},pe=$e=>{e(Te=>Te.map(_e=>_e.id===$e?{..._e,lastContacted:new Date().toISOString()}:_e))},Ze=$e=>{if(!Be("manageQuotes"))return ce("You don't have permission to create quotes.","error");const Te=t.find(ee=>ee.id===$e);if(!Te)return;const Fe=n.filter(ee=>ee.clientId===$e).length+1,Ie=`${Te.leadNumber}/${Fe}`,lt={id:`quote-${Date.now()}`,quoteNumber:Ie,clientId:$e,date:new Date().toISOString().split("T")[0],status:xn.NEW,items:[]};r(ee=>[...ee,lt]),pe($e),Ge($e,{type:"quote_created",staffId:D.id,content:`Created quote ${lt.quoteNumber}.`}),ye({view:"quoteBuilder",quoteId:lt.id})},Le=($e,Te=!0)=>{const _e=n.find(Fe=>Fe.id===$e.id);r(Fe=>Fe.map(Ie=>Ie.id===$e.id?$e:Ie)),_e&&_e.status!==$e.status&&(Ge($e.clientId,{type:"label_change",staffId:D.id,content:`Quote ${$e.quoteNumber} status changed from ${_e.status} to ${$e.status}.`}),pe($e.clientId))},te=$e=>{const Te=n.find(_e=>_e.id===$e);Te&&(Te.status===xn.NEW||Te.status===xn.APPOINTMENT_BOOKED)&&Le({...Te,status:xn.QUOTED})},gt=$e=>{const Te=n.find(Oe=>Oe.id===$e);if(!Te)return;const _e=t.find(Oe=>Oe.id===Te.clientId);if(!_e)return;const Ie=n.filter(Oe=>Oe.clientId===Te.clientId).length+1,lt=`${_e.leadNumber}/${Ie}`,ee=JSON.parse(JSON.stringify(Te));ee.id=`quote-${Date.now()}`,ee.quoteNumber=lt,ee.status=xn.NEW,ee.date=new Date().toISOString().split("T")[0],ee.items=ee.items.map((Oe,tt)=>{const pt=JSON.parse(JSON.stringify(Oe));if(pt.id=`item-${Date.now()}-${tt}`,pt.windowInstances&&pt.windowInstances.length>0){const ht=[],qt=[],Pn=[],Xt=[],Cn=[...pt.windowInstances],Fn=Cn[0].id,wn=Cn.map(mt=>{const zt=mt.id,In=`inst-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;(Oe.mullions||[]).filter(gn=>(gn.instanceId||Fn)===zt).forEach(gn=>{ht.push({...gn,id:`m-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,instanceId:In})}),(Oe.transoms||[]).filter(gn=>(gn.instanceId||Fn)===zt).forEach(gn=>{qt.push({...gn,id:`t-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,instanceId:In})}),(Oe.placedSashes||[]).filter(gn=>gn.paneId.startsWith(zt)).forEach(gn=>{const Mn=JSON.parse(JSON.stringify(gn));Mn.paneId=Mn.paneId.replace(zt,In),Mn.glazingBars&&(Mn.glazingBars=Mn.glazingBars.map(Dt=>({...Dt,id:`gb-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),Pn.push(Mn)}),(Oe.paneGlassTypes||[]).filter(gn=>gn.paneId.startsWith(zt)).forEach(gn=>{Xt.push({...gn,paneId:gn.paneId.replace(zt,In)})});const sn={...mt,id:In};return sn.topSashGlazingBars&&(sn.topSashGlazingBars=sn.topSashGlazingBars.map(gn=>({...gn,id:`gb-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),sn.bottomSashGlazingBars&&(sn.bottomSashGlazingBars=sn.bottomSashGlazingBars.map(gn=>({...gn,id:`gb-q-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}))),sn});pt.windowInstances=wn,pt.mullions=ht,pt.transoms=qt,pt.placedSashes=Pn,pt.paneGlassTypes=Xt}return pt}),r(Oe=>[...Oe,ee]),ye({view:"quoteBuilder",quoteId:ee.id,isCopy:!0})},et=async($e,Te)=>{const _e=Te.contacts.find(Fe=>Fe.isPrimary);if(!_e)return ce("Cannot generate email: client has no primary contact.","error");ie({isOpen:!0,isLoading:!0,error:null,data:null,clientId:Te.id});try{const Fe=await N4(Te,$e,fe,D,I);ie(Ie=>({...Ie,isLoading:!1,data:{...Fe,clientEmail:_e.email}}))}catch(Fe){ie(Ie=>({...Ie,isLoading:!1,error:Fe instanceof Error?Fe.message:"An unknown error occurred."}))}},qe=$e=>{xe.clientId&&(Ge(xe.clientId,{type:"email_sent",staffId:D.id,content:`Sent email: ${$e}`}),pe(xe.clientId))},at=$e=>{K(Te=>{if(!Te.some(Fe=>Fe.id===$e.id)){$e.clientId&&(Ge($e.clientId,{type:"appointment_created",staffId:D.id,content:`Created appointment: ${$e.title}`}),pe($e.clientId));const Fe=t.find(Ie=>Ie.id===$e.clientId);return Fe&&ue({isOpen:!0,appointment:$e,client:Fe}),[...Te,$e]}return Te.map(Fe=>Fe.id===$e.id?$e:Fe)}),W({isOpen:!1,appointment:null})},nt=$e=>{K(Te=>Te.filter(_e=>_e.id!==$e))},He=async()=>{const{appointment:$e,client:Te}=Q;if(!$e||!Te)return;const _e=o.find(Fe=>Fe.id===$e.staffId);if(_e)try{const Fe=await S4($e,Te,_e,fe),Ie={id:`email-${Date.now()}`,direction:"outgoing",...Fe,timestamp:new Date().toISOString()};e(lt=>lt.map(ee=>ee.id===Te.id?{...ee,emails:[Ie,...ee.emails||[]]}:ee)),Ge(Te.id,{type:"email_sent",staffId:D.id,content:`Sent appointment confirmation: ${Fe.subject}`}),pe(Te.id),ce("Confirmation email sent!","success")}catch(Fe){console.error(Fe)}finally{ue({isOpen:!1,appointment:null,client:null})}},bt=$e=>{if(!t.some(_e=>_e.id===$e.id)){const _e=`${fe.leadNumberPrefix}${fe.leadNextNumber}`;$e.leadNumber=_e,$e.label=fe.labels.leads[0].name,ne(Ie=>({...Ie,leadNextNumber:Ie.leadNextNumber+1}));const Fe={id:`act-${Date.now()}`,type:"note",timestamp:new Date().toISOString(),staffId:D.id,content:"New lead created."};$e.activity=[Fe],$e.assignedTo=$e.assignedTo||D.id,e(Ie=>[...Ie,$e])}else e(_e=>_e.map(Fe=>Fe.id===$e.id?$e:Fe))},Mt=$e=>{l(Te=>Te.map(_e=>_e.id===$e.id?$e:_e)),D.id===$e.id&&H($e)},At=()=>{switch(O.view){case"dashboard":return s.jsx($5,{currentUser:D,clients:t,quotes:n,staff:o,systemSettings:fe,appointments:J,navigateTo:ye,onCreateQuote:Ze,onBookAppointment:Te=>W({isOpen:!0,prefilledClientId:Te,appointment:null}),onAddNewLead:()=>ye({view:"leadEditor"})});case"customers":return s.jsx(Q5,{clients:t,quotes:n,staff:o,teams:m,appointments:J,onViewQuotes:Te=>ye({view:"quoteList",clientId:Te}),onEditLead:Te=>ye({view:"leadEditor",clientId:Te}),onCreateQuote:Ze,currentUser:D,hasPermission:Be,onOpenFile:Te=>ve({isOpen:!0,file:Te}),onAssignFile:(Te,_e)=>le({isOpen:!0,file:Te,client:_e}),systemSettings:fe,onBookAppointment:Te=>W({isOpen:!0,prefilledClientId:Te,appointment:null}),onAddNewLead:()=>ye({view:"leadEditor"})});case"crm":return s.jsx(i2,{clients:t,quotes:n,staff:o,currentUser:D,onEditQuote:Te=>ye({view:"quoteBuilder",quoteId:Te}),onCreateQuote:Ze,onUpdateQuote:Le,onGenerateEmail:et,hasPermission:Be,systemSettings:fe,appointments:J,navigateTo:ye,onBookAppointment:Te=>W({isOpen:!0,prefilledClientId:Te,appointment:null})});case"quoteList":{const Te=t.find(Fe=>Fe.id===O.clientId),_e=n.filter(Fe=>Fe.clientId===O.clientId);return Te?s.jsx(E4,{client:Te,quotes:_e,onBack:()=>ye({view:"customers"}),onEditQuote:Fe=>ye({view:"quoteBuilder",quoteId:Fe}),onCreateQuote:Ze,systemSettings:fe}):s.jsx("div",{children:"Client not found"})}case"quoteBuilder":{const Te=n.find(Ie=>Ie.id===O.quoteId),_e=Te?t.find(Ie=>Ie.id===Te.clientId):void 0;if(!Te||!_e)return s.jsx("div",{children:"Quote not found"});const Fe=o.find(Ie=>Ie.id===_e.assignedTo);return s.jsx(u5,{quote:Te,client:_e,onUpdateQuote:Le,onBack:()=>ye({view:"quoteList",clientId:Te.clientId}),assignedStaffName:Fe==null?void 0:Fe.name,onAddItem:Ie=>ye({view:"productSelection",quoteId:Te.id,itemType:Ie}),onEditItem:Ie=>{const lt=Te.items.find(ee=>ee.id===Ie);lt&&ye({view:"windowBuilder",quoteId:Te.id,itemToEdit:lt})},currency:fe.currency,materials:P,productRanges:I,systemSettings:fe,onPublishQuote:te,onCopyQuote:gt,isCopy:O.isCopy,addToast:ce})}case"windowBuilder":{const Te=n.find(_e=>_e.id===O.quoteId);return Te?s.jsx(Jc,{mode:"quote",itemToEdit:O.itemToEdit,profile:O.profileToUse,componentTemplates:N,onSaveItem:_e=>{const Fe=!Te.items.some(lt=>lt.id===_e.id);let Ie;if(Fe){const lt=Te.items.map(tt=>tt.itemNumber).filter(tt=>/^\d+$/.test(tt)).map(tt=>parseInt(tt,10)),ee=lt.length>0?Math.max(...lt):0;let Oe=String(ee+1);for(;Te.items.some(tt=>tt.itemNumber===Oe);)Oe=String(parseInt(Oe,10)+1);_e.itemNumber=Oe,Ie=[...Te.items,_e]}else Ie=Te.items.map(lt=>lt.id===_e.id?_e:lt);Le({...Te,items:Ie}),ye({view:"quoteBuilder",quoteId:Te.id})},onCancel:()=>ye({view:"quoteBuilder",quoteId:Te.id}),currency:fe.currency,materials:P,productRanges:I,quoteItems:Te.items,onNavigateItem:_e=>{const Fe=Te.items.findIndex(lt=>{var ee;return lt.id===((ee=O.itemToEdit)==null?void 0:ee.id)}),Ie=_e==="next"?Fe+1:Fe-1;Ie>=0&&Ie<Te.items.length&&ye({view:"windowBuilder",quoteId:Te.id,itemToEdit:Te.items[Ie]})},addToast:ce}):s.jsx("div",{children:"Quote not found"})}case"productSelection":{const{quoteId:Te,itemType:_e}=O,Fe=v.filter(Ie=>Ie.itemType===_e);return s.jsx(q5,{isOpen:!0,onClose:()=>ye({view:"quoteBuilder",quoteId:Te}),profiles:Fe,itemType:_e,onSelect:Ie=>ye({view:"windowBuilder",quoteId:Te,profileToUse:Ie}),navigateToSystem:()=>ye({view:"system",tab:`profiles-${_e.toLowerCase()}`}),productRanges:I})}case"system":return s.jsx(V5,{initialTab:O.tab,staff:o,setStaff:l,roles:u,setRoles:f,documents:E,setDocuments:T,teams:m,productProfiles:v,componentTemplates:N,setComponentTemplates:b,productRanges:I,setProductRanges:_,materials:P,setMaterials:q,onSaveProfile:Te=>{const _e=!v.some(Fe=>Fe.id===Te.id);w(_e?Fe=>[...Fe,Te]:Fe=>Fe.map(Ie=>Ie.id===Te.id?Te:Ie))},onDeleteProfile:Te=>w(_e=>_e.filter(Fe=>Fe.id!==Te)),onImportMaterials:Te=>q(_e=>[..._e,...Te]),systemSettings:fe,setSystemSettings:ne,hasPermission:Be,emailTemplates:he,onSaveEmailTemplate:Te=>{const _e=!he.some(Fe=>Fe.id===Te.id);R(_e?Fe=>[...Fe,Te]:Fe=>Fe.map(Ie=>Ie.id===Te.id?Te:Ie))},onDeleteEmailTemplate:Te=>R(_e=>_e.filter(Fe=>Fe.id!==Te)),navigateTo:ye,addToast:ce});case"profileEditor":{const Te=O.profileId?v.find(Ie=>Ie.id===O.profileId):void 0,_e=v.filter(Ie=>Ie.itemType===((Te==null?void 0:Te.itemType)||O.newItemType)),Fe=Te?_e.findIndex(Ie=>Ie.id===Te.id):-1;return s.jsx(Jc,{mode:"profile",profileToEdit:Te,componentTemplates:N,newItemType:O.newItemType,allProfiles:_e,onNavigateItem:Ie=>{const lt=Ie==="next"?Fe+1:Fe-1;if(lt>=0&&lt<_e.length){const ee=_e[lt];ye({view:"profileEditor",profileId:ee.id})}},onSaveProfile:Ie=>{const lt=!v.some(ee=>ee.id===Ie.id);w(lt?ee=>[...ee,Ie]:ee=>ee.map(Oe=>Oe.id===Ie.id?Ie:Oe)),ye({view:"system",tab:`profiles-${Ie.itemType.toLowerCase()}`})},onCancel:()=>{const Ie=((Te==null?void 0:Te.itemType)||O.newItemType||"Sash").toLowerCase();ye({view:"system",tab:`profiles-${Ie}`})},materials:P,productRanges:I,addToast:ce})}case"componentEditor":{const Te=O.templateId?N.find(Ie=>Ie.id===O.templateId):void 0,_e=N.filter(Ie=>Ie.itemType===((Te==null?void 0:Te.itemType)||O.itemType)),Fe=Te?_e.findIndex(Ie=>Ie.id===Te.id):-1;return s.jsx(Jc,{mode:"component",componentTemplateToEdit:Te,newItemType:O.itemType,allComponents:_e,onNavigateItem:Ie=>{const lt=Ie==="next"?Fe+1:Fe-1;if(lt>=0&&lt<_e.length){const ee=_e[lt];ye({view:"componentEditor",templateId:ee.id,itemType:ee.itemType})}},onSaveComponentTemplate:Ie=>{const lt=!N.some(ee=>ee.id===Ie.id);b(lt?ee=>[...ee,Ie]:ee=>ee.map(Oe=>Oe.id===Ie.id?Ie:Oe)),ye({view:"system",tab:"components"})},onCancel:()=>ye({view:"system",tab:"components"}),materials:P,productRanges:I,addToast:ce})}case"reports":return s.jsx(z5,{quotes:n,clients:t,staff:o,systemSettings:fe});case"surveyList":const $e=n.filter(Te=>Te.status===xn.SURVEY);return s.jsx(G5,{quotes:$e,clients:t,staff:o,navigateTo:ye});case"surveyEditor":{const Te=n.find(Fe=>Fe.id===O.quoteId),_e=Te?t.find(Fe=>Fe.id===Te.clientId):void 0;return!Te||!_e?s.jsx("div",{children:"Quote not found for survey."}):s.jsx(Y5,{quote:Te,client:_e,materials:P,staff:o,roles:u,onEditSurveyItem:(Fe,Ie)=>{const lt=Te.items.find(ee=>ee.id===Ie);lt&&ye({view:"surveyWindowBuilder",quoteId:Fe,itemToEdit:lt})},onCompleteSurvey:Fe=>{Le(Fe),ce(`Survey for ${Fe.quoteNumber} complete!`,"success")},onAssignSurveyor:(Fe,Ie)=>{const lt=n.find(ee=>ee.id===Fe);if(lt){const ee=`${fe.projectNumberPrefix}${fe.projectNextNumber}`;ne(Oe=>({...Oe,projectNextNumber:Oe.projectNextNumber+1})),Le({...lt,surveyorId:Ie,projectReference:ee})}},onBack:()=>ye({view:"surveyList"}),systemSettings:fe,onUpdateQuote:Le})}case"surveyWindowBuilder":{const Te=n.find(_e=>_e.id===O.quoteId);return Te?s.jsx(Jc,{mode:"quote",itemToEdit:O.itemToEdit,onSaveItem:_e=>{const Fe=Te.items.map(Ie=>Ie.id===_e.id?{..._e,surveyComplete:!0}:Ie);Le({...Te,items:Fe}),ye({view:"surveyEditor",quoteId:Te.id})},onCancel:()=>ye({view:"surveyEditor",quoteId:Te.id}),currency:fe.currency,materials:P,productRanges:I,isReadOnly:!1,quoteItems:Te.items,onNavigateItem:()=>{},addToast:ce}):s.jsx("div",{children:"Quote not found"})}case"surveyBooking":{const Te=n.find(Ie=>Ie.id===O.quoteId),_e=Te?t.find(Ie=>Ie.id===Te.clientId):void 0,Fe=Te?o.find(Ie=>Ie.id===Te.surveyorId):void 0;return!Te||!_e?s.jsx("div",{children:"Data not found for survey booking."}):s.jsx(I4,{quote:Te,client:_e,surveyor:Fe,appointments:J,systemSettings:fe,onBack:()=>ye({view:"surveyList"}),onOpenAppointmentModal:Ie=>W({isOpen:!0,appointment:Ie})})}case"calendar":return s.jsx(ev,{appointments:J,staff:o,clients:t,quotes:n,currentUser:D,onOpenAppointmentModal:(Te,_e)=>W({isOpen:!0,appointment:Te,prefilledClientId:_e}),navigateTo:ye,systemSettings:fe});case"production":return s.jsx(ov,{});case"installation":return s.jsx(sv,{});case"userSettings":return s.jsx(P4,{currentUser:D,allStaff:o,roles:u,onUpdateUser:Mt,setCurrentUser:H,theme:me,toggleTheme:se});case"leadEditor":{const Te=t.find(_e=>_e.id===O.clientId);return s.jsx(X5,{client:Te,staff:o,teams:m,appointments:J,onSaveClient:bt,onBack:()=>ye({view:"customers"}),quotes:n.filter(_e=>_e.clientId===O.clientId).sort((_e,Fe)=>new Date(Fe.date).getTime()-new Date(_e.date).getTime()),emailTemplates:he,currentUser:D,systemSettings:fe})}default:return s.jsx("div",{children:"Not found"})}},It=({icon:$e,label:Te,view:_e,module:Fe})=>{const Ie=O.view===_e.view;return fe.enabledModules.includes(Fe)?s.jsx("li",{children:s.jsxs("button",{onClick:()=>ye(_e),className:`flex flex-col items-center justify-center w-full p-2 rounded-lg transition-colors ${Ie?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx($e,{className:"w-6 h-6 mb-1"}),s.jsx("span",{className:"text-xs font-medium",children:Te})]})}):null};return s.jsxs("div",{className:`flex h-screen font-sans bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 ${me}`,children:[s.jsxs("aside",{className:"w-24 bg-gray-800 text-white flex flex-col items-center p-2 shadow-lg z-20",children:[s.jsx("nav",{className:"flex-grow w-full pt-4",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsx(It,{icon:E1,label:"Dashboard",view:{view:"dashboard"},module:"leads"}),s.jsx(It,{icon:sc,label:"Leads",view:{view:"customers"},module:"leads"}),s.jsx(It,{icon:C0,label:"Quotes",view:{view:"crm"},module:"sales"}),s.jsx(It,{icon:dd,label:"Surveys",view:{view:"surveyList"},module:"surveys"}),s.jsx(It,{icon:Lf,label:"Production",view:{view:"production"},module:"production"}),s.jsx(It,{icon:Pf,label:"Installs",view:{view:"installation"},module:"installation"}),s.jsx(It,{icon:wa,label:"Calendar",view:{view:"calendar"},module:"calendar"}),s.jsx(It,{icon:T0,label:"Reports",view:{view:"reports"},module:"reports"})]})}),s.jsxs("div",{className:"w-full space-y-2",children:[s.jsx(It,{icon:yd,label:"System",view:{view:"system"},module:"system"}),s.jsx(A4,{alerts:X,onNavigate:$e=>ye({view:"leadEditor",clientId:$e}),onMarkAsRead:$e=>{$($e==="all"?Te=>Te.map(_e=>({..._e,isRead:!0})):Te=>Te.map(_e=>_e.id===$e?{..._e,isRead:!0}:_e))}}),s.jsxs("button",{onClick:()=>ye({view:"userSettings"}),className:`flex flex-col items-center w-full p-2 rounded-lg transition-colors ${O.view==="userSettings"?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-200 text-blue-800 text-sm font-bold flex items-center justify-center mb-1",children:D.initials}),s.jsx("span",{className:"text-xs font-medium",children:"Me"})]})]})]}),s.jsx("main",{className:"flex-1 flex flex-col overflow-hidden",children:At()}),s.jsx(tv,{isOpen:xe.isOpen,onClose:()=>ie({isOpen:!1,isLoading:!1,error:null,data:null,clientId:null}),isLoading:xe.isLoading,error:xe.error,emailData:xe.data,onSend:qe}),s.jsx(nv,{isOpen:Y.isOpen,onClose:()=>ve({isOpen:!1,file:null}),file:Y.file}),s.jsx(rv,{isOpen:we.isOpen,onClose:()=>le({isOpen:!1,file:null,client:null}),fileToAssign:we.file,client:we.client,quotes:n,onAssign:($e,Te,_e)=>{const Fe=n.findIndex(pt=>pt.id===Te);if(Fe===-1)return;const lt=n[Fe].items.findIndex(pt=>pt.id===_e);if(lt===-1)return;const ee=[...n],Oe=[...ee[Fe].items],tt={...Oe[lt]};tt.photos=[...tt.photos||[],$e],Oe[lt]=tt,ee[Fe]={...ee[Fe],items:Oe},r(ee)}}),s.jsx(iv,{isOpen:M.isOpen,onClose:()=>W({isOpen:!1,appointment:null}),appointment:M.appointment,onSave:at,onDelete:nt,staff:o,clients:t,quotes:n,currentUser:D,prefilledClientId:M.prefilledClientId}),s.jsx(ba,{isOpen:Q.isOpen,onClose:()=>ue({isOpen:!1,appointment:null,client:null}),title:"Send Appointment Confirmation?",size:"md",children:s.jsxs("div",{children:[s.jsx("p",{children:"An email confirmation can be generated and sent for this appointment. Would you like to send it now?"}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx(wt,{variant:"secondary",onClick:()=>ue({isOpen:!1,appointment:null,client:null}),children:"Skip"}),s.jsx(wt,{onClick:He,children:"Generate & Send"})]})]})})]})}const Lg=document.getElementById("root");if(!Lg)throw new Error("Could not find root element to mount to");const j4=y1.createRoot(Lg);j4.render(s.jsx(M4,{}));export{nr as _,D4 as c,S0 as g};
